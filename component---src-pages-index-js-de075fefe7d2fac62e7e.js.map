{"version":3,"sources":["webpack:///./node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack:///./node_modules/core-js/modules/es7.object.entries.js","webpack:///./node_modules/core-js/modules/es6.number.is-finite.js","webpack:///./node_modules/probe.gl/dist/es5/env/index.js","webpack:///./node_modules/core-js/modules/es6.string.fixed.js","webpack:///./node_modules/probe.gl/dist/es5/env/is-electron.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/globals.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-browser.js","webpack:///./node_modules/react-map-gl/dist/esm/mapbox/mapbox.js","webpack:///./node_modules/core-js/modules/_typed-array.js","webpack:///./node_modules/core-js/modules/_typed-buffer.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/track-context-state.js","webpack:///./node_modules/core-js/modules/es6.math.fround.js","webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///./node_modules/core-js/modules/_to-index.js","webpack:///./node_modules/core-js/modules/_typed.js","webpack:///./node_modules/core-js/modules/es6.string.repeat.js","webpack:///./node_modules/core-js/modules/es6.typed.int16-array.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-context.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-electron.js","webpack:///./node_modules/core-js/modules/es6.reflect.construct.js","webpack:///./node_modules/probe.gl/dist/es5/env/get-browser.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/core-js/modules/es6.math.cosh.js","webpack:///./node_modules/core-js/modules/es6.typed.data-view.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-vertex-array-object.js","webpack:///./node_modules/probe.gl/dist/esm/env/globals.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/core-js/modules/_math-expm1.js","webpack:///./node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/core-js/modules/_string-html.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/get-parameter-polyfill.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-table.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/get.js","webpack:///./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/log.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/constants.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/memoize.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/assert.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/context/context.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/lib/stat.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/lib/stats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/init.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/webgl-checks.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/load-file.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer-formats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/format-utils.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/features/features.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/shader-attribute.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/data-column.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/gl-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/flatten.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/range.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/array-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute.js","webpack:///./node_modules/@deck.gl/core/dist/esm/debug/index.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/shader-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/buffer-transform.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-version.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/module-injectors.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/transform/transform.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/texture-transform.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/transform-shader-utils.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/filters/prop-types.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/resolve-modules.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/is-old-ie.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/webgl-info.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/assemble-shaders.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/uniforms.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/platform-defines.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-name.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/format-glsl-error.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-type-name.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/shader.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/program-configuration.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/program.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/array-utils-flat.js","webpack:///./node_modules/probe.gl/dist/esm/env/get-browser.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array-object.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/format-value.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-vertex-array.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-uniforms.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-program-configuration.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/model-utils.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/model.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/transform.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/gpu-interpolation-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/gpu-spring-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/props.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/count.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/shader.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/math-utils.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/assert.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-utils.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/viewport.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/fit-bounds.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-viewport.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/fly-to-viewport.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncIterator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/component-state.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/component.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer-state.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.browser.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-error-message.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/validate-loader-version.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/constants.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/merge-options.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/string-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/array-buffer-iterator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AwaitValue.js","webpack:///./node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AsyncGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/blob-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/stream-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/make-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/javascript-utils/memory-copy-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/async-iteration.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/check-errors.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-loader-context.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/worker-utils/get-worker-url.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-utils/get-transfer-list.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-thread.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-pool.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-farm.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/javascript-utils/binary-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/parse-with-worker.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer-vertex.glsl.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/scatterplot-layer/scatterplot-layer-fragment.glsl.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js","webpack:///./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/index.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/view-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/positions.js","webpack:///./node_modules/@deck.gl/core/dist/esm/views/view.js","webpack:///./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/controller.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js","webpack:///./node_modules/@deck.gl/core/dist/esm/views/map-view.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/effect.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/effect-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/draw-layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/picking/pick-info.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck-picker.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/tooltip.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/json-loader.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/init.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/query.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/request-animation-frame.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/hammer-overrides.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/hammer.browser.js","webpack:///./node_modules/mjolnir.js/dist/esm/constants.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/wheel-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/move-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/key-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/contextmenu-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/event-utils.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/event-registrar.js","webpack:///./node_modules/mjolnir.js/dist/esm/event-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck.js","webpack:///./node_modules/@deck.gl/react/dist/esm/utils/inherits-from.js","webpack:///./node_modules/@deck.gl/react/dist/esm/utils/extract-jsx-layers.js","webpack:///./node_modules/@deck.gl/react/dist/esm/utils/evaluate-children.js","webpack:///./node_modules/@deck.gl/react/dist/esm/utils/position-children-under-views.js","webpack:///./node_modules/@deck.gl/react/dist/esm/utils/extract-styles.js","webpack:///./node_modules/@deck.gl/react/dist/esm/deckgl.js","webpack:///./node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/style-utils.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/math-utils.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/assert.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/transition/transition-interpolator.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/transition/transition-utils.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/transition/viewport-fly-to-interpolator.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/transition/linear-interpolator.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/map-state.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/map-constraints.js","webpack:///./node_modules/react-map-gl/dist/esm/components/map-context.js","webpack:///./node_modules/react-map-gl/dist/esm/components/static-map.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/transition-manager.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/map-controller.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/debounce.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/deprecate-warn.js","webpack:///./node_modules/react-map-gl/dist/esm/components/interactive-map.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/deep-equal.js","webpack:///./node_modules/react-map-gl/dist/esm/components/source.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/react-map-gl/dist/esm/components/layer.js","webpack:///./node_modules/react-map-gl/dist/esm/components/base-control.js","webpack:///./node_modules/react-map-gl/dist/esm/components/draggable-control.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/crisp-pixel.js","webpack:///./node_modules/react-map-gl/dist/esm/components/marker.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/dynamic-position.js","webpack:///./node_modules/react-map-gl/dist/esm/components/popup.js","webpack:///./node_modules/react-map-gl/dist/esm/components/fullscreen-control.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/geolocate-utils.js","webpack:///./node_modules/react-map-gl/dist/esm/components/geolocate-control.js","webpack:///./node_modules/react-map-gl/dist/esm/components/navigation-control.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/version.js","webpack:///./node_modules/react-map-gl/dist/esm/components/scale-control.js","webpack:///./node_modules/react-map-gl/dist/esm/overlays/canvas-overlay.js","webpack:///./node_modules/react-map-gl/dist/esm/overlays/html-overlay.js","webpack:///./node_modules/react-map-gl/dist/esm/overlays/svg-overlay.js","webpack:///./node_modules/react-map-gl/dist/esm/utils/set-rtl-text-plugin.js","webpack:///./src/components/Mapbox.js","webpack:///./src/pages/index.js","webpack:///./node_modules/core-js/modules/es6.array.reduce-right.js","webpack:///./node_modules/core-js/modules/es6.typed.float64-array.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/core-js/modules/es6.object.is-sealed.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/globals.js","webpack:///./node_modules/@math.gl/core/dist/esm/index.js","webpack:///./node_modules/core-js/modules/es6.object.define-properties.js","webpack:///./node_modules/core-js/modules/es6.typed.float32-array.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/core-js/modules/es6.string.sub.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/common.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/core-js/modules/es6.typed.uint8-clamped-array.js","webpack:///./node_modules/core-js/modules/es6.math.sinh.js","webpack:///./node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/probe.gl/dist/esm/utils/globals.js","webpack:///./node_modules/probe.gl/dist/esm/utils/local-storage.js","webpack:///./node_modules/probe.gl/dist/esm/utils/formatters.js","webpack:///./node_modules/probe.gl/dist/esm/utils/color.js","webpack:///./node_modules/probe.gl/dist/esm/utils/autobind.js","webpack:///./node_modules/probe.gl/dist/esm/utils/assert.js","webpack:///./node_modules/probe.gl/dist/esm/utils/hi-res-timestamp.js","webpack:///./node_modules/probe.gl/dist/esm/lib/log.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack:///./node_modules/core-js/modules/es6.array.copy-within.js","webpack:///./node_modules/core-js/modules/es6.number.is-integer.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/utils.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/device-pixels.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/webgl-checks.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/index.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/unified-parameter-api.js","webpack:///./node_modules/core-js/modules/es6.string.anchor.js","webpack:///./node_modules/core-js/modules/es6.math.trunc.js","webpack:///./node_modules/probe.gl/dist/es5/env/globals.js","webpack:///./node_modules/react-virtualized-auto-sizer/dist/index.esm.js","webpack:///./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///./node_modules/core-js/modules/_math-fround.js","webpack:///./node_modules/core-js/modules/_string-repeat.js","webpack:///./node_modules/core-js/modules/es6.array.last-index-of.js","webpack:///./node_modules/core-js/modules/_own-keys.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/core-js/modules/es6.object.prevent-extensions.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/core-js/modules/_is-integer.js","webpack:///./node_modules/core-js/modules/es6.typed.uint32-array.js","webpack:///./node_modules/core-js/modules/es6.math.log2.js","webpack:///./node_modules/core-js/modules/es6.typed.uint16-array.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/webgl-parameter-tables.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/core-js/modules/es6.typed.int8-array.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:///./node_modules/core-js/modules/es6.typed.int32-array.js","webpack:///./node_modules/probe.gl/dist/es5/env/is-browser.js","webpack:///./node_modules/core-js/modules/_array-copy-within.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/core-js/modules/es6.math.tanh.js","webpack:///./node_modules/core-js/modules/es6.math.hypot.js","webpack:///./node_modules/probe.gl/env.js","webpack:///./node_modules/hammerjs/hammer.js","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/core-js/modules/es6.object.seal.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/vector3.js"],"names":["validateVector","v","length","i","Number","isFinite","checkNumber","value","Error","concat","checkVector","callerName","arguments","undefined","debug","map","deprecated","method","version","console","warn","$export","$entries","S","entries","it","_isFinite","_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","enumerable","get","_globals","self","window","global","document","process","_isBrowser","isBrowserMainThread","_getBrowser","isMobile","_isElectron","createHTML","this","mockUserAgent","_typeof2","type","versions","Boolean","electron","realUserAgent","navigator","userAgent","indexOf","_classCallCheck","instance","Constructor","TypeError","_typeof","_getRequireWildcardCache","WeakMap","cache","module","obj","__esModule","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","window_","document_","Class","_cache","Map","fn","Function","toString","Wrapper","construct","getPrototypeOf","constructor","create","writable","configurable","setPrototypeOf","_Array","MathArray","apply","copy","arrayOrObject","Array","isArray","fromObject","array","offset","ELEMENTS","check","toArray","toObject","target","to","Float32Array","formatString","opts","string","printTypes","name","a","b","t","ai","vector","Math","min","max","minVector","maxVector","_len","vectors","_key","_i","_vectors","_len2","_key2","_i2","_vectors2","_scale","multiply","subtract","addScalar","scalar","scale","validate","valid","assert","isBrowser","String","browser","propTypes","container","object","gl","mapboxApiAccessToken","mapboxApiUrl","attributionControl","bool","preserveDrawingBuffer","reuseMaps","transformRequest","func","mapOptions","mapStyle","oneOfType","visible","asyncRender","onLoad","onError","width","number","height","viewState","longitude","latitude","zoom","bearing","pitch","altitude","defaultProps","body","accessToken","location","match","search","MapboxAccessToken","REACT_APP_MAPBOX_ACCESS_TOKEN","getAccessToken","event","error","checkPropTypes","props","component","Mapbox","_this","_map","mapboxgl","initialized","_checkStyleSheet","_initialize","_destroy","_update","resize","style","_frame","cancel","_render","savedMap","oldContainer","getContainer","newContainer","classList","add","childNodes","appendChild","_container","setStyle","diff","isStyleLoaded","_fireLoadEvent","once","_reuse","getContext","HTMLCanvasElement","center","maxZoom","interactive","trackResize","assign","on","remove","off","_this2","baseApiUrl","_create","canvas","getCanvas","outline","_updateMapViewport","_updateMapSize","oldProps","newProps","viewportChanged","sizeChanged","redraw","oldViewState","_getViewState","newViewState","jumpTo","_viewStateToMapboxProps","transform","_ref","_ref$pitch","_ref$bearing","_ref$altitude","mapboxVersion","testElement","createElement","className","display","append","isCssLoaded","getComputedStyle","position","link","setAttribute","head","LIBRARY","fails","$typed","$buffer","ctx","anInstance","propertyDesc","hide","redefineAll","toInteger","toLength","toIndex","toAbsoluteIndex","toPrimitive","classof","isObject","isArrayIter","gOPN","f","getIterFn","uid","wks","createArrayMethod","createArrayIncludes","speciesConstructor","ArrayIterators","Iterators","$iterDetect","setSpecies","arrayFill","arrayCopyWithin","$DP","$GOPD","dP","gOPD","RangeError","Uint8Array","ArrayProto","$ArrayBuffer","ArrayBuffer","$DataView","DataView","arrayForEach","arrayFilter","arraySome","arrayEvery","arrayFind","arrayFindIndex","arrayIncludes","arrayIndexOf","arrayValues","values","arrayKeys","keys","arrayEntries","arrayLastIndexOf","lastIndexOf","arrayReduce","reduce","arrayReduceRight","reduceRight","arrayJoin","join","arraySort","sort","arraySlice","slice","arrayToString","arrayToLocaleString","toLocaleString","ITERATOR","TAG","TYPED_CONSTRUCTOR","DEF_CONSTRUCTOR","ALL_CONSTRUCTORS","CONSTR","TYPED_ARRAY","TYPED","VIEW","$map","O","allocate","LITTLE_ENDIAN","Uint16Array","buffer","FORCED_SET","toOffset","BYTES","C","speciesFromList","list","fromList","index","result","addGetter","internal","_d","$from","source","step","iterator","aLen","mapfn","mapping","iterFn","next","done","push","$of","TO_LOCALE_BUG","$toLocaleString","proto","copyWithin","start","every","callbackfn","fill","filter","find","predicate","findIndex","forEach","searchElement","includes","separator","reverse","middle","floor","some","comparefn","subarray","begin","end","$begin","byteOffset","BYTES_PER_ELEMENT","$slice","$set","arrayLike","src","len","$iterators","isTAIndex","$getDesc","$setDesc","F","$TypedArrayPrototype$","KEY","wrapper","CLAMPED","NAME","GETTER","SETTER","TypedArray","Base","TAC","FORCED","ABV","TypedArrayPrototype","addElement","that","data","o","getter","round","setter","$offset","$length","byteLength","klass","$len","l","e","iter","$nativeIterator","CORRECT_ITER_NAME","$iterator","G","W","of","from","P","DESCRIPTORS","setToStringTag","Infinity","BaseBuffer","abs","pow","log","LN2","$BUFFER","$LENGTH","$OFFSET","packIEEE754","mLen","nBytes","m","c","eLen","eMax","eBias","rt","s","unpackIEEE754","nBits","NaN","unpackI32","bytes","packI8","packI16","packI32","packF64","packF32","view","isLittleEndian","intIndex","store","_b","pack","conversion","ArrayBufferProto","j","$setInt8","setInt8","getInt8","setUint8","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","installGetterOverride","functionName","originalGetterFunc","bind","pname","state","enable","installSetterSpy","originalSetterFunc","params","_setter","_updateCache","valueChanged","oldValue","installProgramSpy","originalUseProgram","useProgram","handle","program","GLState","_ref$copyState","copyState","_ref$log","stateStack","seal","oldValues","pop","cached","trackContextState","_ref2","_ref2$enable","global_","polyfillContext","pushContextState","popContextState","fround","_unsupportedIterableToArray","minLen","n","test","Typed","TypedArrayConstructors","split","repeat","init","getHiResTimestamp","timestamp","performance","now","hrtime","timeParts","Date","polyfillExtension","extension","target2","defaults","_defaults$meta","meta","_meta$suffix","suffix","ext","getExtension","_loop","_Object$keys","extKey","polyfill","luma","polyfilled","extensions","EXTENSIONS","getSupportedExtensions","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","err","initializeExtensions","polyfills","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","getOwnPropertyNames","installPolyfills","originalFunc","installOverrides","isElectron","aFunction","anObject","rConstruct","Reflect","NEW_TARGET_BUG","ARGS_BUG","Target","args","newTarget","$args","orientation","navigator_","isMSIE","isTrident","chrome","safari","mozInnerScreenX","matches","nodeVersion","parseFloat","_assertThisInitialized","ReferenceError","exp","cosh","x","_inherits","subClass","superClass","glErrorShadow","synthesizeGLError","opt_msg","msg","WebGLVertexArrayObjectOES","isAlive","hasBeenBound","elementArrayBuffer","attribs","maxVertexAttribs","attrib","VertexAttrib","maxAttrib","enabled","size","normalized","stride","recache","OESVertexArrayObject","getError","parseInt","wrapGLError","original","getParameter","enableVertexAttribArray","disableVertexAttribArray","bindBuffer","getVertexAttrib","vertexAttribPointer","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","vao","currentArrayBuffer","indx","instrumentExtension","addEventListener","reset_","polyfillVertexArrayObject","createVertexArray","original_getSupportedExtensions","original_getExtension","__OESVertexArrayObject","vertexArrayObjects","ii","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","splice","isVertexArrayOES","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","globals","process_","_toConsumableArray","arr","arrayLikeToArray","unsupportedIterableToArray","$expm1","expm1","_MathArray","Matrix","printRowMajor","row","RANK","col","columnIndex","firstIndex","columnVector","IDENTITY","freeze","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","_Matrix","Matrix4","identity","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","q","mat4","left","right","bottom","top","near","far","_computeInfinitePerspectiveOffCenter","eye","up","_eye","_ref2$near","_ref2$far","_ref3","_ref3$fovy","fovy","PI","_ref3$aspect","aspect","_ref3$focalDistance","focalDistance","_ref3$near","_ref3$far","halfY","tan","ortho","_ref4","_ref4$fovy","_ref4$fov","fov","_ref4$aspect","_ref4$near","_ref4$far","sqrt","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","radians","_ref5","_ref6","rx","ry","rz","rotateX","rotateY","rotateZ","axis","factor","vec","vec4","transformAsPoint","vec2","vec3","y","z","translate","transformAsVector","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","_slicedToArray","_arr","_n","_e","_s","defined","quot","tag","attribute","p1","replace","exec","toLowerCase","_WEBGL_PARAMETERS","_WEBGL2_CONTEXT_POLYF","WEBGL_PARAMETERS","GPU_DISJOINT_EXT","UNMASKED_VENDOR_WEBGL","UNMASKED_RENDERER_WEBGL","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","WEBGL2_CONTEXT_POLYFILLS","deleteVertexArray","bindVertexArray","isVertexArray","vertexAttribDivisor","divisor","drawElementsInstanced","drawArraysInstanced","drawBuffers","createQuery","deleteQuery","beginQuery","endQuery","getQuery","getQueryObject","getQueryParameter","WEBGL2_CONTEXT_OVERRIDES","readBuffer","attachment","_getExtensionData","webgl2","getExtensionData","getProgramParameter","getInternalformatParameter","format","Int32Array","getTexParameter","TEXTURE_MAX_ANISOTROPY_EXT","originalGetParameter","limit","hint","_isNativeReflectConstruct","sham","Proxy","Parent","property","receiver","base","vs","fs","id","COORDINATE_SYSTEM","DEFAULT","LNGLAT","METER_OFFSETS","LNGLAT_OFFSETS","CARTESIAN","PROJECTION_MODE","WEB_MERCATOR","WEB_MERCATOR_AUTO_OFFSET","EVENTS","click","handler","panstart","panmove","panend","COORDINATE_SYSTEM_GLSL_CONSTANTS","PROJECTION_MODE_GLSL_CONSTANTS","isEqual","memoize","compute","cachedResult","cachedArgs","condition","message","ZERO_VECTOR","VECTOR_TO_POINT_MATRIX","IDENTITY_MATRIX","DEFAULT_PIXELS_PER_UNIT2","DEFAULT_COORDINATE_ORIGIN","getMemoizedViewportUniforms","viewport","devicePixelRatio","coordinateSystem","coordinateOrigin","_calculateMatrixAndOf","viewMatrixUncentered","projectionMatrix","viewMatrix","viewProjectionMatrix","projectionCenter","cameraPosCommon","cameraPosition","_getOffsetOrigin","getOffsetOrigin","geospatialOrigin","shaderCoordinateOrigin","offsetMode","positionCommonSpace","projectPosition","calculateMatrixAndOffset","distanceScales","getDistanceScales","viewportSize","uniforms","project_uCoordinateSystem","project_uProjectionMode","projectionMode","project_uCoordinateOrigin","project_uCenter","project_uAntimeridian","project_uViewportSize","project_uDevicePixelRatio","project_uFocalDistance","project_uCommonUnitsPerMeter","unitsPerMeter","project_uCommonUnitsPerWorldUnit","project_uCommonUnitsPerWorldUnit2","project_uScale","project_uViewProjectionMatrix","project_uCameraPosition","distanceScalesAtOrigin","unitsPerMeter2","unitsPerDegree","unitsPerDegree2","isGeospatial","unprojectPosition","getUniformsFromViewport","_ref$devicePixelRatio","_ref$modelMatrix","modelMatrix","_ref$coordinateSystem","_ref$wrapLongitude","wrapLongitude","positionOrigin","project_uWrapLongitude","project_uModelMatrix","INITIAL_MODULE_OPTIONS","dependencies","fp32","getUniforms","DEFAULT_MODULE_OPTIONS","pickingSelectedColor","pickingHighlightColor","pickingActive","pickingAttribute","selectedColor","picking_uSelectedColorValid","picking_uSelectedColor","color","picking_uHighlightColor","picking_uActive","picking_uAttribute","inject","order","injection","picking","isPage","CONTEXT_DEFAULTS","webgl1","throwOnError","manageState","createGLContext","options","_options","_options2","targetCanvas","createBrowserContext","logInfo","instrumentGLContext","_instrumented","_version","getVersion","canvasSizeInfo","_options3","makeDebugContext","level","onCreateError","statusMessage","_options$webgl","_options$webgl2","removeEventListener","_ref$width","_ref$height","readyState","getElementById","insertBefore","firstChild","webGL","info","vendorMasked","rendererMasked","vendor","renderer","shadingLanguageVersion","getContextDebugInfo","driver","WebGL2RenderingContext","setDevicePixelRatio","clientWidth","clientHeight","cachedSize","clampedPixelRatio","canvasWidth","canvasHeight","drawingBufferWidth","drawingBufferHeight","Stat","sampleSize","reset","samples","addCount","subtractCount","_count","_samples","_checkSampling","time","_time","lastTiming","_startTime","_timerPending","addTime","lastSampleCount","lastSampleTime","count","Stats","stats","_initializeStats","_getOrCreate","table","stat","average","getAverageTime","hz","getHz","lumaStats","StatsManager","VERSION","modules","nodeIO","assertWebGLContext","assertWebGL2Context","getKeyValue","isNaN","getKey","uidCounters","isPowerOfTwo","isObjectEmpty","isEmpty","methodNames","upgradeMessage","methodName","removed","ERR_RESOURCE_METHOD_UNDEFINED","Resource","_opts$userData","userData","_bound","_handle","_createHandle","_addStats","_ref$deleteChildren","deleteChildren","children","_deleteHandle","_removeStats","child","funcOrHandle","_bindHandle","parameters","PARAMETERS","parameter","isWebgl2","parameterAvailable","webgl1Default","webgl2Default","defaultValue","_getParameter","parameterKeys","_setParameter","setParameter","incrementCount","decrementCount","getGLTypeFromTypedArray","arrayOrType","isView","Uint32Array","Uint8ClampedArray","Int8Array","Int16Array","getTypedArrayFromGLType","glType","_ref$clamped","clamped","flipRows","_ref2$bytesPerPixel","bytesPerPixel","temp","bytesPerRow","topOffset","bottomOffset","scalePixels","newWidth","newHeight","newData","checkProps","propChecks","_propChecks$removedPr","removedProps","_propChecks$deprecate","deprecatedProps","_propChecks$replacedP","replacedProps","propName","replacement","_propName","_replacementProp","_propName2","_replacementProp2","_TEXTURE_FORMATS","_DATA_FORMAT_CHANNELS","_TYPE_SIZES","DEFAULT_ACCESSOR_VALUES","integer","PROP_CHECKS","instanced","isInstanced","Accessor","accessors","accessor","_assign","JSON","stringify","getBytesPerElement","getBytesPerVertex","DEPRECATED_PROPS","PROP_CHECKS_INITIALIZE","PROP_CHECKS_SET_PROPS","_Resource","Buffer","stubRemovedMethods","initialize","usage","debugData","setAccessor","_setData","_setByteLength","bytesUsed","_props","_props$offset","_props$srcOffset","srcOffset","bufferSubData","_inferType","sourceBuffer","_ref$readOffset","readOffset","_ref$writeOffset","writeOffset","copyBufferSubData","_ref2$dstData","dstData","_ref2$srcByteOffset","srcByteOffset","_ref2$dstOffset","dstOffset","_ref2$length","dstAvailableElementCount","dstElementCount","ArrayType","sourceAvailableElementCount","_getAvailableElementCount","dstElementOffset","copyElementCount","getBufferSubData","_ref3$target","_ref3$index","_ref3$offset","bindBufferRange","bindBufferBase","_ref4$target","_ref4$index","isIndexedBuffer","changed","getData","_trackDeallocatedMemory","_getTarget","bufferData","_trackAllocatedMemory","sourceElementOffset","getElementCount","createBuffer","deleteBuffer","getBufferParameter","reallocate","TEXTURE_FORMATS","dataFormat","types","gl2","DATA_FORMAT_CHANNELS","TYPE_SIZES","isFormatSupported","gl1","isLinearFilteringSupported","NPOT_MIN_FILTERS","WebGLBuffer","Texture","_props$id","textureUnit","loaded","depth","border","mipmaps","linearFiltering","supported","Promise","then","resolvedImageData","pixels","_props$pixels","_props$format","_props$border","_props$recreate","recreate","_props$parameters","_props$pixelStore","pixelStore","_props$textureUnit","_props$mipmaps","_props$depth","_this$_deduceParamete","_deduceParameters","compressed","activeTexture","bindTexture","_isNPOT","_updateForNPOT","setImageData","generateMipmap","setParameters","_ref2$mipmaps","_this3","_options$target","_options$pixels","_options$level","_options$format","_options$border","_options$offset","_options$parameters","_options$data","_options$type","_options$width","_options$height","_options$dataFormat","_options$compressed","_this$_deduceParamete2","dataType","_this$_getDataType","_getDataType","texImage2D","compressedTexImage2D","channels","channelSize","_this4","_ref3$pixels","_ref3$data","_ref3$x","_ref3$y","_ref3$width","_ref3$height","_ref3$level","_ref3$format","_ref3$type","_ref3$dataFormat","_ref3$compressed","_ref3$border","_ref3$parameters","_this$_deduceParamete3","ndarray","shape","compressedTexSubImage2D","texSubImage2D","_ref4$compressed","textureFormat","_this$_deduceImageSiz","_deduceImageSize","ImageData","HTMLImageElement","naturalWidth","naturalHeight","ImageBitmap","HTMLVideoElement","videoWidth","videoHeight","createTexture","deleteTexture","param","_getNPOTParam","texParameterf","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","pathPrefix","loadImage","url","resolve","reject","image","Image","onload","onerror","crossOrigin","_$33190$36012$","_Texture","Texture2D","isSupported","EXT_FLOAT_WEBGL2","bpp","formats","Renderbuffer","_ref3$samples","bindRenderbuffer","renderbufferStorageMultisample","renderbufferStorage","createRenderbuffer","deleteRenderbuffer","getRenderbufferParameter","_ref$framebuffer","framebuffer","_ref$color","_ref$depth","_ref$stencil","stencil","clearFlags","clearColor","clearDepth","clearStencil","clear","clearBuffer","_ref2$framebuffer","_ref2$buffer","_ref2$drawBuffer","drawBuffer","_ref2$value","clearBufferiv","clearBufferuiv","clearBufferfv","_value","clearBufferfi","glFormatToComponents","asyncGeneratorStep","gen","_next","_throw","arg","_asyncToGenerator","FACES","TextureCube","_setCubeMapImageData","setCubeMapImageData","face","_ref$x","_ref$y","_ref$mipmapLevel","mipmapLevel","_subImage","mark","_callee","_ref2$border","_ref2$format","_ref2$type","imageDataMap","resolvedFaces","wrap","_context","prev","all","facePixels","sent","lodLevel","unbind","stop","_x","imageData","setImageDataForFace","Texture3D","unpackFlipY","_ref$level","_ref$dataFormat","_ref$border","_ref$type","_ref$offset","_ref$parameters","texImage3D","readPixelsToArray","_ref$sourceX","sourceX","_ref$sourceY","sourceY","_ref$sourceFormat","sourceFormat","_ref$sourceAttachment","sourceAttachment","_ref$target","sourceWidth","sourceHeight","sourceType","_getFramebuffer","getFramebuffer","deleteFramebuffer","attachments","getPixelArray","prevHandle","bindFramebuffer","readPixels","_ref3$sourceAttachmen","_ref3$targetMaxHeight","targetMaxHeight","MAX_SAFE_INTEGER","_scalePixels","context","createImageData","putImageData","toDataURL","texture","pixelArray","Framebuffer","ownResources","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","colorBufferFloat","colorBufferHalfFloat","defaultFramebuffer","_ref2$width","_ref2$height","_ref2$attachments","_ref2$color","_ref2$depth","_ref2$stencil","_ref2$check","_createDefaultAttachments","update","clearAttachments","checkStatus","_ref3$attachments","_ref3$clearAttachment","_ref3$resizeAttachmen","resizeAttachments","attach","_setReadBuffer","_setDrawBuffers","attachmentPoint","_ref5$clearAttachment","_ref5$resizeAttachmen","newAttachments","descriptor","_attachRenderbuffer","renderbuffer","_descriptor","_descriptor$","layer","_descriptor$2","_attachTexture","_unattach","status","getStatus","STATUS","_getFrameBufferStatus","checkFramebufferStatus","_ref6$drawBuffers","_ref7","_ref7$attachments","_ref7$x","_ref7$y","invalidateFramebuffer","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","ATTACHMENT_PARAMETERS","getAttachmentParameter","_attachments","attachmentName","getAttachmentParameters","open","logLevel","maxHeight","_ref8","_ref8$target","_ref9","_ref9$target","_parameters","defaultAttachments","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","_ref10","_ref10$attachment","_ref11","_ref11$attachment","framebufferTextureLayer","mapIndexToCubeMapFace","drawBuffersWEBGL","caps","cap","isFeatureSupported","getFeatures","WEBGL2","EXT_sRGB","createFramebuffer","_FEATURES$WEBGL2$FEAT","FEATURES","testTexture","testFb","hasFeatures","features","feature","featureDefinition","queryFeature","enumerableOnly","getOwnPropertySymbols","symbols","sym","ShaderAttribute","dataColumn","getBuffer","getAccessor","constantValue","elementOffset","getOwnPropertyDescriptors","defineProperties","_objectSpread","TypedArrayManager","_ref$overAlloc","overAlloc","_ref$poolSize","poolSize","_pool","typedArray","_ref2$size","_ref2$padding","padding","_ref2$copy","_ref2$initialize","Type","newSize","newArray","_allocate","_release","ceil","pool","shift","scratchArray","cameraDirection","cameraUp","cameraRight","nearCenter","farCenter","toDoublePrecisionArray","_ref3$size","_ref3$startIndex","startIndex","endIndex","sourceIndex","targetIndex","getStride","bytesPerElement","resolveShaderAttribute","baseAccessor","shaderAttributeOptions","vertexOffset","DataColumn","logicalType","doublePrecision","bufferType","isIndexed","hasFeature","defaultType","Float64Array","glArrayFromType","shaderAttributes","fp64","settings","externalBuffer","bufferAccessor","allocatedValue","constant","_buffer","setData","release","isBuffer64Bit","doubleShaderAttributeDefs","high","resolvedOptions","low","shaderAttributeDef","_normalizeValue","_normalizeConstant","_areValuesEqual","_checkExternalBuffer","subData","_opts$startOffset","startOffset","endOffset","numInstances","_ref3$copy","illegalArrayType","out","_this$settings","value1","value2","_this$settings2","EMPTY_ARRAY","placeholderArray","isAsyncIterable","asyncIterator","getAccessorFromBuffer","startIndices","nested","elementStride","vertexCount","_","_sourceIndex","_j","_sourceIndex2","_j2","flatten","flattenArray","fillArray","_ref$start","_ref$count","total","copied","EMPTY","FULL","rangeList","range","newRangeList","insertPosition","range0","padArrayChunk","sourceLength","targetLength","datum","DEFAULT_TRANSITION_SETTINGS","interpolation","duration","easing","spring","stiffness","damping","normalizeTransitionSettings","userSettings","layerSettings","getSourceBufferAttribute","getAttributeTypeFromSize","cycleBuffers","buffers","getAttributeBufferLength","multiplier","noAlloc","padBuffer","fromLength","fromStartIndices","_ref$getData","precisionMultiplier","toStartIndices","hasStartIndices","isConstant","toData","chunk","getMissingData","sourceStartIndices","targetStartIndices","getChunkData","nextSourceIndex","nextTargetIndex","padArray","_DataColumn","Attribute","_opts$transition","transition","_opts$noAlloc","_opts$update","_opts$accessor","_opts$transform","_opts$startIndices","_autoUpdater","lastExternalBuffer","binaryValue","binaryAccessor","needsUpdate","needsRedraw","updateRanges","_validateAttributeUpdaters","_ref$clearChangedFlag","clearChangedFlags","supportsTransition","reason","dataRange","setNeedsRedraw","_dataRange$startRow","startRow","_dataRange$endRow","endRow","updated","_step$value","_startRow","_endRow","_step2$value","getVertexOffset","_checkAttributeArray","clearNeedsUpdate","needsNormalize","shaderAttributeDefs","shaderAttributeName","accessorFunc","_createIterable","iterable","objectInfo","createIterable","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","objectValue","numVertices","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","item","layout","loggers","eventType","_loggers$eventType","FS100","FS_GLES","FS300","getQualifierDetails","line","qualifiers","words","_words","qualifier","definition","getPassthroughFS","_ref$version","input","inputType","output","outputValue","convertToVec4","typeToChannelCount","variable","TransformFeedback","unused","configuration","bindOnUse","_unbindBuffers","setProps","setBuffers","bufferName","setBuffer","locationOrName","bufferOrParams","_getVaryingIndex","_this$_getBufferParam","_getBufferParams","byteSize","_bindBuffer","primitiveMode","bindTransformFeedback","_bindBuffers","beginTransformFeedback","endTransformFeedback","getVaryingInfo","bufferIndex","_this$_getBufferParam2","createTransformFeedback","deleteTransformFeedback","BufferTransform","currentIndex","feedbackMap","varyings","bindings","resources","binding","_setupTransformFeedback","sourceBuffers","transformFeedback","attributes","_getNextIndex","_setupBuffers","varyingName","feedbackBuffers","_props$sourceBuffers","sourceName","feedbackName","bufferOrRef","_createNewBuffer","_props$sourceBuffers2","_getFeedbackBuffers","_updateBindings","model","_updateBinding","_this$_swapBuffers","_swapBuffers","nextIndex","srcName","dstName","getShaderVersion","_MODULE_INJECTORS","MODULE_INJECTORS","REGEX_START_OF_MAIN","REGEX_END_OF_MAIN","fragments","injectShader","injectStandardStubs","isVertex","fragmentData","fragmentString","combineInjects","injects","_SRC_TEX_PARAMETER_OV","updateForTextures","sourceTextureMap","targetTextureVarying","targetTexture","sourceCount","targetTextureType","samplerTextureMap","updatedVs","finalInject","vsLines","updateVsLines","lines","textureMap","attributeData","getAttributeDefinition","updatedLine","_getSamplerDecleratio","textureName","samplerName","sizeName","uniformDeclerations","getSamplerDeclerations","typeToChannelSuffix","sampleInstruction","processAttributeDefinition","varying","qualaiferDetails","getVaryingType","uniformDeclaration","posInstructions","getSizeUniforms","_sourceTextureMap$tex","SRC_TEX_PARAMETER_OVERRIDES","TextureTransform","_swapTexture","updatedModelProps","_processVertexShader","_this$bindings$this$c","sourceTextures","discard","hasSourceTextures","hasTargetTexture","sampler","transform_elementID","elementIDBuffer","_setSourceTextureParameters","sizeUniforms","_setupTextures","_ref$packed","packed","channelCount","packedPixels","packCount","ownTexture","_targetTextureVarying","textureOrReference","refTexture","_targetRefTexName","_createNewTexture","_props$_sourceTexture","_sourceTextures","_targetTexture","_createTargetTexture","_updateElementIDBuffer","elementCount","elementIds","_this$_swapTextures","_swapTextures","overrides","TextureType","cloneTextureFrom","_this$bindings$this$c2","_updateForTextures","combinedInject","_fs","TYPE_DEFINITIONS","propType","parsePropType","propDef","getTypeOf","ShaderModule","_ref$dependencies","_ref$deprecations","deprecations","_ref$defines","defines","_ref$inject","vertexShader","fragmentShader","getModuleUniforms","_parseDeprecationDefinitions","injections","hook","stage","normalizeInjections","propDefs","parsePropTypes","moduleSource","toUpperCase","_defaultGetUniforms","shaderSource","def","regex","old","RegExp","resolveModules","getShaderDependencies","instantiateModules","seen","moduleMap","moduleDepth","getDependencyGraph","_module","isOldIE","WEBGL_FEATURES","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","compiledGlslExtensions","canCompileGLGSExtension","extensionName","behavior","shader","createShader","compileShader","canCompile","getShaderParameter","deleteShader","getFeature","isWebGL2","transpileShader","targetGLSLVersion","convertVertexShaderTo300","convertFragmentShaderTo300","convertVertexShaderTo100","outputMatch","FS_OUTPUT_REGEX","outputName","convertFragmentShaderTo100","_SHADER_TYPE","_UNIFORM_SETTERS","INJECT_SHADER_DECLARATIONS","SHADER_TYPE","assembleShaders","assembleShader","assembleGetUniforms","_ref$hookFunctions","hookFunctions","_ref$transpileToGLSL","transpileToGLSL100","_ref$prologue","prologue","sourceLines","glslVersion","versionLine","coreSource","allDefines","getDefines","assembledSource","getShaderName","getShaderType","gpuVendor","identifyGPUVendor","getContextInfo","getPlatformShaderDefines","isFragment","versionDefines","getVersionDefines","sourceText","define","getApplicationDefines","_hook$split","trim","_hook$split2","signature","normalizeHookFunctions","hookInjections","declInjections","mainInjections","hash","checkDeprecations","getModuleSource","_match","injectionType","hookName","hookFunction","header","footer","getHookFunctions","moduleUniforms","UNIFORM_SETTERS","getArraySetter","toFloatArray","setVectorUniform","toIntArray","setMatrixUniform","getSamplerSetter","toUIntArray","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","array1","toTypedArray","uniformLength","parseUniformName","getUniformSetter","checkUniformValues","uniformMap","uniformName","checkUniformValue","checkLength","checkUniformArray","copyUniform","dest","uniform1i","uniformSetter","cacheLength","arrayValue","defaultName","SHADER_NAME_REGEXP","parseGLSLCompilerError","errLog","shaderType","shaderName","errorStrings","errors","warnings","shaderDescription","getShaderTypeName","errorString","segments","delim","maxDigits","lineNumber","digits","padLeft","addLineNumbers","formatErrors","column","substring","_COMPOSITE_GL_TYPES","Shader","getTypeName","_compile","getShaderSource","getTranslatedShaderSource","startsWith","compileStatus","infoLog","getShaderInfoLog","_parseGLSLCompilerErr","getSource","_Shader","VertexShader","_Shader2","FragmentShader","COMPOSITE_GL_TYPES","getPrimitiveDrawMode","drawMode","decomposeCompositeGLType","compositeGLType","typeAndSize","_typeAndSize","components","getCompositeGLType","_COMPOSITE_GL_TYPES$g","compType","compComponents","ProgramConfiguration","attributeInfos","attributeInfosByName","attributeInfosByLocation","varyingInfos","varyingInfosByName","_readAttributesFromProgram","_readVaryingsFromProgram","attributeInfo","getAttributeInfo","_gl$getActiveAttrib","getActiveAttrib","getAttribLocation","_addAttribute","_gl$getTransformFeedb","getTransformFeedbackVarying","_addVarying","compositeType","_decomposeCompositeGL","_inferProperties","_decomposeCompositeGL2","V6_DEPRECATED_METHODS","Program","_isCached","_setId","_props$bufferMode","bufferMode","_textureUniforms","_texturesRenderable","transformFeedbackVaryings","_compileAndLink","_readUniformLocationsFromLinkedProgram","setUniforms","logPriority","_ref$drawMode","_ref$isIndexed","_ref$indexType","indexType","_ref$instanceCount","instanceCount","_ref$isInstanced","_ref$vertexArray","vertexArray","samplers","priority","fb","_areTexturesRenderable","bindForDraw","_bindTextures","drawRangeElements","drawElements","drawArrays","_uniformSetters","uniform","textureUpdate","textureIndex","_textureIndexCounter","createProgram","deleteProgram","shaderHandles","getAttachedShaders","shaderHandle","programName","_getName","getName","attachShader","linkProgram","timeEnd","validateProgram","getProgramInfoLog","_uniformCount","getActiveUniform","_parseUniformName","getUniformLocation","uniformIndices","getActiveUniforms","blockName","getUniformBlockIndex","blockIndex","getActiveUniformBlockParameter","blockBinding","uniformBlockBinding","ProgramManager","_programCache","_getUniforms","_registeredModules","_hookFunctions","_defaultModules","_hashes","_hashCounter","stateHash","_useCounts","defaultProgramManager","moduleName","_props$vs","_props$fs","_props$defines","_props$inject","_props$varyings","_props$transpileToGLS","_getModuleList","vsHash","_getHash","fsHash","moduleHashes","varyingHashes","defineKeys","injectKeys","defineHashes","injectHashes","assembled","appModules","_name","getScratchArray","getBrowser","ERR_ELEMENTS","VertexArrayObject","bufferValue","isDefaultArray","constantAttributeZero","defaultVertexArray","MAX_ATTRIBUTES","_setConstantFloatArray","_setConstantIntArray","_setConstantUintArray","elementBuffer","setElementBuffer","vertexAttribIPointer","_enable","disablingAttributeZero","_normalizeConstantArrayValue","updateNeeded","_compareConstantArrayValues","v1","v2","elements","getVertexAttribOffset","getMaxAttributes","vertexAttrib1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttribI1iv","vertexAttribI2iv","vertexAttribI3iv","vertexAttribI4iv","vertexAttribI1uiv","vertexAttribI2uiv","vertexAttribI3uiv","vertexAttribI4uiv","MULTI_LOCATION_ATTRIBUTE_REGEXP","DEPRECATIONS_V6","VertexArray","elementsAccessor","drawParams","vertexArrayObject","setAttributes","_updateDrawParams","_setAttribute","clearDrawParams","appAccessor","_this$_resolveLocatio","_resolveLocationAndAccessor","_this$_resolveLocatio2","_setConstantAttributes","valueAccessor","_this5","_this$_getAttributeIn","_getAttributeIndex","accessInfo","_getAttributeInfo","currentAccessor","attributeName","multiLocation","locationOffset","getAttributeLocation","setConstant","_accessor","_setConstantAttributeZero","_setConstantAttribute","getConstantBuffer","indexCount","_updateDrawParamsForLocation","indexOffset","getVertexCount","formatArrayValue","_opts$maxElts","maxElts","_opts$size","formatValue","terminator","EPSILON","_opts$isInteger","isInteger","toFixed","toPrecision","decimal","getDebugTableRow","marker","verts","_buffer$getDebugData","getDebugData","modified","getGLSLDeclaration","typeAndName","getDebugTableForUniforms","_ref$header","_ref$undefinedOnly","undefinedOnly","SHADER_MODULE_UNIFORM_REGEXP","PROJECT_MODULE_UNIFORM_REGEXP","uniformLocations","uniformNames","_uniformName","addUniformToTable","_uniformName2","_uniformName3","unusedCount","unusedTable","_table$uniformName","isDefined","isUniformDefined","_attributeInfo$access","ownKeys","GLTF_TO_LUMA_ATTRIBUTE_MAP","POSITION","NORMAL","COLOR_0","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","mapAttributeName","_ref$attributeMap","attributeMap","inferAttributeAccessor","category","NOOP","DRAW_PARAMS","Model","lastLogTime","programManager","getDefaultProgramManager","_programManagerState","_managedProgram","_props$program","programProps","_programDirty","_attributes","pickable","_checkProgram","moduleSettings","geometryBuffers","_setModelProps","geometry","_deleteGeometryBuffers","indices","remappedName","getBuffersFromGeometry","normalizedAttributes","getValue","_opts$moduleSettings","_opts$uniforms","_opts$attributes","_opts$transformFeedba","_opts$parameters","_opts$vertexArray","updateModuleSettings","_logDrawCallStart","getDrawParams","_this$props","_this$props$isIndexed","_this$props$indexType","_this$props$indexOffs","_this$props$vertexArr","vertexArrayInstanced","_this$props2","_this$props2$onBefore","onBeforeRender","_this$props2$onAfterR","onAfterRender","didDraw","draw","getDrawMode","_logDrawCallEnd","_opts$discard","_opts$unbindModels","unbindModels","_setFeedbackBuffers","unbindBuffers","bindBuffers","setGeometry","_feedbackBuffers","_this$programProps","animationProps","animated","animatedUniforms","_evaluateAnimateUniforms","logDrawTimeout","group","collapsed","attributeTable","ELEMENT_ARRAY_BUFFER","attributeLocation","rowHeader","getDebugTableForVertexArray","_getDebugTableForUnif","uniformTable","_getDebugTableForUnif2","missingTable","configTable","config","glslDeclaration","varyingInfo","_glslDeclaration","getDebugTableForProgramConfiguration","groupEnd","Transform","bufferTransform","textureTransform","_opts$clearRenderTarg","clearRenderTarget","updatedOpts","_updateDrawOptions","swapped","resourceTransforms","resourceTransform","swap","setVertexCount","_buildResourceTransforms","_updateModelProps","setupResources","updatedProps","updateModelProps","canCreateBufferTransform","canCreateTextureTransform","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","getDrawOptions","noop","DEFAULT_SETTINGS","onStart","onUpdate","onInterrupt","onEnd","Transition","timeline","_inProgress","removeChannel","addChannel","delay","getTime","_onUpdate","isFinished","GPUInterpolationTransition","attributeInTransition","currentStartIndices","currentLength","attributeType","ATTRIBUTE_TYPE","getTransform","bufferOpts","transitionSettings","padBufferOpts","enter","aFrom","aTo","vCurrent","_this$transition","_this$transition$sett","run","inProgress","TRANSITION_TYPES","GPUSpringTransition","getTexture","aPrev","aCur","vNext","depthTest","blend","blendFunc","blendEquation","AttributeTransitionManager","transitions","_removeTransition","_ref2$transitions","getTransitionSetting","_updateAttribute","_attributeName","_attribute","animatedAttributes","isNew","TransitionType","AttributeManager","_ref$id","updateTriggers","attributeTransitionManager","finalize","clearRedrawFlags","updaters","_add","attributeNameArray","triggerName","_invalidateTrigger","setNeedsUpdate","_ref2$startIndices","_ref2$props","_ref2$buffers","_ref2$context","timeStart","accessorName","setExternalBuffer","setBinaryValue","setConstantValue","transitionUpdated","changedAttributes","getAttributes","hasAttribute","excludeAttributes","getShaderAttributes","extraProps","newAttributes","newAttribute","_createAttribute","_mapUpdateTriggersToAttributes","triggers","getUpdateTriggers","invalidatedAttributes","updateBuffer","_Transition","CPUInterpolationTransition","fromValue","toValue","updateSpringElement","cur","velocity","distanceSquare","d","CPUSpringTransition","_this$_prevValue","_prevValue","_this$_currValue","_currValue","nextValue","updateSpring","delta","UniformTransitionManager","propsInTransition","LIFECYCLE","PROP_SYMBOLS","COMPONENT","ASYNC_DEFAULTS","ASYNC_ORIGINAL","ASYNC_RESOLVED","propsChangedReason","compareProps","getPropTypes","ignoreProps","dataChangedReason","dataChanged","dataComparator","_dataDiff","diffDataProps","updateTriggersChangedReason","diffUpdateTrigger","triggerChanged","diffUpdateTriggers","propsChanged","updateTriggersChanged","extensionsChanged","diffExtensions","transitionsChanged","diffTransitions","comparePropValues","_ref$ignoreProps","_ref$propTypes","_ref$triggerName","_Object$keys2","_changed","newProp","oldProp","equal","equals","oldExtensions","newTriggers","oldTriggers","LayerType","_propTypes","isPlainObject","mergeShaders","mergedInjection","transformVector","matrix","modulus","lerp","PI_4","DEGREES_TO_RADIANS","RADIANS_TO_DEGREES","zoomToScale","scaleToZoom","log2","lngLatToWorld","lng","lat","phi2","worldToLngLat","lambda2","atan","_ref6$highPrecision","highPrecision","latCosine","cos","unitsPerDegreeY","altUnitsPerMeter","metersPerUnit","degreesPerUnit","latCosine2","unitsPerDegreeY2","altUnitsPerDegree2","altUnitsPerMeter2","lngLatZ","xyz","_lngLatZ","z0","_xyz","_getDistanceScales","worldspace","newLngLat","newZ","getViewMatrix","_ref7$center","vm","getProjectionParameters","_ref8$altitude","_ref8$pitch","_ref8$nearZMultiplier","nearZMultiplier","_ref8$farZMultiplier","farZMultiplier","pitchRadians","halfFov","topHalfSurfaceDistance","sin","getProjectionMatrix","_getProjectionParamet","worldToPixels","pixelProjectionMatrix","_xyz2","_xyz2$","pixelsToWorld","pixelUnprojectionMatrix","targetZ","_xyz3","coord","coord0","coord1","z1","bounds","_ref$minExtent","minExtent","_ref$maxZoom","_ref$padding","_bounds","_bounds$","west","south","_bounds$2","east","north","nw","project","se","targetSize","scaleX","scaleY","offsetX","offsetY","centerLngLat","unproject","_Viewport","WebMercatorViewport","_ref$latitude","_ref$longitude","_ref$zoom","_ref$nearZMultiplier","_ref$farZMultiplier","lngLat","xy","fromLocation","pos","toLocation","getMapCenterByLngLatPosition","_fitBounds2","Viewport","_ref$viewMatrix","_ref$projectionMatrix","vpm","mInverse","projectFlat","unprojectFlat","_ref2$topLeft","topLeft","worldPosition","_coord","y2","_ref3$topLeft","targetZWorld","_this$unprojectPositi","_this$unprojectPositi2","X","Y","Z","_this$projectFlat","_this$projectFlat2","_this$unprojectFlat","_this$unprojectFlat2","normalizeViewportProps","flatViewport","topY","bottomY","shiftY","VIEWPORT_TRANSITION_PROPS","DEFAULT_OPTS","curve","speed","getFlyToTransitionParams","startProps","endProps","rho","startZoom","startCenter","startScale","endZoom","endCenter","startCenterXY","endCenterXY","uDelta","w0","w1","u1","_u1","rho2","b0","b1","r0","r1","lngLatZToWorldPosition","_lngLatZ$","_viewport$projectFlat","_viewport$projectFlat2","getWorldPosition","_position","_vec4$transformMat","_vec4$transformMat2","_normalizeParameters","normalizedParams","fromCoordinateSystem","fromCoordinateOrigin","normalizeParameters","optional","arrayEqual","valueType","compare","array2","normalizePropDefinition","createProps","propsPrototype","getPropsPrototype","propsInstance","componentClass","getOwnProperty","parentClass","parentDefaultProps","componentPropDefs","_Object$entries","_Object$entries$_i","deprecatedFor","parentProps","componentName","getComponentName","createPropsPrototype","defaultValues","descriptors","async","getDescriptorForAsyncProp","addAsyncPropsToPropPrototype","_deprecatedProps","newValue","nameStr","newPropName","addDeprecatedPropsToPropPrototype","_mergedDefaultProps","createPropsPrototypeAndTypes","internalState","hasAsyncProp","getAsyncProp","prop","_asyncIterator","EMPTY_PROPS","ComponentState","asyncProps","onAsyncPropUpdated","oldAsyncProps","_resolveAsyncIterable2","asyncProp","resolvedValue","pendingLoadCount","resolvedLoadCount","isAsyncPropLoading","resolvedValues","originalValues","_createAsyncPropData","_updateAsyncProp","_value2","_didAsyncInputValueChange","fetch","_watchPromise","_resolveAsyncIterable","_setPropValue","lastValue","loadCount","freezeAsyncOldProps","promise","_postProcessValue","_setAsyncPropValue","onDataLoad","t0","finish","_x2","previousValue","dataTransform","counter","Component","lifecycle","parent","_ComponentState","LayerState","attributeManager","subLayers","isBoolean","isFunction","isIterable","isResponse","Response","arrayBuffer","text","json","isBlob","Blob","isReadableStream","ReadableStream","tee","getReader","isReadableDOMStream","read","pipe","readable","isReadableNodeStream","fileAliases","resolvePath","filename","alias","FileReadableResponse","fileOrBlob","_fileOrBlob","bodyUsed","_json","_text","_arrayBuffer","_this$_getFileReader","reader","_getFileReader","readAsArrayBuffer","abrupt","_callee2","_this$_getFileReader2","_context2","readAsText","_callee3","_context3","parse","FileReader","onabort","Headers","fetchFileReadable","getErrorMessageFromResponse","_getErrorMessageFromResponse","response","headers","statusText","t1","fetchFile","_fetchFile","_args","ok","isLoaderObject","loader","hasParser","parseTextSync","parseSync","parseStream","parseInBatches","loaderOptions","workerUrl","normalizeLoader","binary","validateLoaderVersion","coreVersion","loaderVersion","parseVersion","parts","major","minor","NullLog","DEFAULT_LOADER_OPTIONS","CDN","worker","ConsoleLog","_this$console$log","_this$console$info","_this$console$warn","_len3","_key3","_this$console$error","_len4","_key4","metadata","globalOptions","mergeOptions","topOptions","validateLoaderOptions","mergeOptionsInternal","idOptions","deprecatedOptions","defaultOptions","mergedOptions","baseUri","addUrlOptions","mergeNestedFields","_marked","makeStringIterator","_options$chunkSize","chunkSize","textEncoder","chunkLength","TextEncoder","encode","makeArrayBufferIterator","chunkByteLength","sourceArray","_AwaitValue","wrapped","_awaitAsyncGenerator","AsyncGenerator","front","back","resume","wrappedAwait","settle","_invoke","request","_wrapAsyncGenerator","makeBlobIterator","_makeBlobIterator","file","readFileSlice","_readFileSlice","fileReader","onloadend","makeStreamIterator","stream","getIterator","_makeBrowserStreamIterator","makeBrowserStreamIterator","_makeNodeStreamIterator","makeNodeStreamIterator","_yield$_awaitAsyncGen","releaseLock","_readableState","ended","onceReadable","_x3","_onceReadable","makeIterator","concatenateArrayBuffers","source1","source2","sourceArray1","sourceArray2","concatenateChunksAsync","_concatenateChunksAsync","checkFetchResponseStatus","_checkFetchResponseStatus","errorMessage","ERR_DATA","getUrlFromData","getArrayBufferOrStringFromDataSync","TextDecoder","decode","isBuffer","getArrayBufferOrStringFromData","_getArrayBufferOrStringFromData","isArrayBuffer","getLoaderContext","previousContext","loaders","getLoaders","candidateLoaders","contextLoaders","workerURLCache","buildScript","getTransferList","recursive","transfers","transfersSet","Set","isTransferable","MessagePort","OffscreenCanvas","defaultOnMessage","WorkerThread","_ref2$name","onMessage","workerSource","endsWith","workerURL","blob","URL","createObjectURL","getWorkerURL","Worker","_process","onmessage","lineno","colno","betterError","transferList","postMessage","terminate","WorkerPool","_ref$name","_ref$maxConcurrency","maxConcurrency","_ref$onDebug","onDebug","jobQueue","idleQueue","isDestroyed","destroy","jobName","_startQueuedJob","_getAvailableWorker","job","backlog","_onWorkerDone","WorkerFarm","workerPools","workerPool","workerName","_getWorkerPool","toArrayBuffer","canParseWithWorker","localWorkerUrl","useWorker","parseWithWorker","workerFarm","_workerFarm","onWorkerMessage","getWorkerFarm","warning","arraybuffer","_onWorkerMessage","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMETypeFromURL","dataUrl","QUERY_STRING_PATTERN","getResourceUrlAndType","resource","contentType","mimeString","parseMIMEType","urlType","stripQueryString","_createForOfIteratorHelper","allowArrayLike","_arrayLikeToArray","normalCompletion","didErr","_e2","arr2","registeredLoaders","getRegisteredLoaders","EXT_PATTERN","selectLoader","normalizeLoaders","_getResourceUrlAndTyp","findLoaderByUrl","findLoaderByContentType","findLoaderByExamingInitialData","nothrow","getNoValidLoaderMessage","getMagicString","getFirstCharacters","findLoaderByExtension","mimeType","mimeTypes","testText","testBinary","dataView","magic","fromCharCode","_x4","_parse","autoUrl","parseWithLoader","_x5","_x6","_x7","_x8","_parseWithLoader","_load","pickingColorCache","__diff","load","getLoadOptions","opacity","onHover","onClick","onDragStart","onDrag","onDragEnd","positionFormat","colorFormat","getPolygonOffset","layerIndex","highlightedObjectIndex","autoHighlight","highlightColor","_Component","Layer","layerName","updateObject","setChangeFlags","stateChanged","layerManager","_getNeedsRedraw","hasUniformTransition","shouldUpdateState","_getUpdateParams","uniformTransitions","active","models","loadOptions","_worldToPixels","_worldToPixels2","pickingEvent","_color","shaders","getShaders","changeFlags","propsOrDataChanged","getAttributeManager","invalidateAll","getModels","mode","invalidate","_setModelAttributes","getNumInstances","getStartIndices","ignoreUnknownAttributes","getChangedAttributes","updateAttributes","updateTransition","cacheSize","newCacheSize","pickingColor","encodePickingColor","_this$getAttributeMan","pickingColors","instancePickingColors","colors","decodePickingColor","_this$getAttributeMan2","updateSubBuffer","_initState","initializeState","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_updateState","stateNeedsUpdate","currentProps","_updateUniformTransition","updateParams","updateState","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_updateModules","isComposite","_renderLayers","_updateAttributes","setInstanceCount","clearChangeFlags","resetOldProps","finalizeState","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_ref7$moduleParameter","moduleParameters","_ref7$uniforms","_ref7$parameters","_updateAttributeTransition","setModuleParameters","offsets","polygonOffset","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","flags","somethingChanged","invalidateAttribute","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","getOldProps","attributeManagerNeedsRedraw","getNeedsRedraw","_getAttributeManager","addInstanced","calculateInstancePickingColors","_onAsyncPropUpdated","setAsyncProps","oldLayer","diffProps","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","Geometry","_props$drawMode","_props$attributes","_props$indices","_props$vertexCount","_setAttributes","_calculateVertexCount","_print","DEFAULT_COLOR","radiusScale","radiusMinPixels","radiusMaxPixels","lineWidthUnits","lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","stroked","filled","getPosition","getRadius","getFillColor","getLineColor","getLineWidth","strokeWidth","getColor","_Layer","ScatterplotLayer","project32","instancePositions","use64bitPositions","instanceRadius","instanceFillColors","instanceLineColors","instanceLineWidths","setState","_getModel","widthMultiplier","metersPerPixel","positions","channelHandles","animationHandles","Timeline","animations","playing","lastEngineTime","_props$delay","_props$duration","POSITIVE_INFINITY","_props$rate","rate","_props$repeat","channel","_setChannelTime","animationHandle","detachAnimation","animationData","animation","_channel","setTime","channelHandle","engineTime","offsetTime","DEFAULT_DISTANCE_SCALES","_opts$id","_opts$x","_opts$y","_opts$width","_opts$height","displayName","_frustumPlanes","_initViewMatrix","_initProjectionMatrix","_initPixelMatrices","_ref$topLeft","_this$projectionProps","projectionProps","fovyRadians","direction","nearFarScale","normalize","widthScale","nearHeight","nearWidth","normal","clone","negate","distance","dot","planes","cross","orthographic","perspective","_opts$viewMatrix","_opts$longitude","_opts$latitude","_opts$zoom","_opts$position","_opts$modelMatrix","_opts$focalDistance","_opts$distanceScales","getMeterZoom","meterOffset","_getCenterInWorld","multiplyRight","center2d","commonPosition","_opts$projectionMatri","_opts$orthographic","_opts$fovy","_opts$near","_opts$far","_opts$focalDistance2","_createProjectionMatrix","viewMatrixInverse","_extractCameraVectors","viewportMatrix","DEFAULT_MODULES","SHADER_HOOKS","createProgramManager","shaderModule","addDefaultModule","shaderHook","addShaderHook","INITIAL_CONTEXT","deck","shaderCache","pickingFBO","mousePosition","LayerManager","_ref$viewport","_ref$timeline","lastRenderedLayers","layers","_needsRedraw","_needsUpdate","_debug","_onError","activateViewport","_finalizeLayer","layerNeedsRedraw","_ref2$layerIds","layerIds","layerId","setLayers","newLayers","forceUpdate","shouldUpdate","_updateLayers","oldViewport","_updateLayer","oldLayers","oldLayerMap","generatedLayers","_updateSublayersRecursively","_finalizeOldLayers","_generatedLayers","newLayer","sublayers","validateProps","_transferLayerState","_initializeLayer","getSubLayers","_handleError","_transferState","_finalize","deepEqual","aValue","bValue","ViewManager","views","controllers","_viewports","_viewportMap","_isUpdating","_eventManager","eventManager","_eventCallbacks","onViewStateChange","onInteractiveStateChange","viewId","controller","rect","containsPixel","viewMap","viewOrViewId","getView","getViewStateId","filterViewState","viewports","getViewports","pixel","p","_setViews","_setViewState","_setSize","_rebuildViewports","_diffViews","Controller","_onViewStateChange","onStateChange","controllerProps","_createController","oldControllers","getViewState","makeViewport","_updateController","unshift","_buildViewportMap","newViews","oldViews","PERCENT_OR_PIXELS_REGEX","parsePosition","relative","extent","View","_props$x","_props$y","_props$width","_props$height","_props$projectionMatr","_props$fovy","_props$near","_props$far","_props$modelMatrix","_props$viewportInstan","viewportInstance","_props$type","_parseDimensions","viewportDimensions","getDimensions","_getViewport","_y","_width","_height","defaultOpts","ViewportType","_opts$pitch","_opts$bearing","_opts$nearZMultiplier","_opts$farZMultiplier","_opts$repeat","_opts$worldOffset","worldOffset","_opts$altitude","viewOffset","multiplyLeft","viewportOpts","_subViewports","newCenter","topRight","bottomLeft","bottomRight","minLon","maxLon","minOffset","maxOffset","offsetViewport","TransitionInterpolator","extract","required","_opts","_propsToCompare","_propsToExtract","_requiredProps","nextProps","startViewStateProps","endViewStateProps","_checkRequiredProps","transitionDuration","_TransitionInterpolat","LinearInterpolator","transitionProps","TRANSITION_EVENTS","DEFAULT_PROPS","transitionEasing","transitionInterpolator","transitionInterruption","onTransitionStart","onTransitionInterrupt","onTransitionEnd","TransitionManager","ControllerState","_onTransitionUpdate","transitionTriggered","_shouldIgnoreViewportChange","_isTransitionEnabled","interruption","_triggerTransition","interpolator","arePropsEqual","_isUpdateDueToCurrentTransition","startViewstate","shortestPathFrom","getDuration","initialProps","initializeProps","_onTransitionEnd","callback","_transition$settings","interpolateProps","getViewportProps","interactionState","inTransition","NO_TRANSITION_PROPS","EVENT_TYPES","controllerState","controllerStateProps","transitionManager","_events","_state","isDragging","_customEvents","invertPan","handleEvent","eventName","_onPanStart","_onPan","_onPanEnd","_onPinchStart","_onPinch","_onPinchEnd","_onDoubleTap","_onWheel","_onKeyDown","_this$controllerState","offsetCenter","_this$controllerState2","handled","inside","stopPropagation","srcEvent","metaKey","altKey","ctrlKey","shiftKey","toggleEvents","processViewStateChange","_props$scrollZoom","scrollZoom","_props$dragPan","dragPan","_props$dragRotate","dragRotate","_props$doubleClickZoo","doubleClickZoom","_props$touchZoom","touchZoom","_props$touchRotate","touchRotate","_props$keyboard","keyboard","isInteractive","eventNames","newControllerState","getInteractiveState","getCenter","isPointInBounds","panStart","rotateStart","updateViewport","alternateMode","isFunctionKeyPressed","rightButton","_onPanMove","_onPanRotate","panEnd","rotateEnd","isPanning","isRotating","pan","deltaX","deltaY","_this$controllerState3","deltaScaleX","deltaScaleY","rotate","preventDefault","isZooming","zoomStart","startPinchRotation","rotation","zoomEnd","isZoomOut","_getTransitionProps","funcKey","keyCode","zoomOut","zoomIn","rotateLeft","moveLeft","rotateRight","moveRight","rotateUp","moveUp","rotateDown","moveDown","customEvents","ViewState","_viewportProps","_applyConstraints","LINEAR_TRANSITION_PROPS","MAPBOX_LIMITS","DEFAULT_STATE","_ViewState","MapState","_ref$minZoom","minZoom","_ref$maxPitch","maxPitch","_ref$minPitch","minPitch","startPanLngLat","startZoomLngLat","startBearing","startPitch","_interactiveState","_getUpdatedState","_unproject","startPos","_this$_calculateNewLn","_calculateNewLngLat","_this$_calculateNewLn2","_ref5$deltaScaleX","_ref5$deltaScaleY","_this$_interactiveSta","_this$_calculateNewPi","_calculateNewPitchAndBearing","_this$_interactiveSta2","_calculateNewZoom","_zoomedViewport$getMa","_zoomedViewport$getMa2","_zoomFromCenter","_panFromCenter","fromProps","_this$_viewportProps","_this$_viewportProps2","_this$_viewportProps3","_this$_viewportProps4","_Controller","MapController","_this$getCenter","centerY","startY","_View","MapView","_getControllerProps","DEFAULT_LIGHT_COLOR","idCount","AmbientLight","_props$color","_props$intensity","intensity","DEFAULT_LIGHT_DIRECTION","DirectionalLight","_props$direction","_props$_shadow","_shadow","shadow","Effect","_Pass","LayersPass","_drawLayers","onViewportActive","_props$clearCanvas","clearCanvas","clearGLCanvas","renderStats","viewportOrDescriptor","subViewports","subViewport","_drawLayersInViewport","layerFilter","_ref$pass","pass","effects","glViewport","dimensions","pixelRatio","getGLViewport","clearOpts","scissorTest","scissor","renderStatus","totalCount","visibleCount","compositeCount","pickableCount","indexResolver","layerIndexResolver","layerIndices","resolvers","isDrawn","indexOverride","_offset","parentId","resolver","shouldDrawLayer","_shouldDrawLayer","layerRenderIndex","_moduleParameters","_getModuleParameters","layerParameters","getLayerParameters","drawLayer","isPicking","renderPass","effect","getModuleParameters","Pass","_LayersPass","ShadowPass","shadowMap","depthBuffer","fbo","depthRange","shadowEnabled","drawToShadowMap","getMemoizedViewportCenterPosition","invert","getMemoizedViewProjectionMatrices","shadowMatrices","projectionMatrices","farZ","corners","screenToCommonSpace","shadowMatrix","corner","DEFAULT_SHADOW_COLOR","createShadowUniforms","shadow_uDrawShadowMap","shadow_uUseShadowMap","shadowMaps","shadow_uColor","shadowColor","shadow_uLightId","shadowLightId","shadow_uLightCount","projectCenters","viewProjectionMatrices","viewProjectionMatrixCentered","dummyShadowMap","shadowUniforms","_opts$shadowEnabled","DEFAULT_AMBIENT_LIGHT_PROPS","DEFAULT_DIRECTIONAL_LIGHT_PROPS","_Effect","LightingEffect","ambientLight","directionalLights","pointLights","shadowPasses","lightSource","_applyDefaultLights","light","_createLightMatrix","_createShadowPasses","render","lightSources","directionalLight","getProjectedLight","pointLight","removeDefaultModule","lightMatrices","lookAt","shadowPass","DEFAULT_LIGHTING_EFFECT","EffectManager","_internalEffects","setEffects","cleanup","_createInternalEffects","DrawLayersPass","PICKING_PARAMETERS","PickLayersPass","_drawPickingBuffer","_ref$deviceRect","deviceRect","redrawReason","pickZ","depthMask","colorMask","pickParameters","blendColor","DeckRenderer","drawPickingColors","drawLayersPass","pickLayersPass","renderCount","renderBuffers","lastPostProcessEffect","layerPass","getDefaultFramebuffer","_preRender","outputBuffer","_postRender","preRender","postRender","_resizeRenderBuffers","inputBuffer","swapBuffer","NO_PICKED_OBJECT","pickedColor","pickedLayer","pickedObjectIndex","getClosestObject","pickedColors","deviceX","deviceY","deviceRadius","minSquareDistanceToCenter","closestPixelIndex","dy","dy2","dx","d2","_pickedLayerIndex","_dy","pickedX","pickedY","processPickInfo","pickInfo","lastPickedInfo","affectedLayers","lastPickedObjectIndex","lastPickedLayerId","pickedLayerId","lastPickedLayer","coordinate","baseInfo","picked","devicePixel","infos","getLayerPickingInfo","pickingModuleParameters","sourceLayer","getPickingInfo","DeckPicker","depthFBO","_pickClosestObject","_pickVisibleObjects","pickableLayers","isPickable","_ref2$radius","radius","_ref2$mode","unproject3D","_getPickable","_resizeBuffer","devicePixelRange","_this$pickingFBO","_getPickingRect","deviceWidth","deviceHeight","_drawAndSample","clearPickingColor","_layerId","restorePickingColors","emptyInfo","_ref3$mode","leftTop","deviceLeft","deviceTop","rightBottom","deviceRight","deviceBottom","pickInfos","uniqueColors","pickedLayerIndex","colorKey","getUniqueObjects","uniqueInfos","defaultStyle","zIndex","pointerEvents","backgroundColor","Tooltip","canvasParent","parentElement","el","displayInfo","innerText","innerHTML","html","_parseImageNode","IMAGE_SUPPORTED","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","getImageType","getImageTypeOrNull","getImageData","drawImage","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlobOrSVGDataUrl","xmlText","btoa","getBlob","parseToImage","_parseToImage","blobOrDataUrl","objectUrl","webkitURL","loadToImage","revokeObjectURL","_loadToImage","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","_parseToImageBitmap","imagebitmapOptions","imagebitmap","safeCreateImageBitmap","_safeCreateImageBitmap","_args2","isEmptyObject","createImageBitmap","getBinaryImageMetadata","binaryData","toDataView","getPngMetadata","_getJpegMarkers","tableMarkers","sofMarkers","getJpegMarkers","getJpegMetadata","getGifMetadata","getBmpMetadata","parseToNodeImage","_parseImage","imageOptions","imageType","loadType","getLoadableImageType","getDefaultImageType","isImageTypeSupported","firstChar","lastChar","existingVersion","_registerLoggers","handlers","normalizedLoader","registeredLoader","registerLoaders","Query","_queryPending","_pollingPromise","hasTimerQuery","_ref$conservative","conservative","resultAvailable","getResult","requestAnimationFrame","poll","isResultAvailable","timerId","cancelAnimationFrame","clearTimeout","PointerEventInput","oldHandler","statIdCounter","AnimationLoop","_props$onCreateContex","onCreateContext","_props$onAddHTML","onAddHTML","_props$onInitialize","onInitialize","_props$onRender","onRender","_props$onFinalize","onFinalize","_props$gl","_props$glOptions","glOptions","_props$debug","_props$createFramebuf","_props$autoResizeView","autoResizeViewport","_props$autoResizeDraw","autoResizeDrawingBuffer","_props$stats","_props$useDevicePixel","useDevicePixels","useDevicePixelRatio","cpuTime","gpuTime","frameRate","_initialized","_running","_animationFrameId","_nextFramePromise","_resolveNextFrame","_cpuStartTime","_pageLoadPromise","_onMousemove","_onMouseleave","_toDataURL","_setDisplay","startPromise","_getPageLoadPromise","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","_gpuTimeQuery","appContext","_addCallbackData","_startLoop","_beginTimers","_setupFrame","_renderFrame","_clearNeedsRedraw","offScreen","commit","_endTimers","_finalizeCallbackData","waitForRender","_this$props3","_this$props4","element","_requestAnimationFrame","renderFrame","animationLoop","renderFrameCallback","setTimeout","_this$display","_onSetupFrame","_resizeFramebuffer","startTime","tick","tock","_timeline","_animationLoop","_mousePosition","_this$_getSizeAndAspe","_getSizeAndAspect","_offScreen","_createInfoDiv","wrapperDiv","div","background","resizeGLContext","isTimerDisjoint","getTimerMilliseconds","beginTimeElapsedQuery","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","ev","button","predict","pointerId","MouseInput","pressed","which","manager","pointers","changedPointers","pointerType","Manager","RECOGNIZERS","Rotate","Pinch","Swipe","Pan","threshold","Press","Tap","taps","RECOGNIZER_COMPATIBLE_MAP","pinch","doubletap","anytap","RECOGNIZER_FALLBACK_MAP","BASIC_EVENT_ALIASES","pointerdown","pointermove","pointerup","touchstart","touchmove","touchend","INPUT_EVENT_TYPES","EVENT_RECOGNIZER_MAP","tap","press","pinchin","pinchout","pinchstart","pinchmove","pinchend","pinchcancel","rotatestart","rotatemove","rotateend","rotatecancel","panup","pandown","panleft","panright","pancancel","swipe","swipeleft","swiperight","swipeup","swipedown","GESTURE_EVENT_ALIASES","anyclick","dblclick","mouseover","mouseout","mouseleave","firefox","WHEEL_EVENTS","WheelInput","events","passive","WheelEvent","deltaMode","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelPosition","clientX","clientY","MOUSE_EVENTS","MoveInput","enableMoveEvent","enableLeaveEvent","enableOutEvent","enableOverEvent","handleOverEvent","handleOutEvent","handleLeaveEvent","handleMoveEvent","KEY_EVENTS","KeyInput","enableDownEvent","enableUpEvent","tabIndex","targetElement","srcElement","tagName","ContextmenuInput","DEFAULT_OPTIONS","EventRegistrar","handlersByElement","_active","entry","mjolnirEvent","_normalizeEvent","rootElement","_emit","parentNode","immediatePropagationStopped","stopImmediatePropagation","entriesToRemove","_entries$i","_entriesToRemove$_i","_event$srcEvent","buttons","leftButton","middleButton","whichButtons","getBoundingClientRect","offsetWidth","offsetHeight","clientLeft","clientTop","getOffsetPosition","recognizers","recognizerOptions","touchAction","EventManager","_onBasicInput","_onOtherEvent","setElement","ManagerClass","recognizerName","recognizer","otherName","recognizeWith","recognizerOption","wheelInput","moveInput","keyInput","contextmenuInput","eventAlias","eventRegistrar","_toggleRecognizer","_addEventHandler","_removeEventHandler","fallbackRecognizers","otherRecognizer","requireFailure","dropRequireFailure","enableEventType","isRecognizerUsed","eh","emit","pickingRadius","_framebuffer","_animate","onWebGLInitialized","onResize","_onMetrics","getCursor","Deck","viewManager","effectManager","deckRenderer","deckPicker","_pickRequest","_lastPointerDownInfo","interactiveState","_onEvent","_onPointerDown","_onPointerMove","_pickAndCallback","_onRendererInitialized","_onRenderFrame","_onInteractiveStateChange","initialViewState","_createCanvas","_createAnimationLoop","metrics","fps","setPropsTime","updateAttributesTime","framesRedrawn","pickTime","pickCount","gpuTimePerFrame","cpuTimePerFrame","bufferMemory","textureMemory","renderbufferMemory","gpuMemory","_metricsCounter","tooltip","removeChild","_setCanvasSize","resolvedProps","_getViews","viewManagerNeedsRedraw","layerManagerNeedsRedraw","effectManagerNeedsRedraw","deckRendererNeedsRedraw","force","_customRender","_pick","statKey","getLayers","_checkForCanvasSizeChange","_this$_pick","pickedInfo","getTooltip","setTooltip","cursor","polygonOffsetFill","depthFunc","play","attachTimeline","pointerleave","_updateCanvasSize","renderOptions","renderLayers","getViews","getEffects","_setGLContext","_getFrameStats","_getMetrics","_updateCursor","updateLayers","updateViewStates","_ref3$isDragging","eventOptions","getLastPickedObject","layerHandler","rootHandler","pickObject","animationLoopStats","memoryStats","PropTypes","arrayOf","instanceOf","inheritsFrom","ParentType","wrapInView","node","Fragment","extractJSXLayers","reactChildren","jsxLayers","jsxViews","Children","reactElement","ElementType","reactProps","createLayer","MAP_STYLE","evaluateChildren","childProps","componentProps","deckGLViewProps","needsDeckGLViewProps","positionChildrenUnderViews","ContextProvider","defaultViewId","viewChildren","getViewport","_views$viewId","viewElement","contextValue","offsetParent","CANVAS_ONLY_STYLES","mixBlendMode","extractStyles","containerStyle","canvasStyle","_React$Component","DeckGL","_containerRef","createRef","_canvasRef","pickMultipleObjects","pickObjects","_extractJSXLayers","_positionChildrenUnderViews","_extractStyles","DeckClass","current","_updateFromProps","childrenChanged","_parseJSX","viewsChanged","_redrawDeck","_this$_parseJSX","deckProps","_this$_extractStyles","ref","_extends","refProps","normalizeStyle","toJS","layerRef","normalizedLayer","clamp","propNames","WRAPPED_ANGULAR_PROPS","isValid","getEndValueByShortestPath","startValue","endValue","isWrappedAngularProp","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","REQUIRED_PROPS","LINEARLY_INTERPOLATED_PROPS","ViewportFlyToInterpolator","_super","startViewportProps","endViewportProps","_startValue","_endValue","_getFlyToTransitionPa","w","u","tanh","sinh","scaleIncrement","newZoom","newCenterWorld","flyToViewport","screenSpeed","maxDuration","_getFlyToTransitionPa2","getFlyToDuration","around","aroundLngLat","_WebMercatorViewport$","_WebMercatorViewport$2","_getUpdatedMapState","decapitalize","mapContainer","onViewportChange","NO_TOKEN_WARNING","CONTAINER_STYLE","overflow","preventStyleDiffing","disableTokenWarning","visibilityConstraints","_PureComponent","StaticMap","accessTokenInvalid","queryRenderedFeatures","evt","_mapbox","_mapboxMapRef","_mapboxMapError","getMap","prevProps","_updateMapStyle","_updateMapProps","href","_dimensions$width","_dimensions$height","Consumer","interactiveContext","_mapContainerRef","Provider","mapContainerStyle","constraints","constraintName","checkVisibilityConstraints","visibility","disableWidth","disableHeight","_renderOverlays","_renderNoTokenWarning","_animationFrame","_onTransitionFrame","_updateViewport","_isTransitionInProgress","currentTime","x0","y0","cropEasingFunction","_endTransition","_this$state","shouldEnd","mapState","newState","_onWheelEnd","_arguments","timeout","executeNow","debounce","getMapState","_event$offsetCenter","newMapState","extraState","newViewport","viewStateChanged","mapStateProps","_options$eventManager","_options$isInteractiv","_options$scrollZoom","_options$dragPan","_options$dragRotate","_options$doubleClickZ","_options$touchZoom","_options$touchRotate","_options$keyboard","dimensionChanged","_transitionManager","processViewportChange","_this$mapState$getVie","getDeprecatedText","getNewText","checkDeprecatedProps","depProp","warnMessage","onInteractionStateChange","onDblClick","onContextMenu","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onMouseEnter","onMouseLeave","onMouseOut","onWheel","clickRadius","interactiveLayerIds","onNativeClick","isHovering","InteractiveMap","isLoaded","_staticMapRef","_interactionState$isD","_updateInteractiveContext","_setControllerProps","callbackName","_getFeatures","point","isEntering","isExiting","callbacks","isDoubleClickEnabled","cb","_controller","_eventCanvasRef","_onPointerUp","_onClick","wheel","contextmenu","_onViewportChange","_onInteractionStateChange","setOptions","_interactiveContext","queryParams","bbox","updatedContext","eventCanvasStyle","_onResize","_onLoad","aKeys","bKeys","_aKeys","isRequired","sourceCounter","Source","_assertThisInitialize","_assertThisInitialize2","sourceOptions","_sourceOptions","changedKey","changedKeyCount","updateImage","coordinates","setCoordinates","_createSource","_updateSource","_loaded","removeSource","addSource","_objectWithoutProperties","excluded","sourceKeys","sourceSymbolKeys","propertyIsEnumerable","beforeId","layerCounter","layerOptions","_layerOptions","getLayer","_props$layout","_props$paint","paint","minzoom","maxzoom","otherProps","moveLayer","setLayoutProperty","setPaintProperty","setFilter","setLayerZoomRange","setLayerProperty","diffLayerStyles","_createLayer","removeLayer","addLayer","captureScroll","captureDrag","captureClick","captureDoubleClick","BaseControl","_onScroll","_onDragStart","_onDblClick","watch","draggable","offsetLeft","offsetTop","_BaseControl","DraggableControl","dragPos","dragOffset","_getDragEventPosition","_getDragEventOffset","_setupDragEvents","callbackEvent","_getDragLngLat","_removeDragEvents","_dragEvents","_onDrag","_onDragEnd","_onDragCancel","_event$center","_this$_getDraggedPosi","_getDraggedPosition","_this$_getDraggedPosi2","crispPixel","crispPercentage","percentage","dimension","origSize","_DraggableControl","Marker","_this$_context$viewpo","_this$_context$viewpo2","_this$_getPosition","_getPosition","_this$_getPosition2","_control","ANCHOR_POSITION","ANCHOR_TYPES","tipSize","closeButton","closeOnClick","anchor","oneOf","dynamicPosition","sortByDepth","onClose","Popup","content","_contentRef","selfWidth","selfHeight","_ANCHOR_POSITION$anch","anchorX","anchorY","xStep","positionType","anchorPosition","getDynamicPosition","xPercentage","yPercentage","borderWidth","_getContainerStyle","_renderTip","_renderContent","FullscreenControl","isFullscreen","showButton","nextState","_mapboxFullscreenControl","_fullscreen","_onClickFullscreen","_checkFullscreenSupport","_fullscreenchange","_onFullscreenChange","label","title","_renderButton","auto","positionOptions","fitBoundsOptions","trackUserLocation","showUserLocation","onGeolocate","GeolocateControl","supportsGeolocation","markerPosition","controlOptions","control","_mapboxGeolocateControl","_watchState","_geolocateButton","_geolocateButtonRef","_updateMarker","_updateCamera","_setup","trigger","coords","LngLat","accuracy","toBounds","_ne","_sw","_getBounds","fitBounds","permissions","query","geolocation","_setupMapboxGeolocateControl","_triggerGeolocate","geolocationWatchID","_geolocationWatchID","clearWatch","_renderMarker","showCompass","showZoom","zoomInLabel","zoomOutLabel","compassLabel","getUIVersion","version1","version2","part1","part2","compareVersions","NavigationControl","_uiVersion","_onZoomIn","_onZoomOut","_onResetNorth","_renderCompass","maxWidth","unit","ScaleControl","mapboxScaleControl","_mapboxScaleControl","_onMove","CanvasOverlay","_ctx","save","_this$_context","restore","_canvas","_redraw","HTMLOverlay","SVGOverlay","setRTLTextPlugin","handleChange","selectedValue","hoveredFeature","bear","componentDidMount","fetchData","componentDidUpdate","prevState","snapshot","cases","hoveredObject","pointerX","pointerY","textAlign","confirmed","deaths","placeholder","onChange","IndexPage","Layout","pageName","Helmet","$reduce","$isSealed","passiveSupported","mathgl","transpose","a01","a02","a03","a12","a13","a23","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","determinant","b2","b3","rad","b12","b20","b21","b22","hypot","fromQuat","x2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","frustum","rl","tb","nf","lr","bt","x1","y1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","ax","ay","transformMat4","sub","_ref$precision","precision","epsilon","oldEpsilon","printDegrees","E","__VERSION__","getStorage","storage","setItem","removeItem","LocalStorage","defaultSettings","_loadConfiguration","updateConfiguration","serialized","serializedConfiguration","getItem","formatImage","imageUrl","COLOR","BLACK","RED","GREEN","YELLOW","BLUE","MAGENTA","CYAN","WHITE","BRIGHT_BLACK","BRIGHT_RED","BRIGHT_GREEN","BRIGHT_YELLOW","BRIGHT_BLUE","BRIGHT_MAGENTA","BRIGHT_CYAN","BRIGHT_WHITE","autobind","predefined","originalConsole","ONCE","getTableHeader","Log","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","timeStamp","_getLogFunction","oldUsage","newUsage","_table","columns","_image","_ref2$message","_ref2$scale","_shouldLog","_ref4$message","_ref4$scale","img","_console","nodeName","_console2","_img","_console3","logImageInBrowser","_ref3$scale","asciify","fit","logImageInNode","setting","normalizeArguments","groupCollapsed","trace","isEnabled","getLevel","normalizeLogLevel","_method","getTotal","getDelta","decorateMessage","newLevel","setLevel","newPriority","resolvedLevel","messageType","padLength","leftPad","ms","_getPrototypeOf","__proto__","deepArrayEqual","isArrayX","isArrayY","cssToDeviceRatio","cssToDevicePixels","cssPixel","yInvert","ratio","getDevicePixelRatio","windowRatio","yHigh","xHigh","isWebGL","compositeSetters","glConstant","compositeSetter","getParameters","_getter","resetParameters","withParameters","_parameters$nocatch","nocatch","trunc","self_","console_","createDetectElementResize","nonce","_window","raf","attachEvent","requestFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","resetTriggers","__resizeTriggers__","expand","firstElementChild","contract","lastElementChild","expandChild","scrollLeft","scrollWidth","scrollTop","scrollHeight","scrollListener","__resizeRAF__","__resizeLast__","checkTriggers","__resizeListeners__","keyframeprefix","animationstartevent","domPrefixes","startEvents","elm","animationName","animationKeyframes","animationStyle","addResizeListener","doc","ownerDocument","elementStyle","css","getElementsByTagName","styleSheet","cssText","createTextNode","createStyles","__animationListener__","removeResizeListener","detachEvent","classCallCheck","createClass","protoProps","staticProps","possibleConstructorReturn","AutoSizer","_React$PureComponent","_temp","defaultHeight","defaultWidth","_parentNode","_style","paddingLeft","paddingRight","paddingTop","paddingBottom","_setRef","autoSizer","_autoSizer","inherits","defaultView","HTMLElement","_detectElementResize","outerStyle","childParams","bailoutOnChildren","toIObject","createProperty","getDesc","sign","EPSILON32","MAX32","MIN32","$abs","$sign","str","res","$native","NEGATIVE_ZERO","gOPS","getSymbols","_possibleConstructorReturn","onFreeze","$preventExtensions","az","bx","by","bz","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","r","angle","mag","cosine","acos","_defineProperty","_GL_PARAMETER_DEFAULT","_GL_PARAMETER_SETTERS","_GL_PARAMETER_GETTERS","GL_PARAMETER_DEFAULTS","disable","pixelStorei","GL_PARAMETER_SETTERS","cullFace","frontFace","lineWidth","stencilMaskSeparate","blendEquationSeparate","blendFuncSeparate","sampleCoverage","mask","backMask","backFunc","backRef","stencilFuncSeparate","_args3","_args4","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","stencilOpSeparate","glEnum","GL_COMPOSITE_PARAMETER_SETTERS","stencilFuncFront","stencilFuncBack","stencilOpFront","stencilOpBack","GL_HOOKED_SETTERS","capability","_hint","_update5","g","_update9","modeRGB","modeAlpha","_update10","dst","_update11","srcRGB","dstRGB","srcAlpha","dstAlpha","_update12","zNear","zFar","units","_update23","_update24","stencilMask","_update26","stencilFunc","_update28","_update29","stencilOp","fail","zfail","zpass","_update30","_update31","GL_PARAMETER_GETTERS","_setPrototypeOf","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","inc","_defineProperties","_createClass","sum","larg","exportName","VENDOR_PREFIXES","TEST_ELEMENT","setTimeoutContext","bindFn","invokeArrayArg","each","deprecate","deprecationMessage","stack","nextKey","extend","merge","inherit","properties","childP","baseP","boolOrFn","val","ifUndefined","val1","val2","addEventListeners","splitStr","removeEventListeners","hasParent","inStr","inArray","findByKey","uniqueArray","results","prefixed","prefix","camelProp","_uniqueId","getWindowForElement","parentWindow","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","PROPS_XY","PROPS_CLIENT_XY","Input","inputTarget","domHandler","inputHandler","pointersLen","changedPointersLen","isFirst","isFinal","session","pointersLength","firstInput","simpleCloneInputData","firstMultiple","deltaTime","getAngle","getDistance","offsetDelta","prevDelta","prevInput","computeDeltaXY","offsetDirection","getDirection","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","getRotation","maxPointers","velocityX","velocityY","last","lastInterval","computeIntervalInputData","computeInputData","recognize","p2","atan2","evEl","evTarget","evWin","POINTER_INPUT_MAP","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","2","3","4","5","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","SINGLE_TOUCH_INPUT_MAP","touchcancel","SingleTouchInput","started","normalizeSingleTouches","touches","changedTouches","TOUCH_INPUT_MAP","TouchInput","targetIds","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","touch","TouchMouseInput","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","isSyntheticEvent","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","NATIVE_TOUCH_ACTION","TOUCH_ACTION_MAP","touchMap","cssSupports","CSS","supports","getTouchActionProps","TouchAction","actions","getTouchAction","hasPanX","hasPanY","cleanTouchActions","preventDefaults","prevented","hasNone","isTapPointer","isTapMovement","isTapTouchTime","DIRECTION_LEFT","DIRECTION_UP","preventSrc","Recognizer","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","Hammer","preset","dropRecognizeWith","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","attrTest","optionPointers","isRecognized","DIRECTION_HORIZONTAL","directionTest","hasMoved","inOut","validPointers","validMovement","validTime","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","domEvents","inputClass","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","oldCssProps","toggleCssProps","stopped","curRecognizer","existing","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","triggerDomEvent","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","DIRECTION_NONE","DIRECTION_RIGHT","DIRECTION_DOWN","DIRECTION_VERTICAL","DIRECTION_ALL","ARRAY_TYPE","RANDOM","random","$seal","Vector","lengthSquared","mathArray","distanceSquared","dist","product","magnitude","multiplyScalar","ORIGIN","_Vector","Vector3","_ref$origin","origin","_ref2$origin","_ref3$origin","matrix4","matrix3","matrix2","quaternion"],"mappings":"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","file":"component---src-pages-index-js-de075fefe7d2fac62e7e.js","sourcesContent":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (var i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length) {\n  var callerName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nvar map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n","// 20.1.2.2 Number.isFinite(number)\nvar $export = require('./_export');\nvar _isFinite = require('./_global').isFinite;\n\n$export($export.S, 'Number', {\n  isFinite: function isFinite(it) {\n    return typeof it == 'number' && _isFinite(it);\n  }\n});\n","\"use strict\";\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"self\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.self;\n  }\n});\nObject.defineProperty(exports, \"window\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.window;\n  }\n});\nObject.defineProperty(exports, \"global\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.global;\n  }\n});\nObject.defineProperty(exports, \"document\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.document;\n  }\n});\nObject.defineProperty(exports, \"process\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.process;\n  }\n});\nObject.defineProperty(exports, \"console\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.console;\n  }\n});\nObject.defineProperty(exports, \"isBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"isBrowserMainThread\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.isBrowserMainThread;\n  }\n});\nObject.defineProperty(exports, \"getBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"isMobile\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.isMobile;\n  }\n});\nObject.defineProperty(exports, \"isElectron\", {\n  enumerable: true,\n  get: function get() {\n    return _isElectron[\"default\"];\n  }\n});\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireWildcard(require(\"./is-browser\"));\n\nvar _getBrowser = _interopRequireWildcard(require(\"./get-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));","'use strict';\n// B.2.3.6 String.prototype.fixed()\nrequire('./_string-html')('fixed', function (createHTML) {\n  return function fixed() {\n    return createHTML(this, 'tt', '', '');\n  };\n});\n","\"use strict\";\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = isElectron;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nfunction isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && (0, _typeof2[\"default\"])(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && (0, _typeof2[\"default\"])(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : (0, _typeof2[\"default\"])(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","var _typeof = require(\"../helpers/typeof\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nmodule.exports = _interopRequireWildcard;","var window_ = typeof window !== 'undefined' ? window : global;\nvar global_ = typeof global !== 'undefined' ? global : window;\nvar document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport { config, formatValue, equals as _equals, isArray } from '../../lib/common';\nimport assert from '../../lib/assert';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MathArray).apply(this, arguments));\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"from\",\n    value: function from(arrayOrObject) {\n      return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"to\",\n    value: function to(arrayOrObject) {\n      if (arrayOrObject === this) {\n        return this;\n      }\n\n      return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n  }, {\n    key: \"toTarget\",\n    value: function toTarget(target) {\n      return target ? this.to(target) : this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scalar;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiplyByScalar\",\n    value: function multiplyByScalar(scalar) {\n      return this.scale(scalar);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate()) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      assert(false);\n      return 0;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      assert(false);\n      return 0;\n    }\n  }, {\n    key: \"elements\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport isElectron from './is-electron';\nexport default function isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.regexp.match\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport PropTypes from 'prop-types';\nimport { document } from '../utils/globals';\n\nfunction noop() {}\n\nfunction defaultOnError(event) {\n  if (event) {\n    console.error(event.error);\n  }\n}\n\nvar propTypes = {\n  container: PropTypes.object,\n  gl: PropTypes.object,\n  mapboxApiAccessToken: PropTypes.string,\n  mapboxApiUrl: PropTypes.string,\n  attributionControl: PropTypes.bool,\n  preserveDrawingBuffer: PropTypes.bool,\n  reuseMaps: PropTypes.bool,\n  transformRequest: PropTypes.func,\n  mapOptions: PropTypes.object,\n  mapStyle: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  visible: PropTypes.bool,\n  asyncRender: PropTypes.bool,\n  onLoad: PropTypes.func,\n  onError: PropTypes.func,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  viewState: PropTypes.object,\n  longitude: PropTypes.number,\n  latitude: PropTypes.number,\n  zoom: PropTypes.number,\n  bearing: PropTypes.number,\n  pitch: PropTypes.number,\n  altitude: PropTypes.number\n};\nvar defaultProps = {\n  container: document.body,\n  mapboxApiAccessToken: getAccessToken(),\n  mapboxApiUrl: 'https://api.mapbox.com',\n  preserveDrawingBuffer: false,\n  attributionControl: true,\n  reuseMaps: false,\n  mapOptions: {},\n  mapStyle: 'mapbox://styles/mapbox/light-v8',\n  visible: true,\n  asyncRender: false,\n  onLoad: noop,\n  onError: defaultOnError,\n  width: 0,\n  height: 0,\n  longitude: 0,\n  latitude: 0,\n  zoom: 0,\n  bearing: 0,\n  pitch: 0,\n  altitude: 1.5\n};\nexport function getAccessToken() {\n  var accessToken = null;\n\n  if (typeof window !== 'undefined' && window.location) {\n    var match = window.location.search.match(/access_token=([^&\\/]*)/);\n    accessToken = match && match[1];\n  }\n\n  if (!accessToken && typeof process !== 'undefined') {\n    accessToken = accessToken || process.env.MapboxAccessToken || process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\n  }\n\n  return accessToken || 'no-token';\n}\n\nfunction checkPropTypes(props) {\n  var component = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'component';\n\n  if (props.debug) {\n    PropTypes.checkPropTypes(propTypes, props, 'prop', component);\n  }\n}\n\nvar Mapbox = function () {\n  function Mapbox(props) {\n    var _this = this;\n\n    _classCallCheck(this, Mapbox);\n\n    _defineProperty(this, \"mapboxgl\", void 0);\n\n    _defineProperty(this, \"props\", defaultProps);\n\n    _defineProperty(this, \"_map\", null);\n\n    _defineProperty(this, \"width\", 0);\n\n    _defineProperty(this, \"height\", 0);\n\n    _defineProperty(this, \"_fireLoadEvent\", function () {\n      _this.props.onLoad({\n        type: 'load',\n        target: _this._map\n      });\n    });\n\n    if (!props.mapboxgl) {\n      throw new Error('Mapbox not available');\n    }\n\n    this.mapboxgl = props.mapboxgl;\n\n    if (!Mapbox.initialized) {\n      Mapbox.initialized = true;\n\n      this._checkStyleSheet(this.mapboxgl.version);\n    }\n\n    this._initialize(props);\n  }\n\n  _createClass(Mapbox, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this._destroy();\n\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this._update(this.props, props);\n\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      this._map.resize();\n\n      return this;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      var map = this._map;\n\n      if (map.style) {\n        if (map._frame) {\n          map._frame.cancel();\n\n          map._frame = null;\n        }\n\n        map._render();\n      }\n    }\n  }, {\n    key: \"getMap\",\n    value: function getMap() {\n      return this._map;\n    }\n  }, {\n    key: \"_reuse\",\n    value: function _reuse(props) {\n      this._map = Mapbox.savedMap;\n\n      var oldContainer = this._map.getContainer();\n\n      var newContainer = props.container;\n      newContainer.classList.add('mapboxgl-map');\n\n      while (oldContainer.childNodes.length > 0) {\n        newContainer.appendChild(oldContainer.childNodes[0]);\n      }\n\n      this._map._container = newContainer;\n      Mapbox.savedMap = null;\n\n      if (props.mapStyle) {\n        this._map.setStyle(props.mapStyle, {\n          diff: false\n        });\n      }\n\n      if (this._map.isStyleLoaded()) {\n        this._fireLoadEvent();\n      } else {\n        this._map.once('styledata', this._fireLoadEvent);\n      }\n    }\n  }, {\n    key: \"_create\",\n    value: function _create(props) {\n      if (props.reuseMaps && Mapbox.savedMap) {\n        this._reuse(props);\n      } else {\n        if (props.gl) {\n          var getContext = HTMLCanvasElement.prototype.getContext;\n\n          HTMLCanvasElement.prototype.getContext = function () {\n            HTMLCanvasElement.prototype.getContext = getContext;\n            return props.gl;\n          };\n        }\n\n        var mapOptions = {\n          container: props.container,\n          center: [0, 0],\n          zoom: 8,\n          pitch: 0,\n          bearing: 0,\n          maxZoom: 24,\n          style: props.mapStyle,\n          interactive: false,\n          trackResize: false,\n          attributionControl: props.attributionControl,\n          preserveDrawingBuffer: props.preserveDrawingBuffer\n        };\n\n        if (props.transformRequest) {\n          mapOptions.transformRequest = props.transformRequest;\n        }\n\n        this._map = new this.mapboxgl.Map(Object.assign({}, mapOptions, props.mapOptions));\n\n        this._map.once('load', props.onLoad);\n\n        this._map.on('error', props.onError);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_destroy\",\n    value: function _destroy() {\n      if (!this._map) {\n        return;\n      }\n\n      if (!Mapbox.savedMap) {\n        Mapbox.savedMap = this._map;\n\n        this._map.off('load', this.props.onLoad);\n\n        this._map.off('error', this.props.onError);\n\n        this._map.off('styledata', this._fireLoadEvent);\n      } else {\n        this._map.remove();\n      }\n\n      this._map = null;\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize(props) {\n      var _this2 = this;\n\n      props = Object.assign({}, defaultProps, props);\n      checkPropTypes(props, 'Mapbox');\n      this.mapboxgl.accessToken = props.mapboxApiAccessToken || defaultProps.mapboxApiAccessToken;\n      this.mapboxgl.baseApiUrl = props.mapboxApiUrl;\n\n      this._create(props);\n\n      var _props = props,\n          container = _props.container;\n      Object.defineProperty(container, 'offsetWidth', {\n        get: function get() {\n          return _this2.width;\n        }\n      });\n      Object.defineProperty(container, 'clientWidth', {\n        get: function get() {\n          return _this2.width;\n        }\n      });\n      Object.defineProperty(container, 'offsetHeight', {\n        get: function get() {\n          return _this2.height;\n        }\n      });\n      Object.defineProperty(container, 'clientHeight', {\n        get: function get() {\n          return _this2.height;\n        }\n      });\n\n      var canvas = this._map.getCanvas();\n\n      if (canvas) {\n        canvas.style.outline = 'none';\n      }\n\n      this._updateMapViewport({}, props);\n\n      this._updateMapSize({}, props);\n\n      this.props = props;\n    }\n  }, {\n    key: \"_update\",\n    value: function _update(oldProps, newProps) {\n      if (!this._map) {\n        return;\n      }\n\n      newProps = Object.assign({}, this.props, newProps);\n      checkPropTypes(newProps, 'Mapbox');\n\n      var viewportChanged = this._updateMapViewport(oldProps, newProps);\n\n      var sizeChanged = this._updateMapSize(oldProps, newProps);\n\n      if (!newProps.asyncRender && (viewportChanged || sizeChanged)) {\n        this.redraw();\n      }\n\n      this.props = newProps;\n    }\n  }, {\n    key: \"_updateMapSize\",\n    value: function _updateMapSize(oldProps, newProps) {\n      var sizeChanged = oldProps.width !== newProps.width || oldProps.height !== newProps.height;\n\n      if (sizeChanged) {\n        this.width = newProps.width;\n        this.height = newProps.height;\n        this.resize();\n      }\n\n      return sizeChanged;\n    }\n  }, {\n    key: \"_updateMapViewport\",\n    value: function _updateMapViewport(oldProps, newProps) {\n      var oldViewState = this._getViewState(oldProps);\n\n      var newViewState = this._getViewState(newProps);\n\n      var viewportChanged = newViewState.latitude !== oldViewState.latitude || newViewState.longitude !== oldViewState.longitude || newViewState.zoom !== oldViewState.zoom || newViewState.pitch !== oldViewState.pitch || newViewState.bearing !== oldViewState.bearing || newViewState.altitude !== oldViewState.altitude;\n\n      if (viewportChanged) {\n        this._map.jumpTo(this._viewStateToMapboxProps(newViewState));\n\n        if (newViewState.altitude !== oldViewState.altitude) {\n          this._map.transform.altitude = newViewState.altitude;\n        }\n      }\n\n      return viewportChanged;\n    }\n  }, {\n    key: \"_getViewState\",\n    value: function _getViewState(props) {\n      var _ref = props.viewState || props,\n          longitude = _ref.longitude,\n          latitude = _ref.latitude,\n          zoom = _ref.zoom,\n          _ref$pitch = _ref.pitch,\n          pitch = _ref$pitch === void 0 ? 0 : _ref$pitch,\n          _ref$bearing = _ref.bearing,\n          bearing = _ref$bearing === void 0 ? 0 : _ref$bearing,\n          _ref$altitude = _ref.altitude,\n          altitude = _ref$altitude === void 0 ? 1.5 : _ref$altitude;\n\n      return {\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom,\n        pitch: pitch,\n        bearing: bearing,\n        altitude: altitude\n      };\n    }\n  }, {\n    key: \"_checkStyleSheet\",\n    value: function _checkStyleSheet() {\n      var mapboxVersion = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '0.47.0';\n\n      if (typeof document === 'undefined') {\n        return;\n      }\n\n      try {\n        var testElement = document.createElement('div');\n        testElement.className = 'mapboxgl-map';\n        testElement.style.display = 'none';\n        document.body.append(testElement);\n        var isCssLoaded = window.getComputedStyle(testElement).position !== 'static';\n\n        if (!isCssLoaded) {\n          var link = document.createElement('link');\n          link.setAttribute('rel', 'stylesheet');\n          link.setAttribute('type', 'text/css');\n          link.setAttribute('href', \"https://api.tiles.mapbox.com/mapbox-gl-js/v\".concat(mapboxVersion, \"/mapbox-gl.css\"));\n          document.head.append(link);\n        }\n      } catch (error) {}\n    }\n  }, {\n    key: \"_viewStateToMapboxProps\",\n    value: function _viewStateToMapboxProps(viewState) {\n      return {\n        center: [viewState.longitude, viewState.latitude],\n        zoom: viewState.zoom,\n        bearing: viewState.bearing,\n        pitch: viewState.pitch\n      };\n    }\n  }]);\n\n  return Mapbox;\n}();\n\n_defineProperty(Mapbox, \"initialized\", false);\n\n_defineProperty(Mapbox, \"propTypes\", propTypes);\n\n_defineProperty(Mapbox, \"defaultProps\", defaultProps);\n\n_defineProperty(Mapbox, \"savedMap\", null);\n\nexport { Mapbox as default };","'use strict';\nif (require('./_descriptors')) {\n  var LIBRARY = require('./_library');\n  var global = require('./_global');\n  var fails = require('./_fails');\n  var $export = require('./_export');\n  var $typed = require('./_typed');\n  var $buffer = require('./_typed-buffer');\n  var ctx = require('./_ctx');\n  var anInstance = require('./_an-instance');\n  var propertyDesc = require('./_property-desc');\n  var hide = require('./_hide');\n  var redefineAll = require('./_redefine-all');\n  var toInteger = require('./_to-integer');\n  var toLength = require('./_to-length');\n  var toIndex = require('./_to-index');\n  var toAbsoluteIndex = require('./_to-absolute-index');\n  var toPrimitive = require('./_to-primitive');\n  var has = require('./_has');\n  var classof = require('./_classof');\n  var isObject = require('./_is-object');\n  var toObject = require('./_to-object');\n  var isArrayIter = require('./_is-array-iter');\n  var create = require('./_object-create');\n  var getPrototypeOf = require('./_object-gpo');\n  var gOPN = require('./_object-gopn').f;\n  var getIterFn = require('./core.get-iterator-method');\n  var uid = require('./_uid');\n  var wks = require('./_wks');\n  var createArrayMethod = require('./_array-methods');\n  var createArrayIncludes = require('./_array-includes');\n  var speciesConstructor = require('./_species-constructor');\n  var ArrayIterators = require('./es6.array.iterator');\n  var Iterators = require('./_iterators');\n  var $iterDetect = require('./_iter-detect');\n  var setSpecies = require('./_set-species');\n  var arrayFill = require('./_array-fill');\n  var arrayCopyWithin = require('./_array-copy-within');\n  var $DP = require('./_object-dp');\n  var $GOPD = require('./_object-gopd');\n  var dP = $DP.f;\n  var gOPD = $GOPD.f;\n  var RangeError = global.RangeError;\n  var TypeError = global.TypeError;\n  var Uint8Array = global.Uint8Array;\n  var ARRAY_BUFFER = 'ArrayBuffer';\n  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;\n  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\n  var PROTOTYPE = 'prototype';\n  var ArrayProto = Array[PROTOTYPE];\n  var $ArrayBuffer = $buffer.ArrayBuffer;\n  var $DataView = $buffer.DataView;\n  var arrayForEach = createArrayMethod(0);\n  var arrayFilter = createArrayMethod(2);\n  var arraySome = createArrayMethod(3);\n  var arrayEvery = createArrayMethod(4);\n  var arrayFind = createArrayMethod(5);\n  var arrayFindIndex = createArrayMethod(6);\n  var arrayIncludes = createArrayIncludes(true);\n  var arrayIndexOf = createArrayIncludes(false);\n  var arrayValues = ArrayIterators.values;\n  var arrayKeys = ArrayIterators.keys;\n  var arrayEntries = ArrayIterators.entries;\n  var arrayLastIndexOf = ArrayProto.lastIndexOf;\n  var arrayReduce = ArrayProto.reduce;\n  var arrayReduceRight = ArrayProto.reduceRight;\n  var arrayJoin = ArrayProto.join;\n  var arraySort = ArrayProto.sort;\n  var arraySlice = ArrayProto.slice;\n  var arrayToString = ArrayProto.toString;\n  var arrayToLocaleString = ArrayProto.toLocaleString;\n  var ITERATOR = wks('iterator');\n  var TAG = wks('toStringTag');\n  var TYPED_CONSTRUCTOR = uid('typed_constructor');\n  var DEF_CONSTRUCTOR = uid('def_constructor');\n  var ALL_CONSTRUCTORS = $typed.CONSTR;\n  var TYPED_ARRAY = $typed.TYPED;\n  var VIEW = $typed.VIEW;\n  var WRONG_LENGTH = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function (O, length) {\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function () {\n    // eslint-disable-next-line no-undef\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {\n    new Uint8Array(1).set({});\n  });\n\n  var toOffset = function (it, BYTES) {\n    var offset = toInteger(it);\n    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function (it) {\n    if (isObject(it) && TYPED_ARRAY in it) return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function (C, length) {\n    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function (O, list) {\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function (C, list) {\n    var index = 0;\n    var length = list.length;\n    var result = allocate(C, length);\n    while (length > index) result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function (it, key, internal) {\n    dP(it, key, { get: function () { return this._d[internal]; } });\n  };\n\n  var $from = function from(source /* , mapfn, thisArg */) {\n    var O = toObject(source);\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var iterFn = getIterFn(O);\n    var i, length, values, result, step, iterator;\n    if (iterFn != undefined && !isArrayIter(iterFn)) {\n      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {\n        values.push(step.value);\n      } O = values;\n    }\n    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);\n    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/* ...items */) {\n    var index = 0;\n    var length = arguments.length;\n    var result = allocate(this, length);\n    while (length > index) result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString() {\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /* , end */) {\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /* , thisArg */) {\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /* , thisArg */) {\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /* , thisArg */) {\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /* , thisArg */) {\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /* , thisArg */) {\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /* , fromIndex */) {\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /* , fromIndex */) {\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator) { // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /* , thisArg */) {\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse() {\n      var that = this;\n      var length = validate(that).length;\n      var middle = Math.floor(length / 2);\n      var index = 0;\n      var value;\n      while (index < middle) {\n        value = that[index];\n        that[index++] = that[--length];\n        that[length] = value;\n      } return that;\n    },\n    some: function some(callbackfn /* , thisArg */) {\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn) {\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end) {\n      var O = validate(this);\n      var length = O.length;\n      var $begin = toAbsoluteIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end) {\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /* , offset */) {\n    validate(this);\n    var offset = toOffset(arguments[1], 1);\n    var length = this.length;\n    var src = toObject(arrayLike);\n    var len = toLength(src.length);\n    var index = 0;\n    if (len + offset > length) throw RangeError(WRONG_LENGTH);\n    while (index < len) this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries() {\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys() {\n      return arrayKeys.call(validate(this));\n    },\n    values: function values() {\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function (target, key) {\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key) {\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc) {\n    if (isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ) {\n      target[key] = desc.value;\n      return target;\n    } return dP(target, key, desc);\n  };\n\n  if (!ALL_CONSTRUCTORS) {\n    $GOPD.f = $getDesc;\n    $DP.f = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty: $setDesc\n  });\n\n  if (fails(function () { arrayToString.call({}); })) {\n    arrayToString = arrayToLocaleString = function toString() {\n      return arrayJoin.call(this);\n    };\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice: $slice,\n    set: $set,\n    constructor: function () { /* noop */ },\n    toString: arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function () { return this[TYPED_ARRAY]; }\n  });\n\n  // eslint-disable-next-line max-statements\n  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {\n    CLAMPED = !!CLAMPED;\n    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + KEY;\n    var SETTER = 'set' + KEY;\n    var TypedArray = global[NAME];\n    var Base = TypedArray || {};\n    var TAC = TypedArray && getPrototypeOf(TypedArray);\n    var FORCED = !TypedArray || !$typed.ABV;\n    var O = {};\n    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function (that, index) {\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function (that, index, value) {\n      var data = that._d;\n      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function (that, index) {\n      dP(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if (FORCED) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME, '_d');\n        var index = 0;\n        var offset = 0;\n        var buffer, byteLength, length, klass;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new $ArrayBuffer(byteLength);\n        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (TYPED_ARRAY in data) {\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if (!fails(function () {\n      TypedArray(1);\n    }) || !fails(function () {\n      new TypedArray(-1); // eslint-disable-line no-new\n    }) || !$iterDetect(function (iter) {\n      new TypedArray(); // eslint-disable-line no-new\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(1.5); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if (!isObject(data)) return new Base(toIndex(data));\n        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if (TYPED_ARRAY in data) return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {\n        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator = TypedArrayPrototype[ITERATOR];\n    var CORRECT_ITER_NAME = !!$nativeIterator\n      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);\n    var $iterator = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {\n      dP(TypedArrayPrototype, TAG, {\n        get: function () { return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES\n    });\n\n    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {\n      from: $from,\n      of: $of\n    });\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;\n\n    $export($export.P + $export.F * fails(function () {\n      new TypedArray(1).slice();\n    }), NAME, { slice: $slice });\n\n    $export($export.P + $export.F * (fails(function () {\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();\n    }) || !fails(function () {\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, { toLocaleString: $toLocaleString });\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function () { /* empty */ };\n","'use strict';\nvar global = require('./_global');\nvar DESCRIPTORS = require('./_descriptors');\nvar LIBRARY = require('./_library');\nvar $typed = require('./_typed');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar fails = require('./_fails');\nvar anInstance = require('./_an-instance');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar toIndex = require('./_to-index');\nvar gOPN = require('./_object-gopn').f;\nvar dP = require('./_object-dp').f;\nvar arrayFill = require('./_array-fill');\nvar setToStringTag = require('./_set-to-string-tag');\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length!';\nvar WRONG_INDEX = 'Wrong index!';\nvar $ArrayBuffer = global[ARRAY_BUFFER];\nvar $DataView = global[DATA_VIEW];\nvar Math = global.Math;\nvar RangeError = global.RangeError;\n// eslint-disable-next-line no-shadow-restricted-names\nvar Infinity = global.Infinity;\nvar BaseBuffer = $ArrayBuffer;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\nvar BUFFER = 'buffer';\nvar BYTE_LENGTH = 'byteLength';\nvar BYTE_OFFSET = 'byteOffset';\nvar $BUFFER = DESCRIPTORS ? '_b' : BUFFER;\nvar $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;\nvar $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nfunction packIEEE754(value, mLen, nBytes) {\n  var buffer = new Array(nBytes);\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var i = 0;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  var e, m, c;\n  value = abs(value);\n  // eslint-disable-next-line no-self-compare\n  if (value != value || value === Infinity) {\n    // eslint-disable-next-line no-self-compare\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if (value * (c = pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n}\nfunction unpackIEEE754(buffer, mLen, nBytes) {\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = eLen - 7;\n  var i = nBytes - 1;\n  var s = buffer[i--];\n  var e = s & 127;\n  var m;\n  s >>= 7;\n  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n}\n\nfunction unpackI32(bytes) {\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n}\nfunction packI8(it) {\n  return [it & 0xff];\n}\nfunction packI16(it) {\n  return [it & 0xff, it >> 8 & 0xff];\n}\nfunction packI32(it) {\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n}\nfunction packF64(it) {\n  return packIEEE754(it, 52, 8);\n}\nfunction packF32(it) {\n  return packIEEE754(it, 23, 4);\n}\n\nfunction addGetter(C, key, internal) {\n  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });\n}\n\nfunction get(view, bytes, index, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n}\nfunction set(view, bytes, index, conversion, value, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = conversion(+value);\n  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n}\n\nif (!$typed.ABV) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    this._b = arrayFill.call(new Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH];\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if (!fails(function () {\n    $ArrayBuffer(1);\n  }) || !fails(function () {\n    new $ArrayBuffer(-1); // eslint-disable-line no-new\n  }) || fails(function () {\n    new $ArrayBuffer(); // eslint-disable-line no-new\n    new $ArrayBuffer(1.5); // eslint-disable-line no-new\n    new $ArrayBuffer(NaN); // eslint-disable-line no-new\n    return $ArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new BaseBuffer(toIndex(length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);\n    }\n    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n","import \"core-js/modules/es6.object.seal\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.function.bind\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { GL_PARAMETER_DEFAULTS, GL_HOOKED_SETTERS } from './webgl-parameter-tables';\nimport { setParameters, getParameters } from './unified-parameter-api';\nimport { assert, deepArrayEqual } from '../utils';\n\nfunction installGetterOverride(gl, functionName) {\n  var originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get() {\n    var pname = arguments.length <= 0 ? undefined : arguments[0];\n\n    if (!(pname in gl.state.cache)) {\n      gl.state.cache[pname] = originalGetterFunc.apply(void 0, arguments);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc.apply(void 0, arguments);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-from-cache\"),\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  var originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set() {\n    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n      params[_key] = arguments[_key];\n    }\n\n    var _setter = setter.apply(void 0, [gl.state._updateCache].concat(params)),\n        valueChanged = _setter.valueChanged,\n        oldValue = _setter.oldValue;\n\n    if (valueChanged) {\n      originalSetterFunc.apply(void 0, params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-to-cache\"),\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  var originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nvar GLState = function () {\n  function GLState(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$copyState = _ref.copyState,\n        copyState = _ref$copyState === void 0 ? false : _ref$copyState,\n        _ref$log = _ref.log,\n        log = _ref$log === void 0 ? function () {} : _ref$log;\n\n    _classCallCheck(this, GLState);\n\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(GLState, [{\n    key: \"push\",\n    value: function push() {\n      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.stateStack.push({});\n    }\n  }, {\n    key: \"pop\",\n    value: function pop() {\n      assert(this.stateStack.length > 0);\n      var oldValues = this.stateStack[this.stateStack.length - 1];\n      setParameters(this.gl, oldValues, this.cache);\n      this.stateStack.pop();\n    }\n  }, {\n    key: \"_updateCache\",\n    value: function _updateCache(values) {\n      var valueChanged = false;\n      var oldValue;\n      var oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n      for (var key in values) {\n        assert(key !== undefined);\n        var value = values[key];\n        var cached = this.cache[key];\n\n        if (!deepArrayEqual(value, cached)) {\n          valueChanged = true;\n          oldValue = cached;\n\n          if (oldValues && !(key in oldValues)) {\n            oldValues[key] = cached;\n          }\n\n          this.cache[key] = value;\n        }\n      }\n\n      return {\n        valueChanged: valueChanged,\n        oldValue: oldValue\n      };\n    }\n  }]);\n\n  return GLState;\n}();\n\nexport default function trackContextState(gl) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$enable = _ref2.enable,\n      enable = _ref2$enable === void 0 ? true : _ref2$enable,\n      copyState = _ref2.copyState;\n\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    var global_ = typeof global !== 'undefined' ? global : window;\n\n    if (global_.polyfillContext) {\n      global_.polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState: copyState,\n      enable: enable\n    });\n    installProgramSpy(gl);\n\n    for (var key in GL_HOOKED_SETTERS) {\n      var setter = GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}","// 20.2.2.16 Math.fround(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { fround: require('./_math-fround') });\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","// https://tc39.github.io/ecma262/#sec-toindex\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length!');\n  return length;\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar uid = require('./_uid');\nvar TYPED = uid('typed_array');\nvar VIEW = uid('view');\nvar ABV = !!(global.ArrayBuffer && global.DataView);\nvar CONSTR = ABV;\nvar i = 0;\nvar l = 9;\nvar Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile (i < l) {\n  if (Typed = global[TypedArrayConstructors[i++]]) {\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV: ABV,\n  CONSTR: CONSTR,\n  TYPED: TYPED,\n  VIEW: VIEW\n};\n","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n","require('./_typed-array')('Int16', 2, function (init) {\n  return function Int16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","import \"core-js/modules/es6.date.now\";\nexport default function getHiResTimestamp() {\n  var timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    var timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { polyfillVertexArrayObject } from './polyfill-vertex-array-object';\nimport { assert } from '../utils';\nimport { WEBGL2_CONTEXT_POLYFILLS, WEBGL2_CONTEXT_OVERRIDES } from './polyfill-table';\nexport default function polyfillContext(gl) {\n  gl.luma = gl.luma || {};\n\n  if (!gl.luma.polyfilled) {\n    polyfillVertexArrayObject(gl);\n    initializeExtensions(gl);\n    installPolyfills(gl, WEBGL2_CONTEXT_POLYFILLS);\n    installOverrides(gl, {\n      target: gl.luma,\n      target2: gl\n    });\n    gl.luma.polyfilled = true;\n  }\n\n  return gl;\n}\nvar global_ = typeof global !== 'undefined' ? global : window;\nglobal_.polyfillContext = polyfillContext;\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {};\n  var EXTENSIONS = gl.getSupportedExtensions() || [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = EXTENSIONS[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var extension = _step.value;\n      gl.luma[extension] = gl.getExtension(extension);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction installOverrides(gl, _ref) {\n  var target = _ref.target,\n      target2 = _ref.target2;\n  Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach(function (key) {\n    if (typeof WEBGL2_CONTEXT_OVERRIDES[key] === 'function') {\n      var originalFunc = gl[key] ? gl[key].bind(gl) : function () {};\n      var polyfill = WEBGL2_CONTEXT_OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n}\n\nfunction installPolyfills(gl, polyfills) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = Object.getOwnPropertyNames(polyfills)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var extension = _step2.value;\n\n      if (extension !== 'overrides') {\n        polyfillExtension(gl, {\n          extension: extension,\n          target: gl.luma,\n          target2: gl\n        });\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction polyfillExtension(gl, _ref2) {\n  var extension = _ref2.extension,\n      target = _ref2.target,\n      target2 = _ref2.target2;\n  var defaults = WEBGL2_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  var _defaults$meta = defaults.meta,\n      meta = _defaults$meta === void 0 ? {} : _defaults$meta;\n  var _meta$suffix = meta.suffix,\n      suffix = _meta$suffix === void 0 ? '' : _meta$suffix;\n  var ext = gl.getExtension(extension);\n\n  var _loop = function _loop() {\n    var key = _Object$keys[_i];\n    var extKey = \"\".concat(key).concat(suffix);\n    var polyfill = null;\n\n    if (key === 'meta') {} else if (typeof gl[key] === 'function') {} else if (ext && typeof ext[extKey] === 'function') {\n      polyfill = function polyfill() {\n        return ext[extKey].apply(ext, arguments);\n      };\n    } else if (typeof defaults[key] === 'function') {\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  };\n\n  for (var _i = 0, _Object$keys = Object.keys(defaults); _i < _Object$keys.length; _i++) {\n    _loop();\n  }\n}","import \"core-js/modules/es6.array.index-of\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && _typeof(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && _typeof(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}","// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])\nvar $export = require('./_export');\nvar create = require('./_object-create');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar bind = require('./_bind');\nvar rConstruct = (require('./_global').Reflect || {}).construct;\n\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(rConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  rConstruct(function () { /* empty */ });\n});\n\n$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","\"use strict\";\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMobile = isMobile;\nexports[\"default\"] = getBrowser;\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireDefault(require(\"./is-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isMobile() {\n  return typeof _globals.window.orientation !== 'undefined';\n}\n\nfunction getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !(0, _isBrowser[\"default\"])()) {\n    return 'Node';\n  }\n\n  if ((0, _isElectron[\"default\"])(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (_globals.window.chrome) {\n    return 'Chrome';\n  }\n\n  if (_globals.window.safari) {\n    return 'Safari';\n  }\n\n  if (_globals.window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","// 20.2.2.12 Math.cosh(x)\nvar $export = require('./_export');\nvar exp = Math.exp;\n\n$export($export.S, 'Math', {\n  cosh: function cosh(x) {\n    return (exp(x = +x) + exp(-x)) / 2;\n  }\n});\n","var $export = require('./_export');\n$export($export.G + $export.W + $export.F * !require('./_typed').ABV, {\n  DataView: require('./_typed-buffer').DataView\n});\n","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import \"core-js/modules/es6.array.index-of\";\nimport { global } from 'probe.gl/env';\nvar glErrorShadow = {};\n\nfunction error(msg) {\n  if (global.console && global.console.error) {\n    global.console.error(msg);\n  }\n}\n\nfunction log(msg) {\n  if (global.console && global.console.log) {\n    global.console.log(msg);\n  }\n}\n\nfunction synthesizeGLError(err, opt_msg) {\n  glErrorShadow[err] = true;\n\n  if (opt_msg !== undefined) {\n    error(opt_msg);\n  }\n}\n\nfunction wrapGLError(gl) {\n  var f = gl.getError;\n\n  gl.getError = function getError() {\n    var err;\n\n    do {\n      err = f.apply(gl);\n\n      if (err !== 0) {\n        glErrorShadow[err] = true;\n      }\n    } while (err !== 0);\n\n    for (err in glErrorShadow) {\n      if (glErrorShadow[err]) {\n        delete glErrorShadow[err];\n        return parseInt(err, 10);\n      }\n    }\n\n    return 0;\n  };\n}\n\nvar WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n  var gl = ext.gl;\n  this.ext = ext;\n  this.isAlive = true;\n  this.hasBeenBound = false;\n  this.elementArrayBuffer = null;\n  this.attribs = new Array(ext.maxVertexAttribs);\n\n  for (var n = 0; n < this.attribs.length; n++) {\n    var attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n    this.attribs[n] = attrib;\n  }\n\n  this.maxAttrib = 0;\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n  this.enabled = false;\n  this.buffer = null;\n  this.size = 4;\n  this.type = 5126;\n  this.normalized = false;\n  this.stride = 16;\n  this.offset = 0;\n  this.cached = '';\n  this.recache();\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n  this.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(':');\n};\n\nvar OESVertexArrayObject = function OESVertexArrayObject(gl) {\n  var self = this;\n  this.gl = gl;\n  wrapGLError(gl);\n  var original = this.original = {\n    getParameter: gl.getParameter,\n    enableVertexAttribArray: gl.enableVertexAttribArray,\n    disableVertexAttribArray: gl.disableVertexAttribArray,\n    bindBuffer: gl.bindBuffer,\n    getVertexAttrib: gl.getVertexAttrib,\n    vertexAttribPointer: gl.vertexAttribPointer\n  };\n\n  gl.getParameter = function getParameter(pname) {\n    if (pname === self.VERTEX_ARRAY_BINDING_OES) {\n      if (self.currentVertexArrayObject === self.defaultVertexArrayObject) {\n        return null;\n      }\n\n      return self.currentVertexArrayObject;\n    }\n\n    return original.getParameter.apply(this, arguments);\n  };\n\n  gl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n    var vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    var attrib = vao.attribs[index];\n    attrib.enabled = true;\n    return original.enableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n    var vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    var attrib = vao.attribs[index];\n    attrib.enabled = false;\n    return original.disableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.bindBuffer = function bindBuffer(target, buffer) {\n    switch (target) {\n      case 34962:\n        self.currentArrayBuffer = buffer;\n        break;\n\n      case 34963:\n        self.currentVertexArrayObject.elementArrayBuffer = buffer;\n        break;\n\n      default:\n    }\n\n    return original.bindBuffer.apply(this, arguments);\n  };\n\n  gl.getVertexAttrib = function getVertexAttrib(index, pname) {\n    var vao = self.currentVertexArrayObject;\n    var attrib = vao.attribs[index];\n\n    switch (pname) {\n      case 34975:\n        return attrib.buffer;\n\n      case 34338:\n        return attrib.enabled;\n\n      case 34339:\n        return attrib.size;\n\n      case 34340:\n        return attrib.stride;\n\n      case 34341:\n        return attrib.type;\n\n      case 34922:\n        return attrib.normalized;\n\n      default:\n        return original.getVertexAttrib.apply(this, arguments);\n    }\n  };\n\n  gl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n    var vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, indx);\n    var attrib = vao.attribs[indx];\n    attrib.buffer = self.currentArrayBuffer;\n    attrib.size = size;\n    attrib.type = type;\n    attrib.normalized = normalized;\n    attrib.stride = stride;\n    attrib.offset = offset;\n    attrib.recache();\n    return original.vertexAttribPointer.apply(this, arguments);\n  };\n\n  if (gl.instrumentExtension) {\n    gl.instrumentExtension(this, 'OES_vertex_array_object');\n  }\n\n  if (gl.canvas) {\n    gl.canvas.addEventListener('webglcontextrestored', function () {\n      log('OESVertexArrayObject emulation library context restored');\n      self.reset_();\n    }, true);\n  }\n\n  this.reset_();\n};\n\nOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\nOESVertexArrayObject.prototype.reset_ = function reset_() {\n  var contextWasLost = this.vertexArrayObjects !== undefined;\n\n  if (contextWasLost) {\n    for (var ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n      this.vertexArrayObjects.isAlive = false;\n    }\n  }\n\n  var gl = this.gl;\n  this.maxVertexAttribs = gl.getParameter(34921);\n  this.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n  this.currentVertexArrayObject = null;\n  this.currentArrayBuffer = null;\n  this.vertexArrayObjects = [this.defaultVertexArrayObject];\n  this.bindVertexArrayOES(null);\n};\n\nOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n  var arrayObject = new WebGLVertexArrayObjectOES(this);\n  this.vertexArrayObjects.push(arrayObject);\n  return arrayObject;\n};\n\nOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n  arrayObject.isAlive = false;\n  this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n  if (this.currentVertexArrayObject === arrayObject) {\n    this.bindVertexArrayOES(null);\n  }\n};\n\nOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n  if (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n    if (arrayObject.hasBeenBound && arrayObject.ext === this) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n  var gl = this.gl;\n\n  if (arrayObject && !arrayObject.isAlive) {\n    synthesizeGLError(1282, 'bindVertexArrayOES: attempt to bind deleted arrayObject');\n    return;\n  }\n\n  var original = this.original;\n  var oldVAO = this.currentVertexArrayObject;\n  this.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n  this.currentVertexArrayObject.hasBeenBound = true;\n  var newVAO = this.currentVertexArrayObject;\n\n  if (oldVAO === newVAO) {\n    return;\n  }\n\n  if (!oldVAO || newVAO.elementArrayBuffer !== oldVAO.elementArrayBuffer) {\n    original.bindBuffer.call(gl, 34963, newVAO.elementArrayBuffer);\n  }\n\n  var currentBinding = this.currentArrayBuffer;\n  var maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n  for (var n = 0; n <= maxAttrib; n++) {\n    var attrib = newVAO.attribs[n];\n    var oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n    if (!oldVAO || attrib.enabled !== oldAttrib.enabled) {\n      if (attrib.enabled) {\n        original.enableVertexAttribArray.call(gl, n);\n      } else {\n        original.disableVertexAttribArray.call(gl, n);\n      }\n    }\n\n    if (attrib.enabled) {\n      var bufferChanged = false;\n\n      if (!oldVAO || attrib.buffer !== oldAttrib.buffer) {\n        if (currentBinding !== attrib.buffer) {\n          original.bindBuffer.call(gl, 34962, attrib.buffer);\n          currentBinding = attrib.buffer;\n        }\n\n        bufferChanged = true;\n      }\n\n      if (bufferChanged || attrib.cached !== oldAttrib.cached) {\n        original.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n      }\n    }\n  }\n\n  if (this.currentArrayBuffer !== currentBinding) {\n    original.bindBuffer.call(gl, 34962, this.currentArrayBuffer);\n  }\n};\n\nexport function polyfillVertexArrayObject(gl) {\n  if (typeof gl.createVertexArray === 'function') {\n    return;\n  }\n\n  var original_getSupportedExtensions = gl.getSupportedExtensions;\n\n  gl.getSupportedExtensions = function getSupportedExtensions() {\n    var list = original_getSupportedExtensions.call(this) || [];\n\n    if (list.indexOf('OES_vertex_array_object') < 0) {\n      list.push('OES_vertex_array_object');\n    }\n\n    return list;\n  };\n\n  var original_getExtension = gl.getExtension;\n\n  gl.getExtension = function getExtension(name) {\n    var ext = original_getExtension.call(this, name);\n\n    if (ext) {\n      return ext;\n    }\n\n    if (name !== 'OES_vertex_array_object') {\n      return null;\n    }\n\n    if (!gl.__OESVertexArrayObject) {\n      this.__OESVertexArrayObject = new OESVertexArrayObject(this);\n    }\n\n    return this.__OESVertexArrayObject;\n  };\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nvar process_ = globals.process || {};\nvar console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// 20.2.2.14 Math.expm1(x)\nvar $expm1 = Math.expm1;\nmodule.exports = (!$expm1\n  // Old FF bug\n  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168\n  // Tor Browser bug\n  || $expm1(-2e-17) != -2e-17\n) ? function expm1(x) {\n  return (x = +x) == 0 ? x : x > -1e-6 && x < 1e-6 ? x + x * x / 2 : Math.exp(x) - 1;\n} : $expm1;\n","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","import \"core-js/modules/es6.array.fill\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\n\nvar Matrix = function (_MathArray) {\n  _inherits(Matrix, _MathArray);\n\n  function Matrix() {\n    _classCallCheck(this, Matrix);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Matrix).apply(this, arguments));\n  }\n\n  _createClass(Matrix, [{\n    key: \"toString\",\n    value: function toString() {\n      var string = '[';\n\n      if (config.printRowMajor) {\n        string += 'row-major:';\n\n        for (var row = 0; row < this.RANK; ++row) {\n          for (var col = 0; col < this.RANK; ++col) {\n            string += \" \".concat(this[col * this.RANK + row]);\n          }\n        }\n      } else {\n        string += 'column-major:';\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          string += \" \".concat(this[i]);\n        }\n      }\n\n      string += ']';\n      return string;\n    }\n  }, {\n    key: \"getElementIndex\",\n    value: function getElementIndex(row, col) {\n      return col * this.RANK + row;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(row, col) {\n      return this[col * this.RANK + row];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(row, col, value) {\n      this[col * this.RANK + row] = checkNumber(value);\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(columnIndex) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Array(this.RANK).fill(-0);\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        result[i] = this[firstIndex + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(columnIndex, columnVector) {\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        this[firstIndex + i] = columnVector[i];\n      }\n\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(MathArray);\n\nexport { Matrix as default };","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nvar constants = {};\n\nvar Matrix4 = function (_Matrix) {\n  _inherits(Matrix4, _Matrix);\n\n  _createClass(Matrix4, [{\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 4;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix4(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Matrix4).call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0));\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      this[9] = array[9];\n      this[10] = array[10];\n      this[11] = array[11];\n      this[12] = array[12];\n      this[13] = array[13];\n      this[14] = array[14];\n      this[15] = array[15];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"toRowMajor\",\n    value: function toRowMajor(result) {\n      result[0] = this[0];\n      result[1] = this[4];\n      result[2] = this[8];\n      result[3] = this[12];\n      result[4] = this[1];\n      result[5] = this[5];\n      result[6] = this[9];\n      result[7] = this[13];\n      result[8] = this[2];\n      result[9] = this[6];\n      result[10] = this[10];\n      result[11] = this[14];\n      result[12] = this[3];\n      result[13] = this[7];\n      result[14] = this[11];\n      result[15] = this[15];\n      return result;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n\n      if (far === Infinity) {\n        Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n      } else {\n        mat4.frustum(this, left, right, bottom, top, near, far);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, center, up) {\n      if (arguments.length === 1) {\n        var _eye = eye;\n        eye = _eye.eye;\n        center = _eye.center;\n        up = _eye.up;\n      }\n\n      center = center || [0, 0, 0];\n      up = up || [0, 1, 0];\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref2) {\n      var left = _ref2.left,\n          right = _ref2.right,\n          bottom = _ref2.bottom,\n          top = _ref2.top,\n          _ref2$near = _ref2.near,\n          near = _ref2$near === void 0 ? 0.1 : _ref2$near,\n          _ref2$far = _ref2.far,\n          far = _ref2$far === void 0 ? 500 : _ref2$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref3) {\n      var _ref3$fovy = _ref3.fovy,\n          fovy = _ref3$fovy === void 0 ? 45 * Math.PI / 180 : _ref3$fovy,\n          _ref3$aspect = _ref3.aspect,\n          aspect = _ref3$aspect === void 0 ? 1 : _ref3$aspect,\n          _ref3$focalDistance = _ref3.focalDistance,\n          focalDistance = _ref3$focalDistance === void 0 ? 1 : _ref3$focalDistance,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$fovy = _ref4.fovy,\n          fovy = _ref4$fovy === void 0 ? undefined : _ref4$fovy,\n          _ref4$fov = _ref4.fov,\n          fov = _ref4$fov === void 0 ? 45 * Math.PI / 180 : _ref4$fov,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n      result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n      result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n      return result;\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = this[12];\n      result[1] = this[13];\n      result[2] = this[14];\n      return result;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = 0;\n      result[4] = this[4] * inverseScale0;\n      result[5] = this[5] * inverseScale1;\n      result[6] = this[6] * inverseScale2;\n      result[7] = 0;\n      result[8] = this[8] * inverseScale0;\n      result[9] = this[9] * inverseScale1;\n      result[10] = this[10] * inverseScale2;\n      result[11] = 0;\n      result[12] = 0;\n      result[13] = 0;\n      result[14] = 0;\n      result[15] = 1;\n      return result;\n    }\n  }, {\n    key: \"getRotationMatrix3\",\n    value: function getRotationMatrix3() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = this[4] * inverseScale0;\n      result[4] = this[5] * inverseScale1;\n      result[5] = this[6] * inverseScale2;\n      result[6] = this[8] * inverseScale0;\n      result[7] = this[9] * inverseScale1;\n      result[8] = this[10] * inverseScale2;\n      return result;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          rx = _ref6[0],\n          ry = _ref6[1],\n          rz = _ref6[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      if (vector.length === 4) {\n        result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n        checkVector(result, 4);\n        return result;\n      }\n\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(vector, result) {\n      var length = vector.length;\n\n      switch (length) {\n        case 2:\n          result = vec2.transformMat4(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, result) {\n      deprecated('Matrix4.transformPoint', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix4.transformVector', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, result) {\n      deprecated('Matrix4.transformDirection', '3.0');\n      return this.transformAsVector(vector, result);\n    }\n  }], [{\n    key: \"_computeInfinitePerspectiveOffCenter\",\n    value: function _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n      var column0Row0 = 2.0 * near / (right - left);\n      var column1Row1 = 2.0 * near / (top - bottom);\n      var column2Row0 = (right + left) / (right - left);\n      var column2Row1 = (top + bottom) / (top - bottom);\n      var column2Row2 = -1.0;\n      var column2Row3 = -1.0;\n      var column3Row2 = -2.0 * near;\n      result[0] = column0Row0;\n      result[1] = 0.0;\n      result[2] = 0.0;\n      result[3] = 0.0;\n      result[4] = 0.0;\n      result[5] = column1Row1;\n      result[6] = 0.0;\n      result[7] = 0.0;\n      result[8] = column2Row0;\n      result[9] = column2Row1;\n      result[10] = column2Row2;\n      result[11] = column2Row3;\n      result[12] = 0.0;\n      result[13] = 0.0;\n      result[14] = column3Row2;\n      result[15] = 0.0;\n      return result;\n    }\n  }]);\n\n  return Matrix4;\n}(Matrix);\n\nexport { Matrix4 as default };","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _WEBGL_PARAMETERS;\n\nimport { isWebGL2 } from '../utils';\nvar OES_element_index = 'OES_element_index';\nvar WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nvar EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nvar EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nvar EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nvar WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nvar GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nvar GL_DONT_CARE = 0x1100;\nvar GL_GPU_DISJOINT_EXT = 0x8fbb;\nvar GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nvar GL_UNMASKED_VENDOR_WEBGL = 0x9245;\nvar GL_UNMASKED_RENDERER_WEBGL = 0x9246;\n\nvar getWebGL2ValueOrZero = function getWebGL2ValueOrZero(gl) {\n  return !isWebGL2(gl) ? 0 : undefined;\n};\n\nvar WEBGL_PARAMETERS = (_WEBGL_PARAMETERS = {}, _defineProperty(_WEBGL_PARAMETERS, 3074, function (gl) {\n  return !isWebGL2(gl) ? 36064 : undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, GL_FRAGMENT_SHADER_DERIVATIVE_HINT, function (gl) {\n  return !isWebGL2(gl) ? GL_DONT_CARE : undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 35977, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 32937, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL_GPU_DISJOINT_EXT, function (gl, getParameter) {\n  var ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n  return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_VENDOR_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_RENDERER_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT, function (gl, getParameter) {\n  var ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n  return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n}), _defineProperty(_WEBGL_PARAMETERS, 32883, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35071, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37447, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 36063, function (gl, getParameter) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 35379, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35374, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35377, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 34852, function (gl) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 36203, function (gl) {\n  return gl.getExtension(OES_element_index) ? 2147483647 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, 33001, function (gl) {\n  return gl.getExtension(OES_element_index) ? 16777216 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, 33000, function (gl) {\n  return 16777216;\n}), _defineProperty(_WEBGL_PARAMETERS, 37157, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35373, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35657, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 36183, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37137, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 34045, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35978, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35979, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35968, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35376, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35375, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35659, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37154, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35371, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35658, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35076, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35077, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35380, getWebGL2ValueOrZero), _WEBGL_PARAMETERS);\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  var limit = WEBGL_PARAMETERS[pname];\n  var value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  var result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}","import \"core-js/modules/es6.typed.int32-array\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _WEBGL2_CONTEXT_POLYF;\n\nimport { assert, isWebGL2 } from '../utils';\nimport { getParameterPolyfill } from './get-parameter-polyfill';\nvar OES_vertex_array_object = 'OES_vertex_array_object';\nvar ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nvar WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nvar EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nvar EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nvar ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension';\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n}\n\nexport var WEBGL2_CONTEXT_POLYFILLS = (_WEBGL2_CONTEXT_POLYF = {}, _defineProperty(_WEBGL2_CONTEXT_POLYF, OES_vertex_array_object, {\n  meta: {\n    suffix: 'OES'\n  },\n  createVertexArray: function createVertexArray() {\n    assert(false, ERR_VAO_NOT_SUPPORTED);\n  },\n  deleteVertexArray: function deleteVertexArray() {},\n  bindVertexArray: function bindVertexArray() {},\n  isVertexArray: function isVertexArray() {\n    return false;\n  }\n}), _defineProperty(_WEBGL2_CONTEXT_POLYF, ANGLE_instanced_arrays, {\n  meta: {\n    suffix: 'ANGLE'\n  },\n  vertexAttribDivisor: function vertexAttribDivisor(location, divisor) {\n    assert(divisor === 0, 'WebGL instanced rendering not supported');\n  },\n  drawElementsInstanced: function drawElementsInstanced() {},\n  drawArraysInstanced: function drawArraysInstanced() {}\n}), _defineProperty(_WEBGL2_CONTEXT_POLYF, WEBGL_draw_buffers, {\n  meta: {\n    suffix: 'WEBGL'\n  },\n  drawBuffers: function drawBuffers() {\n    assert(false);\n  }\n}), _defineProperty(_WEBGL2_CONTEXT_POLYF, EXT_disjoint_timer_query, {\n  meta: {\n    suffix: 'EXT'\n  },\n  createQuery: function createQuery() {\n    assert(false);\n  },\n  deleteQuery: function deleteQuery() {\n    assert(false);\n  },\n  beginQuery: function beginQuery() {\n    assert(false);\n  },\n  endQuery: function endQuery() {},\n  getQuery: function getQuery(handle, pname) {\n    return this.getQueryObject(handle, pname);\n  },\n  getQueryParameter: function getQueryParameter(handle, pname) {\n    return this.getQueryObject(handle, pname);\n  },\n  getQueryObject: function getQueryObject() {}\n}), _WEBGL2_CONTEXT_POLYF);\nexport var WEBGL2_CONTEXT_OVERRIDES = {\n  readBuffer: function readBuffer(gl, originalFunc, attachment) {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {}\n  },\n  getVertexAttrib: function getVertexAttrib(gl, originalFunc, location, pname) {\n    var _getExtensionData = getExtensionData(gl, ANGLE_instanced_arrays),\n        webgl2 = _getExtensionData.webgl2,\n        ext = _getExtensionData.ext;\n\n    var result;\n\n    switch (pname) {\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  getProgramParameter: function getProgramParameter(gl, originalFunc, program, pname) {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: function getInternalformatParameter(gl, originalFunc, target, format, pname) {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n  getTexParameter: function getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        var extensions = gl.luma.extensions;\n        var ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n  getParameter: getParameterPolyfill,\n  hint: function hint(gl, originalFunc, pname, value) {\n    return originalFunc(pname, value);\n  }\n};","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","var fp32shader = \"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\nconst float TWO_PI = 6.2831854820251465;\\nconst float PI_2 = 1.5707963705062866;\\nconst float PI_16 = 0.1963495463132858;\\n\\nconst float SIN_TABLE_0 = 0.19509032368659973;\\nconst float SIN_TABLE_1 = 0.3826834261417389;\\nconst float SIN_TABLE_2 = 0.5555702447891235;\\nconst float SIN_TABLE_3 = 0.7071067690849304;\\n\\nconst float COS_TABLE_0 = 0.9807852506637573;\\nconst float COS_TABLE_1 = 0.9238795042037964;\\nconst float COS_TABLE_2 = 0.8314695954322815;\\nconst float COS_TABLE_3 = 0.7071067690849304;\\n\\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\\n\\nfloat sin_taylor_fp32(float a) {\\n  float r, s, t, x;\\n\\n  if (a == 0.0) {\\n    return 0.0;\\n  }\\n\\n  x = -a * a;\\n  s = a;\\n  r = a;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_3;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_5;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_7;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_9;\\n  s = s + t;\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\\n  if (a == 0.0) {\\n    sin_t = 0.0;\\n    cos_t = 1.0;\\n  }\\n  sin_t = sin_taylor_fp32(a);\\n  cos_t = sqrt(1.0 - sin_t * sin_t);\\n}\\n\\nfloat tan_taylor_fp32(float a) {\\n    float sin_a;\\n    float cos_a;\\n\\n    if (a == 0.0) {\\n        return 0.0;\\n    }\\n    float z = floor(a / TWO_PI);\\n    float r = a - TWO_PI * z;\\n\\n    float t;\\n    float q = floor(r / PI_2 + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return 0.0 / 0.0;\\n    }\\n\\n    t = r - PI_2 * q;\\n\\n    q = floor(t / PI_16 + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return 0.0 / 0.0;\\n    } else {\\n        t = t - PI_16 * q;\\n    }\\n\\n    float u = 0.0;\\n    float v = 0.0;\\n\\n    float sin_t, cos_t;\\n    float s, c;\\n    sincos_taylor_fp32(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0;\\n            v = SIN_TABLE_0;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1;\\n            v = SIN_TABLE_1;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2;\\n            v = SIN_TABLE_2;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3;\\n            v = SIN_TABLE_3;\\n        }\\n        if (k > 0) {\\n            s = u * sin_t + v * cos_t;\\n            c = u * cos_t - v * sin_t;\\n        } else {\\n            s = u * sin_t - v * cos_t;\\n            c = u * cos_t + v * sin_t;\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return sin_a / cos_a;\\n}\\n#endif\\n\\nfloat tan_fp32(float a) {\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\n  return tan_taylor_fp32(a);\\n#else\\n  return tan(a);\\n#endif\\n}\\n\";\nexport default {\n  name: 'fp32',\n  vs: fp32shader,\n  fs: null\n};","import { Log } from 'probe.gl';\nexport default new Log({\n  id: 'deck'\n});","import \"core-js/modules/es6.object.define-property\";\nimport log from '../utils/log';\nexport var COORDINATE_SYSTEM = {\n  DEFAULT: -1,\n  LNGLAT: 1,\n  METER_OFFSETS: 2,\n  LNGLAT_OFFSETS: 3,\n  CARTESIAN: 0\n};\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n  get: function get() {\n    return log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')() || 0;\n  }\n});\nexport var PROJECTION_MODE = {\n  WEB_MERCATOR: 1,\n  WEB_MERCATOR_AUTO_OFFSET: 4,\n  IDENTITY: 0\n};\nexport var EVENTS = {\n  click: {\n    handler: 'onClick'\n  },\n  panstart: {\n    handler: 'onDragStart'\n  },\n  panmove: {\n    handler: 'onDrag'\n  },\n  panend: {\n    handler: 'onDragEnd'\n  }\n};","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.map\";\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nvar COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM).map(function (key) {\n  return \"const int COORDINATE_SYSTEM_\".concat(key, \" = \").concat(COORDINATE_SYSTEM[key], \";\");\n}).join('');\nvar PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE).map(function (key) {\n  return \"const int PROJECTION_MODE_\".concat(key, \" = \").concat(PROJECTION_MODE[key], \";\");\n}).join('');\nexport default \"\".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, \"\\n\").concat(PROJECTION_MODE_GLSL_CONSTANTS, \"\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform float project_uAntimeridian;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z;\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy;\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter;\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\nvec3 project_normal(vec3 vector) {\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n    dy = clamp(dy, -1., 1.);\\n  }\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\\n  }\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\\n  );\\n}\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy) * WORLD_SCALE,\\n        project_size(position_world.z),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    position_world.xyz -= project_uCoordinateOrigin;\\n    position_world += project_uModelMatrix * vec4(position64Low, 0.0);\\n  }\\n\\n  return project_offset_(position_world);\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\n\");","import \"core-js/modules/es6.array.is-array\";\n\nfunction isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    var len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (var i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport default function memoize(compute) {\n  var cachedArgs = {};\n  var cachedResult;\n  return function (args) {\n    for (var key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.math.fround\";\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec4 from 'gl-matrix/vec4';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport memoize from '../../utils/memoize';\nimport assert from '../../utils/assert';\nvar ZERO_VECTOR = [0, 0, 0, 0];\nvar VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nvar IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nvar DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nvar DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nvar getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem) {\n  var coordinateOrigin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_COORDINATE_ORIGIN;\n  var shaderCoordinateOrigin = coordinateOrigin;\n  var geospatialOrigin;\n  var offsetMode = true;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        offsetMode = false;\n      }\n\n      break;\n\n    case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n      }\n\n      break;\n\n    case PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n  return {\n    geospatialOrigin: geospatialOrigin,\n    shaderCoordinateOrigin: shaderCoordinateOrigin,\n    offsetMode: offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  var viewMatrixUncentered = viewport.viewMatrixUncentered,\n      projectionMatrix = viewport.projectionMatrix;\n  var viewMatrix = viewport.viewMatrix,\n      viewProjectionMatrix = viewport.viewProjectionMatrix;\n  var projectionCenter = ZERO_VECTOR;\n  var cameraPosCommon = viewport.cameraPosition;\n\n  var _getOffsetOrigin = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin),\n      geospatialOrigin = _getOffsetOrigin.geospatialOrigin,\n      shaderCoordinateOrigin = _getOffsetOrigin.shaderCoordinateOrigin,\n      offsetMode = _getOffsetOrigin.offsetMode;\n\n  if (offsetMode) {\n    var positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - positionCommonSpace[0], cameraPosCommon[1] - positionCommonSpace[1], cameraPosCommon[2] - positionCommonSpace[2]];\n    positionCommonSpace[3] = 1;\n    projectionCenter = vec4.transformMat4([], positionCommonSpace, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix: viewMatrix,\n    viewProjectionMatrix: viewProjectionMatrix,\n    projectionCenter: projectionCenter,\n    cameraPosCommon: cameraPosCommon,\n    shaderCoordinateOrigin: shaderCoordinateOrigin,\n    geospatialOrigin: geospatialOrigin\n  };\n}\n\nexport function getUniformsFromViewport() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      viewport = _ref.viewport,\n      _ref$devicePixelRatio = _ref.devicePixelRatio,\n      devicePixelRatio = _ref$devicePixelRatio === void 0 ? 1 : _ref$devicePixelRatio,\n      _ref$modelMatrix = _ref.modelMatrix,\n      modelMatrix = _ref$modelMatrix === void 0 ? null : _ref$modelMatrix,\n      _ref$coordinateSystem = _ref.coordinateSystem,\n      coordinateSystem = _ref$coordinateSystem === void 0 ? COORDINATE_SYSTEM.DEFAULT : _ref$coordinateSystem,\n      coordinateOrigin = _ref.coordinateOrigin,\n      _ref$wrapLongitude = _ref.wrapLongitude,\n      wrapLongitude = _ref$wrapLongitude === void 0 ? false : _ref$wrapLongitude,\n      projectionMode = _ref.projectionMode,\n      positionOrigin = _ref.positionOrigin;\n\n  assert(viewport);\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  var uniforms = getMemoizedViewportUniforms({\n    viewport: viewport,\n    devicePixelRatio: devicePixelRatio,\n    coordinateSystem: coordinateSystem,\n    coordinateOrigin: coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = wrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms(_ref2) {\n  var viewport = _ref2.viewport,\n      devicePixelRatio = _ref2.devicePixelRatio,\n      coordinateSystem = _ref2.coordinateSystem,\n      coordinateOrigin = _ref2.coordinateOrigin;\n\n  var _calculateMatrixAndOf = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin),\n      projectionCenter = _calculateMatrixAndOf.projectionCenter,\n      viewProjectionMatrix = _calculateMatrixAndOf.viewProjectionMatrix,\n      cameraPosCommon = _calculateMatrixAndOf.cameraPosCommon,\n      shaderCoordinateOrigin = _calculateMatrixAndOf.shaderCoordinateOrigin,\n      geospatialOrigin = _calculateMatrixAndOf.geospatialOrigin;\n\n  var distanceScales = viewport.getDistanceScales();\n  var viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  var uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCenter: projectionCenter,\n    project_uAntimeridian: (viewport.longitude || 0) - 180,\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: viewport.focalDistance || 1,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    var distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case COORDINATE_SYSTEM.LNGLAT:\n      case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}","import { fp32 } from '@luma.gl/core';\nimport projectShader from './project.glsl';\nimport { getUniformsFromViewport } from './viewport-uniforms';\nvar INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_MODULE_OPTIONS;\n\n  if (opts.viewport) {\n    return getUniformsFromViewport(opts);\n  }\n\n  return {};\n}\n\nexport default {\n  name: 'project',\n  dependencies: [fp32],\n  vs: projectShader,\n  getUniforms: getUniforms\n};","import project from '../project/project';\nvar vs = \"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n\";\nexport default {\n  name: 'project32',\n  dependencies: [project],\n  vs: vs\n};","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nvar DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nvar DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  pickingActive: false,\n  pickingAttribute: false\n};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  var uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (!opts.pickingSelectedColor) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      var selectedColor = opts.pickingSelectedColor.slice(0, 3);\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor) {\n    var color = Array.from(opts.pickingHighlightColor, function (x) {\n      return x / 255;\n    });\n\n    if (!Number.isFinite(color[3])) {\n      color[3] = 1;\n    }\n\n    uniforms.picking_uHighlightColor = color;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = Boolean(opts.pickingActive);\n    uniforms.picking_uAttribute = Boolean(opts.pickingAttribute);\n  }\n\n  return uniforms;\n}\n\nvar vs = \"uniform bool picking_uActive;\\nuniform bool picking_uAttribute;\\nuniform vec3 picking_uSelectedColor;\\nuniform bool picking_uSelectedColorValid;\\n\\nout vec4 picking_vRGBcolor_Avalid;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\n\\nbool picking_isColorValid(vec3 color) {\\n  return dot(color, vec3(1.0)) > 0.001;\\n}\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    picking_uSelectedColorValid &&\\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\\n}\\n\\nvoid picking_setPickingColor(vec3 pickingColor) {\\n  if (picking_uActive) {\\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\\n\\n    if (!picking_uAttribute) {\\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\\n    }\\n  } else {\\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\\n  }\\n}\\n\\nvoid picking_setPickingAttribute(float value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.r = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec2 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rg = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec3 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rgb = value;\\n  }\\n}\\n\";\nvar fs = \"uniform bool picking_uActive;\\nuniform vec3 picking_uSelectedColor;\\nuniform vec4 picking_uHighlightColor;\\n\\nin vec4 picking_vRGBcolor_Avalid;\\nvec4 picking_filterHighlightColor(vec4 color) {\\n  if (picking_uActive) {\\n    return color;\\n  }\\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\\n\\n  if (selected) {\\n    float highLightAlpha = picking_uHighlightColor.a;\\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\\n    float highLightRatio = highLightAlpha / blendedAlpha;\\n\\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\\n    return vec4(blendedRGB, blendedAlpha);\\n  } else {\\n    return color;\\n  }\\n}\\nvec4 picking_filterPickingColor(vec4 color) {\\n  if (picking_uActive) {\\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\\n      discard;\\n    }\\n    return picking_vRGBcolor_Avalid;\\n  }\\n  return color;\\n}\\nvec4 picking_filterColor(vec4 color) {\\n  vec4 highightColor = picking_filterHighlightColor(color);\\n  return picking_filterPickingColor(highightColor);\\n}\\n\\n\";\nexport default {\n  name: 'picking',\n  vs: vs,\n  fs: fs,\n  getUniforms: getUniforms\n};","import \"core-js/modules/es6.object.assign\";\nimport { picking } from '@luma.gl/core';\nexport default Object.assign({\n  inject: {\n    'vs:DECKGL_FILTER_COLOR': \"\\n    picking_setPickingColor(geometry.pickingColor);\\n    // for picking depth values\\n    picking_setPickingAttribute(geometry.position.z);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': {\n      order: 99,\n      injection: \"\\n    // use highlight color if this fragment belongs to the selected object.\\n    color = picking_filterHighlightColor(color);\\n\\n    // use picking color if rendering to picking FBO.\\n    color = picking_filterPickingColor(color);\\n      \"\n    }\n  }\n}, picking);","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.object.assign\";\nimport { global, isBrowser as getIsBrowser } from 'probe.gl/env';\nimport trackContextState from '../state-tracker/track-context-state';\nimport { log as _log, assert, getDevicePixelRatio, isWebGL2 } from '../utils';\nexport var ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport var ERR_WEBGL = ERR_CONTEXT;\nexport var ERR_WEBGL2 = 'Requires WebGL2';\nvar isBrowser = getIsBrowser();\nvar isPage = isBrowser && typeof document !== 'undefined';\nvar CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\nexport function createGLContext() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  assert(isBrowser, \"createGLContext on available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options = options,\n      width = _options.width,\n      height = _options.height;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  var gl;\n  var _options2 = options,\n      canvas = _options2.canvas;\n  var targetCanvas = getCanvas({\n    canvas: canvas,\n    width: width,\n    height: height,\n    onError: onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\nexport function instrumentGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options3 = options,\n      manageState = _options3.manageState,\n      debug = _options3.debug;\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: function log() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _log.log.apply(_log, [1].concat(args))();\n      }\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!global.makeDebugContext) {\n      _log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = global.makeDebugContext(gl, options);\n      _log.level = Math.max(_log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\nexport function getContextDebugInfo(gl) {\n  var vendorMasked = gl.getParameter(7936);\n  var rendererMasked = gl.getParameter(7937);\n  var ext = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  var rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked: vendorMasked,\n    rendererMasked: rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function resizeGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (gl.canvas) {\n    var devicePixelRatio = getDevicePixelRatio(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  var ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in options && \"height\" in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  var onError = options.onError;\n\n  var onCreateError = function onCreateError(error) {\n    return onError(\"WebGL context: \".concat(error.statusMessage || 'error'));\n  };\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  var _options$webgl = options.webgl1,\n      webgl1 = _options$webgl === void 0 ? true : _options$webgl,\n      _options$webgl2 = options.webgl2,\n      webgl2 = _options$webgl2 === void 0 ? true : _options$webgl2;\n  var gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context\"));\n  }\n\n  return gl;\n}\n\nfunction getCanvas(_ref) {\n  var canvas = _ref.canvas,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 800 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 600 : _ref$height,\n      onError = _ref.onError;\n  var targetCanvas;\n\n  if (typeof canvas === 'string') {\n    var isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  var webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  var info = getContextDebugInfo(gl);\n  var driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  var debug = gl.debug ? ' debug' : '';\n\n  _log.info(1, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  var clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  var clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    _log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  var cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    var clampedPixelRatio = devicePixelRatio;\n    var canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    var canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      _log.warn(\"Device pixel ratio clamped\")();\n\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth: clientWidth,\n      clientHeight: clientHeight,\n      devicePixelRatio: devicePixelRatio\n    });\n  }\n}","import \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\n\nvar Stat = function () {\n  function Stat(name, type) {\n    _classCallCheck(this, Stat);\n\n    this.name = name;\n    this.type = type;\n    this.sampleSize = 1;\n    this.reset();\n  }\n\n  _createClass(Stat, [{\n    key: \"setSampleSize\",\n    value: function setSampleSize(samples) {\n      this.sampleSize = samples;\n      return this;\n    }\n  }, {\n    key: \"incrementCount\",\n    value: function incrementCount() {\n      this.addCount(1);\n      return this;\n    }\n  }, {\n    key: \"decrementCount\",\n    value: function decrementCount() {\n      this.subtractCount(1);\n      return this;\n    }\n  }, {\n    key: \"addCount\",\n    value: function addCount(value) {\n      this._count += value;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"subtractCount\",\n    value: function subtractCount(value) {\n      this._count -= value;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"addTime\",\n    value: function addTime(time) {\n      this._time += time;\n      this.lastTiming = time;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"timeStart\",\n    value: function timeStart() {\n      this._startTime = getHiResTimestamp();\n      this._timerPending = true;\n      return this;\n    }\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd() {\n      if (!this._timerPending) {\n        return this;\n      }\n\n      this.addTime(getHiResTimestamp() - this._startTime);\n      this._timerPending = false;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"getSampleAverageCount\",\n    value: function getSampleAverageCount() {\n      return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n    }\n  }, {\n    key: \"getSampleAverageTime\",\n    value: function getSampleAverageTime() {\n      return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n    }\n  }, {\n    key: \"getSampleHz\",\n    value: function getSampleHz() {\n      return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n    }\n  }, {\n    key: \"getAverageCount\",\n    value: function getAverageCount() {\n      return this.samples > 0 ? this.count / this.samples : 0;\n    }\n  }, {\n    key: \"getAverageTime\",\n    value: function getAverageTime() {\n      return this.samples > 0 ? this.time / this.samples : 0;\n    }\n  }, {\n    key: \"getHz\",\n    value: function getHz() {\n      return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.time = 0;\n      this.count = 0;\n      this.samples = 0;\n      this.lastTiming = 0;\n      this.lastSampleTime = 0;\n      this.lastSampleCount = 0;\n      this._count = 0;\n      this._time = 0;\n      this._samples = 0;\n      this._startTime = 0;\n      this._timerPending = false;\n      return this;\n    }\n  }, {\n    key: \"_checkSampling\",\n    value: function _checkSampling() {\n      if (this._samples === this.sampleSize) {\n        this.lastSampleTime = this._time;\n        this.lastSampleCount = this._count;\n        this.count += this._count;\n        this.time += this._time;\n        this.samples += this._samples;\n        this._time = 0;\n        this._count = 0;\n        this._samples = 0;\n      }\n    }\n  }]);\n\n  return Stat;\n}();\n\nexport { Stat as default };","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Stat from './stat';\n\nvar Stats = function () {\n  function Stats(_ref) {\n    var id = _ref.id,\n        stats = _ref.stats;\n\n    _classCallCheck(this, Stats);\n\n    this.id = id;\n    this.stats = {};\n\n    this._initializeStats(stats);\n\n    Object.seal(this);\n  }\n\n  _createClass(Stats, [{\n    key: \"get\",\n    value: function get(name) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'count';\n      return this._getOrCreate({\n        name: name,\n        type: type\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      for (var key in this.stats) {\n        this.stats[key].reset();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(fn) {\n      for (var key in this.stats) {\n        fn(this.stats[key]);\n      }\n    }\n  }, {\n    key: \"getTable\",\n    value: function getTable() {\n      var table = {};\n      this.forEach(function (stat) {\n        table[stat.name] = {\n          time: stat.time || 0,\n          count: stat.count || 0,\n          average: stat.getAverageTime() || 0,\n          hz: stat.getHz() || 0\n        };\n      });\n      return table;\n    }\n  }, {\n    key: \"_initializeStats\",\n    value: function _initializeStats() {\n      var _this = this;\n\n      var stats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      stats.forEach(function (stat) {\n        return _this._getOrCreate(stat);\n      });\n    }\n  }, {\n    key: \"_getOrCreate\",\n    value: function _getOrCreate(stat) {\n      if (!stat || !stat.name) {\n        return null;\n      }\n\n      var name = stat.name,\n          type = stat.type;\n\n      if (!this.stats[name]) {\n        if (stat instanceof Stat) {\n          this.stats[name] = stat;\n        } else {\n          this.stats[name] = new Stat(name, type);\n        }\n      }\n\n      return this.stats[name];\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return Object.keys(this.stats).length;\n    }\n  }]);\n\n  return Stats;\n}();\n\nexport { Stats as default };","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { log } from '@luma.gl/gltools';\nimport { Stats } from 'probe.gl';\nimport { isBrowser, global } from 'probe.gl/env';\nvar VERSION = typeof \"8.1.3\" !== 'undefined' ? \"8.1.3\" : 'untranspiled source';\nvar STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n\nvar StatsManager = function () {\n  function StatsManager() {\n    _classCallCheck(this, StatsManager);\n\n    this.stats = new Map();\n  }\n\n  _createClass(StatsManager, [{\n    key: \"get\",\n    value: function get(name) {\n      if (!this.stats.has(name)) {\n        this.stats.set(name, new Stats({\n          id: name\n        }));\n      }\n\n      return this.stats.get(name);\n    }\n  }]);\n\n  return StatsManager;\n}();\n\nvar lumaStats = new StatsManager();\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(global.luma.VERSION, \" vs \").concat(VERSION));\n}\n\nif (!global.luma) {\n  if (isBrowser()) {\n    log.log(1, \"luma.gl \".concat(VERSION, \" - \").concat(STARTUP_MESSAGE))();\n  }\n\n  global.luma = global.luma || {\n    VERSION: VERSION,\n    version: VERSION,\n    log: log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default global.luma;","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}","import { assert } from '../utils';\nimport { isWebGL, isWebGL2 } from '@luma.gl/gltools';\nexport var ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport var ERR_WEBGL = ERR_CONTEXT;\nexport var ERR_WEBGL2 = 'Requires WebGL2';\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n}","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { assert } from '../utils';\nexport function getKeyValue(gl, name) {\n  if (typeof name !== 'string') {\n    return name;\n  }\n\n  var number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  }\n\n  name = name.replace(/^.*\\./, '');\n  var value = gl[name];\n  assert(value !== undefined, \"Accessing undefined constant GL.\".concat(name));\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (var key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (var key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}","import assert from './assert';\nvar uidCounters = {};\nexport function uid() {\n  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'id';\n  uidCounters[id] = uidCounters[id] || 1;\n  var count = uidCounters[id]++;\n  return \"\".concat(id, \"-\").concat(count);\n}\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n}\nexport function isObjectEmpty(obj) {\n  var isEmpty = true;\n\n  for (var key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}","import \"core-js/modules/es6.array.for-each\";\nimport { log } from '@luma.gl/gltools';\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  var upgradeMessage = \"See luma.gl \".concat(version, \" Upgrade Guide at https://luma.gl/docs/upgrade-guide\");\n  var prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(function (methodName) {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = function () {\n      log.removed(\"Calling removed method \".concat(className, \".\").concat(methodName, \": \"), upgradeMessage)();\n      throw new Error(methodName);\n    };\n  });\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { lumaStats } from '../init';\nimport { assertWebGLContext, getKey, getKeyValue } from '../webgl-utils';\nimport { uid, assert, stubRemovedMethods as _stubRemovedMethods } from '../utils';\nvar ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods';\n\nvar Resource = function () {\n  function Resource(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Resource);\n\n    assertWebGLContext(gl);\n    var id = opts.id,\n        _opts$userData = opts.userData,\n        userData = _opts$userData === void 0 ? {} : _opts$userData;\n    this.gl = gl;\n    this.id = id || uid(this.constructor.name);\n    this.userData = userData;\n    this._bound = false;\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this.byteLength = 0;\n\n    this._addStats();\n  }\n\n  _createClass(Resource, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.constructor.name, \"(\").concat(this.id, \")\");\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$deleteChildren = _ref.deleteChildren,\n          deleteChildren = _ref$deleteChildren === void 0 ? false : _ref$deleteChildren;\n\n      var children = this._handle && this._deleteHandle(this._handle);\n\n      if (this._handle) {\n        this._removeStats();\n      }\n\n      this._handle = null;\n\n      if (children && deleteChildren) {\n        children.filter(Boolean).forEach(function (child) {\n          child[\"delete\"]();\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var funcOrHandle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.handle;\n\n      if (typeof funcOrHandle !== 'function') {\n        this._bindHandle(funcOrHandle);\n\n        return this;\n      }\n\n      var value;\n\n      if (!this._bound) {\n        this._bindHandle(this.handle);\n\n        this._bound = true;\n        value = funcOrHandle();\n        this._bound = false;\n\n        this._bindHandle(null);\n      } else {\n        value = funcOrHandle();\n      }\n\n      return value;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      this.bind(null);\n    }\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(pname) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      pname = getKeyValue(this.gl, pname);\n      assert(pname);\n      var parameters = this.constructor.PARAMETERS || {};\n      var parameter = parameters[pname];\n\n      if (parameter) {\n        var isWebgl2 = isWebGL2(this.gl);\n        var parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n        if (!parameterAvailable) {\n          var webgl1Default = parameter.webgl1;\n          var webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n          var defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n          return defaultValue;\n        }\n      }\n\n      return this._getParameter(pname, opts);\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _ref2 = {},\n          parameters = _ref2.parameters,\n          keys = _ref2.keys;\n      var PARAMETERS = this.constructor.PARAMETERS || {};\n      var isWebgl2 = isWebGL2(this.gl);\n      var values = {};\n      var parameterKeys = parameters || Object.keys(PARAMETERS);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = parameterKeys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var pname = _step.value;\n          var parameter = PARAMETERS[pname];\n          var parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n          if (parameterAvailable) {\n            var key = keys ? getKey(this.gl, pname) : pname;\n            values[key] = this.getParameter(pname, opts);\n\n            if (keys && parameter.type === 'GLenum') {\n              values[key] = getKey(this.gl, values[key]);\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return values;\n    }\n  }, {\n    key: \"setParameter\",\n    value: function setParameter(pname, value) {\n      pname = getKeyValue(this.gl, pname);\n      assert(pname);\n      var parameters = this.constructor.PARAMETERS || {};\n      var parameter = parameters[pname];\n\n      if (parameter) {\n        var isWebgl2 = isWebGL2(this.gl);\n        var parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n        if (!parameterAvailable) {\n          throw new Error('Parameter not available on this platform');\n        }\n\n        if (parameter.type === 'GLenum') {\n          value = getKeyValue(value);\n        }\n      }\n\n      this._setParameter(pname, value);\n\n      return this;\n    }\n  }, {\n    key: \"setParameters\",\n    value: function setParameters(parameters) {\n      for (var pname in parameters) {\n        this.setParameter(pname, parameters[pname]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"stubRemovedMethods\",\n    value: function stubRemovedMethods(className, version, methodNames) {\n      return _stubRemovedMethods(this, className, version, methodNames);\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize(opts) {}\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_getOptsFromHandle\",\n    value: function _getOptsFromHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname, opts) {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_setParameter\",\n    value: function _setParameter(pname, value) {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_context\",\n    value: function _context() {\n      this.gl.luma = this.gl.luma || {};\n      return this.gl.luma;\n    }\n  }, {\n    key: \"_addStats\",\n    value: function _addStats() {\n      var name = this.constructor.name;\n      var stats = lumaStats.get('Resource Counts');\n      stats.get('Resources Created').incrementCount();\n      stats.get(\"\".concat(name, \"s Created\")).incrementCount();\n      stats.get(\"\".concat(name, \"s Active\")).incrementCount();\n    }\n  }, {\n    key: \"_removeStats\",\n    value: function _removeStats() {\n      var name = this.constructor.name;\n      var stats = lumaStats.get('Resource Counts');\n      stats.get(\"\".concat(name, \"s Active\")).decrementCount();\n    }\n  }, {\n    key: \"_trackAllocatedMemory\",\n    value: function _trackAllocatedMemory(bytes) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.constructor.name;\n      var stats = lumaStats.get('Memory Usage');\n      stats.get('GPU Memory').addCount(bytes);\n      stats.get(\"\".concat(name, \" Memory\")).addCount(bytes);\n      this.byteLength = bytes;\n    }\n  }, {\n    key: \"_trackDeallocatedMemory\",\n    value: function _trackDeallocatedMemory() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.constructor.name;\n      var stats = lumaStats.get('Memory Usage');\n      stats.get('GPU Memory').subtractCount(this.byteLength);\n      stats.get(\"\".concat(name, \" Memory\")).subtractCount(this.byteLength);\n      this.byteLength = 0;\n    }\n  }, {\n    key: \"handle\",\n    get: function get() {\n      return this._handle;\n    }\n  }]);\n\n  return Resource;\n}();\n\nexport { Resource as default };","import \"core-js/modules/es6.array.copy-within\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport \"core-js/modules/es6.typed.uint8-clamped-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nvar ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array';\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  var type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n}\nexport function getTypedArrayFromGLType(glType) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$clamped = _ref.clamped,\n      clamped = _ref$clamped === void 0 ? true : _ref$clamped;\n\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\nexport function flipRows(_ref2) {\n  var data = _ref2.data,\n      width = _ref2.width,\n      height = _ref2.height,\n      _ref2$bytesPerPixel = _ref2.bytesPerPixel,\n      bytesPerPixel = _ref2$bytesPerPixel === void 0 ? 4 : _ref2$bytesPerPixel,\n      temp = _ref2.temp;\n  var bytesPerRow = width * bytesPerPixel;\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (var y = 0; y < height / 2; ++y) {\n    var topOffset = y * bytesPerRow;\n    var bottomOffset = (height - y - 1) * bytesPerRow;\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow));\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels(_ref3) {\n  var data = _ref3.data,\n      width = _ref3.width,\n      height = _ref3.height;\n  var newWidth = Math.round(width / 2);\n  var newHeight = Math.round(height / 2);\n  var newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (var y = 0; y < newHeight; y++) {\n    for (var x = 0; x < newWidth; x++) {\n      for (var c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}","import \"core-js/modules/es6.object.assign\";\nimport { log } from '@luma.gl/gltools';\nexport function checkProps(className, props, propChecks) {\n  var _propChecks$removedPr = propChecks.removedProps,\n      removedProps = _propChecks$removedPr === void 0 ? {} : _propChecks$removedPr,\n      _propChecks$deprecate = propChecks.deprecatedProps,\n      deprecatedProps = _propChecks$deprecate === void 0 ? {} : _propChecks$deprecate,\n      _propChecks$replacedP = propChecks.replacedProps,\n      replacedProps = _propChecks$replacedP === void 0 ? {} : _propChecks$replacedP;\n\n  for (var propName in removedProps) {\n    if (propName in props) {\n      var replacementProp = removedProps[propName];\n      var replacement = replacementProp ? \"\".concat(className, \".\").concat(removedProps[propName]) : 'N/A';\n      log.removed(\"\".concat(className, \".\").concat(propName), replacement)();\n    }\n  }\n\n  for (var _propName in deprecatedProps) {\n    if (_propName in props) {\n      var _replacementProp = deprecatedProps[_propName];\n      log.deprecated(\"\".concat(className, \".\").concat(_propName), \"\".concat(className, \".\").concat(_replacementProp))();\n    }\n  }\n\n  var newProps = null;\n\n  for (var _propName2 in replacedProps) {\n    if (_propName2 in props) {\n      var _replacementProp2 = replacedProps[_propName2];\n      log.deprecated(\"\".concat(className, \".\").concat(_propName2), \"\".concat(className, \".\").concat(_replacementProp2))();\n      newProps = newProps || Object.assign({}, props);\n      newProps[_replacementProp2] = props[_propName2];\n      delete newProps[_propName2];\n    }\n  }\n\n  return newProps || props;\n}","import \"core-js/modules/es6.object.freeze\";\nimport \"core-js/modules/es6.array.for-each\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getTypedArrayFromGLType } from '../webgl-utils';\nimport { checkProps, assert } from '../utils';\nvar DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\nvar PROP_CHECKS = {\n  deprecatedProps: {\n    instanced: 'divisor',\n    isInstanced: 'divisor'\n  }\n};\n\nvar Accessor = function () {\n  _createClass(Accessor, null, [{\n    key: \"getBytesPerElement\",\n    value: function getBytesPerElement(accessor) {\n      var ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n      return ArrayType.BYTES_PER_ELEMENT;\n    }\n  }, {\n    key: \"getBytesPerVertex\",\n    value: function getBytesPerVertex(accessor) {\n      assert(accessor.size);\n      var ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n      return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve() {\n      for (var _len = arguments.length, accessors = new Array(_len), _key = 0; _key < _len; _key++) {\n        accessors[_key] = arguments[_key];\n      }\n\n      return _construct(Accessor, [DEFAULT_ACCESSOR_VALUES].concat(accessors));\n    }\n  }]);\n\n  function Accessor() {\n    var _this = this;\n\n    _classCallCheck(this, Accessor);\n\n    for (var _len2 = arguments.length, accessors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      accessors[_key2] = arguments[_key2];\n    }\n\n    accessors.forEach(function (accessor) {\n      return _this._assign(accessor);\n    });\n    Object.freeze(this);\n  }\n\n  _createClass(Accessor, [{\n    key: \"toString\",\n    value: function toString() {\n      return JSON.stringify(this);\n    }\n  }, {\n    key: \"_assign\",\n    value: function _assign() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      props = checkProps('Accessor', props, PROP_CHECKS);\n\n      if (props.type !== undefined) {\n        this.type = props.type;\n\n        if (props.type === 5124 || props.type === 5125) {\n          this.integer = true;\n        }\n      }\n\n      if (props.size !== undefined) {\n        this.size = props.size;\n      }\n\n      if (props.offset !== undefined) {\n        this.offset = props.offset;\n      }\n\n      if (props.stride !== undefined) {\n        this.stride = props.stride;\n      }\n\n      if (props.normalized !== undefined) {\n        this.normalized = props.normalized;\n      }\n\n      if (props.integer !== undefined) {\n        this.integer = props.integer;\n      }\n\n      if (props.divisor !== undefined) {\n        this.divisor = props.divisor;\n      }\n\n      if (props.buffer !== undefined) {\n        this.buffer = props.buffer;\n      }\n\n      if (props.index !== undefined) {\n        if (typeof index === 'boolean') {\n          this.index = props.index ? 1 : 0;\n        } else {\n          this.index = props.index;\n        }\n      }\n\n      if (props.instanced !== undefined) {\n        this.divisor = props.instanced ? 1 : 0;\n      }\n\n      if (props.isInstanced !== undefined) {\n        this.divisor = props.isInstanced ? 1 : 0;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"BYTES_PER_ELEMENT\",\n    get: function get() {\n      return Accessor.getBytesPerElement(this);\n    }\n  }, {\n    key: \"BYTES_PER_VERTEX\",\n    get: function get() {\n      return Accessor.getBytesPerVertex(this);\n    }\n  }]);\n\n  return Accessor;\n}();\n\nexport { Accessor as default };\nexport { DEFAULT_ACCESSOR_VALUES };","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _TEXTURE_FORMATS, _DATA_FORMAT_CHANNELS, _TYPE_SIZES;\n\nimport { isWebGL2 } from '@luma.gl/gltools';\nexport var TEXTURE_FORMATS = (_TEXTURE_FORMATS = {}, _defineProperty(_TEXTURE_FORMATS, 6407, {\n  dataFormat: 6407,\n  types: [5121, 33635]\n}), _defineProperty(_TEXTURE_FORMATS, 6408, {\n  dataFormat: 6408,\n  types: [5121, 32819, 32820]\n}), _defineProperty(_TEXTURE_FORMATS, 6406, {\n  dataFormat: 6406,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 6409, {\n  dataFormat: 6409,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 6410, {\n  dataFormat: 6410,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 33326, {\n  dataFormat: 6403,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 33328, {\n  dataFormat: 33319,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 34837, {\n  dataFormat: 6407,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 34836, {\n  dataFormat: 6408,\n  types: [5126],\n  gl2: true\n}), _TEXTURE_FORMATS);\nexport var DATA_FORMAT_CHANNELS = (_DATA_FORMAT_CHANNELS = {}, _defineProperty(_DATA_FORMAT_CHANNELS, 6403, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 36244, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 33319, 2), _defineProperty(_DATA_FORMAT_CHANNELS, 33320, 2), _defineProperty(_DATA_FORMAT_CHANNELS, 6407, 3), _defineProperty(_DATA_FORMAT_CHANNELS, 36248, 3), _defineProperty(_DATA_FORMAT_CHANNELS, 6408, 4), _defineProperty(_DATA_FORMAT_CHANNELS, 36249, 4), _defineProperty(_DATA_FORMAT_CHANNELS, 6402, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 34041, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 6406, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 6409, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 6410, 2), _DATA_FORMAT_CHANNELS);\nexport var TYPE_SIZES = (_TYPE_SIZES = {}, _defineProperty(_TYPE_SIZES, 5126, 4), _defineProperty(_TYPE_SIZES, 5125, 4), _defineProperty(_TYPE_SIZES, 5124, 4), _defineProperty(_TYPE_SIZES, 5123, 2), _defineProperty(_TYPE_SIZES, 5122, 2), _defineProperty(_TYPE_SIZES, 5131, 2), _defineProperty(_TYPE_SIZES, 5120, 1), _defineProperty(_TYPE_SIZES, 5121, 1), _TYPE_SIZES);\nexport function isFormatSupported(gl, format) {\n  var info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    return true;\n  }\n\n  var value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\nexport function isLinearFilteringSupported(gl, format) {\n  var info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport Accessor from './accessor';\nimport { assertWebGL2Context, getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils';\nimport { log } from '@luma.gl/gltools';\nimport { assert, checkProps } from '../utils';\nvar DEBUG_DATA_LENGTH = 10;\nvar DEPRECATED_PROPS = {\n  offset: 'accessor.offset',\n  stride: 'accessor.stride',\n  type: 'accessor.type',\n  size: 'accessor.size',\n  divisor: 'accessor.divisor',\n  normalized: 'accessor.normalized',\n  integer: 'accessor.integer',\n  instanced: 'accessor.divisor',\n  isInstanced: 'accessor.divisor'\n};\nvar PROP_CHECKS_INITIALIZE = {\n  removedProps: {},\n  replacedProps: {\n    bytes: 'byteLength'\n  },\n  deprecatedProps: DEPRECATED_PROPS\n};\nvar PROP_CHECKS_SET_PROPS = {\n  removedProps: DEPRECATED_PROPS\n};\n\nvar Buffer = function (_Resource) {\n  _inherits(Buffer, _Resource);\n\n  function Buffer(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Buffer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Buffer).call(this, gl, props));\n\n    _this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']);\n\n    _this.target = props.target || (_this.gl.webgl2 ? 36662 : 34962);\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Buffer, [{\n    key: \"getElementCount\",\n    value: function getElementCount() {\n      var accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n      return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      var accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n      return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (ArrayBuffer.isView(props)) {\n        props = {\n          data: props\n        };\n      }\n\n      if (Number.isFinite(props)) {\n        props = {\n          byteLength: props\n        };\n      }\n\n      props = checkProps('Buffer', props, PROP_CHECKS_INITIALIZE);\n      this.usage = props.usage || 35044;\n      this.debugData = null;\n      this.setAccessor(Object.assign({}, props, props.accessor));\n\n      if (props.data) {\n        this._setData(props.data, props.offset, props.byteLength);\n      } else {\n        this._setByteLength(props.byteLength || 0);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      props = checkProps('Buffer', props, PROP_CHECKS_SET_PROPS);\n\n      if ('accessor' in props) {\n        this.setAccessor(props.accessor);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setAccessor\",\n    value: function setAccessor(accessor) {\n      accessor = Object.assign({}, accessor);\n      delete accessor.buffer;\n      this.accessor = new Accessor(accessor);\n      return this;\n    }\n  }, {\n    key: \"reallocate\",\n    value: function reallocate(byteLength) {\n      if (byteLength > this.byteLength) {\n        this._setByteLength(byteLength);\n\n        return true;\n      }\n\n      this.bytesUsed = byteLength;\n      return false;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(props) {\n      return this.initialize(props);\n    }\n  }, {\n    key: \"subData\",\n    value: function subData(props) {\n      if (ArrayBuffer.isView(props)) {\n        props = {\n          data: props\n        };\n      }\n\n      var _props = props,\n          data = _props.data,\n          _props$offset = _props.offset,\n          offset = _props$offset === void 0 ? 0 : _props$offset,\n          _props$srcOffset = _props.srcOffset,\n          srcOffset = _props$srcOffset === void 0 ? 0 : _props$srcOffset;\n      var byteLength = props.byteLength || props.length;\n      assert(data);\n      var target = this.gl.webgl2 ? 36663 : this.target;\n      this.gl.bindBuffer(target, this.handle);\n\n      if (srcOffset !== 0 || byteLength !== undefined) {\n        assertWebGL2Context(this.gl);\n        this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n      } else {\n        this.gl.bufferSubData(target, offset, data);\n      }\n\n      this.gl.bindBuffer(target, null);\n      this.debugData = null;\n\n      this._inferType(data);\n\n      return this;\n    }\n  }, {\n    key: \"copyData\",\n    value: function copyData(_ref) {\n      var sourceBuffer = _ref.sourceBuffer,\n          _ref$readOffset = _ref.readOffset,\n          readOffset = _ref$readOffset === void 0 ? 0 : _ref$readOffset,\n          _ref$writeOffset = _ref.writeOffset,\n          writeOffset = _ref$writeOffset === void 0 ? 0 : _ref$writeOffset,\n          size = _ref.size;\n      var gl = this.gl;\n      assertWebGL2Context(gl);\n      gl.bindBuffer(36662, sourceBuffer.handle);\n      gl.bindBuffer(36663, this.handle);\n      gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n      gl.bindBuffer(36662, null);\n      gl.bindBuffer(36663, null);\n      this.debugData = null;\n      return this;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$dstData = _ref2.dstData,\n          dstData = _ref2$dstData === void 0 ? null : _ref2$dstData,\n          _ref2$srcByteOffset = _ref2.srcByteOffset,\n          srcByteOffset = _ref2$srcByteOffset === void 0 ? 0 : _ref2$srcByteOffset,\n          _ref2$dstOffset = _ref2.dstOffset,\n          dstOffset = _ref2$dstOffset === void 0 ? 0 : _ref2$dstOffset,\n          _ref2$length = _ref2.length,\n          length = _ref2$length === void 0 ? 0 : _ref2$length;\n\n      assertWebGL2Context(this.gl);\n      var ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n        clamped: false\n      });\n\n      var sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n      var dstElementOffset = dstOffset;\n      var dstAvailableElementCount;\n      var dstElementCount;\n\n      if (dstData) {\n        dstElementCount = dstData.length;\n        dstAvailableElementCount = dstElementCount - dstElementOffset;\n      } else {\n        dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n        dstElementCount = dstElementOffset + dstAvailableElementCount;\n      }\n\n      var copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n      length = length || copyElementCount;\n      assert(length <= copyElementCount);\n      dstData = dstData || new ArrayType(dstElementCount);\n      this.gl.bindBuffer(36662, this.handle);\n      this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n      this.gl.bindBuffer(36662, null);\n      return dstData;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$target = _ref3.target,\n          target = _ref3$target === void 0 ? this.target : _ref3$target,\n          _ref3$index = _ref3.index,\n          index = _ref3$index === void 0 ? this.accessor && this.accessor.index : _ref3$index,\n          _ref3$offset = _ref3.offset,\n          offset = _ref3$offset === void 0 ? 0 : _ref3$offset,\n          size = _ref3.size;\n\n      if (target === 35345 || target === 35982) {\n        if (size !== undefined) {\n          this.gl.bindBufferRange(target, index, this.handle, offset, size);\n        } else {\n          assert(offset === 0);\n          this.gl.bindBufferBase(target, index, this.handle);\n        }\n      } else {\n        this.gl.bindBuffer(target, this.handle);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$target = _ref4.target,\n          target = _ref4$target === void 0 ? this.target : _ref4$target,\n          _ref4$index = _ref4.index,\n          index = _ref4$index === void 0 ? this.accessor && this.accessor.index : _ref4$index;\n\n      var isIndexedBuffer = target === 35345 || target === 35982;\n\n      if (isIndexedBuffer) {\n        this.gl.bindBufferBase(target, index, null);\n      } else {\n        this.gl.bindBuffer(target, null);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getDebugData\",\n    value: function getDebugData() {\n      if (!this.debugData) {\n        this.debugData = this.getData({\n          length: Math.min(DEBUG_DATA_LENGTH, this.byteLength)\n        });\n        return {\n          data: this.debugData,\n          changed: true\n        };\n      }\n\n      return {\n        data: this.debugData,\n        changed: false\n      };\n    }\n  }, {\n    key: \"invalidateDebugData\",\n    value: function invalidateDebugData() {\n      this.debugData = null;\n    }\n  }, {\n    key: \"_setData\",\n    value: function _setData(data) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var byteLength = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : data.byteLength + offset;\n      assert(ArrayBuffer.isView(data));\n\n      this._trackDeallocatedMemory();\n\n      var target = this._getTarget();\n\n      this.gl.bindBuffer(target, this.handle);\n      this.gl.bufferData(target, byteLength, this.usage);\n      this.gl.bufferSubData(target, offset, data);\n      this.gl.bindBuffer(target, null);\n      this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n      this.bytesUsed = byteLength;\n\n      this._trackAllocatedMemory(byteLength);\n\n      var type = getGLTypeFromTypedArray(data);\n      assert(type);\n      this.setAccessor(new Accessor(this.accessor, {\n        type: type\n      }));\n      return this;\n    }\n  }, {\n    key: \"_setByteLength\",\n    value: function _setByteLength(byteLength) {\n      var usage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.usage;\n      assert(byteLength >= 0);\n\n      this._trackDeallocatedMemory();\n\n      var data = byteLength;\n\n      if (byteLength === 0) {\n        data = new Float32Array(0);\n      }\n\n      var target = this._getTarget();\n\n      this.gl.bindBuffer(target, this.handle);\n      this.gl.bufferData(target, data, usage);\n      this.gl.bindBuffer(target, null);\n      this.usage = usage;\n      this.debugData = null;\n      this.bytesUsed = byteLength;\n\n      this._trackAllocatedMemory(byteLength);\n\n      return this;\n    }\n  }, {\n    key: \"_getTarget\",\n    value: function _getTarget() {\n      return this.gl.webgl2 ? 36663 : this.target;\n    }\n  }, {\n    key: \"_getAvailableElementCount\",\n    value: function _getAvailableElementCount(srcByteOffset) {\n      var ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n        clamped: false\n      });\n      var sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n      return this.getElementCount() - sourceElementOffset;\n    }\n  }, {\n    key: \"_inferType\",\n    value: function _inferType(data) {\n      if (!this.accessor.type) {\n        this.setAccessor(new Accessor(this.accessor, {\n          type: getGLTypeFromTypedArray(data)\n        }));\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createBuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteBuffer(this.handle);\n\n      this._trackDeallocatedMemory();\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      this.gl.bindBuffer(this.target, this.handle);\n      var value = this.gl.getBufferParameter(this.target, pname);\n      this.gl.bindBuffer(this.target, null);\n      return value;\n    }\n  }, {\n    key: \"setByteLength\",\n    value: function setByteLength(byteLength) {\n      log.deprecated('setByteLength', 'reallocate')();\n      return this.reallocate(byteLength);\n    }\n  }, {\n    key: \"updateAccessor\",\n    value: function updateAccessor(opts) {\n      log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)')();\n      this.accessor = new Accessor(this.accessor, opts);\n      return this;\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      log.deprecated('Buffer.type', 'Buffer.accessor.type')();\n      return this.accessor.type;\n    }\n  }, {\n    key: \"bytes\",\n    get: function get() {\n      log.deprecated('Buffer.bytes', 'Buffer.byteLength')();\n      return this.byteLength;\n    }\n  }]);\n\n  return Buffer;\n}(Resource);\n\nexport { Buffer as default };","import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { TEXTURE_FORMATS, DATA_FORMAT_CHANNELS, TYPE_SIZES, isFormatSupported, isLinearFilteringSupported } from './texture-formats';\nimport { isWebGL2, withParameters, log } from '@luma.gl/gltools';\nimport { global } from 'probe.gl/env';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport { uid, isPowerOfTwo, assert } from '../utils';\nvar NPOT_MIN_FILTERS = [9729, 9728];\n\nvar WebGLBuffer = global.WebGLBuffer || function WebGLBuffer() {};\n\nvar Texture = function (_Resource) {\n  _inherits(Texture, _Resource);\n\n  _createClass(Texture, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          format = _ref.format,\n          linearFiltering = _ref.linearFiltering;\n\n      var supported = true;\n\n      if (format) {\n        supported = supported && isFormatSupported(gl, format);\n        supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n      }\n\n      return supported;\n    }\n  }]);\n\n  function Texture(gl, props) {\n    var _this;\n\n    _classCallCheck(this, Texture);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('texture') : _props$id,\n        handle = props.handle,\n        target = props.target;\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture).call(this, gl, {\n      id: id,\n      handle: handle\n    }));\n    _this.target = target;\n    _this.textureUnit = undefined;\n    _this.loaded = false;\n    _this.width = undefined;\n    _this.height = undefined;\n    _this.depth = undefined;\n    _this.format = undefined;\n    _this.type = undefined;\n    _this.dataFormat = undefined;\n    _this.border = undefined;\n    _this.textureUnit = undefined;\n    _this.mipmaps = undefined;\n    return _this;\n  }\n\n  _createClass(Texture, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"Texture(\".concat(this.id, \",\").concat(this.width, \"x\").concat(this.height, \")\");\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var data = props.data;\n\n      if (data instanceof Promise) {\n        data.then(function (resolvedImageData) {\n          return _this2.initialize(Object.assign({}, props, {\n            pixels: resolvedImageData,\n            data: resolvedImageData\n          }));\n        });\n        return this;\n      }\n\n      var _props$pixels = props.pixels,\n          pixels = _props$pixels === void 0 ? null : _props$pixels,\n          _props$format = props.format,\n          format = _props$format === void 0 ? 6408 : _props$format,\n          _props$border = props.border,\n          border = _props$border === void 0 ? 0 : _props$border,\n          _props$recreate = props.recreate,\n          recreate = _props$recreate === void 0 ? false : _props$recreate,\n          _props$parameters = props.parameters,\n          parameters = _props$parameters === void 0 ? {} : _props$parameters,\n          _props$pixelStore = props.pixelStore,\n          pixelStore = _props$pixelStore === void 0 ? {} : _props$pixelStore,\n          _props$textureUnit = props.textureUnit,\n          textureUnit = _props$textureUnit === void 0 ? undefined : _props$textureUnit;\n      var _props$mipmaps = props.mipmaps,\n          mipmaps = _props$mipmaps === void 0 ? true : _props$mipmaps;\n\n      if (!data) {\n        data = pixels;\n      }\n\n      var width = props.width,\n          height = props.height,\n          dataFormat = props.dataFormat,\n          type = props.type;\n      var _props$depth = props.depth,\n          depth = _props$depth === void 0 ? 0 : _props$depth;\n\n      var _this$_deduceParamete = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: false,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      width = _this$_deduceParamete.width;\n      height = _this$_deduceParamete.height;\n      dataFormat = _this$_deduceParamete.dataFormat;\n      type = _this$_deduceParamete.type;\n      this.width = width;\n      this.height = height;\n      this.depth = depth;\n      this.format = format;\n      this.type = type;\n      this.dataFormat = dataFormat;\n      this.border = border;\n      this.textureUnit = textureUnit;\n\n      if (Number.isFinite(this.textureUnit)) {\n        this.gl.activeTexture(33984 + this.textureUnit);\n        this.gl.bindTexture(this.target, this.handle);\n      }\n\n      if (mipmaps && this._isNPOT()) {\n        log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n        mipmaps = false;\n\n        this._updateForNPOT(parameters);\n      }\n\n      this.mipmaps = mipmaps;\n      this.setImageData({\n        data: data,\n        width: width,\n        height: height,\n        depth: depth,\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        border: border,\n        mipmaps: mipmaps,\n        parameters: pixelStore\n      });\n\n      if (mipmaps) {\n        this.generateMipmap();\n      }\n\n      this.setParameters(parameters);\n\n      if (recreate) {\n        this.data = data;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref2) {\n      var height = _ref2.height,\n          width = _ref2.width,\n          _ref2$mipmaps = _ref2.mipmaps,\n          mipmaps = _ref2$mipmaps === void 0 ? false : _ref2$mipmaps;\n\n      if (width !== this.width || height !== this.height) {\n        return this.initialize({\n          width: width,\n          height: height,\n          format: this.format,\n          type: this.type,\n          dataFormat: this.dataFormat,\n          border: this.border,\n          mipmaps: mipmaps\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"generateMipmap\",\n    value: function generateMipmap() {\n      var _this3 = this;\n\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._isNPOT()) {\n        log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n        return this;\n      }\n\n      this.mipmaps = true;\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, params, function () {\n        _this3.gl.generateMipmap(_this3.target);\n      });\n      this.gl.bindTexture(this.target, null);\n      return this;\n    }\n  }, {\n    key: \"setImageData\",\n    value: function setImageData(options) {\n      this._trackDeallocatedMemory('Texture');\n\n      var _options$target = options.target,\n          target = _options$target === void 0 ? this.target : _options$target,\n          _options$pixels = options.pixels,\n          pixels = _options$pixels === void 0 ? null : _options$pixels,\n          _options$level = options.level,\n          level = _options$level === void 0 ? 0 : _options$level,\n          _options$format = options.format,\n          format = _options$format === void 0 ? this.format : _options$format,\n          _options$border = options.border,\n          border = _options$border === void 0 ? this.border : _options$border,\n          _options$offset = options.offset,\n          offset = _options$offset === void 0 ? 0 : _options$offset,\n          _options$parameters = options.parameters,\n          parameters = _options$parameters === void 0 ? {} : _options$parameters;\n      var _options$data = options.data,\n          data = _options$data === void 0 ? null : _options$data,\n          _options$type = options.type,\n          type = _options$type === void 0 ? this.type : _options$type,\n          _options$width = options.width,\n          width = _options$width === void 0 ? this.width : _options$width,\n          _options$height = options.height,\n          height = _options$height === void 0 ? this.height : _options$height,\n          _options$dataFormat = options.dataFormat,\n          dataFormat = _options$dataFormat === void 0 ? this.dataFormat : _options$dataFormat,\n          _options$compressed = options.compressed,\n          compressed = _options$compressed === void 0 ? false : _options$compressed;\n\n      if (!data) {\n        data = pixels;\n      }\n\n      var _this$_deduceParamete2 = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: compressed,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      type = _this$_deduceParamete2.type;\n      dataFormat = _this$_deduceParamete2.dataFormat;\n      compressed = _this$_deduceParamete2.compressed;\n      width = _this$_deduceParamete2.width;\n      height = _this$_deduceParamete2.height;\n      var gl = this.gl;\n      gl.bindTexture(this.target, this.handle);\n      var dataType = null;\n\n      var _this$_getDataType = this._getDataType({\n        data: data,\n        compressed: compressed\n      });\n\n      data = _this$_getDataType.data;\n      dataType = _this$_getDataType.dataType;\n      withParameters(this.gl, parameters, function () {\n        switch (dataType) {\n          case 'null':\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n            break;\n\n          case 'typed-array':\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n            break;\n\n          case 'buffer':\n            assertWebGL2Context(gl);\n            gl.bindBuffer(35052, data.handle || data);\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n            gl.bindBuffer(35052, null);\n            break;\n\n          case 'browser-object':\n            if (isWebGL2(gl)) {\n              gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n            } else {\n              gl.texImage2D(target, level, format, dataFormat, type, data);\n            }\n\n            break;\n\n          case 'compressed':\n            gl.compressedTexImage2D(target, level, format, width, height, border, data);\n            break;\n\n          default:\n            assert(false, 'Unknown image data type');\n        }\n      });\n\n      if (data && data.byteLength) {\n        this._trackAllocatedMemory(data.byteLength, 'Texture');\n      } else {\n        var channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n        var channelSize = TYPE_SIZES[this.type] || 1;\n\n        this._trackAllocatedMemory(this.width * this.height * channels * channelSize, 'Texture');\n      }\n\n      this.loaded = true;\n      return this;\n    }\n  }, {\n    key: \"setSubImageData\",\n    value: function setSubImageData(_ref3) {\n      var _this4 = this;\n\n      var _ref3$target = _ref3.target,\n          target = _ref3$target === void 0 ? this.target : _ref3$target,\n          _ref3$pixels = _ref3.pixels,\n          pixels = _ref3$pixels === void 0 ? null : _ref3$pixels,\n          _ref3$data = _ref3.data,\n          data = _ref3$data === void 0 ? null : _ref3$data,\n          _ref3$x = _ref3.x,\n          x = _ref3$x === void 0 ? 0 : _ref3$x,\n          _ref3$y = _ref3.y,\n          y = _ref3$y === void 0 ? 0 : _ref3$y,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? this.width : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? this.height : _ref3$height,\n          _ref3$level = _ref3.level,\n          level = _ref3$level === void 0 ? 0 : _ref3$level,\n          _ref3$format = _ref3.format,\n          format = _ref3$format === void 0 ? this.format : _ref3$format,\n          _ref3$type = _ref3.type,\n          type = _ref3$type === void 0 ? this.type : _ref3$type,\n          _ref3$dataFormat = _ref3.dataFormat,\n          dataFormat = _ref3$dataFormat === void 0 ? this.dataFormat : _ref3$dataFormat,\n          _ref3$compressed = _ref3.compressed,\n          compressed = _ref3$compressed === void 0 ? false : _ref3$compressed,\n          _ref3$offset = _ref3.offset,\n          offset = _ref3$offset === void 0 ? 0 : _ref3$offset,\n          _ref3$border = _ref3.border,\n          border = _ref3$border === void 0 ? this.border : _ref3$border,\n          _ref3$parameters = _ref3.parameters,\n          parameters = _ref3$parameters === void 0 ? {} : _ref3$parameters;\n\n      var _this$_deduceParamete3 = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: compressed,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      type = _this$_deduceParamete3.type;\n      dataFormat = _this$_deduceParamete3.dataFormat;\n      compressed = _this$_deduceParamete3.compressed;\n      width = _this$_deduceParamete3.width;\n      height = _this$_deduceParamete3.height;\n      assert(this.depth === 0, 'texSubImage not supported for 3D textures');\n\n      if (!data) {\n        data = pixels;\n      }\n\n      if (data && data.data) {\n        var ndarray = data;\n        data = ndarray.data;\n        width = ndarray.shape[0];\n        height = ndarray.shape[1];\n      }\n\n      if (data instanceof Buffer) {\n        data = data.handle;\n      }\n\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, parameters, function () {\n        if (compressed) {\n          _this4.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n        } else if (data === null) {\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n        } else if (ArrayBuffer.isView(data)) {\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n        } else if (data instanceof WebGLBuffer) {\n          assertWebGL2Context(_this4.gl);\n\n          _this4.gl.bindBuffer(35052, data);\n\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n\n          _this4.gl.bindBuffer(35052, null);\n        } else if (isWebGL2(_this4.gl)) {\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n        } else {\n          _this4.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n        }\n      });\n      this.gl.bindTexture(this.target, null);\n    }\n  }, {\n    key: \"copyFramebuffer\",\n    value: function copyFramebuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      log.error('Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n      return null;\n    }\n  }, {\n    key: \"getActiveUnit\",\n    value: function getActiveUnit() {\n      return this.gl.getParameter(34016) - 33984;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n      var gl = this.gl;\n\n      if (textureUnit !== undefined) {\n        this.textureUnit = textureUnit;\n        gl.activeTexture(33984 + textureUnit);\n      }\n\n      gl.bindTexture(this.target, this.handle);\n      return textureUnit;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n      var gl = this.gl;\n\n      if (textureUnit !== undefined) {\n        this.textureUnit = textureUnit;\n        gl.activeTexture(33984 + textureUnit);\n      }\n\n      gl.bindTexture(this.target, null);\n      return textureUnit;\n    }\n  }, {\n    key: \"_getDataType\",\n    value: function _getDataType(_ref4) {\n      var data = _ref4.data,\n          _ref4$compressed = _ref4.compressed,\n          compressed = _ref4$compressed === void 0 ? false : _ref4$compressed;\n\n      if (compressed) {\n        return {\n          data: data,\n          dataType: 'compressed'\n        };\n      }\n\n      if (data === null) {\n        return {\n          data: data,\n          dataType: 'null'\n        };\n      }\n\n      if (ArrayBuffer.isView(data)) {\n        return {\n          data: data,\n          dataType: 'typed-array'\n        };\n      }\n\n      if (data instanceof Buffer) {\n        return {\n          data: data.handle,\n          dataType: 'buffer'\n        };\n      }\n\n      if (data instanceof WebGLBuffer) {\n        return {\n          data: data,\n          dataType: 'buffer'\n        };\n      }\n\n      return {\n        data: data,\n        dataType: 'browser-object'\n      };\n    }\n  }, {\n    key: \"_deduceParameters\",\n    value: function _deduceParameters(opts) {\n      var format = opts.format,\n          data = opts.data;\n      var width = opts.width,\n          height = opts.height,\n          dataFormat = opts.dataFormat,\n          type = opts.type,\n          compressed = opts.compressed;\n      var textureFormat = TEXTURE_FORMATS[format];\n      dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n      type = type || textureFormat && textureFormat.types[0];\n      compressed = compressed || textureFormat && textureFormat.compressed;\n\n      var _this$_deduceImageSiz = this._deduceImageSize(data, width, height);\n\n      width = _this$_deduceImageSiz.width;\n      height = _this$_deduceImageSiz.height;\n      return {\n        dataFormat: dataFormat,\n        type: type,\n        compressed: compressed,\n        width: width,\n        height: height,\n        format: format,\n        data: data\n      };\n    }\n  }, {\n    key: \"_deduceImageSize\",\n    value: function _deduceImageSize(data, width, height) {\n      var size;\n\n      if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n        size = {\n          width: data.naturalWidth,\n          height: data.naturalHeight\n        };\n      } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n        size = {\n          width: data.videoWidth,\n          height: data.videoHeight\n        };\n      } else if (!data) {\n        size = {\n          width: width >= 0 ? width : 1,\n          height: height >= 0 ? height : 1\n        };\n      } else {\n        size = {\n          width: width,\n          height: height\n        };\n      }\n\n      assert(size, 'Could not deduced texture size');\n      assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n      assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n      return size;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createTexture();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteTexture(this.handle);\n\n      this._trackDeallocatedMemory('Texture');\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      switch (pname) {\n        case 4096:\n          return this.width;\n\n        case 4097:\n          return this.height;\n\n        default:\n          this.gl.bindTexture(this.target, this.handle);\n          var value = this.gl.getTexParameter(this.target, pname);\n          this.gl.bindTexture(this.target, null);\n          return value;\n      }\n    }\n  }, {\n    key: \"_setParameter\",\n    value: function _setParameter(pname, param) {\n      this.gl.bindTexture(this.target, this.handle);\n      param = this._getNPOTParam(pname, param);\n\n      switch (pname) {\n        case 33082:\n        case 33083:\n          this.gl.texParameterf(this.handle, pname, param);\n          break;\n\n        case 4096:\n        case 4097:\n          assert(false);\n          break;\n\n        default:\n          this.gl.texParameteri(this.target, pname, param);\n          break;\n      }\n\n      this.gl.bindTexture(this.target, null);\n      return this;\n    }\n  }, {\n    key: \"_isNPOT\",\n    value: function _isNPOT() {\n      if (isWebGL2(this.gl)) {\n        return false;\n      }\n\n      if (!this.width || !this.height) {\n        return false;\n      }\n\n      return !isPowerOfTwo(this.width) || !isPowerOfTwo(this.height);\n    }\n  }, {\n    key: \"_updateForNPOT\",\n    value: function _updateForNPOT(parameters) {\n      if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n        parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n      }\n\n      if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n        parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n      }\n\n      if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n        parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n      }\n    }\n  }, {\n    key: \"_getNPOTParam\",\n    value: function _getNPOTParam(pname, param) {\n      if (this._isNPOT()) {\n        switch (pname) {\n          case 10241:\n            if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n              param = 9729;\n            }\n\n            break;\n\n          case 10242:\n          case 10243:\n            if (param !== 33071) {\n              param = 33071;\n            }\n\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      return param;\n    }\n  }]);\n\n  return Texture;\n}(Resource);\n\nexport { Texture as default };","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport { assert } from '../utils';\nvar pathPrefix = '';\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function loadFile(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  var dataType = options.dataType || 'text';\n  return fetch(url, options).then(function (res) {\n    return res[dataType]();\n  });\n}\nexport function loadImage(url, opts) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  return new Promise(function (resolve, reject) {\n    try {\n      var image = new Image();\n\n      image.onload = function () {\n        return resolve(image);\n      };\n\n      image.onerror = function () {\n        return reject(new Error(\"Could not load image \".concat(url, \".\")));\n      };\n\n      image.crossOrigin = opts && opts.crossOrigin || 'anonymous';\n      image.src = url;\n    } catch (error) {\n      reject(error);\n    }\n  });\n}","import \"core-js/modules/es6.object.seal\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Texture from './texture';\nimport { assertWebGLContext } from '../webgl-utils';\nimport { loadImage } from '../utils/load-file';\n\nvar Texture2D = function (_Texture) {\n  _inherits(Texture2D, _Texture);\n\n  _createClass(Texture2D, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl, opts) {\n      return Texture.isSupported(gl, opts);\n    }\n  }]);\n\n  function Texture2D(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Texture2D);\n\n    assertWebGLContext(gl);\n\n    if (props instanceof Promise || typeof props === 'string') {\n      props = {\n        data: props\n      };\n    }\n\n    if (typeof props.data === 'string') {\n      props = Object.assign({}, props, {\n        data: loadImage(props.data)\n      });\n    }\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture2D).call(this, gl, Object.assign({}, props, {\n      target: 3553\n    })));\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  return Texture2D;\n}(Texture);\n\nexport { Texture2D as default };","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _$33190$36012$;\n\nvar EXT_FLOAT_WEBGL2 = 'EXT_color_buffer_float';\nexport default (_$33190$36012$ = {}, _defineProperty(_$33190$36012$, 33189, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33190, {\n  gl2: true,\n  bpp: 3\n}), _defineProperty(_$33190$36012$, 36012, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36168, {\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 34041, {\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 35056, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36013, {\n  gl2: true,\n  bpp: 5\n}), _defineProperty(_$33190$36012$, 32854, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 36194, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 32855, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33321, {\n  gl2: true,\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 33330, {\n  gl2: true,\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 33329, {\n  gl2: true,\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 33332, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33331, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33334, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33333, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33323, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33336, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33335, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33338, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33337, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33340, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 33339, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 32849, {\n  gl2: true,\n  bpp: 3\n}), _defineProperty(_$33190$36012$, 32856, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 32857, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36220, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36238, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36975, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36214, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 36232, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 36226, {\n  gl2: true,\n  bpp: 16\n}), _defineProperty(_$33190$36012$, 36208, {\n  gl2: true,\n  bpp: 16\n}), _defineProperty(_$33190$36012$, 33325, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33327, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 34842, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 33326, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33328, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 34836, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 16\n}), _defineProperty(_$33190$36012$, 35898, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 4\n}), _$33190$36012$);","import \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport RENDERBUFFER_FORMATS from './renderbuffer-formats';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\n\nfunction isFormatSupported(gl, format, formats) {\n  var info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  var value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nvar Renderbuffer = function (_Resource) {\n  _inherits(Renderbuffer, _Resource);\n\n  _createClass(Renderbuffer, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          format = _ref.format;\n\n      return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n    }\n  }, {\n    key: \"getSamplesForFormat\",\n    value: function getSamplesForFormat(gl, _ref2) {\n      var format = _ref2.format;\n      return gl.getInternalformatParameter(36161, format, 32937);\n    }\n  }]);\n\n  function Renderbuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Renderbuffer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Renderbuffer).call(this, gl, opts));\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Renderbuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref3) {\n      var format = _ref3.format,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height,\n          _ref3$samples = _ref3.samples,\n          samples = _ref3$samples === void 0 ? 0 : _ref3$samples;\n      assert(format, 'Needs format');\n\n      this._trackDeallocatedMemory();\n\n      this.gl.bindRenderbuffer(36161, this.handle);\n\n      if (samples !== 0 && isWebGL2(this.gl)) {\n        this.gl.renderbufferStorageMultisample(36161, samples, format, width, height);\n      } else {\n        this.gl.renderbufferStorage(36161, format, width, height);\n      }\n\n      this.format = format;\n      this.width = width;\n      this.height = height;\n      this.samples = samples;\n\n      this._trackAllocatedMemory(this.width * this.height * (this.samples || 1) * RENDERBUFFER_FORMATS[this.format].bpp);\n\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref4) {\n      var width = _ref4.width,\n          height = _ref4.height;\n\n      if (width !== this.width || height !== this.height) {\n        return this.initialize({\n          width: width,\n          height: height,\n          format: this.format,\n          samples: this.samples\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createRenderbuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteRenderbuffer(this.handle);\n\n      this._trackDeallocatedMemory();\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindRenderbuffer(36161, handle);\n    }\n  }, {\n    key: \"_syncHandle\",\n    value: function _syncHandle(handle) {\n      this.format = this.getParameter(36164);\n      this.width = this.getParameter(36162);\n      this.height = this.getParameter(36163);\n      this.samples = this.getParameter(36011);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      this.gl.bindRenderbuffer(36161, this.handle);\n      var value = this.gl.getRenderbufferParameter(36161, pname);\n      return value;\n    }\n  }]);\n\n  return Renderbuffer;\n}(Resource);\n\nexport { Renderbuffer as default };","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { withParameters } from '@luma.gl/gltools';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport { assert } from '../utils';\nvar GL_DEPTH_BUFFER_BIT = 0x00000100;\nvar GL_STENCIL_BUFFER_BIT = 0x00000400;\nvar GL_COLOR_BUFFER_BIT = 0x00004000;\nvar GL_COLOR = 0x1800;\nvar GL_DEPTH = 0x1801;\nvar GL_STENCIL = 0x1802;\nvar GL_DEPTH_STENCIL = 0x84f9;\nvar ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$framebuffer = _ref.framebuffer,\n      framebuffer = _ref$framebuffer === void 0 ? null : _ref$framebuffer,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? null : _ref$color,\n      _ref$depth = _ref.depth,\n      depth = _ref$depth === void 0 ? null : _ref$depth,\n      _ref$stencil = _ref.stencil,\n      stencil = _ref$stencil === void 0 ? null : _ref$stencil;\n\n  var parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  var clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, function () {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$framebuffer = _ref2.framebuffer,\n      framebuffer = _ref2$framebuffer === void 0 ? null : _ref2$framebuffer,\n      _ref2$buffer = _ref2.buffer,\n      buffer = _ref2$buffer === void 0 ? GL_COLOR : _ref2$buffer,\n      _ref2$drawBuffer = _ref2.drawBuffer,\n      drawBuffer = _ref2$drawBuffer === void 0 ? 0 : _ref2$drawBuffer,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? [0, 0, 0, 0] : _ref2$value;\n\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer: framebuffer\n  }, function () {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        var _value = _slicedToArray(value, 2),\n            depth = _value[0],\n            stencil = _value[1];\n\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}","import { assert } from '../utils';\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.object.seal\";\nimport \"core-js/modules/es6.object.assign\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { log } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { assertWebGLContext } from '../webgl-utils';\nvar FACES = [34069, 34070, 34071, 34072, 34073, 34074];\n\nvar TextureCube = function (_Texture) {\n  _inherits(TextureCube, _Texture);\n\n  function TextureCube(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TextureCube);\n\n    assertWebGLContext(gl);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextureCube).call(this, gl, Object.assign({}, props, {\n      target: 34067\n    })));\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TextureCube, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$mipmaps = props.mipmaps,\n          mipmaps = _props$mipmaps === void 0 ? true : _props$mipmaps,\n          _props$parameters = props.parameters,\n          parameters = _props$parameters === void 0 ? {} : _props$parameters;\n      this.opts = props;\n      this.setCubeMapImageData(props).then(function () {\n        _this2.loaded = true;\n\n        if (mipmaps) {\n          _this2.generateMipmap(props);\n        }\n\n        _this2.setParameters(parameters);\n      });\n    }\n  }, {\n    key: \"subImage\",\n    value: function subImage(_ref) {\n      var face = _ref.face,\n          data = _ref.data,\n          _ref$x = _ref.x,\n          x = _ref$x === void 0 ? 0 : _ref$x,\n          _ref$y = _ref.y,\n          y = _ref$y === void 0 ? 0 : _ref$y,\n          _ref$mipmapLevel = _ref.mipmapLevel,\n          mipmapLevel = _ref$mipmapLevel === void 0 ? 0 : _ref$mipmapLevel;\n      return this._subImage({\n        target: face,\n        data: data,\n        x: x,\n        y: y,\n        mipmapLevel: mipmapLevel\n      });\n    }\n  }, {\n    key: \"setCubeMapImageData\",\n    value: function () {\n      var _setCubeMapImageData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2) {\n        var _this3 = this;\n\n        var width, height, pixels, data, _ref2$border, border, _ref2$format, format, _ref2$type, type, gl, imageDataMap, resolvedFaces;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                width = _ref2.width, height = _ref2.height, pixels = _ref2.pixels, data = _ref2.data, _ref2$border = _ref2.border, border = _ref2$border === void 0 ? 0 : _ref2$border, _ref2$format = _ref2.format, format = _ref2$format === void 0 ? 6408 : _ref2$format, _ref2$type = _ref2.type, type = _ref2$type === void 0 ? 5121 : _ref2$type;\n                gl = this.gl;\n                imageDataMap = pixels || data;\n                _context.next = 5;\n                return Promise.all(FACES.map(function (face) {\n                  var facePixels = imageDataMap[face];\n                  return Promise.all(Array.isArray(facePixels) ? facePixels : [facePixels]);\n                }));\n\n              case 5:\n                resolvedFaces = _context.sent;\n                this.bind();\n                FACES.forEach(function (face, index) {\n                  if (resolvedFaces[index].length > 1 && _this3.opts.mipmaps !== false) {\n                    log.warn(\"\".concat(_this3.id, \" has mipmap and multiple LODs.\"))();\n                  }\n\n                  resolvedFaces[index].forEach(function (image, lodLevel) {\n                    if (width && height) {\n                      gl.texImage2D(face, lodLevel, format, width, height, border, format, type, image);\n                    } else {\n                      gl.texImage2D(face, lodLevel, format, format, type, image);\n                    }\n                  });\n                });\n                this.unbind();\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function setCubeMapImageData(_x) {\n        return _setCubeMapImageData.apply(this, arguments);\n      }\n\n      return setCubeMapImageData;\n    }()\n  }, {\n    key: \"setImageDataForFace\",\n    value: function setImageDataForFace(options) {\n      var _this4 = this;\n\n      var face = options.face,\n          width = options.width,\n          height = options.height,\n          pixels = options.pixels,\n          data = options.data,\n          _options$border = options.border,\n          border = _options$border === void 0 ? 0 : _options$border,\n          _options$format = options.format,\n          format = _options$format === void 0 ? 6408 : _options$format,\n          _options$type = options.type,\n          type = _options$type === void 0 ? 5121 : _options$type;\n      var gl = this.gl;\n      var imageData = pixels || data;\n      this.bind();\n\n      if (imageData instanceof Promise) {\n        imageData.then(function (resolvedImageData) {\n          return _this4.setImageDataForFace(Object.assign({}, options, {\n            face: face,\n            data: resolvedImageData,\n            pixels: resolvedImageData\n          }));\n        });\n      } else if (this.width || this.height) {\n        gl.texImage2D(face, 0, format, width, height, border, format, type, imageData);\n      } else {\n        gl.texImage2D(face, 0, format, format, type, imageData);\n      }\n\n      return this;\n    }\n  }]);\n\n  return TextureCube;\n}(Texture);\n\nexport { TextureCube as default };\nTextureCube.FACES = FACES;","import \"core-js/modules/es6.object.seal\";\nimport \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { isWebGL2, withParameters } from '@luma.gl/gltools';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport Texture from './texture';\nimport { DATA_FORMAT_CHANNELS, TYPE_SIZES } from './texture-formats';\nimport Buffer from './buffer';\n\nvar Texture3D = function (_Texture) {\n  _inherits(Texture3D, _Texture);\n\n  _createClass(Texture3D, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function Texture3D(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Texture3D);\n\n    assertWebGL2Context(gl);\n    props = Object.assign({\n      depth: 1\n    }, props, {\n      target: 32879,\n      unpackFlipY: false\n    });\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture3D).call(this, gl, props));\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Texture3D, [{\n    key: \"setImageData\",\n    value: function setImageData(_ref) {\n      var _this2 = this;\n\n      var _ref$level = _ref.level,\n          level = _ref$level === void 0 ? 0 : _ref$level,\n          _ref$dataFormat = _ref.dataFormat,\n          dataFormat = _ref$dataFormat === void 0 ? 6408 : _ref$dataFormat,\n          width = _ref.width,\n          height = _ref.height,\n          _ref$depth = _ref.depth,\n          depth = _ref$depth === void 0 ? 1 : _ref$depth,\n          _ref$border = _ref.border,\n          border = _ref$border === void 0 ? 0 : _ref$border,\n          format = _ref.format,\n          _ref$type = _ref.type,\n          type = _ref$type === void 0 ? 5121 : _ref$type,\n          _ref$offset = _ref.offset,\n          offset = _ref$offset === void 0 ? 0 : _ref$offset,\n          data = _ref.data,\n          _ref$parameters = _ref.parameters,\n          parameters = _ref$parameters === void 0 ? {} : _ref$parameters;\n\n      this._trackDeallocatedMemory('Texture');\n\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, parameters, function () {\n        if (ArrayBuffer.isView(data)) {\n          _this2.gl.texImage3D(_this2.target, level, dataFormat, width, height, depth, border, format, type, data);\n        }\n\n        if (data instanceof Buffer) {\n          _this2.gl.bindBuffer(35052, data.handle);\n\n          _this2.gl.texImage3D(_this2.target, level, dataFormat, width, height, depth, border, format, type, offset);\n        }\n      });\n\n      if (data && data.byteLength) {\n        this._trackAllocatedMemory(data.byteLength, 'Texture');\n      } else {\n        var channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n        var channelSize = TYPE_SIZES[this.type] || 1;\n\n        this._trackAllocatedMemory(this.width * this.height * this.depth * channels * channelSize, 'Texture');\n      }\n\n      this.loaded = true;\n      return this;\n    }\n  }]);\n\n  return Texture3D;\n}(Texture);\n\nexport { Texture3D as default };","import \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.max-safe-integer\";\nimport \"core-js/modules/es6.function.bind\";\nimport Buffer from './buffer';\nimport Framebuffer from './framebuffer';\nimport Texture from './texture';\nimport { withParameters, log } from '@luma.gl/gltools';\nimport { assertWebGL2Context, flipRows, scalePixels } from '../webgl-utils';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { toFramebuffer } from '../webgl-utils/texture-utils';\nimport { assert } from '../utils';\nexport function readPixelsToArray(source) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$sourceX = _ref.sourceX,\n      sourceX = _ref$sourceX === void 0 ? 0 : _ref$sourceX,\n      _ref$sourceY = _ref.sourceY,\n      sourceY = _ref$sourceY === void 0 ? 0 : _ref$sourceY,\n      _ref$sourceFormat = _ref.sourceFormat,\n      sourceFormat = _ref$sourceFormat === void 0 ? 6408 : _ref$sourceFormat,\n      _ref$sourceAttachment = _ref.sourceAttachment,\n      sourceAttachment = _ref$sourceAttachment === void 0 ? 36064 : _ref$sourceAttachment,\n      _ref$target = _ref.target,\n      target = _ref$target === void 0 ? null : _ref$target,\n      sourceWidth = _ref.sourceWidth,\n      sourceHeight = _ref.sourceHeight,\n      sourceType = _ref.sourceType;\n\n  var _getFramebuffer = getFramebuffer(source),\n      framebuffer = _getFramebuffer.framebuffer,\n      deleteFramebuffer = _getFramebuffer.deleteFramebuffer;\n\n  assert(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle,\n      attachments = framebuffer.attachments;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  assert(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || getGLTypeFromTypedArray(target);\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\nexport function readPixelsToBuffer(source, _ref2) {\n  var _ref2$sourceX = _ref2.sourceX,\n      sourceX = _ref2$sourceX === void 0 ? 0 : _ref2$sourceX,\n      _ref2$sourceY = _ref2.sourceY,\n      sourceY = _ref2$sourceY === void 0 ? 0 : _ref2$sourceY,\n      _ref2$sourceFormat = _ref2.sourceFormat,\n      sourceFormat = _ref2$sourceFormat === void 0 ? 6408 : _ref2$sourceFormat,\n      _ref2$target = _ref2.target,\n      target = _ref2$target === void 0 ? null : _ref2$target,\n      _ref2$targetByteOffse = _ref2.targetByteOffset,\n      targetByteOffset = _ref2$targetByteOffse === void 0 ? 0 : _ref2$targetByteOffse,\n      sourceWidth = _ref2.sourceWidth,\n      sourceHeight = _ref2.sourceHeight,\n      sourceType = _ref2.sourceType;\n\n  var _getFramebuffer2 = getFramebuffer(source),\n      framebuffer = _getFramebuffer2.framebuffer,\n      deleteFramebuffer = _getFramebuffer2.deleteFramebuffer;\n\n  assert(framebuffer);\n  var gl = framebuffer.gl;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  assertWebGL2Context(gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    var components = glFormatToComponents(sourceFormat);\n    var byteCount = glTypeToBytes(sourceType);\n    var byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new Buffer(gl, {\n      byteLength: byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  withParameters(gl, {\n    framebuffer: framebuffer\n  }, function () {\n    gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\nexport function copyToDataUrl(source) {\n  var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref3$sourceAttachmen = _ref3.sourceAttachment,\n      sourceAttachment = _ref3$sourceAttachmen === void 0 ? 36064 : _ref3$sourceAttachmen,\n      _ref3$targetMaxHeight = _ref3.targetMaxHeight,\n      targetMaxHeight = _ref3$targetMaxHeight === void 0 ? Number.MAX_SAFE_INTEGER : _ref3$targetMaxHeight;\n\n  var data = readPixelsToArray(source, {\n    sourceAttachment: sourceAttachment\n  });\n  var width = source.width,\n      height = source.height;\n\n  while (height > targetMaxHeight) {\n    var _scalePixels = scalePixels({\n      data: data,\n      width: width,\n      height: height\n    });\n\n    data = _scalePixels.data;\n    width = _scalePixels.width;\n    height = _scalePixels.height;\n  }\n\n  flipRows({\n    data: data,\n    width: width,\n    height: height\n  });\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  var context = canvas.getContext('2d');\n  var imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\nexport function copyToImage(source) {\n  var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref4$sourceAttachmen = _ref4.sourceAttachment,\n      sourceAttachment = _ref4$sourceAttachmen === void 0 ? 36064 : _ref4$sourceAttachmen,\n      _ref4$targetImage = _ref4.targetImage,\n      targetImage = _ref4$targetImage === void 0 ? null : _ref4$targetImage;\n\n  var dataUrl = copyToDataUrl(source, {\n    sourceAttachment: sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\nexport function copyToTexture(source, target) {\n  var _ref5 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref5$sourceX = _ref5.sourceX,\n      sourceX = _ref5$sourceX === void 0 ? 0 : _ref5$sourceX,\n      _ref5$sourceY = _ref5.sourceY,\n      sourceY = _ref5$sourceY === void 0 ? 0 : _ref5$sourceY,\n      targetX = _ref5.targetX,\n      targetY = _ref5.targetY,\n      targetZ = _ref5.targetZ,\n      _ref5$targetMipmaplev = _ref5.targetMipmaplevel,\n      targetMipmaplevel = _ref5$targetMipmaplev === void 0 ? 0 : _ref5$targetMipmaplev,\n      _ref5$targetInternalF = _ref5.targetInternalFormat,\n      targetInternalFormat = _ref5$targetInternalF === void 0 ? 6408 : _ref5$targetInternalF,\n      width = _ref5.width,\n      height = _ref5.height;\n\n  var _getFramebuffer3 = getFramebuffer(source),\n      framebuffer = _getFramebuffer3.framebuffer,\n      deleteFramebuffer = _getFramebuffer3.deleteFramebuffer;\n\n  assert(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle;\n  var isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  assert(target);\n  var texture = null;\n\n  if (target instanceof Texture) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        gl.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return texture;\n}\nexport function blit(source, target) {\n  var _ref6 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref6$sourceAttachmen = _ref6.sourceAttachment,\n      sourceAttachment = _ref6$sourceAttachmen === void 0 ? 36064 : _ref6$sourceAttachmen,\n      _ref6$sourceX = _ref6.sourceX0,\n      sourceX0 = _ref6$sourceX === void 0 ? 0 : _ref6$sourceX,\n      _ref6$sourceY = _ref6.sourceY0,\n      sourceY0 = _ref6$sourceY === void 0 ? 0 : _ref6$sourceY,\n      sourceX1 = _ref6.sourceX1,\n      sourceY1 = _ref6.sourceY1,\n      _ref6$targetX = _ref6.targetX0,\n      targetX0 = _ref6$targetX === void 0 ? 0 : _ref6$targetX,\n      _ref6$targetY = _ref6.targetY0,\n      targetY0 = _ref6$targetY === void 0 ? 0 : _ref6$targetY,\n      targetX1 = _ref6.targetX1,\n      targetY1 = _ref6.targetY1,\n      _ref6$color = _ref6.color,\n      color = _ref6$color === void 0 ? true : _ref6$color,\n      _ref6$depth = _ref6.depth,\n      depth = _ref6$depth === void 0 ? false : _ref6$depth,\n      _ref6$stencil = _ref6.stencil,\n      stencil = _ref6$stencil === void 0 ? false : _ref6$stencil,\n      _ref6$mask = _ref6.mask,\n      mask = _ref6$mask === void 0 ? 0 : _ref6$mask,\n      _ref6$filter = _ref6.filter,\n      filter = _ref6$filter === void 0 ? 9728 : _ref6$filter;\n\n  var _getFramebuffer4 = getFramebuffer(source),\n      srcFramebuffer = _getFramebuffer4.framebuffer,\n      deleteSrcFramebuffer = _getFramebuffer4.deleteFramebuffer;\n\n  var _getFramebuffer5 = getFramebuffer(target),\n      dstFramebuffer = _getFramebuffer5.framebuffer,\n      deleteDstFramebuffer = _getFramebuffer5.deleteFramebuffer;\n\n  assert(srcFramebuffer);\n  assert(dstFramebuffer);\n  var gl = dstFramebuffer.gl,\n      handle = dstFramebuffer.handle,\n      width = dstFramebuffer.width,\n      height = dstFramebuffer.height,\n      readBuffer = dstFramebuffer.readBuffer;\n  assertWebGL2Context(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n      log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  assert(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  var prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  var prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl.readBuffer(sourceAttachment);\n  gl.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl.readBuffer(readBuffer);\n  gl.bindFramebuffer(36008, prevReadHandle || null);\n  gl.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer[\"delete\"]();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer[\"delete\"]();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof Framebuffer)) {\n    return {\n      framebuffer: toFramebuffer(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  var ArrayType = getTypedArrayFromGLType(type, {\n    clamped: false\n  });\n  var components = glFormatToComponents(format);\n  return new ArrayType(width * height * components);\n}","import \"core-js/modules/es6.object.assign\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Texture2D from '../classes/texture-2d';\nimport TextureCube from '../classes/texture-cube';\nimport Texture3D from '../classes/texture-3d';\nimport Framebuffer from '../classes/framebuffer';\nimport { assert } from '../utils';\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  var TextureType = refTexture.constructor;\n  var gl = refTexture.gl,\n      width = refTexture.width,\n      height = refTexture.height,\n      format = refTexture.format,\n      type = refTexture.type,\n      dataFormat = refTexture.dataFormat,\n      border = refTexture.border,\n      mipmaps = refTexture.mipmaps;\n  var textureOptions = Object.assign({\n    width: width,\n    height: height,\n    format: format,\n    type: type,\n    dataFormat: dataFormat,\n    border: border,\n    mipmaps: mipmaps\n  }, overrides);\n  return new TextureType(gl, textureOptions);\n}\nexport function toFramebuffer(texture, opts) {\n  var gl = texture.gl,\n      width = texture.width,\n      height = texture.height,\n      id = texture.id;\n  var framebuffer = new Framebuffer(gl, Object.assign({}, opts, {\n    id: \"framebuffer-for-\".concat(id),\n    width: width,\n    height: height,\n    attachments: _defineProperty({}, 36064, texture)\n  }));\n  return framebuffer;\n}","import \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.seal\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { isWebGL2, log as _log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport { clear as _clear, clearBuffer } from './clear';\nimport { copyToDataUrl } from './copy-and-blit.js';\nimport { getFeatures } from '../features';\nimport { assertWebGL2Context, getKey } from '../webgl-utils';\nimport { assert } from '../utils';\nvar ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\n\nvar Framebuffer = function (_Resource) {\n  _inherits(Framebuffer, _Resource);\n\n  _createClass(Framebuffer, [{\n    key: \"MAX_COLOR_ATTACHMENTS\",\n    get: function get() {\n      return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS);\n    }\n  }, {\n    key: \"MAX_DRAW_BUFFERS\",\n    get: function get() {\n      return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS);\n    }\n  }], [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          colorBufferFloat = _ref.colorBufferFloat,\n          colorBufferHalfFloat = _ref.colorBufferHalfFloat;\n\n      var supported = true;\n\n      if (colorBufferFloat) {\n        supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n      }\n\n      if (colorBufferHalfFloat) {\n        supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n      }\n\n      return supported;\n    }\n  }, {\n    key: \"getDefaultFramebuffer\",\n    value: function getDefaultFramebuffer(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n        id: 'default-framebuffer',\n        handle: null,\n        attachments: {}\n      });\n      return gl.luma.defaultFramebuffer;\n    }\n  }]);\n\n  function Framebuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Framebuffer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Framebuffer).call(this, gl, opts));\n    _this.width = null;\n    _this.height = null;\n    _this.attachments = {};\n    _this.readBuffer = 36064;\n    _this.drawBuffers = [36064];\n    _this.ownResources = [];\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Framebuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref2) {\n      var _ref2$width = _ref2.width,\n          width = _ref2$width === void 0 ? 1 : _ref2$width,\n          _ref2$height = _ref2.height,\n          height = _ref2$height === void 0 ? 1 : _ref2$height,\n          _ref2$attachments = _ref2.attachments,\n          attachments = _ref2$attachments === void 0 ? null : _ref2$attachments,\n          _ref2$color = _ref2.color,\n          color = _ref2$color === void 0 ? true : _ref2$color,\n          _ref2$depth = _ref2.depth,\n          depth = _ref2$depth === void 0 ? true : _ref2$depth,\n          _ref2$stencil = _ref2.stencil,\n          stencil = _ref2$stencil === void 0 ? false : _ref2$stencil,\n          _ref2$check = _ref2.check,\n          check = _ref2$check === void 0 ? true : _ref2$check,\n          readBuffer = _ref2.readBuffer,\n          drawBuffers = _ref2.drawBuffers;\n      assert(width >= 0 && height >= 0, 'Width and height need to be integers');\n      this.width = width;\n      this.height = height;\n\n      if (attachments) {\n        for (var attachment in attachments) {\n          var target = attachments[attachment];\n          var object = Array.isArray(target) ? target[0] : target;\n          object.resize({\n            width: width,\n            height: height\n          });\n        }\n      } else {\n        attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n      }\n\n      this.update({\n        clearAttachments: true,\n        attachments: attachments,\n        readBuffer: readBuffer,\n        drawBuffers: drawBuffers\n      });\n\n      if (attachments && check) {\n        this.checkStatus();\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.ownResources[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var resource = _step.value;\n          resource[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      _get(_getPrototypeOf(Framebuffer.prototype), \"delete\", this).call(this);\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref3) {\n      var _ref3$attachments = _ref3.attachments,\n          attachments = _ref3$attachments === void 0 ? {} : _ref3$attachments,\n          readBuffer = _ref3.readBuffer,\n          drawBuffers = _ref3.drawBuffers,\n          _ref3$clearAttachment = _ref3.clearAttachments,\n          clearAttachments = _ref3$clearAttachment === void 0 ? false : _ref3$clearAttachment,\n          _ref3$resizeAttachmen = _ref3.resizeAttachments,\n          resizeAttachments = _ref3$resizeAttachmen === void 0 ? true : _ref3$resizeAttachmen;\n      this.attach(attachments, {\n        clearAttachments: clearAttachments,\n        resizeAttachments: resizeAttachments\n      });\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n      if (readBuffer) {\n        this._setReadBuffer(readBuffer);\n      }\n\n      if (drawBuffers) {\n        this._setDrawBuffers(drawBuffers);\n      }\n\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          width = _ref4.width,\n          height = _ref4.height;\n\n      if (this.handle === null) {\n        assert(width === undefined && height === undefined);\n        this.width = this.gl.drawingBufferWidth;\n        this.height = this.gl.drawingBufferHeight;\n        return this;\n      }\n\n      if (width === undefined) {\n        width = this.gl.drawingBufferWidth;\n      }\n\n      if (height === undefined) {\n        height = this.gl.drawingBufferHeight;\n      }\n\n      if (width !== this.width && height !== this.height) {\n        _log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height))();\n      }\n\n      for (var attachmentPoint in this.attachments) {\n        this.attachments[attachmentPoint].resize({\n          width: width,\n          height: height\n        });\n      }\n\n      this.width = width;\n      this.height = height;\n      return this;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(attachments) {\n      var _this2 = this;\n\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref5$clearAttachment = _ref5.clearAttachments,\n          clearAttachments = _ref5$clearAttachment === void 0 ? false : _ref5$clearAttachment,\n          _ref5$resizeAttachmen = _ref5.resizeAttachments,\n          resizeAttachments = _ref5$resizeAttachmen === void 0 ? true : _ref5$resizeAttachmen;\n\n      var newAttachments = {};\n\n      if (clearAttachments) {\n        Object.keys(this.attachments).forEach(function (key) {\n          newAttachments[key] = null;\n        });\n      }\n\n      Object.assign(newAttachments, attachments);\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      for (var key in newAttachments) {\n        assert(key !== undefined, 'Misspelled framebuffer binding point?');\n        var attachment = Number(key);\n        var descriptor = newAttachments[attachment];\n        var object = descriptor;\n\n        if (!object) {\n          this._unattach(attachment);\n        } else if (object instanceof Renderbuffer) {\n          this._attachRenderbuffer({\n            attachment: attachment,\n            renderbuffer: object\n          });\n        } else if (Array.isArray(descriptor)) {\n          var _descriptor = _slicedToArray(descriptor, 3),\n              texture = _descriptor[0],\n              _descriptor$ = _descriptor[1],\n              layer = _descriptor$ === void 0 ? 0 : _descriptor$,\n              _descriptor$2 = _descriptor[2],\n              level = _descriptor$2 === void 0 ? 0 : _descriptor$2;\n\n          object = texture;\n\n          this._attachTexture({\n            attachment: attachment,\n            texture: texture,\n            layer: layer,\n            level: level\n          });\n        } else {\n          this._attachTexture({\n            attachment: attachment,\n            texture: object,\n            layer: 0,\n            level: 0\n          });\n        }\n\n        if (resizeAttachments && object) {\n          object.resize({\n            width: this.width,\n            height: this.height\n          });\n        }\n      }\n\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      Object.assign(this.attachments, attachments);\n      Object.keys(this.attachments).filter(function (key) {\n        return !_this2.attachments[key];\n      }).forEach(function (key) {\n        delete _this2.attachments[key];\n      });\n    }\n  }, {\n    key: \"checkStatus\",\n    value: function checkStatus() {\n      var gl = this.gl;\n      var status = this.getStatus();\n\n      if (status !== 36053) {\n        throw new Error(_getFrameBufferStatus(status));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getStatus\",\n    value: function getStatus() {\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n      var status = gl.checkFramebufferStatus(36160);\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return status;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          color = _ref6.color,\n          depth = _ref6.depth,\n          stencil = _ref6.stencil,\n          _ref6$drawBuffers = _ref6.drawBuffers,\n          drawBuffers = _ref6$drawBuffers === void 0 ? [] : _ref6$drawBuffers;\n\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      if (color || depth || stencil) {\n        _clear(this.gl, {\n          color: color,\n          depth: depth,\n          stencil: stencil\n        });\n      }\n\n      drawBuffers.forEach(function (value, drawBuffer) {\n        clearBuffer({\n          drawBuffer: drawBuffer,\n          value: value\n        });\n      });\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"readPixels\",\n    value: function readPixels() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"readPixelsToBuffer\",\n    value: function readPixelsToBuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToDataUrl\",\n    value: function copyToDataUrl() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToImage\",\n    value: function copyToImage() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToTexture\",\n    value: function copyToTexture() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n\n      return null;\n    }\n  }, {\n    key: \"blit\",\n    value: function blit() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n\n      return null;\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(_ref7) {\n      var _ref7$attachments = _ref7.attachments,\n          attachments = _ref7$attachments === void 0 ? [] : _ref7$attachments,\n          _ref7$x = _ref7.x,\n          x = _ref7$x === void 0 ? 0 : _ref7$x,\n          _ref7$y = _ref7.y,\n          y = _ref7$y === void 0 ? 0 : _ref7$y,\n          width = _ref7.width,\n          height = _ref7.height;\n      var gl = this.gl;\n      assertWebGL2Context(gl);\n      var prevHandle = gl.bindFramebuffer(36008, this.handle);\n      var invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n      if (invalidateAll) {\n        gl.invalidateFramebuffer(36008, attachments);\n      } else {\n        gl.invalidateFramebuffer(36008, attachments, x, y, width, height);\n      }\n\n      gl.bindFramebuffer(36008, prevHandle);\n      return this;\n    }\n  }, {\n    key: \"getAttachmentParameter\",\n    value: function getAttachmentParameter(attachment, pname, keys) {\n      var value = this._getAttachmentParameterFallback(pname);\n\n      if (value === null) {\n        this.gl.bindFramebuffer(36160, this.handle);\n        value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n        this.gl.bindFramebuffer(36160, null);\n      }\n\n      if (keys && value > 1000) {\n        value = getKey(this.gl, value);\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getAttachmentParameters\",\n    value: function getAttachmentParameters() {\n      var attachment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 36064;\n      var keys = arguments.length > 1 ? arguments[1] : undefined;\n      var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.constructor.ATTACHMENT_PARAMETERS || [];\n      var values = {};\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = parameters[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var pname = _step2.value;\n          var key = keys ? getKey(this.gl, pname) : pname;\n          values[key] = this.getAttachmentParameter(attachment, pname, keys);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return values;\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var attachments = Object.keys(this.attachments);\n      var parameters = {};\n\n      for (var _i = 0, _attachments = attachments; _i < _attachments.length; _i++) {\n        var attachmentName = _attachments[_i];\n        var attachment = Number(attachmentName);\n        var key = keys ? getKey(this.gl, attachment) : attachment;\n        parameters[key] = this.getAttachmentParameters(attachment, keys);\n      }\n\n      return parameters;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (typeof window !== 'undefined') {\n        window.open(copyToDataUrl(this), 'luma-debug-texture');\n      }\n\n      return this;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      var logLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      if (logLevel > _log.level || typeof window === 'undefined') {\n        return this;\n      }\n\n      message = message || \"Framebuffer \".concat(this.id);\n      var image = copyToDataUrl(this, {\n        maxHeight: 100\n      });\n\n      _log.image({\n        logLevel: logLevel,\n        message: message,\n        image: image\n      }, message)();\n\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref8$target = _ref8.target,\n          target = _ref8$target === void 0 ? 36160 : _ref8$target;\n\n      this.gl.bindFramebuffer(target, this.handle);\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref9$target = _ref9.target,\n          target = _ref9$target === void 0 ? 36160 : _ref9$target;\n\n      this.gl.bindFramebuffer(target, null);\n      return this;\n    }\n  }, {\n    key: \"_createDefaultAttachments\",\n    value: function _createDefaultAttachments(color, depth, stencil, width, height) {\n      var defaultAttachments = null;\n\n      if (color) {\n        var _parameters;\n\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36064] = new Texture2D(this.gl, {\n          id: \"\".concat(this.id, \"-color0\"),\n          pixels: null,\n          format: 6408,\n          type: 5121,\n          width: width,\n          height: height,\n          mipmaps: false,\n          parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9729), _defineProperty(_parameters, 10240, 9729), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters)\n        });\n        this.ownResources.push(defaultAttachments[36064]);\n      }\n\n      if (depth && stencil) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[33306] = new Renderbuffer(this.gl, {\n          id: \"\".concat(this.id, \"-depth-stencil\"),\n          format: 35056,\n          width: width,\n          height: 111\n        });\n        this.ownResources.push(defaultAttachments[33306]);\n      } else if (depth) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36096] = new Renderbuffer(this.gl, {\n          id: \"\".concat(this.id, \"-depth\"),\n          format: 33189,\n          width: width,\n          height: height\n        });\n        this.ownResources.push(defaultAttachments[36096]);\n      } else if (stencil) {\n        assert(false);\n      }\n\n      return defaultAttachments;\n    }\n  }, {\n    key: \"_unattach\",\n    value: function _unattach(attachment) {\n      var oldAttachment = this.attachments[attachment];\n\n      if (!oldAttachment) {\n        return;\n      }\n\n      if (oldAttachment instanceof Renderbuffer) {\n        this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n      } else {\n        this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n      }\n\n      delete this.attachments[attachment];\n    }\n  }, {\n    key: \"_attachRenderbuffer\",\n    value: function _attachRenderbuffer(_ref10) {\n      var _ref10$attachment = _ref10.attachment,\n          attachment = _ref10$attachment === void 0 ? 36064 : _ref10$attachment,\n          renderbuffer = _ref10.renderbuffer;\n      var gl = this.gl;\n      gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n      this.attachments[attachment] = renderbuffer;\n    }\n  }, {\n    key: \"_attachTexture\",\n    value: function _attachTexture(_ref11) {\n      var _ref11$attachment = _ref11.attachment,\n          attachment = _ref11$attachment === void 0 ? 36064 : _ref11$attachment,\n          texture = _ref11.texture,\n          layer = _ref11.layer,\n          level = _ref11.level;\n      var gl = this.gl;\n      gl.bindTexture(texture.target, texture.handle);\n\n      switch (texture.target) {\n        case 35866:\n        case 32879:\n          gl.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n          break;\n\n        case 34067:\n          var face = mapIndexToCubeMapFace(layer);\n          gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n          break;\n\n        case 3553:\n          gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n          break;\n\n        default:\n          assert(false, 'Illegal texture type');\n      }\n\n      gl.bindTexture(texture.target, null);\n      this.attachments[attachment] = texture;\n    }\n  }, {\n    key: \"_setReadBuffer\",\n    value: function _setReadBuffer(readBuffer) {\n      var gl = this.gl;\n\n      if (isWebGL2(gl)) {\n        gl.readBuffer(readBuffer);\n      } else {\n        assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n      }\n\n      this.readBuffer = readBuffer;\n    }\n  }, {\n    key: \"_setDrawBuffers\",\n    value: function _setDrawBuffers(drawBuffers) {\n      var gl = this.gl;\n\n      if (isWebGL2(gl)) {\n        gl.drawBuffers(drawBuffers);\n      } else {\n        var ext = gl.getExtension('WEBGL.draw_buffers');\n\n        if (ext) {\n          ext.drawBuffersWEBGL(drawBuffers);\n        } else {\n          assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n        }\n      }\n\n      this.drawBuffers = drawBuffers;\n    }\n  }, {\n    key: \"_getAttachmentParameterFallback\",\n    value: function _getAttachmentParameterFallback(pname) {\n      var caps = getFeatures(this.gl);\n\n      switch (pname) {\n        case 36052:\n          return !caps.WEBGL2 ? 0 : null;\n\n        case 33298:\n        case 33299:\n        case 33300:\n        case 33301:\n        case 33302:\n        case 33303:\n          return !caps.WEBGL2 ? 8 : null;\n\n        case 33297:\n          return !caps.WEBGL2 ? 5125 : null;\n\n        case 33296:\n          return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n        default:\n          return null;\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createFramebuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteFramebuffer(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      return this.gl.bindFramebuffer(36160, handle);\n    }\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"texture\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"depth\",\n    get: function get() {\n      return this.attachments[36096] || this.attachments[33306] || null;\n    }\n  }, {\n    key: \"stencil\",\n    get: function get() {\n      return this.attachments[36128] || this.attachments[33306] || null;\n    }\n  }]);\n\n  return Framebuffer;\n}(Resource);\n\nexport { Framebuffer as default };\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  var STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nexport var FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.is-array\";\nimport WEBGL_FEATURES from './webgl-features-table';\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nvar LOG_UNSUPPORTED_FEATURE = 2;\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(function (feature) {\n    return isFeatureSupported(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  for (var cap in WEBGL_FEATURES) {\n    if (gl.luma.caps[cap] === undefined) {\n      gl.luma.caps[cap] = isFeatureSupported(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\n\nfunction isFeatureSupported(gl, cap) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  if (gl.luma.caps[cap] === undefined) {\n    gl.luma.caps[cap] = queryFeature(gl, cap);\n  }\n\n  if (!gl.luma.caps[cap]) {\n    log.log(LOG_UNSUPPORTED_FEATURE, \"Feature: \".concat(cap, \" not supported\"))();\n  }\n\n  return gl.luma.caps[cap];\n}\n\nfunction queryFeature(gl, cap) {\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  var isSupported;\n  var featureDefinition = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n\n  if (typeof featureDefinition === 'function') {\n    isSupported = featureDefinition(gl);\n  } else if (Array.isArray(featureDefinition)) {\n    isSupported = true;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = featureDefinition[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var extension = _step.value;\n        isSupported = isSupported && Boolean(gl.getExtension(extension));\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  } else if (typeof featureDefinition === 'string') {\n    isSupported = Boolean(gl.getExtension(featureDefinition));\n  } else if (typeof featureDefinition === 'boolean') {\n    isSupported = featureDefinition;\n  } else {\n    assert(false);\n  }\n\n  return isSupported;\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _FEATURES$WEBGL2$FEAT;\n\nimport Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport var FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  var testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  var testFb = new Framebuffer(gl, {\n    id: \"test-framebuffer\",\n    check: false,\n    attachments: _defineProperty({}, 36064, testTexture)\n  });\n  var status = testFb.getStatus();\n  testTexture[\"delete\"]();\n  testFb[\"delete\"]();\n  return status === 36053;\n}\n\nexport default (_FEATURES$WEBGL2$FEAT = {}, _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.WEBGL2, [false, true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.VERTEX_ARRAY_OBJECT, ['OES_vertex_array_object', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TIMER_QUERY, ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.INSTANCED_RENDERING, ['ANGLE_instanced_arrays', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.MULTIPLE_RENDER_TARGETS, ['WEBGL_draw_buffers', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.ELEMENT_INDEX_UINT32, ['OES_element_index_uint', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.BLEND_EQUATION_MINMAX, ['EXT_blend_minmax', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.FLOAT_BLEND, ['EXT_float_blend']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ENCODING_SRGB, ['EXT_sRGB', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_DEPTH, ['WEBGL_depth_texture', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FLOAT, ['OES_texture_float', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_HALF_FLOAT, ['OES_texture_half_float', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_LINEAR_FLOAT, ['OES_texture_float_linear']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT, ['OES_texture_half_float_linear']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_ANISOTROPIC, ['EXT_texture_filter_anisotropic']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_RGBA32F, [checkFloat32ColorAttachment, 'EXT_color_buffer_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_FLOAT, [false, 'EXT_color_buffer_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_HALF_FLOAT, ['EXT_color_buffer_half_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_FRAG_DATA, ['WEBGL_draw_buffers', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_FRAG_DEPTH, ['EXT_frag_depth', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_DERIVATIVES, ['OES_standard_derivatives', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_TEXTURE_LOD, ['EXT_shader_texture_lod', true]), _FEATURES$WEBGL2$FEAT);","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar ShaderAttribute = function () {\n  function ShaderAttribute(dataColumn, opts) {\n    _classCallCheck(this, ShaderAttribute);\n\n    this.opts = opts;\n    this.source = dataColumn;\n  }\n\n  _createClass(ShaderAttribute, [{\n    key: \"getValue\",\n    value: function getValue() {\n      var buffer = this.source.getBuffer();\n      var accessor = this.getAccessor();\n\n      if (buffer) {\n        return [buffer, accessor];\n      }\n\n      var value = this.source.value;\n      var size = accessor.size;\n      var constantValue = value;\n\n      if (value && value.length !== size) {\n        constantValue = new Float32Array(size);\n        var index = accessor.elementOffset || 0;\n\n        for (var i = 0; i < size; ++i) {\n          constantValue[i] = value[index + i];\n        }\n      }\n\n      return constantValue;\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor() {\n      return _objectSpread({}, this.source.getAccessor(), {}, this.opts);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.source.value;\n    }\n  }]);\n\n  return ShaderAttribute;\n}();\n\nexport { ShaderAttribute as default };","import \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var TypedArrayManager = function () {\n  function TypedArrayManager() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$overAlloc = _ref.overAlloc,\n        overAlloc = _ref$overAlloc === void 0 ? 2 : _ref$overAlloc,\n        _ref$poolSize = _ref.poolSize,\n        poolSize = _ref$poolSize === void 0 ? 100 : _ref$poolSize;\n\n    _classCallCheck(this, TypedArrayManager);\n\n    this.overAlloc = overAlloc;\n    this.poolSize = poolSize;\n    this._pool = [];\n  }\n\n  _createClass(TypedArrayManager, [{\n    key: \"allocate\",\n    value: function allocate(typedArray, count, _ref2) {\n      var _ref2$size = _ref2.size,\n          size = _ref2$size === void 0 ? 1 : _ref2$size,\n          type = _ref2.type,\n          _ref2$padding = _ref2.padding,\n          padding = _ref2$padding === void 0 ? 0 : _ref2$padding,\n          _ref2$copy = _ref2.copy,\n          copy = _ref2$copy === void 0 ? false : _ref2$copy,\n          _ref2$initialize = _ref2.initialize,\n          initialize = _ref2$initialize === void 0 ? false : _ref2$initialize;\n      var Type = type || typedArray && typedArray.constructor || Float32Array;\n      var newSize = count * size + padding;\n\n      if (ArrayBuffer.isView(typedArray)) {\n        if (newSize <= typedArray.length) {\n          return typedArray;\n        }\n\n        if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n          return new Type(typedArray.buffer, 0, newSize);\n        }\n      }\n\n      var newArray = this._allocate(Type, newSize, initialize);\n\n      if (typedArray && copy) {\n        newArray.set(typedArray);\n      } else if (!initialize) {\n        newArray.fill(0, 0, 4);\n      }\n\n      this._release(typedArray);\n\n      return newArray;\n    }\n  }, {\n    key: \"release\",\n    value: function release(typedArray) {\n      this._release(typedArray);\n    }\n  }, {\n    key: \"_allocate\",\n    value: function _allocate(Type, size, initialize) {\n      size = Math.max(Math.ceil(size * this.overAlloc), 1);\n      var pool = this._pool;\n      var byteLength = Type.BYTES_PER_ELEMENT * size;\n      var i = pool.findIndex(function (b) {\n        return b.byteLength >= byteLength;\n      });\n\n      if (i >= 0) {\n        var array = new Type(pool.splice(i, 1)[0], 0, size);\n\n        if (initialize) {\n          array.fill(0);\n        }\n\n        return array;\n      }\n\n      return new Type(size);\n    }\n  }, {\n    key: \"_release\",\n    value: function _release(typedArray) {\n      if (!ArrayBuffer.isView(typedArray)) {\n        return;\n      }\n\n      var pool = this._pool;\n      var buffer = typedArray.buffer;\n      var byteLength = buffer.byteLength;\n      var i = pool.findIndex(function (b) {\n        return b.byteLength >= byteLength;\n      });\n\n      if (i < 0) {\n        pool.push(buffer);\n      } else if (i > 0 || pool.length < this.poolSize) {\n        pool.splice(i, 0, buffer);\n      }\n\n      if (pool.length > this.poolSize) {\n        pool.shift();\n      }\n    }\n  }]);\n\n  return TypedArrayManager;\n}();\nexport default new TypedArrayManager();","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.math.fround\";\nimport typedArrayManager from './typed-array-manager';\nimport { Vector3 } from 'math.gl';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function extractCameraVectors(_ref) {\n  var viewMatrix = _ref.viewMatrix,\n      viewMatrixInverse = _ref.viewMatrixInverse;\n  return {\n    eye: [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]],\n    direction: [-viewMatrix[2], -viewMatrix[6], -viewMatrix[10]],\n    up: [viewMatrix[1], viewMatrix[5], viewMatrix[9]],\n    right: [viewMatrix[0], viewMatrix[4], viewMatrix[8]]\n  };\n}\nvar cameraPosition = new Vector3();\nvar cameraDirection = new Vector3();\nvar cameraUp = new Vector3();\nvar cameraRight = new Vector3();\nvar nearCenter = new Vector3();\nvar farCenter = new Vector3();\nvar a = new Vector3();\nexport function getFrustumPlanes(_ref2) {\n  var aspect = _ref2.aspect,\n      near = _ref2.near,\n      far = _ref2.far,\n      fovyRadians = _ref2.fovyRadians,\n      position = _ref2.position,\n      direction = _ref2.direction,\n      up = _ref2.up,\n      right = _ref2.right;\n  cameraDirection.copy(direction);\n  var nearFarScale = 1 / cameraDirection.len();\n  cameraDirection.normalize();\n  cameraPosition.copy(position);\n  cameraUp.copy(up);\n  var widthScale = 1 / cameraUp.len();\n  cameraUp.normalize();\n  cameraRight.copy(right).normalize();\n  var nearHeight = 2 * Math.tan(fovyRadians / 2) * near * widthScale;\n  var nearWidth = nearHeight * aspect;\n  nearCenter.copy(cameraDirection).scale(near * nearFarScale).add(cameraPosition);\n  farCenter.copy(cameraDirection).scale(far * nearFarScale).add(cameraPosition);\n  var normal = cameraDirection.clone().negate();\n  var distance = normal.dot(nearCenter);\n  var planes = {\n    near: {\n      distance: distance,\n      normal: normal\n    },\n    far: {\n      distance: cameraDirection.dot(farCenter),\n      normal: cameraDirection.clone()\n    }\n  };\n  a.copy(cameraRight).scale(nearWidth * 0.5).add(nearCenter).subtract(cameraPosition).normalize();\n  normal = new Vector3(a).cross(cameraUp);\n  distance = cameraPosition.dot(normal);\n  planes.right = {\n    normal: normal,\n    distance: distance\n  };\n  a.copy(cameraRight).scale(-nearWidth * 0.5).add(nearCenter).subtract(cameraPosition).normalize();\n  normal = new Vector3(cameraUp).cross(a);\n  distance = cameraPosition.dot(normal);\n  planes.left = {\n    normal: normal,\n    distance: distance\n  };\n  a.copy(cameraUp).scale(nearHeight * 0.5).add(nearCenter).subtract(cameraPosition).normalize();\n  normal = new Vector3(cameraRight).cross(a);\n  distance = cameraPosition.dot(normal);\n  planes.top = {\n    normal: normal,\n    distance: distance\n  };\n  a.copy(cameraUp).scale(-nearHeight * 0.5).add(nearCenter).subtract(cameraPosition).normalize();\n  normal = new Vector3(a).cross(cameraRight);\n  distance = cameraPosition.dot(normal);\n  planes.bottom = {\n    normal: normal,\n    distance: distance\n  };\n  return planes;\n}\nexport function fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nvar scratchArray;\nexport function toDoublePrecisionArray(typedArray, _ref3) {\n  var _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 1 : _ref3$size,\n      _ref3$startIndex = _ref3.startIndex,\n      startIndex = _ref3$startIndex === void 0 ? 0 : _ref3$startIndex,\n      endIndex = _ref3.endIndex;\n\n  if (!Number.isFinite(endIndex)) {\n    endIndex = typedArray.length;\n  }\n\n  var count = (endIndex - startIndex) / size;\n  scratchArray = typedArrayManager.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  var sourceIndex = startIndex;\n  var targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (var j = 0; j < size; j++) {\n      var value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.typed.float64-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { hasFeature, FEATURES, Buffer } from '@luma.gl/core';\nimport ShaderAttribute from './shader-attribute';\nimport { glArrayFromType } from './gl-utils';\nimport typedArrayManager from '../../utils/typed-array-manager';\nimport { toDoublePrecisionArray } from '../../utils/math-utils';\nimport log from '../../utils/log';\n\nfunction getStride(accessor) {\n  return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\n\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n  if (shaderAttributeOptions.offset) {\n    log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n  }\n\n  var stride = getStride(baseAccessor);\n  var vertexOffset = 'vertexOffset' in shaderAttributeOptions ? shaderAttributeOptions.vertexOffset : baseAccessor.vertexOffset || 0;\n  var elementOffset = shaderAttributeOptions.elementOffset || 0;\n  var offset = vertexOffset * stride + elementOffset * baseAccessor.bytesPerElement + (baseAccessor.offset || 0);\n  return _objectSpread({}, shaderAttributeOptions, {\n    offset: offset,\n    stride: stride\n  });\n}\n\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n  var resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n  return {\n    high: resolvedOptions,\n    low: _objectSpread({}, resolvedOptions, {\n      offset: resolvedOptions.offset + baseAccessor.size * 4\n    })\n  };\n}\n\nvar DataColumn = function () {\n  function DataColumn(gl, opts) {\n    _classCallCheck(this, DataColumn);\n\n    this.gl = gl;\n    this.id = opts.id;\n    this.size = opts.size;\n    var logicalType = opts.logicalType || opts.type;\n    var doublePrecision = logicalType === 5130;\n    var defaultValue = opts.defaultValue;\n    defaultValue = Number.isFinite(defaultValue) ? [defaultValue] : defaultValue || new Array(this.size).fill(0);\n    opts.defaultValue = defaultValue;\n    var bufferType = logicalType;\n\n    if (doublePrecision) {\n      bufferType = 5126;\n    } else if (!bufferType && opts.isIndexed) {\n      bufferType = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } else if (!bufferType) {\n      bufferType = 5126;\n    }\n\n    opts.logicalType = logicalType;\n    opts.type = bufferType;\n    var defaultType = glArrayFromType(logicalType || bufferType || 5126);\n    this.shaderAttributes = {};\n    this.doublePrecision = doublePrecision;\n\n    if (doublePrecision && opts.fp64 === false) {\n      defaultType = Float32Array;\n    }\n\n    opts.bytesPerElement = defaultType.BYTES_PER_ELEMENT;\n    this.defaultType = defaultType;\n    this.value = null;\n    this.settings = opts;\n    this.state = {\n      externalBuffer: null,\n      bufferAccessor: opts,\n      allocatedValue: null,\n      constant: false\n    };\n    this._buffer = null;\n    this.setData(opts);\n  }\n\n  _createClass(DataColumn, [{\n    key: \"delete\",\n    value: function _delete() {\n      if (this._buffer) {\n        this._buffer[\"delete\"]();\n\n        this._buffer = null;\n      }\n\n      typedArrayManager.release(this.state.allocatedValue);\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes(id, options) {\n      if (this.doublePrecision) {\n        var shaderAttributes = {};\n        var isBuffer64Bit = this.value instanceof Float64Array;\n        var doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(this.getAccessor(), options || {});\n        shaderAttributes[id] = new ShaderAttribute(this, doubleShaderAttributeDefs.high);\n        shaderAttributes[\"\".concat(id, \"64Low\")] = isBuffer64Bit ? new ShaderAttribute(this, doubleShaderAttributeDefs.low) : new Float32Array(this.size);\n        return shaderAttributes;\n      }\n\n      if (options) {\n        var shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n        return _defineProperty({}, id, new ShaderAttribute(this, shaderAttributeDef));\n      }\n\n      return _defineProperty({}, id, this);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      if (this.state.constant) {\n        return null;\n      }\n\n      return this.state.externalBuffer || this._buffer;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (this.state.constant) {\n        return this.value;\n      }\n\n      return [this.getBuffer(), this.getAccessor()];\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor() {\n      return this.state.bufferAccessor;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(opts) {\n      var state = this.state;\n\n      if (ArrayBuffer.isView(opts)) {\n        opts = {\n          value: opts\n        };\n      } else if (opts instanceof Buffer) {\n        opts = {\n          buffer: opts\n        };\n      }\n\n      var accessor = _objectSpread({}, this.settings, {}, opts);\n\n      state.bufferAccessor = accessor;\n\n      if (opts.constant) {\n        var value = opts.value;\n        value = this._normalizeValue(value, [], 0);\n\n        if (this.settings.normalized) {\n          value = this._normalizeConstant(value);\n        }\n\n        var hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n\n        if (!hasChanged) {\n          return false;\n        }\n\n        state.externalBuffer = null;\n        state.constant = true;\n        this.value = value;\n      } else if (opts.buffer) {\n        var buffer = opts.buffer;\n        state.externalBuffer = buffer;\n        state.constant = false;\n        this.value = opts.value;\n        var isBuffer64Bit = opts.value instanceof Float64Array;\n        accessor.type = opts.type || buffer.accessor.type;\n        accessor.bytesPerElement = buffer.accessor.BYTES_PER_ELEMENT * (isBuffer64Bit ? 2 : 1);\n        accessor.stride = getStride(accessor);\n      } else if (opts.value) {\n        this._checkExternalBuffer(opts);\n\n        var _value = opts.value;\n        state.externalBuffer = null;\n        state.constant = false;\n        this.value = _value;\n        accessor.bytesPerElement = _value.BYTES_PER_ELEMENT;\n        accessor.stride = getStride(accessor);\n        var _buffer = this.buffer,\n            byteOffset = this.byteOffset;\n\n        if (this.doublePrecision && _value instanceof Float64Array) {\n          _value = toDoublePrecisionArray(_value, accessor);\n        }\n\n        if (_buffer.byteLength < _value.byteLength + byteOffset) {\n          _buffer.reallocate((_value.byteLength + byteOffset) * 2);\n        }\n\n        _buffer.setAccessor(null);\n\n        _buffer.subData({\n          data: _value,\n          offset: byteOffset\n        });\n\n        accessor.type = opts.type || _buffer.accessor.type;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"updateSubBuffer\",\n    value: function updateSubBuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var value = this.value;\n      var _opts$startOffset = opts.startOffset,\n          startOffset = _opts$startOffset === void 0 ? 0 : _opts$startOffset,\n          endOffset = opts.endOffset;\n      this.buffer.subData({\n        data: this.doublePrecision && value instanceof Float64Array ? toDoublePrecisionArray(value, {\n          size: this.size,\n          startIndex: startOffset,\n          endIndex: endOffset\n        }) : value.subarray(startOffset, endOffset),\n        offset: startOffset * value.BYTES_PER_ELEMENT + this.byteOffset\n      });\n    }\n  }, {\n    key: \"allocate\",\n    value: function allocate(_ref3) {\n      var numInstances = _ref3.numInstances,\n          _ref3$copy = _ref3.copy,\n          copy = _ref3$copy === void 0 ? false : _ref3$copy;\n      var state = this.state;\n      var oldValue = state.allocatedValue;\n      var value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n        size: this.size,\n        type: this.defaultType,\n        copy: copy\n      });\n      this.value = value;\n      var buffer = this.buffer,\n          byteOffset = this.byteOffset;\n\n      if (buffer.byteLength < value.byteLength + byteOffset) {\n        buffer.reallocate(value.byteLength + byteOffset);\n\n        if (copy && oldValue) {\n          buffer.subData({\n            data: oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue,\n            offset: byteOffset\n          });\n        }\n      }\n\n      state.allocatedValue = value;\n      state.constant = false;\n      state.externalBuffer = null;\n      state.bufferAccessor = this.settings;\n      return true;\n    }\n  }, {\n    key: \"_checkExternalBuffer\",\n    value: function _checkExternalBuffer(opts) {\n      var value = opts.value;\n\n      if (!opts.constant && value) {\n        var ArrayType = this.defaultType;\n        var illegalArrayType = false;\n\n        if (this.doublePrecision) {\n          illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n        }\n\n        if (illegalArrayType) {\n          throw new Error(\"Attribute \".concat(this.id, \" does not support \").concat(value.constructor.name));\n        }\n\n        if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n          log.warn(\"Attribute \".concat(this.id, \" is normalized\"))();\n        }\n      }\n    }\n  }, {\n    key: \"_normalizeConstant\",\n    value: function _normalizeConstant(value) {\n      switch (this.settings.type) {\n        case 5120:\n          return new Float32Array(value).map(function (x) {\n            return (x + 128) / 255 * 2 - 1;\n          });\n\n        case 5122:\n          return new Float32Array(value).map(function (x) {\n            return (x + 32768) / 65535 * 2 - 1;\n          });\n\n        case 5121:\n          return new Float32Array(value).map(function (x) {\n            return x / 255;\n          });\n\n        case 5123:\n          return new Float32Array(value).map(function (x) {\n            return x / 65535;\n          });\n\n        default:\n          return value;\n      }\n    }\n  }, {\n    key: \"_normalizeValue\",\n    value: function _normalizeValue(value, out, start) {\n      var _this$settings = this.settings,\n          defaultValue = _this$settings.defaultValue,\n          size = _this$settings.size;\n\n      if (Number.isFinite(value)) {\n        out[start] = value;\n        return out;\n      }\n\n      if (!value) {\n        out[start] = defaultValue[0];\n        return out;\n      }\n\n      switch (size) {\n        case 4:\n          out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n\n        case 3:\n          out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n\n        case 2:\n          out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n\n        case 1:\n          out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n          break;\n\n        default:\n          var i = size;\n\n          while (--i >= 0) {\n            out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n          }\n\n      }\n\n      return out;\n    }\n  }, {\n    key: \"_areValuesEqual\",\n    value: function _areValuesEqual(value1, value2) {\n      if (!value1 || !value2) {\n        return false;\n      }\n\n      var size = this.size;\n\n      for (var i = 0; i < size; i++) {\n        if (value1[i] !== value2[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"buffer\",\n    get: function get() {\n      if (!this._buffer) {\n        var _this$settings2 = this.settings,\n            isIndexed = _this$settings2.isIndexed,\n            type = _this$settings2.type;\n        this._buffer = new Buffer(this.gl, {\n          id: this.id,\n          target: isIndexed ? 34963 : 34962,\n          accessor: {\n            type: type\n          }\n        });\n      }\n\n      return this._buffer;\n    }\n  }, {\n    key: \"byteOffset\",\n    get: function get() {\n      var accessor = this.getAccessor();\n\n      if (accessor.vertexOffset) {\n        return accessor.vertexOffset * getStride(accessor);\n      }\n\n      return 0;\n    }\n  }]);\n\n  return DataColumn;\n}();\n\nexport { DataColumn as default };","import \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport \"core-js/modules/es6.typed.uint8-clamped-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.float64-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nexport function glArrayFromType(glType) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5130:\n      return Float64Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return Uint8ClampedArray;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Unknown GL type');\n  }\n}","import \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nvar EMPTY_ARRAY = [];\nvar placeholderArray = [];\nexport function createIterable(data) {\n  var startRow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var endRow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Infinity;\n  var iterable = EMPTY_ARRAY;\n  var objectInfo = {\n    index: -1,\n    data: data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === 'function') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable: iterable,\n    objectInfo: objectInfo\n  };\n}\nexport function isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nexport function getAccessorFromBuffer(typedArray, _ref) {\n  var size = _ref.size,\n      stride = _ref.stride,\n      offset = _ref.offset,\n      startIndices = _ref.startIndices,\n      nested = _ref.nested;\n  var bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  var elementStride = stride ? stride / bytesPerElement : size;\n  var elementOffset = offset ? offset / bytesPerElement : 0;\n  var vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return function (_, _ref2) {\n    var index = _ref2.index,\n        target = _ref2.target;\n\n    if (!startIndices) {\n      var sourceIndex = index * elementStride + elementOffset;\n\n      for (var j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    var startIndex = startIndices[index];\n    var endIndex = startIndices[index + 1] || vertexCount;\n    var result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (var i = startIndex; i < endIndex; i++) {\n        var _sourceIndex = i * elementStride + elementOffset;\n\n        target = new Array(size);\n\n        for (var _j = 0; _j < size; _j++) {\n          target[_j] = typedArray[_sourceIndex + _j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      var targetIndex = 0;\n\n      for (var _i = startIndex; _i < endIndex; _i++) {\n        var _sourceIndex2 = _i * elementStride + elementOffset;\n\n        for (var _j2 = 0; _j2 < size; _j2++) {\n          result[targetIndex++] = typedArray[_sourceIndex2 + _j2];\n        }\n      }\n    }\n\n    return result;\n  };\n}","import \"core-js/modules/es6.array.copy-within\";\nimport \"core-js/modules/es6.array.is-array\";\nexport function flatten(array) {\n  var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n    return true;\n  };\n\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  var index = -1;\n\n  while (++index < array.length) {\n    var value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nexport function fillArray(_ref) {\n  var target = _ref.target,\n      source = _ref.source,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count;\n  var length = source.length;\n  var total = count * length;\n  var copied = 0;\n\n  for (var i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}","export var EMPTY = [];\nexport var FULL = [[0, Infinity]];\nexport function add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  var newRangeList = [];\n  var len = rangeList.length;\n  var insertPosition = 0;\n\n  for (var i = 0; i < len; i++) {\n    var range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}","import \"core-js/modules/es6.array.is-array\";\n\nfunction padArrayChunk(_ref) {\n  var source = _ref.source,\n      target = _ref.target,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      end = _ref.end,\n      getData = _ref.getData;\n  end = end || target.length;\n  var sourceLength = source.length;\n  var targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  var i = sourceLength;\n\n  while (i < targetLength) {\n    var datum = getData(i, source);\n\n    for (var j = 0; j < datum.length; j++) {\n      target[start + i] = datum[j];\n      i++;\n    }\n  }\n}\n\nexport function padArray(_ref2) {\n  var source = _ref2.source,\n      target = _ref2.target,\n      size = _ref2.size,\n      getData = _ref2.getData,\n      sourceStartIndices = _ref2.sourceStartIndices,\n      targetStartIndices = _ref2.targetStartIndices;\n\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source: source,\n      target: target,\n      getData: getData\n    });\n    return target;\n  }\n\n  var sourceIndex = 0;\n  var targetIndex = 0;\n\n  var getChunkData = getData && function (i, chunk) {\n    return getData(i + targetIndex, chunk);\n  };\n\n  var n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (var i = 1; i < n; i++) {\n    var nextSourceIndex = sourceStartIndices[i] * size;\n    var nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target: target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target: target,\n      start: targetIndex,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport { padArray } from '../../utils/array-utils';\nvar DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: function easing(t) {\n      return t;\n    }\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      duration: userSettings\n    };\n  }\n\n  userSettings.type = userSettings.type || 'interpolation';\n  return Object.assign({}, DEFAULT_TRANSITION_SETTINGS[userSettings.type], layerSettings, userSettings);\n}\nexport function getSourceBufferAttribute(gl, attribute) {\n  var buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [attribute.getBuffer(), {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\nexport function getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\nexport function cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n  var doublePrecision = attribute.doublePrecision,\n      settings = attribute.settings,\n      value = attribute.value,\n      size = attribute.size;\n  var multiplier = doublePrecision ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\nexport function padBuffer(_ref) {\n  var buffer = _ref.buffer,\n      numInstances = _ref.numInstances,\n      attribute = _ref.attribute,\n      fromLength = _ref.fromLength,\n      fromStartIndices = _ref.fromStartIndices,\n      _ref$getData = _ref.getData,\n      getData = _ref$getData === void 0 ? function (x) {\n    return x;\n  } : _ref$getData;\n  var precisionMultiplier = attribute.doublePrecision ? 2 : 1;\n  var size = attribute.size * precisionMultiplier;\n  var byteOffset = attribute.byteOffset;\n  var toStartIndices = attribute.startIndices;\n  var hasStartIndices = fromStartIndices && toStartIndices;\n  var toLength = getAttributeBufferLength(attribute, numInstances);\n  var isConstant = attribute.state.constant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  var toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    var getter = getData;\n\n    getData = function getData(value, chunk) {\n      return attribute._normalizeConstant(getter(value, chunk));\n    };\n  }\n\n  var getMissingData = isConstant ? function (i, chunk) {\n    return getData(toData, chunk);\n  } : function (i, chunk) {\n    return getData(toData.subarray(i, i + size), chunk);\n  };\n  var source = buffer.getData({\n    length: fromLength\n  });\n  var data = new Float32Array(toLength);\n  padArray({\n    source: source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size: size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data: data,\n    offset: byteOffset\n  });\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.seal\";\nimport \"core-js/modules/es6.object.assign\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport DataColumn from './data-column';\nimport assert from '../../utils/assert';\nimport { createIterable, getAccessorFromBuffer } from '../../utils/iterable-utils';\nimport { fillArray } from '../../utils/flatten';\nimport * as range from '../../utils/range';\nimport { normalizeTransitionSettings } from './attribute-transition-utils';\n\nvar Attribute = function (_DataColumn) {\n  _inherits(Attribute, _DataColumn);\n\n  function Attribute(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Attribute);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Attribute).call(this, gl, opts));\n    var _opts$transition = opts.transition,\n        transition = _opts$transition === void 0 ? false : _opts$transition,\n        _opts$noAlloc = opts.noAlloc,\n        noAlloc = _opts$noAlloc === void 0 ? false : _opts$noAlloc,\n        _opts$update = opts.update,\n        update = _opts$update === void 0 ? null : _opts$update,\n        _opts$accessor = opts.accessor,\n        accessor = _opts$accessor === void 0 ? null : _opts$accessor,\n        _opts$transform = opts.transform,\n        transform = _opts$transform === void 0 ? null : _opts$transform,\n        _opts$startIndices = opts.startIndices,\n        startIndices = _opts$startIndices === void 0 ? null : _opts$startIndices;\n    Object.assign(_this.settings, {\n      transition: transition,\n      noAlloc: noAlloc,\n      update: update || accessor && _this._autoUpdater,\n      accessor: accessor,\n      transform: transform\n    });\n    Object.assign(_this.state, {\n      lastExternalBuffer: null,\n      binaryValue: null,\n      binaryAccessor: null,\n      needsUpdate: true,\n      needsRedraw: false,\n      updateRanges: range.FULL,\n      startIndices: startIndices\n    });\n    Object.seal(_this.settings);\n    Object.seal(_this.state);\n\n    _this._validateAttributeUpdaters();\n\n    return _this;\n  }\n\n  _createClass(Attribute, [{\n    key: \"needsUpdate\",\n    value: function needsUpdate() {\n      return this.state.needsUpdate;\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$clearChangedFlag = _ref.clearChangedFlags,\n          clearChangedFlags = _ref$clearChangedFlag === void 0 ? false : _ref$clearChangedFlag;\n\n      var needsRedraw = this.state.needsRedraw;\n      this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n      return needsRedraw;\n    }\n  }, {\n    key: \"getUpdateTriggers\",\n    value: function getUpdateTriggers() {\n      var accessor = this.settings.accessor;\n      return [this.id].concat(typeof accessor !== 'function' && accessor || []);\n    }\n  }, {\n    key: \"supportsTransition\",\n    value: function supportsTransition() {\n      return Boolean(this.settings.transition);\n    }\n  }, {\n    key: \"getTransitionSetting\",\n    value: function getTransitionSetting(opts) {\n      var accessor = this.settings.accessor;\n      var layerSettings = this.settings.transition;\n\n      if (!this.supportsTransition()) {\n        return null;\n      }\n\n      var userSettings = Array.isArray(accessor) ? opts[accessor.find(function (a) {\n        return opts[a];\n      })] : opts[accessor];\n      return normalizeTransitionSettings(userSettings, layerSettings);\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate() {\n      var reason = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.id;\n      var dataRange = arguments.length > 1 ? arguments[1] : undefined;\n      this.state.needsUpdate = this.state.needsUpdate || reason;\n      this.setNeedsRedraw(reason);\n\n      if (dataRange) {\n        var _dataRange$startRow = dataRange.startRow,\n            startRow = _dataRange$startRow === void 0 ? 0 : _dataRange$startRow,\n            _dataRange$endRow = dataRange.endRow,\n            endRow = _dataRange$endRow === void 0 ? Infinity : _dataRange$endRow;\n        this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n      } else {\n        this.state.updateRanges = range.FULL;\n      }\n    }\n  }, {\n    key: \"clearNeedsUpdate\",\n    value: function clearNeedsUpdate() {\n      this.state.needsUpdate = false;\n      this.state.updateRanges = range.EMPTY;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var reason = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.id;\n      this.state.needsRedraw = this.state.needsRedraw || reason;\n    }\n  }, {\n    key: \"update\",\n    value: function update(opts) {\n      this.setData(opts);\n    }\n  }, {\n    key: \"allocate\",\n    value: function allocate(numInstances) {\n      var state = this.state,\n          settings = this.settings;\n\n      if (settings.noAlloc) {\n        return false;\n      }\n\n      if (settings.update) {\n        assert(Number.isFinite(numInstances));\n\n        _get(_getPrototypeOf(Attribute.prototype), \"allocate\", this).call(this, {\n          numInstances: numInstances,\n          copy: state.updateRanges !== range.FULL\n        });\n\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"updateBuffer\",\n    value: function updateBuffer(_ref2) {\n      var numInstances = _ref2.numInstances,\n          data = _ref2.data,\n          props = _ref2.props,\n          context = _ref2.context;\n\n      if (!this.needsUpdate()) {\n        return false;\n      }\n\n      var updateRanges = this.state.updateRanges,\n          _this$settings = this.settings,\n          update = _this$settings.update,\n          noAlloc = _this$settings.noAlloc;\n      var updated = true;\n\n      if (update) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = updateRanges[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _step$value = _slicedToArray(_step.value, 2),\n                _startRow = _step$value[0],\n                _endRow = _step$value[1];\n\n            update.call(context, this, {\n              data: data,\n              startRow: _startRow,\n              endRow: _endRow,\n              props: props,\n              numInstances: numInstances\n            });\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (!this.value) {} else if (this.constant || this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n          this.setData({\n            value: this.value,\n            constant: this.constant\n          });\n        } else {\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = updateRanges[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var _step2$value = _slicedToArray(_step2.value, 2),\n                  startRow = _step2$value[0],\n                  endRow = _step2$value[1];\n\n              var startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n              var endOffset = Number.isFinite(endRow) ? this.getVertexOffset(endRow) : noAlloc || !Number.isFinite(numInstances) ? this.value.length : numInstances * this.size;\n\n              _get(_getPrototypeOf(Attribute.prototype), \"updateSubBuffer\", this).call(this, {\n                startOffset: startOffset,\n                endOffset: endOffset\n              });\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                _iterator2[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n\n        this._checkAttributeArray();\n      } else {\n        updated = false;\n      }\n\n      this.clearNeedsUpdate();\n      this.setNeedsRedraw();\n      return updated;\n    }\n  }, {\n    key: \"setConstantValue\",\n    value: function setConstantValue(value) {\n      if (value === undefined || typeof value === 'function') {\n        return false;\n      }\n\n      var hasChanged = this.setData({\n        constant: true,\n        value: value\n      });\n\n      if (hasChanged) {\n        this.setNeedsRedraw();\n      }\n\n      this.clearNeedsUpdate();\n      return true;\n    }\n  }, {\n    key: \"setExternalBuffer\",\n    value: function setExternalBuffer(buffer) {\n      var state = this.state;\n\n      if (!buffer) {\n        state.lastExternalBuffer = null;\n        return false;\n      }\n\n      this.clearNeedsUpdate();\n\n      if (state.lastExternalBuffer === buffer) {\n        return true;\n      }\n\n      state.lastExternalBuffer = buffer;\n      this.setNeedsRedraw();\n      this.setData(buffer);\n      return true;\n    }\n  }, {\n    key: \"setBinaryValue\",\n    value: function setBinaryValue(buffer) {\n      var startIndices = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var state = this.state,\n          settings = this.settings;\n\n      if (!buffer) {\n        state.binaryValue = null;\n        state.binaryAccessor = null;\n        return false;\n      }\n\n      if (settings.noAlloc) {\n        return false;\n      }\n\n      if (state.binaryValue === buffer) {\n        this.clearNeedsUpdate();\n        return true;\n      }\n\n      state.binaryValue = buffer;\n      this.setNeedsRedraw();\n\n      if (ArrayBuffer.isView(buffer)) {\n        buffer = {\n          value: buffer\n        };\n      }\n\n      var needsUpdate = settings.transform || startIndices !== this.startIndices;\n\n      if (needsUpdate) {\n        assert(ArrayBuffer.isView(buffer.value), \"invalid \".concat(settings.accessor));\n        var needsNormalize = buffer.size && buffer.size !== this.size;\n        state.binaryAccessor = getAccessorFromBuffer(buffer.value, {\n          size: buffer.size || this.size,\n          stride: buffer.stride,\n          offset: buffer.offset,\n          startIndices: startIndices,\n          nested: needsNormalize\n        });\n        return false;\n      }\n\n      this.clearNeedsUpdate();\n      this.setData(buffer);\n      return true;\n    }\n  }, {\n    key: \"getVertexOffset\",\n    value: function getVertexOffset(row) {\n      var startIndices = this.startIndices;\n      var vertexIndex = startIndices ? startIndices[row] : row;\n      return vertexIndex * this.size;\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes() {\n      var shaderAttributeDefs = this.settings.shaderAttributes || _defineProperty({}, this.id, null);\n\n      var shaderAttributes = {};\n\n      for (var shaderAttributeName in shaderAttributeDefs) {\n        Object.assign(shaderAttributes, _get(_getPrototypeOf(Attribute.prototype), \"getShaderAttributes\", this).call(this, shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n      }\n\n      return shaderAttributes;\n    }\n  }, {\n    key: \"_autoUpdater\",\n    value: function _autoUpdater(attribute, _ref4) {\n      var data = _ref4.data,\n          startRow = _ref4.startRow,\n          endRow = _ref4.endRow,\n          props = _ref4.props,\n          numInstances = _ref4.numInstances;\n      var settings = attribute.settings,\n          state = attribute.state,\n          value = attribute.value,\n          size = attribute.size,\n          startIndices = attribute.startIndices;\n      var accessor = settings.accessor,\n          transform = settings.transform;\n      var accessorFunc = state.binaryAccessor || (typeof accessor === 'function' ? accessor : props[accessor]);\n      assert(typeof accessorFunc === 'function', \"accessor \\\"\".concat(accessor, \"\\\" is not a function\"));\n      var i = attribute.getVertexOffset(startRow);\n\n      var _createIterable = createIterable(data, startRow, endRow),\n          iterable = _createIterable.iterable,\n          objectInfo = _createIterable.objectInfo;\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = iterable[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var object = _step3.value;\n          objectInfo.index++;\n          var objectValue = accessorFunc(object, objectInfo);\n\n          if (transform) {\n            objectValue = transform.call(this, objectValue);\n          }\n\n          if (startIndices) {\n            var numVertices = (startIndices[objectInfo.index + 1] || numInstances) - startIndices[objectInfo.index];\n\n            if (objectValue && Array.isArray(objectValue[0])) {\n              var startIndex = i;\n              var _iteratorNormalCompletion4 = true;\n              var _didIteratorError4 = false;\n              var _iteratorError4 = undefined;\n\n              try {\n                for (var _iterator4 = objectValue[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                  var item = _step4.value;\n\n                  attribute._normalizeValue(item, value, startIndex);\n\n                  startIndex += size;\n                }\n              } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n                    _iterator4[\"return\"]();\n                  }\n                } finally {\n                  if (_didIteratorError4) {\n                    throw _iteratorError4;\n                  }\n                }\n              }\n            } else if (objectValue && objectValue.length > size) {\n              value.set(objectValue, i);\n            } else {\n              attribute._normalizeValue(objectValue, objectInfo.target, 0);\n\n              fillArray({\n                target: value,\n                source: objectInfo.target,\n                start: i,\n                count: numVertices\n              });\n            }\n\n            i += numVertices * size;\n          } else {\n            attribute._normalizeValue(objectValue, value, i);\n\n            i += size;\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      attribute.constant = false;\n    }\n  }, {\n    key: \"_validateAttributeUpdaters\",\n    value: function _validateAttributeUpdaters() {\n      var settings = this.settings;\n      var hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n\n      if (!hasUpdater) {\n        throw new Error(\"Attribute \".concat(this.id, \" missing update or accessor\"));\n      }\n    }\n  }, {\n    key: \"_checkAttributeArray\",\n    value: function _checkAttributeArray() {\n      var value = this.value;\n      var limit = Math.min(4, this.size);\n\n      if (value && value.length >= limit) {\n        var valid = true;\n\n        switch (limit) {\n          case 4:\n            valid = valid && Number.isFinite(value[3]);\n\n          case 3:\n            valid = valid && Number.isFinite(value[2]);\n\n          case 2:\n            valid = valid && Number.isFinite(value[1]);\n\n          case 1:\n            valid = valid && Number.isFinite(value[0]);\n            break;\n\n          default:\n            valid = false;\n        }\n\n        if (!valid) {\n          throw new Error(\"Illegal attribute generated for \".concat(this.id));\n        }\n      }\n    }\n  }, {\n    key: \"startIndices\",\n    get: function get() {\n      return this.state.startIndices;\n    },\n    set: function set(layout) {\n      this.state.startIndices = layout;\n    }\n  }]);\n\n  return Attribute;\n}(DataColumn);\n\nexport { Attribute as default };","import deckLog from '../utils/log';\nimport { getLoggers } from './loggers';\nvar loggers = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  loggers = getLoggers(deckLog);\n}\n\nexport function register(handlers) {\n  loggers = handlers;\n}\nexport default function debug(eventType) {\n  if (deckLog.level > 0 && loggers[eventType]) {\n    var _loggers$eventType;\n\n    (_loggers$eventType = loggers[eventType]).call.apply(_loggers$eventType, arguments);\n  }\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}","import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { assert } from '../utils';\nvar FS100 = \"void main() {gl_FragColor = vec4(0);}\";\nvar FS_GLES = \"out vec4 transform_output;\\nvoid main() {\\n  transform_output = vec4(0);\\n}\";\nvar FS300 = \"#version 300 es\\n\".concat(FS_GLES);\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  var words = line.replace(/^\\s+/, '').split(/\\s+/);\n\n  var _words = _slicedToArray(words, 3),\n      qualifier = _words[0],\n      type = _words[1],\n      definition = _words[2];\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  var name = definition.split(';')[0];\n  return {\n    qualifier: qualifier,\n    type: type,\n    name: name\n  };\n}\nexport function getPassthroughFS() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$version = _ref.version,\n      version = _ref$version === void 0 ? 100 : _ref$version,\n      input = _ref.input,\n      inputType = _ref.inputType,\n      output = _ref.output;\n\n  if (!input) {\n    if (version === 300) {\n      return FS300;\n    } else if (version > 300) {\n      return \"#version \".concat(version, \"\\n\").concat(FS_GLES);\n    }\n\n    return FS100;\n  }\n\n  var outputValue = convertToVec4(input, inputType);\n\n  if (version >= 300) {\n    return \"#version \".concat(version, \" \").concat(version === 300 ? 'es' : '', \"\\nin \").concat(inputType, \" \").concat(input, \";\\nout vec4 \").concat(output, \";\\nvoid main() {\\n  \").concat(output, \" = \").concat(outputValue, \";\\n}\");\n  }\n\n  return \"varying \".concat(inputType, \" \").concat(input, \";\\nvoid main() {\\n  gl_FragColor = \").concat(outputValue, \";\\n}\");\n}\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return \"vec4(\".concat(variable, \", 0.0, 0.0, 1.0)\");\n\n    case 'vec2':\n      return \"vec4(\".concat(variable, \", 0.0, 1.0)\");\n\n    case 'vec3':\n      return \"vec4(\".concat(variable, \", 1.0)\");\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}","import \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport { isObjectEmpty } from '../utils';\n\nvar TransformFeedback = function (_Resource) {\n  _inherits(TransformFeedback, _Resource);\n\n  _createClass(TransformFeedback, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function TransformFeedback(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TransformFeedback);\n\n    assertWebGL2Context(gl);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TransformFeedback).call(this, gl, props));\n\n    _this.initialize(props);\n\n    _this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TransformFeedback, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.buffers = {};\n      this.unused = {};\n      this.configuration = null;\n      this.bindOnUse = true;\n\n      if (!isObjectEmpty(this.buffers)) {\n        this.bind(function () {\n          return _this2._unbindBuffers();\n        });\n      }\n\n      this.setProps(props);\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('program' in props) {\n        this.configuration = props.program && props.program.configuration;\n      }\n\n      if ('configuration' in props) {\n        this.configuration = props.configuration;\n      }\n\n      if ('bindOnUse' in props) {\n        props = props.bindOnUse;\n      }\n\n      if ('buffers' in props) {\n        this.setBuffers(props.buffers);\n      }\n    }\n  }, {\n    key: \"setBuffers\",\n    value: function setBuffers() {\n      var _this3 = this;\n\n      var buffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.bind(function () {\n        for (var bufferName in buffers) {\n          _this3.setBuffer(bufferName, buffers[bufferName]);\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(locationOrName, bufferOrParams) {\n      var _this4 = this;\n\n      var location = this._getVaryingIndex(locationOrName);\n\n      var _this$_getBufferParam = this._getBufferParams(bufferOrParams),\n          buffer = _this$_getBufferParam.buffer,\n          byteSize = _this$_getBufferParam.byteSize,\n          byteOffset = _this$_getBufferParam.byteOffset;\n\n      if (location < 0) {\n        this.unused[locationOrName] = buffer;\n        log.warn(function () {\n          return \"\".concat(_this4.id, \" unused varying buffer \").concat(locationOrName);\n        })();\n        return this;\n      }\n\n      this.buffers[location] = bufferOrParams;\n\n      if (!this.bindOnUse) {\n        this._bindBuffer(location, buffer, byteOffset, byteSize);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"begin\",\n    value: function begin() {\n      var primitiveMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.gl.bindTransformFeedback(36386, this.handle);\n\n      this._bindBuffers();\n\n      this.gl.beginTransformFeedback(primitiveMode);\n      return this;\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      this.gl.endTransformFeedback();\n\n      this._unbindBuffers();\n\n      this.gl.bindTransformFeedback(36386, null);\n      return this;\n    }\n  }, {\n    key: \"_getBufferParams\",\n    value: function _getBufferParams(bufferOrParams) {\n      var byteOffset;\n      var byteSize;\n      var buffer;\n\n      if (bufferOrParams instanceof Buffer === false) {\n        buffer = bufferOrParams.buffer;\n        byteSize = bufferOrParams.byteSize;\n        byteOffset = bufferOrParams.byteOffset;\n      } else {\n        buffer = bufferOrParams;\n      }\n\n      if (byteOffset !== undefined || byteSize !== undefined) {\n        byteOffset = byteOffset || 0;\n        byteSize = byteSize || buffer.byteLength - byteOffset;\n      }\n\n      return {\n        buffer: buffer,\n        byteOffset: byteOffset,\n        byteSize: byteSize\n      };\n    }\n  }, {\n    key: \"_getVaryingInfo\",\n    value: function _getVaryingInfo(locationOrName) {\n      return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n    }\n  }, {\n    key: \"_getVaryingIndex\",\n    value: function _getVaryingIndex(locationOrName) {\n      if (this.configuration) {\n        return this.configuration.getVaryingInfo(locationOrName).location;\n      }\n\n      var location = Number(locationOrName);\n      return Number.isFinite(location) ? location : -1;\n    }\n  }, {\n    key: \"_bindBuffers\",\n    value: function _bindBuffers() {\n      if (this.bindOnUse) {\n        for (var bufferIndex in this.buffers) {\n          var _this$_getBufferParam2 = this._getBufferParams(this.buffers[bufferIndex]),\n              buffer = _this$_getBufferParam2.buffer,\n              byteSize = _this$_getBufferParam2.byteSize,\n              byteOffset = _this$_getBufferParam2.byteOffset;\n\n          this._bindBuffer(bufferIndex, buffer, byteOffset, byteSize);\n        }\n      }\n    }\n  }, {\n    key: \"_unbindBuffers\",\n    value: function _unbindBuffers() {\n      if (this.bindOnUse) {\n        for (var bufferIndex in this.buffers) {\n          this._bindBuffer(bufferIndex, null);\n        }\n      }\n    }\n  }, {\n    key: \"_bindBuffer\",\n    value: function _bindBuffer(index, buffer) {\n      var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var byteSize = arguments.length > 3 ? arguments[3] : undefined;\n      var handle = buffer && buffer.handle;\n\n      if (!handle || byteSize === undefined) {\n        this.gl.bindBufferBase(35982, index, handle);\n      } else {\n        this.gl.bindBufferRange(35982, index, handle, byteOffset, byteSize);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createTransformFeedback();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteTransformFeedback(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindTransformFeedback(36386, this.handle);\n    }\n  }]);\n\n  return TransformFeedback;\n}(Resource);\n\nexport { TransformFeedback as default };","import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { Buffer, TransformFeedback } from '@luma.gl/webgl';\nimport { assert } from '@luma.gl/webgl';\n\nvar BufferTransform = function () {\n  function BufferTransform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, BufferTransform);\n\n    this.gl = gl;\n    this.currentIndex = 0;\n    this.feedbackMap = {};\n    this.varyings = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  _createClass(BufferTransform, [{\n    key: \"setupResources\",\n    value: function setupResources(opts) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.bindings[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var binding = _step.value;\n\n          this._setupTransformFeedback(binding, opts);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateModelProps\",\n    value: function updateModelProps() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var varyings = this.varyings;\n\n      if (varyings.length > 0) {\n        props = Object.assign({}, props, {\n          varyings: varyings\n        });\n      }\n\n      return props;\n    }\n  }, {\n    key: \"getDrawOptions\",\n    value: function getDrawOptions() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var binding = this.bindings[this.currentIndex];\n      var sourceBuffers = binding.sourceBuffers,\n          transformFeedback = binding.transformFeedback;\n      var attributes = Object.assign({}, sourceBuffers, opts.attributes);\n      return {\n        attributes: attributes,\n        transformFeedback: transformFeedback\n      };\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      if (this.feedbackMap) {\n        this.currentIndex = this._getNextIndex();\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupBuffers(opts);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(varyingName) {\n      var feedbackBuffers = this.bindings[this.currentIndex].feedbackBuffers;\n      var bufferOrParams = varyingName ? feedbackBuffers[varyingName] : null;\n\n      if (!bufferOrParams) {\n        return null;\n      }\n\n      return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          varyingName = _ref.varyingName;\n\n      var buffer = this.getBuffer(varyingName);\n\n      if (buffer) {\n        return buffer.getData();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      for (var name in this.resources) {\n        this.resources[name][\"delete\"]();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupBuffers(props);\n\n      this.varyings = props.varyings || Object.keys(this.bindings[this.currentIndex].feedbackBuffers);\n\n      if (this.varyings.length > 0) {\n        assert(isWebGL2(this.gl));\n      }\n    }\n  }, {\n    key: \"_getFeedbackBuffers\",\n    value: function _getFeedbackBuffers(props) {\n      var _props$sourceBuffers = props.sourceBuffers,\n          sourceBuffers = _props$sourceBuffers === void 0 ? {} : _props$sourceBuffers;\n      var feedbackBuffers = {};\n\n      if (this.bindings[this.currentIndex]) {\n        Object.assign(feedbackBuffers, this.bindings[this.currentIndex].feedbackBuffers);\n      }\n\n      if (this.feedbackMap) {\n        for (var sourceName in this.feedbackMap) {\n          var feedbackName = this.feedbackMap[sourceName];\n\n          if (sourceName in sourceBuffers) {\n            feedbackBuffers[feedbackName] = sourceName;\n          }\n        }\n      }\n\n      Object.assign(feedbackBuffers, props.feedbackBuffers);\n\n      for (var bufferName in feedbackBuffers) {\n        var bufferOrRef = feedbackBuffers[bufferName];\n\n        if (typeof bufferOrRef === 'string') {\n          var sourceBuffer = sourceBuffers[bufferOrRef];\n          var byteLength = sourceBuffer.byteLength,\n              usage = sourceBuffer.usage,\n              accessor = sourceBuffer.accessor;\n          feedbackBuffers[bufferName] = this._createNewBuffer(bufferName, {\n            byteLength: byteLength,\n            usage: usage,\n            accessor: accessor\n          });\n        }\n      }\n\n      return feedbackBuffers;\n    }\n  }, {\n    key: \"_setupBuffers\",\n    value: function _setupBuffers() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$sourceBuffers2 = props.sourceBuffers,\n          sourceBuffers = _props$sourceBuffers2 === void 0 ? null : _props$sourceBuffers2;\n      Object.assign(this.feedbackMap, props.feedbackMap);\n\n      var feedbackBuffers = this._getFeedbackBuffers(props);\n\n      this._updateBindings({\n        sourceBuffers: sourceBuffers,\n        feedbackBuffers: feedbackBuffers\n      });\n    }\n  }, {\n    key: \"_setupTransformFeedback\",\n    value: function _setupTransformFeedback(binding, _ref2) {\n      var model = _ref2.model;\n      var program = model.program;\n      binding.transformFeedback = new TransformFeedback(this.gl, {\n        program: program,\n        buffers: binding.feedbackBuffers\n      });\n    }\n  }, {\n    key: \"_updateBindings\",\n    value: function _updateBindings(opts) {\n      this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n      if (this.feedbackMap) {\n        var _this$_swapBuffers = this._swapBuffers(this.bindings[this.currentIndex]),\n            sourceBuffers = _this$_swapBuffers.sourceBuffers,\n            feedbackBuffers = _this$_swapBuffers.feedbackBuffers;\n\n        var nextIndex = this._getNextIndex();\n\n        this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n          sourceBuffers: sourceBuffers,\n          feedbackBuffers: feedbackBuffers\n        });\n      }\n    }\n  }, {\n    key: \"_updateBinding\",\n    value: function _updateBinding(binding, opts) {\n      if (!binding) {\n        return {\n          sourceBuffers: Object.assign({}, opts.sourceBuffers),\n          feedbackBuffers: Object.assign({}, opts.feedbackBuffers)\n        };\n      }\n\n      Object.assign(binding.sourceBuffers, opts.sourceBuffers);\n      Object.assign(binding.feedbackBuffers, opts.feedbackBuffers);\n\n      if (binding.transformFeedback) {\n        binding.transformFeedback.setBuffers(binding.feedbackBuffers);\n      }\n\n      return binding;\n    }\n  }, {\n    key: \"_swapBuffers\",\n    value: function _swapBuffers(opts) {\n      if (!this.feedbackMap) {\n        return null;\n      }\n\n      var sourceBuffers = Object.assign({}, opts.sourceBuffers);\n      var feedbackBuffers = Object.assign({}, opts.feedbackBuffers);\n\n      for (var srcName in this.feedbackMap) {\n        var dstName = this.feedbackMap[srcName];\n        sourceBuffers[srcName] = opts.feedbackBuffers[dstName];\n        feedbackBuffers[dstName] = opts.sourceBuffers[srcName];\n        assert(feedbackBuffers[dstName] instanceof Buffer);\n      }\n\n      return {\n        sourceBuffers: sourceBuffers,\n        feedbackBuffers: feedbackBuffers\n      };\n    }\n  }, {\n    key: \"_createNewBuffer\",\n    value: function _createNewBuffer(name, opts) {\n      var buffer = new Buffer(this.gl, opts);\n\n      if (this.resources[name]) {\n        this.resources[name][\"delete\"]();\n      }\n\n      this.resources[name] = buffer;\n      return buffer;\n    }\n  }, {\n    key: \"_getNextIndex\",\n    value: function _getNextIndex() {\n      return (this.currentIndex + 1) % 2;\n    }\n  }]);\n\n  return BufferTransform;\n}();\n\nexport { BufferTransform as default };","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.regexp.match\";\nexport default function getShaderVersion(source) {\n  var version = 100;\n  var words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    var v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.sort\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _MODULE_INJECTORS;\n\nimport { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { assert } from '../utils';\nvar MODULE_INJECTORS = (_MODULE_INJECTORS = {}, _defineProperty(_MODULE_INJECTORS, VERTEX_SHADER, MODULE_INJECTORS_VS), _defineProperty(_MODULE_INJECTORS, FRAGMENT_SHADER, MODULE_INJECTORS_FS), _MODULE_INJECTORS);\nexport var DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nvar REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nvar REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nvar fragments = [];\nexport default function injectShader(source, type, inject, injectStandardStubs) {\n  var isVertex = type === VERTEX_SHADER;\n\n  var _loop = function _loop(key) {\n    var fragmentData = inject[key];\n    fragmentData.sort(function (a, b) {\n      return a.order - b.order;\n    });\n    fragments.length = fragmentData.length;\n\n    for (var i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    var fragmentString = \"\".concat(fragments.join('\\n'), \"\\n\");\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragmentString;\n          });\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragmentString + match;\n          });\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragmentString;\n          });\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragmentString + match;\n          });\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, function (match) {\n          return match + fragmentString;\n        });\n    }\n  };\n\n  for (var key in inject) {\n    _loop(key);\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, function (match) {\n      return match + MODULE_INJECTORS[type];\n    });\n  }\n\n  return source;\n}\nexport function combineInjects(injects) {\n  var result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(function (inject) {\n    for (var key in inject) {\n      result[key] = result[key] ? \"\".concat(result[key], \"\\n\").concat(inject[key]) : inject[key];\n    }\n  });\n  return result;\n}","export var VERTEX_SHADER = 'vs';\nexport var FRAGMENT_SHADER = 'fs';","export var MODULE_INJECTORS_VS = \"#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\";\nexport var MODULE_INJECTORS_FS = \"#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth();\\n#endif\\n\";","var vs = \"attribute float transform_elementID;\\nvec2 transform_getPixelSizeHalf(vec2 size) {\\n  return vec2(1.) / (2. * size);\\n}\\n\\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\\n  return vec2(xIndex, yIndex);\\n}\\nvec2 transform_getTexCoord(vec2 size) {\\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\\n  vec2 coord = indices / size + pixelSizeHalf;\\n  return coord;\\n}\\nvec2 transform_getPos(vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\\n  return pos;\\n}\\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec4 textureColor = texture2D(texSampler, texCoord);\\n  return textureColor;\\n}\\n\";\nexport default {\n  name: 'transform',\n  vs: vs,\n  fs: null\n};","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _SRC_TEX_PARAMETER_OV;\n\nimport { cloneTextureFrom, readPixelsToArray, getShaderVersion, Buffer, Texture2D, Framebuffer } from '@luma.gl/webgl';\nimport { _transform as transformModule, getPassthroughFS, typeToChannelCount, combineInjects } from '@luma.gl/shadertools';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils';\nvar SRC_TEX_PARAMETER_OVERRIDES = (_SRC_TEX_PARAMETER_OV = {}, _defineProperty(_SRC_TEX_PARAMETER_OV, 10241, 9728), _defineProperty(_SRC_TEX_PARAMETER_OV, 10240, 9728), _defineProperty(_SRC_TEX_PARAMETER_OV, 10242, 33071), _defineProperty(_SRC_TEX_PARAMETER_OV, 10243, 33071), _SRC_TEX_PARAMETER_OV);\nvar FS_OUTPUT_VARIABLE = 'transform_output';\n\nvar TextureTransform = function () {\n  function TextureTransform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TextureTransform);\n\n    this.gl = gl;\n    this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  _createClass(TextureTransform, [{\n    key: \"updateModelProps\",\n    value: function updateModelProps() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var updatedModelProps = this._processVertexShader(props);\n\n      return Object.assign({}, props, updatedModelProps);\n    }\n  }, {\n    key: \"getDrawOptions\",\n    value: function getDrawOptions() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$bindings$this$c = this.bindings[this.currentIndex],\n          sourceBuffers = _this$bindings$this$c.sourceBuffers,\n          sourceTextures = _this$bindings$this$c.sourceTextures,\n          framebuffer = _this$bindings$this$c.framebuffer,\n          targetTexture = _this$bindings$this$c.targetTexture;\n      var attributes = Object.assign({}, sourceBuffers, opts.attributes);\n      var uniforms = Object.assign({}, opts.uniforms);\n      var parameters = Object.assign({}, opts.parameters);\n      var discard = opts.discard;\n\n      if (this.hasSourceTextures || this.hasTargetTexture) {\n        attributes.transform_elementID = this.elementIDBuffer;\n\n        for (var sampler in this.samplerTextureMap) {\n          var textureName = this.samplerTextureMap[sampler];\n          uniforms[sampler] = sourceTextures[textureName];\n        }\n\n        this._setSourceTextureParameters();\n\n        var sizeUniforms = getSizeUniforms({\n          sourceTextureMap: sourceTextures,\n          targetTextureVarying: this.targetTextureVarying,\n          targetTexture: targetTexture\n        });\n        Object.assign(uniforms, sizeUniforms);\n      }\n\n      if (this.hasTargetTexture) {\n        discard = false;\n        parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n      }\n\n      return {\n        attributes: attributes,\n        framebuffer: framebuffer,\n        uniforms: uniforms,\n        discard: discard,\n        parameters: parameters\n      };\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      if (this._swapTexture) {\n        this.currentIndex = this._getNextIndex();\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupTextures(opts);\n    }\n  }, {\n    key: \"getTargetTexture\",\n    value: function getTargetTexture() {\n      var targetTexture = this.bindings[this.currentIndex].targetTexture;\n      return targetTexture;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$packed = _ref.packed,\n          packed = _ref$packed === void 0 ? false : _ref$packed;\n\n      var framebuffer = this.bindings[this.currentIndex].framebuffer;\n      var pixels = readPixelsToArray(framebuffer);\n\n      if (!packed) {\n        return pixels;\n      }\n\n      var ArrayType = pixels.constructor;\n      var channelCount = typeToChannelCount(this.targetTextureType);\n      var packedPixels = new ArrayType(pixels.length * channelCount / 4);\n      var packCount = 0;\n\n      for (var i = 0; i < pixels.length; i += 4) {\n        for (var j = 0; j < channelCount; j++) {\n          packedPixels[packCount++] = pixels[i + j];\n        }\n      }\n\n      return packedPixels;\n    }\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      var currentResources = this.bindings[this.currentIndex];\n      return currentResources.framebuffer;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.ownTexture) {\n        this.ownTexture[\"delete\"]();\n      }\n\n      if (this.elementIDBuffer) {\n        this.elementIDBuffer[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _targetTextureVarying = props._targetTextureVarying,\n          _swapTexture = props._swapTexture;\n      this._swapTexture = _swapTexture;\n      this.targetTextureVarying = _targetTextureVarying;\n      this.hasTargetTexture = _targetTextureVarying;\n\n      this._setupTextures(props);\n    }\n  }, {\n    key: \"_createTargetTexture\",\n    value: function _createTargetTexture(props) {\n      var sourceTextures = props.sourceTextures,\n          textureOrReference = props.textureOrReference;\n\n      if (textureOrReference instanceof Texture2D) {\n        return textureOrReference;\n      }\n\n      var refTexture = sourceTextures[textureOrReference];\n\n      if (!refTexture) {\n        return null;\n      }\n\n      this._targetRefTexName = textureOrReference;\n      return this._createNewTexture(refTexture);\n    }\n  }, {\n    key: \"_setupTextures\",\n    value: function _setupTextures() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var sourceBuffers = props.sourceBuffers,\n          _props$_sourceTexture = props._sourceTextures,\n          _sourceTextures = _props$_sourceTexture === void 0 ? {} : _props$_sourceTexture,\n          _targetTexture = props._targetTexture;\n\n      var targetTexture = this._createTargetTexture({\n        sourceTextures: _sourceTextures,\n        textureOrReference: _targetTexture\n      });\n\n      this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n      this._updateBindings({\n        sourceBuffers: sourceBuffers,\n        sourceTextures: _sourceTextures,\n        targetTexture: targetTexture\n      });\n\n      if ('elementCount' in props) {\n        this._updateElementIDBuffer(props.elementCount);\n      }\n    }\n  }, {\n    key: \"_updateElementIDBuffer\",\n    value: function _updateElementIDBuffer(elementCount) {\n      if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n        return;\n      }\n\n      var elementIds = new Float32Array(elementCount);\n      elementIds.forEach(function (_, index, array) {\n        array[index] = index;\n      });\n\n      if (!this.elementIDBuffer) {\n        this.elementIDBuffer = new Buffer(this.gl, {\n          data: elementIds,\n          accessor: {\n            size: 1\n          }\n        });\n      } else {\n        this.elementIDBuffer.setData({\n          data: elementIds\n        });\n      }\n\n      this.elementCount = elementCount;\n    }\n  }, {\n    key: \"_updateBindings\",\n    value: function _updateBindings(opts) {\n      this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n      if (this._swapTexture) {\n        var _this$_swapTextures = this._swapTextures(this.bindings[this.currentIndex]),\n            sourceTextures = _this$_swapTextures.sourceTextures,\n            targetTexture = _this$_swapTextures.targetTexture;\n\n        var nextIndex = this._getNextIndex();\n\n        this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n          sourceTextures: sourceTextures,\n          targetTexture: targetTexture\n        });\n      }\n    }\n  }, {\n    key: \"_updateBinding\",\n    value: function _updateBinding(binding, opts) {\n      var sourceBuffers = opts.sourceBuffers,\n          sourceTextures = opts.sourceTextures,\n          targetTexture = opts.targetTexture;\n\n      if (!binding) {\n        binding = {\n          sourceBuffers: {},\n          sourceTextures: {},\n          targetTexture: null\n        };\n      }\n\n      Object.assign(binding.sourceTextures, sourceTextures);\n      Object.assign(binding.sourceBuffers, sourceBuffers);\n\n      if (targetTexture) {\n        binding.targetTexture = targetTexture;\n        var width = targetTexture.width,\n            height = targetTexture.height;\n        var _binding = binding,\n            framebuffer = _binding.framebuffer;\n\n        if (framebuffer) {\n          framebuffer.update({\n            attachments: _defineProperty({}, 36064, targetTexture),\n            resizeAttachments: false\n          });\n          framebuffer.resize({\n            width: width,\n            height: height\n          });\n        } else {\n          binding.framebuffer = new Framebuffer(this.gl, {\n            id: \"\".concat(this.id || 'transform', \"-framebuffer\"),\n            width: width,\n            height: height,\n            attachments: _defineProperty({}, 36064, targetTexture)\n          });\n        }\n      }\n\n      return binding;\n    }\n  }, {\n    key: \"_setSourceTextureParameters\",\n    value: function _setSourceTextureParameters() {\n      var index = this.currentIndex;\n      var sourceTextures = this.bindings[index].sourceTextures;\n\n      for (var name in sourceTextures) {\n        sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n      }\n    }\n  }, {\n    key: \"_swapTextures\",\n    value: function _swapTextures(opts) {\n      if (!this._swapTexture) {\n        return null;\n      }\n\n      var sourceTextures = Object.assign({}, opts.sourceTextures);\n      sourceTextures[this._swapTexture] = opts.targetTexture;\n      var targetTexture = opts.sourceTextures[this._swapTexture];\n      return {\n        sourceTextures: sourceTextures,\n        targetTexture: targetTexture\n      };\n    }\n  }, {\n    key: \"_createNewTexture\",\n    value: function _createNewTexture(refTexture) {\n      var _parameters;\n\n      var texture = cloneTextureFrom(refTexture, {\n        parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9728), _defineProperty(_parameters, 10240, 9728), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters),\n        pixelStore: _defineProperty({}, 37440, false)\n      });\n\n      if (this.ownTexture) {\n        this.ownTexture[\"delete\"]();\n      }\n\n      this.ownTexture = texture;\n      return texture;\n    }\n  }, {\n    key: \"_getNextIndex\",\n    value: function _getNextIndex() {\n      return (this.currentIndex + 1) % 2;\n    }\n  }, {\n    key: \"_processVertexShader\",\n    value: function _processVertexShader() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$bindings$this$c2 = this.bindings[this.currentIndex],\n          sourceTextures = _this$bindings$this$c2.sourceTextures,\n          targetTexture = _this$bindings$this$c2.targetTexture;\n\n      var _updateForTextures = updateForTextures({\n        vs: props.vs,\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture: targetTexture\n      }),\n          vs = _updateForTextures.vs,\n          uniforms = _updateForTextures.uniforms,\n          targetTextureType = _updateForTextures.targetTextureType,\n          inject = _updateForTextures.inject,\n          samplerTextureMap = _updateForTextures.samplerTextureMap;\n\n      var combinedInject = combineInjects([props.inject || {}, inject]);\n      this.targetTextureType = targetTextureType;\n      this.samplerTextureMap = samplerTextureMap;\n      var fs = props._fs || getPassthroughFS({\n        version: getShaderVersion(vs),\n        input: this.targetTextureVarying,\n        inputType: targetTextureType,\n        output: FS_OUTPUT_VARIABLE\n      });\n      var modules = this.hasSourceTextures || this.targetTextureVarying ? [transformModule].concat(props.modules || []) : props.modules;\n      return {\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        uniforms: uniforms,\n        inject: combinedInject\n      };\n    }\n  }]);\n\n  return TextureTransform;\n}();\n\nexport { TextureTransform as default };","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport { assert } from '@luma.gl/webgl';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '@luma.gl/shadertools';\nvar SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nvar SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nvar VS_POS_VARIABLE = 'transform_position';\nexport function updateForTextures(_ref) {\n  var vs = _ref.vs,\n      sourceTextureMap = _ref.sourceTextureMap,\n      targetTextureVarying = _ref.targetTextureVarying,\n      targetTexture = _ref.targetTexture;\n  var texAttributeNames = Object.keys(sourceTextureMap);\n  var sourceCount = texAttributeNames.length;\n  var targetTextureType = null;\n  var samplerTextureMap = {};\n  var updatedVs = vs;\n  var finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    var vsLines = updatedVs.split('\\n');\n    var updateVsLines = vsLines.slice();\n    vsLines.forEach(function (line, index, lines) {\n      if (sourceCount > 0) {\n        var updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          var updatedLine = updated.updatedLine,\n              inject = updated.inject;\n          updateVsLines[index] = updatedLine;\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      var sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying);\n      var uniformDeclaration = \"uniform vec2 \".concat(sizeName, \";\\n\");\n      var posInstructions = \"     vec2 \".concat(VS_POS_VARIABLE, \" = transform_getPos(\").concat(sizeName, \");\\n     gl_Position = vec4(\").concat(VS_POS_VARIABLE, \", 0, 1.);\\n\");\n      var inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    vs: updatedVs,\n    targetTextureType: targetTextureType,\n    inject: finalInject,\n    samplerTextureMap: samplerTextureMap\n  };\n}\nexport function getSizeUniforms(_ref2) {\n  var sourceTextureMap = _ref2.sourceTextureMap,\n      targetTextureVarying = _ref2.targetTextureVarying,\n      targetTexture = _ref2.targetTexture;\n  var uniforms = {};\n  var width;\n  var height;\n\n  if (targetTextureVarying) {\n    width = targetTexture.width;\n    height = targetTexture.height;\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)] = [width, height];\n  }\n\n  for (var textureName in sourceTextureMap) {\n    var _sourceTextureMap$tex = sourceTextureMap[textureName];\n    width = _sourceTextureMap$tex.width;\n    height = _sourceTextureMap$tex.height;\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName)] = [width, height];\n  }\n\n  return uniforms;\n}\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  var samplerName = \"\".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName);\n  var sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName);\n  var uniformDeclerations = \"  uniform sampler2D \".concat(samplerName, \";\\n  uniform vec2 \").concat(sizeName, \";\");\n  return {\n    samplerName: samplerName,\n    sizeName: sizeName,\n    uniformDeclerations: uniformDeclerations\n  };\n}\n\nexport function getVaryingType(line, varying) {\n  var qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n}\nexport function processAttributeDefinition(line, textureMap) {\n  var samplerTextureMap = {};\n  var attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  var type = attributeData.type,\n      name = attributeData.name;\n\n  if (name && textureMap[name]) {\n    var updatedLine = \"// \".concat(line, \" => Replaced by Transform with a sampler\");\n\n    var _getSamplerDecleratio = getSamplerDeclerations(name),\n        samplerName = _getSamplerDecleratio.samplerName,\n        sizeName = _getSamplerDecleratio.sizeName,\n        uniformDeclerations = _getSamplerDecleratio.uniformDeclerations;\n\n    var channels = typeToChannelSuffix(type);\n    var sampleInstruction = \"  \".concat(type, \" \").concat(name, \" = transform_getInput(\").concat(samplerName, \", \").concat(sizeName, \").\").concat(channels, \";\\n\");\n    samplerTextureMap[samplerName] = name;\n    var inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    };\n    return {\n      updatedLine: updatedLine,\n      inject: inject,\n      samplerTextureMap: samplerTextureMap\n    };\n  }\n\n  return null;\n}","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar TYPE_DEFINITIONS = {\n  number: {\n    validate: function validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n  },\n  array: {\n    validate: function validate(value, propType) {\n      return Array.isArray(value) || ArrayBuffer.isView(value);\n    }\n  }\n};\nexport function parsePropTypes(propDefs) {\n  var propTypes = {};\n\n  for (var propName in propDefs) {\n    var propDef = propDefs[propName];\n    var propType = parsePropType(propDef);\n    propTypes[propName] = propType;\n  }\n\n  return propTypes;\n}\n\nfunction parsePropType(propDef) {\n  var type = getTypeOf(propDef);\n\n  if (type === 'object') {\n    if (!propDef) {\n      return {\n        type: 'object',\n        value: null\n      };\n    }\n\n    if ('type' in propDef) {\n      return Object.assign({}, propDef, TYPE_DEFINITIONS[propDef.type]);\n    }\n\n    if (!('value' in propDef)) {\n      return {\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    type = getTypeOf(propDef.value);\n    return Object.assign({\n      type: type\n    }, propDef, TYPE_DEFINITIONS[type]);\n  }\n\n  return Object.assign({\n    type: type,\n    value: propDef\n  }, TYPE_DEFINITIONS[type]);\n}\n\nfunction getTypeOf(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return 'array';\n  }\n\n  return _typeof(value);\n}","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '../utils';\nimport { parsePropTypes } from './filters/prop-types';\nvar VERTEX_SHADER = 'vs';\nvar FRAGMENT_SHADER = 'fs';\n\nvar ShaderModule = function () {\n  function ShaderModule(_ref) {\n    var name = _ref.name,\n        vs = _ref.vs,\n        fs = _ref.fs,\n        _ref$dependencies = _ref.dependencies,\n        dependencies = _ref$dependencies === void 0 ? [] : _ref$dependencies,\n        uniforms = _ref.uniforms,\n        getUniforms = _ref.getUniforms,\n        _ref$deprecations = _ref.deprecations,\n        deprecations = _ref$deprecations === void 0 ? [] : _ref$deprecations,\n        _ref$defines = _ref.defines,\n        defines = _ref$defines === void 0 ? {} : _ref$defines,\n        _ref$inject = _ref.inject,\n        inject = _ref$inject === void 0 ? {} : _ref$inject,\n        vertexShader = _ref.vertexShader,\n        fragmentShader = _ref.fragmentShader;\n\n    _classCallCheck(this, ShaderModule);\n\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = parsePropTypes(uniforms);\n    }\n  }\n\n  _createClass(ShaderModule, [{\n    key: \"getModuleSource\",\n    value: function getModuleSource(type) {\n      var moduleSource;\n\n      switch (type) {\n        case VERTEX_SHADER:\n          moduleSource = this.vs || '';\n          break;\n\n        case FRAGMENT_SHADER:\n          moduleSource = this.fs || '';\n          break;\n\n        default:\n          assert(false);\n      }\n\n      return \"#define MODULE_\".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_'), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(opts, uniforms) {\n      if (this.getModuleUniforms) {\n        return this.getModuleUniforms(opts, uniforms);\n      }\n\n      if (this.uniforms) {\n        return this._defaultGetUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"getDefines\",\n    value: function getDefines() {\n      return this.defines;\n    }\n  }, {\n    key: \"checkDeprecations\",\n    value: function checkDeprecations(shaderSource, log) {\n      this.deprecations.forEach(function (def) {\n        if (def.regex.test(shaderSource)) {\n          if (def.deprecated) {\n            log.deprecated(def.old, def[\"new\"])();\n          } else {\n            log.removed(def.old, def[\"new\"])();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_parseDeprecationDefinitions\",\n    value: function _parseDeprecationDefinitions(deprecations) {\n      deprecations.forEach(function (def) {\n        switch (def.type) {\n          case 'function':\n            def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n            break;\n\n          default:\n            def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n        }\n      });\n      return deprecations;\n    }\n  }, {\n    key: \"_defaultGetUniforms\",\n    value: function _defaultGetUniforms() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var uniforms = {};\n      var propTypes = this.uniforms;\n\n      for (var key in propTypes) {\n        var propDef = propTypes[key];\n\n        if (key in opts && !propDef[\"private\"]) {\n          if (propDef.validate) {\n            assert(propDef.validate(opts[key], propDef), \"\".concat(this.name, \": invalid \").concat(key));\n          }\n\n          uniforms[key] = opts[key];\n        } else {\n          uniforms[key] = propDef.value;\n        }\n      }\n\n      return uniforms;\n    }\n  }]);\n\n  return ShaderModule;\n}();\n\nexport { ShaderModule as default };\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      var shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  var result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (var hook in injections) {\n    var injection = injections[hook];\n    var stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        injection: injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.array.map\";\nimport ShaderModule from './shader-module';\nimport { assert } from '../utils';\nexport function resolveModules(modules) {\n  return getShaderDependencies(instantiateModules(modules));\n}\n\nfunction getShaderDependencies(modules) {\n  var moduleMap = {};\n  var moduleDepth = {};\n  getDependencyGraph({\n    modules: modules,\n    level: 0,\n    moduleMap: moduleMap,\n    moduleDepth: moduleDepth\n  });\n  return Object.keys(moduleDepth).sort(function (a, b) {\n    return moduleDepth[b] - moduleDepth[a];\n  }).map(function (name) {\n    return moduleMap[name];\n  });\n}\n\nfunction getDependencyGraph(_ref) {\n  var modules = _ref.modules,\n      level = _ref.level,\n      moduleMap = _ref.moduleMap,\n      moduleDepth = _ref.moduleDepth;\n\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = modules[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var module = _step.value;\n      moduleMap[module.name] = module;\n\n      if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n        moduleDepth[module.name] = level;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = modules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _module = _step2.value;\n\n      if (_module.dependencies) {\n        getDependencyGraph({\n          modules: _module.dependencies,\n          level: level + 1,\n          moduleMap: moduleMap,\n          moduleDepth: moduleDepth\n        });\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction instantiateModules(modules, seen) {\n  return modules.map(function (module) {\n    if (module instanceof ShaderModule) {\n      return module;\n    }\n\n    assert(typeof module !== 'string', \"Shader module use by name is deprecated. Import shader module '\".concat(module, \"' and use it directly.\"));\n    assert(module.name, 'shader module has no name');\n    module = new ShaderModule(module);\n    module.dependencies = instantiateModules(module.dependencies);\n    return module;\n  });\n}\n\nexport var TEST_EXPORTS = {\n  getShaderDependencies: getShaderDependencies,\n  getDependencyGraph: getDependencyGraph\n};","import \"core-js/modules/es6.array.index-of\";\nexport default function isOldIE() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  var userAgent = opts.userAgent || navigator.userAgent || '';\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.for-each\";\nimport isOldIE from './is-old-ie';\nimport assert from './assert';\nvar GL_VENDOR = 0x1f00;\nvar GL_RENDERER = 0x1f01;\nvar GL_VERSION = 0x1f02;\nvar GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\nvar WEBGL_FEATURES = {\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n};\nvar FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(function (key) {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  return Boolean(gl && gl._version === 2);\n}\n\nexport function getContextInfo(gl) {\n  var info = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  var renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  var gpuVendor = identifyGPUVendor(vendor, renderer);\n  var gpuInfo = {\n    gpuVendor: gpuVendor,\n    vendor: vendor,\n    renderer: renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nvar compiledGlslExtensions = {};\nexport function canCompileGLGSExtension(gl, cap) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  var extensionName = feature[0];\n  var behavior = opts.behavior || 'enable';\n  var source = \"#extension GL_\".concat(extensionName, \" : \").concat(behavior, \"\\nvoid main(void) {}\");\n  var shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  var canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n\nfunction getFeature(gl, cap) {\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  var extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n  var value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(function (feature) {\n    return getFeature(gl, feature);\n  });\n}","import \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.regexp.replace\";\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex ? convertVertexShaderTo300(source) : convertFragmentShaderTo300(source);\n\n    case 100:\n      return isVertex ? convertVertexShaderTo100(source) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(\"unknown GLSL version \".concat(targetGLSLVersion));\n  }\n}\nvar FS_OUTPUT_REGEX = /^[ \\t]*out[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\s+/m;\n\nfunction convertVertexShaderTo300(source) {\n  return source.replace(/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n').replace(/^[ \\t]*attribute[ \\t]+(.+;)/gm, 'in $1').replace(/^[ \\t]*varying[ \\t]+(.+;)/gm, 'out $1').replace(/\\btexture2D\\(/g, 'texture(').replace(/\\btextureCube\\(+/g, 'texture(').replace(/\\btexture2DLodEXT\\(/g, 'textureLod(').replace(/\\btextureCubeLodEXT\\(/g, 'textureLod(');\n}\n\nfunction convertFragmentShaderTo300(source) {\n  return source.replace(/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n').replace(/^[ \\t]*varying[ \\t]+(.+;)/gm, 'in $1').replace(/\\btexture2D\\(/g, 'texture(').replace(/\\btextureCube\\(/g, 'texture(').replace(/\\btexture2DLodEXT\\(/g, 'textureLod(').replace(/\\btextureCubeLodEXT\\(/g, 'textureLod(');\n}\n\nfunction convertVertexShaderTo100(source) {\n  return source.replace(/^#version[ \\t]+300[ \\t]+es/, '#version 100').replace(/^[ \\t]*in[ \\t]+(.+;)/gm, 'attribute $1').replace(/^[ \\t]*out[ \\t]+(.+;)/gm, 'varying $1').replace(/\\btexture\\(/g, 'texture2D(').replace(/\\btextureLod\\(/g, 'texture2DLodEXT(');\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = source.replace(/^#version[ \\t]+300[ \\t]+es/, '#version 100').replace(/^[ \\t]*in[ \\t]+/gm, 'varying ').replace(/\\btexture\\(/g, 'texture2D(').replace(/\\btextureLod\\(/g, 'texture2DLodEXT(');\n  var outputMatch = source.match(FS_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    var outputName = outputMatch[1];\n    source = source.replace(FS_OUTPUT_REGEX, '').replace(new RegExp(\"\\\\b\".concat(outputName, \"\\\\b\"), 'g'), 'gl_FragColor');\n  }\n\n  return source;\n}","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.object.assign\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _SHADER_TYPE;\n\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader, { DECLARATION_INJECT_MARKER } from './inject-shader';\nimport transpileShader from './transpile-shader';\nimport { assert } from '../utils';\nvar INJECT_SHADER_DECLARATIONS = \"\\n\\n\".concat(DECLARATION_INJECT_MARKER, \"\\n\\n\");\nvar SHADER_TYPE = (_SHADER_TYPE = {}, _defineProperty(_SHADER_TYPE, VERTEX_SHADER, 'vertex'), _defineProperty(_SHADER_TYPE, FRAGMENT_SHADER, 'fragment'), _SHADER_TYPE);\nvar FRAGMENT_SHADER_PROLOGUE = \"precision highp float;\\n\\n\";\nexport function assembleShaders(gl, opts) {\n  var vs = opts.vs,\n      fs = opts.fs;\n  var modules = resolveModules(opts.modules || []);\n  return {\n    gl: gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules: modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules: modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, _ref) {\n  var id = _ref.id,\n      source = _ref.source,\n      type = _ref.type,\n      modules = _ref.modules,\n      _ref$defines = _ref.defines,\n      defines = _ref$defines === void 0 ? {} : _ref$defines,\n      _ref$hookFunctions = _ref.hookFunctions,\n      hookFunctions = _ref$hookFunctions === void 0 ? [] : _ref$hookFunctions,\n      _ref$inject = _ref.inject,\n      inject = _ref$inject === void 0 ? {} : _ref$inject,\n      _ref$transpileToGLSL = _ref.transpileToGLSL100,\n      transpileToGLSL100 = _ref$transpileToGLSL === void 0 ? false : _ref$transpileToGLSL,\n      _ref$prologue = _ref.prologue,\n      prologue = _ref$prologue === void 0 ? true : _ref$prologue,\n      log = _ref.log;\n  assert(typeof source === 'string', 'shader source must be a string');\n  var isVertex = type === VERTEX_SHADER;\n  var sourceLines = source.split('\\n');\n  var glslVersion = 100;\n  var versionLine = '';\n  var coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = \"#version \".concat(glslVersion);\n  }\n\n  var allDefines = {};\n  modules.forEach(function (module) {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  var assembledSource = prologue ? \"\".concat(versionLine, \"\\n\").concat(getShaderName({\n    id: id,\n    source: source,\n    type: type\n  }), \"\\n\").concat(getShaderType({\n    type: type\n  }), \"\\n\").concat(getPlatformShaderDefines(gl), \"\\n\").concat(getVersionDefines(gl, glslVersion, !isVertex), \"\\n\").concat(getApplicationDefines(allDefines), \"\\n\").concat(isVertex ? '' : FRAGMENT_SHADER_PROLOGUE, \"\\n\") : \"\".concat(versionLine, \"\\n\");\n  hookFunctions = normalizeHookFunctions(hookFunctions);\n  var hookInjections = {};\n  var declInjections = {};\n  var mainInjections = {};\n\n  for (var key in inject) {\n    var injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    var match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      var hash = match[2];\n      var name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = modules[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var module = _step.value;\n\n      if (log) {\n        module.checkDeprecations(coreSource, log);\n      }\n\n      var moduleSource = module.getModuleSource(type, glslVersion);\n      assembledSource += moduleSource;\n      var injections = module.injections[type];\n\n      for (var _key in injections) {\n        var _match = _key.match(/^(v|f)s:#([\\w-]+)$/);\n\n        if (_match) {\n          var _name = _match[2];\n          var injectionType = _name === 'decl' ? declInjections : mainInjections;\n          injectionType[_key] = injectionType[_key] || [];\n\n          injectionType[_key].push(injections[_key]);\n        } else {\n          hookInjections[_key] = hookInjections[_key] || [];\n\n          hookInjections[_key].push(injections[_key]);\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = injectShader(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctions[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = injectShader(assembledSource, type, mainInjections);\n  assembledSource = transpileShader(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    var uniforms = {};\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = modules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var module = _step2.value;\n        var moduleUniforms = module.getUniforms(opts, uniforms);\n        Object.assign(uniforms, moduleUniforms);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType(_ref2) {\n  var type = _ref2.type;\n  return \"\\n#define SHADER_TYPE_\".concat(SHADER_TYPE[type].toUpperCase(), \"\\n\");\n}\n\nfunction getShaderName(_ref3) {\n  var id = _ref3.id,\n      source = _ref3.source,\n      type = _ref3.type;\n  var injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? \"\\n#define SHADER_NAME \".concat(id, \"_\").concat(SHADER_TYPE[type], \"\\n\\n\") : '';\n}\n\nfunction getApplicationDefines() {\n  var defines = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var count = 0;\n  var sourceText = '';\n\n  for (var define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    var value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += \"#define \".concat(define.toUpperCase(), \" \").concat(defines[define], \"\\n\");\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  var result = '';\n\n  for (var hookName in hookFunctions) {\n    var hookFunction = hookFunctions[hookName];\n    result += \"void \".concat(hookFunction.signature, \" {\\n\");\n\n    if (hookFunction.header) {\n      result += \"  \".concat(hookFunction.header);\n    }\n\n    if (hookInjections[hookName]) {\n      var injections = hookInjections[hookName];\n      injections.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = injections[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var injection = _step3.value;\n          result += \"  \".concat(injection.injection, \"\\n\");\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += \"  \".concat(hookFunction.footer);\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  var result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(function (hook) {\n    var opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n\n    var _hook$split = hook.split(':'),\n        _hook$split2 = _slicedToArray(_hook$split, 2),\n        stage = _hook$split2[0],\n        signature = _hook$split2[1];\n\n    var name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature: signature\n    });\n  });\n  return result;\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.bind\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _UNIFORM_SETTERS;\n\nimport { log } from '@luma.gl/gltools';\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport { assert } from '../utils';\nvar UNIFORM_SETTERS = (_UNIFORM_SETTERS = {}, _defineProperty(_UNIFORM_SETTERS, 5126, getArraySetter.bind(null, 'uniform1fv', toFloatArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35664, getArraySetter.bind(null, 'uniform2fv', toFloatArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35665, getArraySetter.bind(null, 'uniform3fv', toFloatArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35666, getArraySetter.bind(null, 'uniform4fv', toFloatArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 5124, getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35667, getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35668, getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35669, getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35670, getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35671, getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35672, getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35673, getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35674, getArraySetter.bind(null, 'uniformMatrix2fv', toFloatArray, 4, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35675, getArraySetter.bind(null, 'uniformMatrix3fv', toFloatArray, 9, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35676, getArraySetter.bind(null, 'uniformMatrix4fv', toFloatArray, 16, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35678, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 35680, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 5125, getArraySetter.bind(null, 'uniform1uiv', toUIntArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 36294, getArraySetter.bind(null, 'uniform2uiv', toUIntArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 36295, getArraySetter.bind(null, 'uniform3uiv', toUIntArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 36296, getArraySetter.bind(null, 'uniform4uiv', toUIntArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35685, getArraySetter.bind(null, 'uniformMatrix2x3fv', toFloatArray, 6, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35686, getArraySetter.bind(null, 'uniformMatrix2x4fv', toFloatArray, 8, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35687, getArraySetter.bind(null, 'uniformMatrix3x2fv', toFloatArray, 6, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35688, getArraySetter.bind(null, 'uniformMatrix3x4fv', toFloatArray, 12, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35689, getArraySetter.bind(null, 'uniformMatrix4x2fv', toFloatArray, 8, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35690, getArraySetter.bind(null, 'uniformMatrix4x3fv', toFloatArray, 12, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35679, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 35682, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36289, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36292, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36293, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36298, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36299, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36300, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36303, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36306, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36307, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36308, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36311, getSamplerSetter), _UNIFORM_SETTERS);\nvar FLOAT_ARRAY = {};\nvar INT_ARRAY = {};\nvar UINT_ARRAY = {};\nvar array1 = [0];\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  var length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(\"Uniform size should be multiples of \".concat(uniformLength), value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  var result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (var i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function parseUniformName(name) {\n  if (name[name.length - 1] !== ']') {\n    return {\n      name: name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  var UNIFORM_NAME_REGEXP = /([^[]*)(\\[[0-9]+\\])?/;\n  var matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(\"Failed to parse GLSL uniform name \".concat(name));\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\nexport function getUniformSetter(gl, location, info) {\n  var setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(\"Unknown GLSL uniform type \".concat(info.type));\n  }\n\n  return setter().bind(null, gl, location);\n}\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (var uniformName in uniforms) {\n    var value = uniforms[uniformName];\n    var shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      source = source ? \"\".concat(source, \" \") : '';\n      console.error(\"\".concat(source, \" Bad uniform \").concat(uniformName), value);\n      throw new Error(\"\".concat(source, \" Bad uniform \").concat(uniformName));\n    }\n  }\n\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nfunction checkUniformArray(value) {\n  if (value.length === 0) {\n    return false;\n  }\n\n  var checkLength = Math.min(value.length, 16);\n\n  for (var i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function copyUniform(uniforms, key, value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    if (uniforms[key]) {\n      var dest = uniforms[key];\n\n      for (var i = 0, len = value.length; i < len; ++i) {\n        dest[i] = value[i];\n      }\n    } else {\n      uniforms[key] = value.slice();\n    }\n  } else {\n    uniforms[key] = value;\n  }\n}\n\nfunction getSamplerSetter() {\n  var cache = null;\n  return function (gl, location, value) {\n    var update = cache !== value;\n\n    if (update) {\n      gl.uniform1i(location, value);\n      cache = value;\n    }\n\n    return update;\n  };\n}\n\nfunction getArraySetter(functionName, toArray, size, uniformSetter) {\n  var cache = null;\n  var cacheLength = null;\n  return function (gl, location, value) {\n    var arrayValue = toArray(value, size);\n    var length = arrayValue.length;\n    var update = false;\n\n    if (cache === null) {\n      cache = new Float32Array(length);\n      cacheLength = length;\n      update = true;\n    } else {\n      assert(cacheLength === length, 'Uniform length cannot change.');\n\n      for (var i = 0; i < length; ++i) {\n        if (arrayValue[i] !== cache[i]) {\n          update = true;\n          break;\n        }\n      }\n    }\n\n    if (update) {\n      uniformSetter(gl, functionName, location, arrayValue);\n      cache.set(arrayValue);\n    }\n\n    return update;\n  };\n}\n\nfunction setVectorUniform(gl, functionName, location, value) {\n  gl[functionName](location, value);\n}\n\nfunction setMatrixUniform(gl, functionName, location, value) {\n  gl[functionName](location, false, value);\n}","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  var debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return \"#define NVIDIA_GPU\\n// Nvidia optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n\";\n\n    case 'intel':\n      return \"#define INTEL_GPU\\n// Intel optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n\n    case 'amd':\n      return \"#define AMD_GPU\\n\";\n\n    default:\n      return \"#define DEFAULT_GPU\\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  var versionDefines = \"#if (__VERSION__ > 120)\\n\\n# define FRAG_DEPTH\\n# define DERIVATIVES\\n# define DRAW_BUFFERS\\n# define TEXTURE_LOD\\n\\n#endif // __VERSION\\n\";\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += \"// FRAG_DEPTH => gl_FragDepth is available\\n#ifdef GL_EXT_frag_depth\\n#extension GL_EXT_frag_depth : enable\\n# define FRAG_DEPTH\\n# define gl_FragDepth gl_FragDepthEXT\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += \"// DERIVATIVES => dxdF, dxdY and fwidth are available\\n#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n# define DERIVATIVES\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += \"// DRAW_BUFFERS => gl_FragData[] is available\\n#ifdef GL_EXT_draw_buffers\\n#extension GL_EXT_draw_buffers : require\\n#define DRAW_BUFFERS\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += \"// TEXTURE_LOD => texture2DLod etc are available\\n#ifdef GL_EXT_shader_texture_lod\\n#extension GL_EXT_shader_texture_lod : enable\\n# define TEXTURE_LOD\\n#define texture2DLod texture2DLodEXT\\n#define texture2DProjLod texture2DProjLodEXT\\n#define texture2DProjLod texture2DProjLodEXT\\n#define textureCubeLod textureCubeLodEXT\\n#define texture2DGrad texture2DGradEXT\\n#define texture2DProjGrad texture2DProjGradEXT\\n#define texture2DProjGrad texture2DProjGradEXT\\n#define textureCubeGrad textureCubeGradEXT\\n#endif\\n\";\n  }\n\n  return versionDefines;\n}","import \"core-js/modules/es6.regexp.match\";\nexport default function getShaderName(shader) {\n  var defaultName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'unnamed';\n  var SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  var match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.regexp.split\";\nimport getShaderName from './get-shader-name';\nimport getShaderTypeName from './get-shader-type-name';\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  var _parseGLSLCompilerErr = parseGLSLCompilerError(errLog, src, shaderType),\n      shaderName = _parseGLSLCompilerErr.shaderName,\n      errors = _parseGLSLCompilerErr.errors,\n      warnings = _parseGLSLCompilerErr.warnings;\n\n  return \"GLSL compilation error in \".concat(shaderName, \"\\n\\n\").concat(errors, \"\\n\").concat(warnings);\n}\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  var errorStrings = errLog.split(/\\r?\\n/);\n  var errors = {};\n  var warnings = {};\n  var name = shaderName || getShaderName(src) || '(unnamed)';\n  var shaderDescription = \"\".concat(getShaderTypeName(shaderType), \" shader \").concat(name);\n\n  for (var i = 0; i < errorStrings.length; i++) {\n    var errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    var segments = errorString.split(':');\n    var type = segments[0];\n    var line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(\"GLSL compilation error in \".concat(shaderDescription, \": \").concat(errLog));\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  }\n\n  var lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n}\n\nfunction formatErrors(errors, lines) {\n  var message = '';\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += \"\".concat(line, \"\\n\");\n\n    if (errors[i + 1]) {\n      var error = errors[i + 1];\n      var segments = error.split(':', 3);\n      var type = segments[0];\n      var column = parseInt(segments[1], 10) || 0;\n      var err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(\"^^^ \".concat(type, \": \").concat(err, \"\\n\\n\"), column);\n    }\n  }\n\n  return message;\n}\n\nfunction addLineNumbers(string) {\n  var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var delim = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ': ';\n  var lines = string.split(/\\r?\\n/);\n  var maxDigits = String(lines.length + start - 1).length;\n  return lines.map(function (line, i) {\n    var lineNumber = i + start;\n    var digits = String(lineNumber).length;\n    var prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n\nfunction padLeft(string, digits) {\n  var result = '';\n\n  for (var i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return \"\".concat(result).concat(string);\n}","var GL_FRAGMENT_SHADER = 0x8b30;\nvar GL_VERTEX_SHADER = 0x8b31;\nexport default function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { log } from '@luma.gl/gltools';\nimport { parseGLSLCompilerError, getShaderName } from '../glsl-utils';\nimport { assertWebGLContext } from '../webgl-utils';\nimport { uid, assert } from '../utils';\nimport Resource from './resource';\nvar ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nexport var Shader = function (_Resource) {\n  _inherits(Shader, _Resource);\n\n  _createClass(Shader, null, [{\n    key: \"getTypeName\",\n    value: function getTypeName(shaderType) {\n      switch (shaderType) {\n        case 35633:\n          return 'vertex-shader';\n\n        case 35632:\n          return 'fragment-shader';\n\n        default:\n          assert(false);\n          return 'unknown';\n      }\n    }\n  }]);\n\n  function Shader(gl, props) {\n    var _this;\n\n    _classCallCheck(this, Shader);\n\n    assertWebGLContext(gl);\n    assert(typeof props.source === 'string', ERR_SOURCE);\n    var id = getShaderName(props.source, null) || props.id || uid(\"unnamed \".concat(Shader.getTypeName(props.shaderType)));\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Shader).call(this, gl, {\n      id: id\n    }));\n    _this.shaderType = props.shaderType;\n    _this.source = props.source;\n\n    _this.initialize(props);\n\n    return _this;\n  }\n\n  _createClass(Shader, [{\n    key: \"initialize\",\n    value: function initialize(_ref) {\n      var source = _ref.source;\n      var shaderName = getShaderName(source, null);\n\n      if (shaderName) {\n        this.id = uid(shaderName);\n      }\n\n      this._compile(source);\n    }\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(pname) {\n      return this.gl.getShaderParameter(this.handle, pname);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(Shader.getTypeName(this.shaderType), \":\").concat(this.id);\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return getShaderName(this.source) || 'unnamed-shader';\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource() {\n      return this.gl.getShaderSource(this.handle);\n    }\n  }, {\n    key: \"getTranslatedSource\",\n    value: function getTranslatedSource() {\n      var extension = this.gl.getExtension('WEBGL.debug_shaders');\n      return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL.debug_shaders not implemented';\n    }\n  }, {\n    key: \"_compile\",\n    value: function _compile() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.source;\n\n      if (!source.startsWith('#version ')) {\n        source = \"#version 100\\n\".concat(source);\n      }\n\n      this.source = source;\n      this.gl.shaderSource(this.handle, this.source);\n      this.gl.compileShader(this.handle);\n      var compileStatus = this.getParameter(35713);\n\n      if (!compileStatus) {\n        var infoLog = this.gl.getShaderInfoLog(this.handle);\n\n        var _parseGLSLCompilerErr = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id),\n            shaderName = _parseGLSLCompilerErr.shaderName,\n            errors = _parseGLSLCompilerErr.errors,\n            warnings = _parseGLSLCompilerErr.warnings;\n\n        log.error(\"GLSL compilation errors in \".concat(shaderName, \"\\n\").concat(errors))();\n        log.warn(\"GLSL compilation warnings in \".concat(shaderName, \"\\n\").concat(warnings))();\n        throw new Error(\"GLSL compilation errors in \".concat(shaderName));\n      }\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteShader(this.handle);\n    }\n  }, {\n    key: \"_getOptsFromHandle\",\n    value: function _getOptsFromHandle() {\n      return {\n        type: this.getParameter(35663),\n        source: this.getSource()\n      };\n    }\n  }]);\n\n  return Shader;\n}(Resource);\nexport var VertexShader = function (_Shader) {\n  _inherits(VertexShader, _Shader);\n\n  function VertexShader(gl, props) {\n    _classCallCheck(this, VertexShader);\n\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(VertexShader).call(this, gl, Object.assign({}, props, {\n      shaderType: 35633\n    })));\n  }\n\n  _createClass(VertexShader, [{\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createShader(35633);\n    }\n  }]);\n\n  return VertexShader;\n}(Shader);\nexport var FragmentShader = function (_Shader2) {\n  _inherits(FragmentShader, _Shader2);\n\n  function FragmentShader(gl, props) {\n    _classCallCheck(this, FragmentShader);\n\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FragmentShader).call(this, gl, Object.assign({}, props, {\n      shaderType: 35632\n    })));\n  }\n\n  _createClass(FragmentShader, [{\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createShader(35632);\n    }\n  }]);\n\n  return FragmentShader;\n}(Shader);","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _COMPOSITE_GL_TYPES;\n\nimport { assert } from '../utils';\nvar GL_BYTE = 0x1400;\nvar GL_UNSIGNED_BYTE = 0x1401;\nvar GL_SHORT = 0x1402;\nvar GL_UNSIGNED_SHORT = 0x1403;\nvar GL_POINTS = 0x0;\nvar GL_LINES = 0x1;\nvar GL_LINE_LOOP = 0x2;\nvar GL_LINE_STRIP = 0x3;\nvar GL_TRIANGLES = 0x4;\nvar GL_TRIANGLE_STRIP = 0x5;\nvar GL_TRIANGLE_FAN = 0x6;\nvar GL_FLOAT = 0x1406;\nvar GL_FLOAT_VEC2 = 0x8b50;\nvar GL_FLOAT_VEC3 = 0x8b51;\nvar GL_FLOAT_VEC4 = 0x8b52;\nvar GL_INT = 0x1404;\nvar GL_INT_VEC2 = 0x8b53;\nvar GL_INT_VEC3 = 0x8b54;\nvar GL_INT_VEC4 = 0x8b55;\nvar GL_UNSIGNED_INT = 0x1405;\nvar GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nvar GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nvar GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nvar GL_BOOL = 0x8b56;\nvar GL_BOOL_VEC2 = 0x8b57;\nvar GL_BOOL_VEC3 = 0x8b58;\nvar GL_BOOL_VEC4 = 0x8b59;\nvar GL_FLOAT_MAT2 = 0x8b5a;\nvar GL_FLOAT_MAT3 = 0x8b5b;\nvar GL_FLOAT_MAT4 = 0x8b5c;\nvar GL_FLOAT_MAT2x3 = 0x8b65;\nvar GL_FLOAT_MAT2x4 = 0x8b66;\nvar GL_FLOAT_MAT3x2 = 0x8b67;\nvar GL_FLOAT_MAT3x4 = 0x8b68;\nvar GL_FLOAT_MAT4x2 = 0x8b69;\nvar GL_FLOAT_MAT4x3 = 0x8b6a;\nvar COMPOSITE_GL_TYPES = (_COMPOSITE_GL_TYPES = {}, _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT, [GL_FLOAT, 1, 'float']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC2, [GL_FLOAT, 2, 'vec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC3, [GL_FLOAT, 3, 'vec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC4, [GL_FLOAT, 4, 'vec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT, [GL_INT, 1, 'int']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC2, [GL_INT, 2, 'ivec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC3, [GL_INT, 3, 'ivec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC4, [GL_INT, 4, 'ivec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT, [GL_UNSIGNED_INT, 1, 'uint']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC2, [GL_UNSIGNED_INT, 2, 'uvec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC3, [GL_UNSIGNED_INT, 3, 'uvec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC4, [GL_UNSIGNED_INT, 4, 'uvec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL, [GL_FLOAT, 1, 'bool']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC2, [GL_FLOAT, 2, 'bvec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC3, [GL_FLOAT, 3, 'bvec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC4, [GL_FLOAT, 4, 'bvec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2, [GL_FLOAT, 8, 'mat2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2x3, [GL_FLOAT, 8, 'mat2x3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2x4, [GL_FLOAT, 8, 'mat2x4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3, [GL_FLOAT, 12, 'mat3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3x2, [GL_FLOAT, 12, 'mat3x2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3x4, [GL_FLOAT, 12, 'mat3x4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4, [GL_FLOAT, 16, 'mat4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4x2, [GL_FLOAT, 16, 'mat4x2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4x3, [GL_FLOAT, 16, 'mat4x3']), _COMPOSITE_GL_TYPES);\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getPrimitiveCount(_ref) {\n  var drawMode = _ref.drawMode,\n      vertexCount = _ref.vertexCount;\n\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getVertexCount(_ref2) {\n  var drawMode = _ref2.drawMode,\n      vertexCount = _ref2.vertexCount;\n  var primitiveCount = getPrimitiveCount({\n    drawMode: drawMode,\n    vertexCount: vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function decomposeCompositeGLType(compositeGLType) {\n  var typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  var _typeAndSize = _slicedToArray(typeAndSize, 2),\n      type = _typeAndSize[0],\n      components = _typeAndSize[1];\n\n  return {\n    type: type,\n    components: components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (var glType in COMPOSITE_GL_TYPES) {\n    var _COMPOSITE_GL_TYPES$g = _slicedToArray(COMPOSITE_GL_TYPES[glType], 3),\n        compType = _COMPOSITE_GL_TYPES$g[0],\n        compComponents = _COMPOSITE_GL_TYPES$g[1],\n        name = _COMPOSITE_GL_TYPES$g[2];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType: glType,\n        name: name\n      };\n    }\n  }\n\n  return null;\n}","import \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Accessor from './accessor';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\n\nvar ProgramConfiguration = function () {\n  function ProgramConfiguration(program) {\n    _classCallCheck(this, ProgramConfiguration);\n\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  _createClass(ProgramConfiguration, [{\n    key: \"getAttributeInfo\",\n    value: function getAttributeInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.attributeInfosByLocation[location];\n      }\n\n      return this.attributeInfosByName[locationOrName] || null;\n    }\n  }, {\n    key: \"getAttributeLocation\",\n    value: function getAttributeLocation(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.location : -1;\n    }\n  }, {\n    key: \"getAttributeAccessor\",\n    value: function getAttributeAccessor(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.accessor : null;\n    }\n  }, {\n    key: \"getVaryingInfo\",\n    value: function getVaryingInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.varyingInfos[location];\n      }\n\n      return this.varyingInfosByName[locationOrName] || null;\n    }\n  }, {\n    key: \"getVaryingIndex\",\n    value: function getVaryingIndex(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.location : -1;\n    }\n  }, {\n    key: \"getVaryingAccessor\",\n    value: function getVaryingAccessor(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.accessor : null;\n    }\n  }, {\n    key: \"_readAttributesFromProgram\",\n    value: function _readAttributesFromProgram(program) {\n      var gl = program.gl;\n      var count = gl.getProgramParameter(program.handle, 35721);\n\n      for (var index = 0; index < count; index++) {\n        var _gl$getActiveAttrib = gl.getActiveAttrib(program.handle, index),\n            name = _gl$getActiveAttrib.name,\n            type = _gl$getActiveAttrib.type,\n            size = _gl$getActiveAttrib.size;\n\n        var location = gl.getAttribLocation(program.handle, name);\n\n        if (location >= 0) {\n          this._addAttribute(location, name, type, size);\n        }\n      }\n\n      this.attributeInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    }\n  }, {\n    key: \"_readVaryingsFromProgram\",\n    value: function _readVaryingsFromProgram(program) {\n      var gl = program.gl;\n\n      if (!isWebGL2(gl)) {\n        return;\n      }\n\n      var count = gl.getProgramParameter(program.handle, 35971);\n\n      for (var location = 0; location < count; location++) {\n        var _gl$getTransformFeedb = gl.getTransformFeedbackVarying(program.handle, location),\n            name = _gl$getTransformFeedb.name,\n            type = _gl$getTransformFeedb.type,\n            size = _gl$getTransformFeedb.size;\n\n        this._addVarying(location, name, type, size);\n      }\n\n      this.varyingInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    }\n  }, {\n    key: \"_addAttribute\",\n    value: function _addAttribute(location, name, compositeType, size) {\n      var _decomposeCompositeGL = decomposeCompositeGLType(compositeType),\n          type = _decomposeCompositeGL.type,\n          components = _decomposeCompositeGL.components;\n\n      var accessor = {\n        type: type,\n        size: size * components\n      };\n\n      this._inferProperties(location, name, accessor);\n\n      var attributeInfo = {\n        location: location,\n        name: name,\n        accessor: new Accessor(accessor)\n      };\n      this.attributeInfos.push(attributeInfo);\n      this.attributeInfosByLocation[location] = attributeInfo;\n      this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n    }\n  }, {\n    key: \"_inferProperties\",\n    value: function _inferProperties(location, name, accessor) {\n      if (/instance/i.test(name)) {\n        accessor.divisor = 1;\n      }\n    }\n  }, {\n    key: \"_addVarying\",\n    value: function _addVarying(location, name, compositeType, size) {\n      var _decomposeCompositeGL2 = decomposeCompositeGLType(compositeType),\n          type = _decomposeCompositeGL2.type,\n          components = _decomposeCompositeGL2.components;\n\n      var accessor = new Accessor({\n        type: type,\n        size: size * components\n      });\n      var varying = {\n        location: location,\n        name: name,\n        accessor: accessor\n      };\n      this.varyingInfos.push(varying);\n      this.varyingInfosByName[varying.name] = varying;\n    }\n  }]);\n\n  return ProgramConfiguration;\n}();\n\nexport { ProgramConfiguration as default };","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { copyUniform, checkUniformValues } from './uniforms';\nimport { isWebGL2, withParameters, log } from '@luma.gl/gltools';\nimport { assertWebGL2Context, getKey } from '../webgl-utils';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { uid, assert } from '../utils';\nvar LOG_PROGRAM_PERF_PRIORITY = 4;\nvar GL_SEPARATE_ATTRIBS = 0x8c8d;\nvar V6_DEPRECATED_METHODS = ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo'];\n\nvar Program = function (_Resource) {\n  _inherits(Program, _Resource);\n\n  function Program(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Program);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Program).call(this, gl, props));\n\n    _this.stubRemovedMethods('Program', 'v6.0', V6_DEPRECATED_METHODS);\n\n    _this._isCached = false;\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n\n    _this._setId(props.id);\n\n    return _this;\n  }\n\n  _createClass(Program, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var hash = props.hash,\n          vs = props.vs,\n          fs = props.fs,\n          varyings = props.varyings,\n          _props$bufferMode = props.bufferMode,\n          bufferMode = _props$bufferMode === void 0 ? GL_SEPARATE_ATTRIBS : _props$bufferMode;\n      this.hash = hash || '';\n      this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n        id: \"\".concat(props.id, \"-vs\"),\n        source: vs\n      }) : vs;\n      this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n        id: \"\".concat(props.id, \"-fs\"),\n        source: fs\n      }) : fs;\n      assert(this.vs instanceof VertexShader);\n      assert(this.fs instanceof FragmentShader);\n      this.uniforms = {};\n      this._textureUniforms = {};\n      this._texturesRenderable = true;\n\n      if (varyings && varyings.length > 0) {\n        assertWebGL2Context(this.gl);\n        this.varyings = varyings;\n        this.gl.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n      }\n\n      this._compileAndLink();\n\n      this._readUniformLocationsFromLinkedProgram();\n\n      this.configuration = new ProgramConfiguration(this);\n      return this.setProps(props);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._isCached) {\n        return this;\n      }\n\n      return _get(_getPrototypeOf(Program.prototype), \"delete\", this).call(this, options);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref) {\n      var _this2 = this;\n\n      var logPriority = _ref.logPriority,\n          _ref$drawMode = _ref.drawMode,\n          drawMode = _ref$drawMode === void 0 ? 4 : _ref$drawMode,\n          vertexCount = _ref.vertexCount,\n          _ref$offset = _ref.offset,\n          offset = _ref$offset === void 0 ? 0 : _ref$offset,\n          start = _ref.start,\n          end = _ref.end,\n          _ref$isIndexed = _ref.isIndexed,\n          isIndexed = _ref$isIndexed === void 0 ? false : _ref$isIndexed,\n          _ref$indexType = _ref.indexType,\n          indexType = _ref$indexType === void 0 ? 5123 : _ref$indexType,\n          _ref$instanceCount = _ref.instanceCount,\n          instanceCount = _ref$instanceCount === void 0 ? 0 : _ref$instanceCount,\n          _ref$isInstanced = _ref.isInstanced,\n          isInstanced = _ref$isInstanced === void 0 ? instanceCount > 0 : _ref$isInstanced,\n          _ref$vertexArray = _ref.vertexArray,\n          vertexArray = _ref$vertexArray === void 0 ? null : _ref$vertexArray,\n          transformFeedback = _ref.transformFeedback,\n          framebuffer = _ref.framebuffer,\n          _ref$parameters = _ref.parameters,\n          parameters = _ref$parameters === void 0 ? {} : _ref$parameters,\n          uniforms = _ref.uniforms,\n          samplers = _ref.samplers;\n\n      if (uniforms || samplers) {\n        log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)')();\n        this.setUniforms(uniforms || {});\n      }\n\n      if (log.priority >= logPriority) {\n        var fb = framebuffer ? framebuffer.id : 'default';\n        var message = \"mode=\".concat(getKey(this.gl, drawMode), \" verts=\").concat(vertexCount, \" \") + \"instances=\".concat(instanceCount, \" indexType=\").concat(getKey(this.gl, indexType), \" \") + \"isInstanced=\".concat(isInstanced, \" isIndexed=\").concat(isIndexed, \" \") + \"Framebuffer=\".concat(fb);\n        log.log(logPriority, message)();\n      }\n\n      assert(vertexArray);\n      this.gl.useProgram(this.handle);\n\n      if (!this._areTexturesRenderable() || vertexCount === 0 || isInstanced && instanceCount === 0) {\n        return false;\n      }\n\n      vertexArray.bindForDraw(vertexCount, instanceCount, function () {\n        if (framebuffer !== undefined) {\n          parameters = Object.assign({}, parameters, {\n            framebuffer: framebuffer\n          });\n        }\n\n        if (transformFeedback) {\n          var primitiveMode = getPrimitiveDrawMode(drawMode);\n          transformFeedback.begin(primitiveMode);\n        }\n\n        _this2._bindTextures();\n\n        withParameters(_this2.gl, parameters, function () {\n          if (isIndexed && isInstanced) {\n            _this2.gl.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n          } else if (isIndexed && isWebGL2(_this2.gl) && !isNaN(start) && !isNaN(end)) {\n            _this2.gl.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n          } else if (isIndexed) {\n            _this2.gl.drawElements(drawMode, vertexCount, indexType, offset);\n          } else if (isInstanced) {\n            _this2.gl.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n          } else {\n            _this2.gl.drawArrays(drawMode, offset, vertexCount);\n          }\n        });\n\n        if (transformFeedback) {\n          transformFeedback.end();\n        }\n      });\n      return true;\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (log.priority >= 2) {\n        checkUniformValues(uniforms, this.id, this._uniformSetters);\n      }\n\n      this.gl.useProgram(this.handle);\n\n      for (var uniformName in uniforms) {\n        var uniform = uniforms[uniformName];\n        var uniformSetter = this._uniformSetters[uniformName];\n\n        if (uniformSetter) {\n          var value = uniform;\n          var textureUpdate = false;\n\n          if (value instanceof Framebuffer) {\n            value = value.texture;\n          }\n\n          if (value instanceof Texture) {\n            textureUpdate = this.uniforms[uniformName] !== uniform;\n\n            if (textureUpdate) {\n              if (uniformSetter.textureIndex === undefined) {\n                uniformSetter.textureIndex = this._textureIndexCounter++;\n              }\n\n              var texture = value;\n              var textureIndex = uniformSetter.textureIndex;\n              texture.bind(textureIndex);\n              value = textureIndex;\n\n              if (!texture.loaded) {\n                this._texturesRenderable = false;\n              }\n\n              this._textureUniforms[uniformName] = texture;\n            } else {\n              value = uniformSetter.textureIndex;\n            }\n          } else if (this._textureUniforms[uniformName]) {\n            delete this._textureUniforms[uniformName];\n          }\n\n          if (uniformSetter(value) || textureUpdate) {\n            copyUniform(this.uniforms, uniformName, uniform);\n          }\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_areTexturesRenderable\",\n    value: function _areTexturesRenderable() {\n      if (this._texturesRenderable) {\n        return true;\n      }\n\n      this._texturesRenderable = true;\n\n      for (var uniformName in this._textureUniforms) {\n        var texture = this._textureUniforms[uniformName];\n        this._texturesRenderable = this._texturesRenderable && texture.loaded;\n      }\n\n      return this._texturesRenderable;\n    }\n  }, {\n    key: \"_bindTextures\",\n    value: function _bindTextures() {\n      for (var uniformName in this._textureUniforms) {\n        var textureIndex = this._uniformSetters[uniformName].textureIndex;\n\n        this._textureUniforms[uniformName].bind(textureIndex);\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createProgram();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteProgram(this.handle);\n    }\n  }, {\n    key: \"_getOptionsFromHandle\",\n    value: function _getOptionsFromHandle(handle) {\n      var shaderHandles = this.gl.getAttachedShaders(handle);\n      var opts = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = shaderHandles[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var shaderHandle = _step.value;\n          var type = this.gl.getShaderParameter(this.handle, 35663);\n\n          switch (type) {\n            case 35633:\n              opts.vs = new VertexShader({\n                handle: shaderHandle\n              });\n              break;\n\n            case 35632:\n              opts.fs = new FragmentShader({\n                handle: shaderHandle\n              });\n              break;\n\n            default:\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return opts;\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      return this.gl.getProgramParameter(this.handle, pname);\n    }\n  }, {\n    key: \"_setId\",\n    value: function _setId(id) {\n      if (!id) {\n        var programName = this._getName();\n\n        this.id = uid(programName);\n      }\n    }\n  }, {\n    key: \"_getName\",\n    value: function _getName() {\n      var programName = this.vs.getName() || this.fs.getName();\n      programName = programName.replace(/shader/i, '');\n      programName = programName ? \"\".concat(programName, \"-program\") : 'program';\n      return programName;\n    }\n  }, {\n    key: \"_compileAndLink\",\n    value: function _compileAndLink() {\n      var gl = this.gl;\n      gl.attachShader(this.handle, this.vs.handle);\n      gl.attachShader(this.handle, this.fs.handle);\n      log.time(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n      gl.linkProgram(this.handle);\n      log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n\n      if (gl.debug || log.level > 0) {\n        gl.validateProgram(this.handle);\n        var linked = gl.getProgramParameter(this.handle, 35714);\n\n        if (!linked) {\n          throw new Error(\"Error linking: \".concat(gl.getProgramInfoLog(this.handle)));\n        }\n      }\n    }\n  }, {\n    key: \"_readUniformLocationsFromLinkedProgram\",\n    value: function _readUniformLocationsFromLinkedProgram() {\n      var gl = this.gl;\n      this._uniformSetters = {};\n      this._uniformCount = this._getParameter(35718);\n\n      for (var i = 0; i < this._uniformCount; i++) {\n        var info = this.gl.getActiveUniform(this.handle, i);\n\n        var _parseUniformName = parseUniformName(info.name),\n            name = _parseUniformName.name,\n            isArray = _parseUniformName.isArray;\n\n        var location = gl.getUniformLocation(this.handle, name);\n        this._uniformSetters[name] = getUniformSetter(gl, location, info, isArray);\n\n        if (info.size > 1) {\n          for (var l = 0; l < info.size; l++) {\n            location = gl.getUniformLocation(this.handle, \"\".concat(name, \"[\").concat(l, \"]\"));\n            this._uniformSetters[\"\".concat(name, \"[\").concat(l, \"]\")] = getUniformSetter(gl, location, info, isArray);\n          }\n        }\n      }\n\n      this._textureIndexCounter = 0;\n    }\n  }, {\n    key: \"getActiveUniforms\",\n    value: function getActiveUniforms(uniformIndices, pname) {\n      return this.gl.getActiveUniforms(this.handle, uniformIndices, pname);\n    }\n  }, {\n    key: \"getUniformBlockIndex\",\n    value: function getUniformBlockIndex(blockName) {\n      return this.gl.getUniformBlockIndex(this.handle, blockName);\n    }\n  }, {\n    key: \"getActiveUniformBlockParameter\",\n    value: function getActiveUniformBlockParameter(blockIndex, pname) {\n      return this.gl.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n    }\n  }, {\n    key: \"uniformBlockBinding\",\n    value: function uniformBlockBinding(blockIndex, blockBinding) {\n      this.gl.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n    }\n  }]);\n\n  return Program;\n}(Resource);\n\nexport { Program as default };","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.find\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assembleShaders } from '@luma.gl/shadertools';\nimport { Program } from '@luma.gl/webgl';\n\nvar ProgramManager = function () {\n  _createClass(ProgramManager, null, [{\n    key: \"getDefaultProgramManager\",\n    value: function getDefaultProgramManager(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n      return gl.luma.defaultProgramManager;\n    }\n  }]);\n\n  function ProgramManager(gl) {\n    _classCallCheck(this, ProgramManager);\n\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  _createClass(ProgramManager, [{\n    key: \"addDefaultModule\",\n    value: function addDefaultModule(module) {\n      if (!this._defaultModules.find(function (m) {\n        return m.name === module.name;\n      })) {\n        this._defaultModules.push(module);\n      }\n\n      this.stateHash++;\n    }\n  }, {\n    key: \"removeDefaultModule\",\n    value: function removeDefaultModule(module) {\n      var moduleName = typeof module === 'string' ? module : module.name;\n      this._defaultModules = this._defaultModules.filter(function (m) {\n        return m.name !== moduleName;\n      });\n      this.stateHash++;\n    }\n  }, {\n    key: \"addShaderHook\",\n    value: function addShaderHook(hook, opts) {\n      if (opts) {\n        hook = Object.assign(opts, {\n          hook: hook\n        });\n      }\n\n      this._hookFunctions.push(hook);\n\n      this.stateHash++;\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      var _this = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$vs = props.vs,\n          vs = _props$vs === void 0 ? '' : _props$vs,\n          _props$fs = props.fs,\n          fs = _props$fs === void 0 ? '' : _props$fs,\n          _props$defines = props.defines,\n          defines = _props$defines === void 0 ? {} : _props$defines,\n          _props$inject = props.inject,\n          inject = _props$inject === void 0 ? {} : _props$inject,\n          _props$varyings = props.varyings,\n          varyings = _props$varyings === void 0 ? [] : _props$varyings,\n          _props$bufferMode = props.bufferMode,\n          bufferMode = _props$bufferMode === void 0 ? 0x8c8d : _props$bufferMode,\n          _props$transpileToGLS = props.transpileToGLSL100,\n          transpileToGLSL100 = _props$transpileToGLS === void 0 ? false : _props$transpileToGLS;\n\n      var modules = this._getModuleList(props.modules);\n\n      var vsHash = this._getHash(vs);\n\n      var fsHash = this._getHash(fs);\n\n      var moduleHashes = modules.map(function (m) {\n        return _this._getHash(m.name);\n      }).sort();\n      var varyingHashes = varyings.map(function (v) {\n        return _this._getHash(v);\n      });\n      var defineKeys = Object.keys(defines).sort();\n      var injectKeys = Object.keys(inject).sort();\n      var defineHashes = [];\n      var injectHashes = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = defineKeys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n          defineHashes.push(this._getHash(key));\n          defineHashes.push(this._getHash(defines[key]));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = injectKeys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _key = _step2.value;\n          injectHashes.push(this._getHash(_key));\n          injectHashes.push(this._getHash(inject[_key]));\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var hash = \"\".concat(vsHash, \"/\").concat(fsHash, \"D\").concat(defineHashes.join('/'), \"M\").concat(moduleHashes.join('/'), \"I\").concat(injectHashes.join('/'), \"V\").concat(varyingHashes.join('/'), \"H\").concat(this.stateHash, \"B\").concat(bufferMode).concat(transpileToGLSL100 ? 'T' : '');\n\n      if (!this._programCache[hash]) {\n        var assembled = assembleShaders(this.gl, {\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          hookFunctions: this._hookFunctions,\n          transpileToGLSL100: transpileToGLSL100\n        });\n        this._programCache[hash] = new Program(this.gl, {\n          hash: hash,\n          vs: assembled.vs,\n          fs: assembled.fs,\n          varyings: varyings,\n          bufferMode: bufferMode\n        });\n\n        this._getUniforms[hash] = assembled.getUniforms || function (x) {};\n\n        this._useCounts[hash] = 0;\n      }\n\n      this._useCounts[hash]++;\n      return this._programCache[hash];\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(program) {\n      return this._getUniforms[program.hash] || null;\n    }\n  }, {\n    key: \"release\",\n    value: function release(program) {\n      var hash = program.hash;\n      this._useCounts[hash]--;\n\n      if (this._useCounts[hash] === 0) {\n        this._programCache[hash][\"delete\"]();\n\n        delete this._programCache[hash];\n        delete this._getUniforms[hash];\n        delete this._useCounts[hash];\n      }\n    }\n  }, {\n    key: \"_getHash\",\n    value: function _getHash(key) {\n      if (this._hashes[key] === undefined) {\n        this._hashes[key] = this._hashCounter++;\n      }\n\n      return this._hashes[key];\n    }\n  }, {\n    key: \"_getModuleList\",\n    value: function _getModuleList() {\n      var appModules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var modules = new Array(this._defaultModules.length + appModules.length);\n      var seen = {};\n      var count = 0;\n\n      for (var i = 0, len = this._defaultModules.length; i < len; ++i) {\n        var module = this._defaultModules[i];\n        var name = module.name;\n        modules[count++] = module;\n        seen[name] = true;\n      }\n\n      for (var _i = 0, _len = appModules.length; _i < _len; ++_i) {\n        var _module = appModules[_i];\n        var _name = _module.name;\n\n        if (!seen[_name]) {\n          modules[count++] = _module;\n          seen[_name] = true;\n        }\n      }\n\n      modules.length = count;\n      return modules;\n    }\n  }]);\n\n  return ProgramManager;\n}();\n\nexport { ProgramManager as default };","import \"core-js/modules/es6.array.copy-within\";\nvar arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  var scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length);\n}\nexport function fillArray(_ref) {\n  var target = _ref.target,\n      source = _ref.source,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count;\n  var length = source.length;\n  var total = count * length;\n  var copied = 0;\n\n  for (var i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}","import \"core-js/modules/es6.array.index-of\";\nimport { window } from './globals';\nimport isBrowser from './is-browser';\nimport isElectron from './is-electron';\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}","import \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.seal\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils';\nimport { getBrowser } from 'probe.gl';\nvar ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\n\nvar VertexArrayObject = function (_Resource) {\n  _inherits(VertexArrayObject, _Resource);\n\n  _createClass(VertexArrayObject, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (options.constantAttributeZero) {\n        return isWebGL2(gl) || getBrowser() === 'Chrome';\n      }\n\n      return true;\n    }\n  }, {\n    key: \"getDefaultArray\",\n    value: function getDefaultArray(gl) {\n      gl.luma = gl.luma || {};\n\n      if (!gl.luma.defaultVertexArray) {\n        gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n          handle: null,\n          isDefaultArray: true\n        });\n      }\n\n      return gl.luma.defaultVertexArray;\n    }\n  }, {\n    key: \"getMaxAttributes\",\n    value: function getMaxAttributes(gl) {\n      VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n      return VertexArrayObject.MAX_ATTRIBUTES;\n    }\n  }, {\n    key: \"setConstant\",\n    value: function setConstant(gl, location, array) {\n      switch (array.constructor) {\n        case Float32Array:\n          VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n          break;\n\n        case Int32Array:\n          VertexArrayObject._setConstantIntArray(gl, location, array);\n\n          break;\n\n        case Uint32Array:\n          VertexArrayObject._setConstantUintArray(gl, location, array);\n\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }]);\n\n  function VertexArrayObject(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, VertexArrayObject);\n\n    var id = opts.id || opts.program && opts.program.id;\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VertexArrayObject).call(this, gl, Object.assign({}, opts, {\n      id: id\n    })));\n    _this.buffer = null;\n    _this.bufferValue = null;\n    _this.isDefaultArray = opts.isDefaultArray || false;\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(VertexArrayObject, [{\n    key: \"delete\",\n    value: function _delete() {\n      _get(_getPrototypeOf(VertexArrayObject.prototype), \"delete\", this).call(this);\n\n      if (this.buffer) {\n        this.buffer[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.setProps(props);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      return this;\n    }\n  }, {\n    key: \"setElementBuffer\",\n    value: function setElementBuffer() {\n      var _this2 = this;\n\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS);\n      this.bind(function () {\n        _this2.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n      });\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(location, buffer, accessor) {\n      if (buffer.target === 34963) {\n        return this.setElementBuffer(buffer, accessor);\n      }\n\n      var size = accessor.size,\n          type = accessor.type,\n          stride = accessor.stride,\n          offset = accessor.offset,\n          normalized = accessor.normalized,\n          integer = accessor.integer,\n          divisor = accessor.divisor;\n      var gl = this.gl;\n      location = Number(location);\n      this.bind(function () {\n        gl.bindBuffer(34962, buffer.handle);\n\n        if (integer) {\n          assert(isWebGL2(gl));\n          gl.vertexAttribIPointer(location, size, type, stride, offset);\n        } else {\n          gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n        }\n\n        gl.enableVertexAttribArray(location);\n        gl.vertexAttribDivisor(location, divisor || 0);\n      });\n      return this;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable(location) {\n      var _this3 = this;\n\n      var _enable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      var disablingAttributeZero = !_enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n        constantAttributeZero: true\n      });\n\n      if (!disablingAttributeZero) {\n        location = Number(location);\n        this.bind(function () {\n          return _enable ? _this3.gl.enableVertexAttribArray(location) : _this3.gl.disableVertexAttribArray(location);\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getConstantBuffer\",\n    value: function getConstantBuffer(elementCount, value, accessor) {\n      var constantValue = this._normalizeConstantArrayValue(value, accessor);\n\n      var byteLength = constantValue.byteLength * elementCount;\n      var length = constantValue.length * elementCount;\n      var updateNeeded = !this.buffer;\n      this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n      updateNeeded = updateNeeded || this.buffer.reallocate(byteLength);\n      updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n      if (updateNeeded) {\n        var typedArray = getScratchArray(value.constructor, length);\n        fillArray({\n          target: typedArray,\n          source: constantValue,\n          start: 0,\n          count: length\n        });\n        this.buffer.subData(typedArray);\n        this.bufferValue = value;\n      }\n\n      return this.buffer;\n    }\n  }, {\n    key: \"_normalizeConstantArrayValue\",\n    value: function _normalizeConstantArrayValue(arrayValue, accessor) {\n      if (Array.isArray(arrayValue)) {\n        return new Float32Array(arrayValue);\n      }\n\n      return arrayValue;\n    }\n  }, {\n    key: \"_compareConstantArrayValues\",\n    value: function _compareConstantArrayValues(v1, v2) {\n      if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n        return false;\n      }\n\n      for (var i = 0; i < v1.length; ++i) {\n        if (v1[i] !== v2[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createVertexArray();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle(handle) {\n      this.gl.deleteVertexArray(handle);\n      return [this.elements];\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindVertexArray(handle);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname, _ref) {\n      var _this4 = this;\n\n      var location = _ref.location;\n      assert(Number.isFinite(location));\n      return this.bind(function () {\n        switch (pname) {\n          case 34373:\n            return _this4.gl.getVertexAttribOffset(location, pname);\n\n          default:\n            return _this4.gl.getVertexAttrib(location, pname);\n        }\n      });\n    }\n  }, {\n    key: \"MAX_ATTRIBUTES\",\n    get: function get() {\n      return VertexArrayObject.getMaxAttributes(this.gl);\n    }\n  }], [{\n    key: \"_setConstantFloatArray\",\n    value: function _setConstantFloatArray(gl, location, array) {\n      switch (array.length) {\n        case 1:\n          gl.vertexAttrib1fv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttrib2fv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttrib3fv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttrib4fv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }, {\n    key: \"_setConstantIntArray\",\n    value: function _setConstantIntArray(gl, location, array) {\n      assert(isWebGL2(gl));\n\n      switch (array.length) {\n        case 1:\n          gl.vertexAttribI1iv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttribI2iv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttribI3iv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttribI4iv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }, {\n    key: \"_setConstantUintArray\",\n    value: function _setConstantUintArray(gl, location, array) {\n      assert(isWebGL2(gl));\n\n      switch (array.length) {\n        case 1:\n          gl.vertexAttribI1uiv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttribI2uiv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttribI3uiv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttribI4uiv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }]);\n\n  return VertexArrayObject;\n}(Resource);\n\nexport { VertexArrayObject as default };","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.object.seal\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { log } from '@luma.gl/gltools';\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { assert, stubRemovedMethods } from '../utils';\nvar ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\nvar MULTI_LOCATION_ATTRIBUTE_REGEXP = /^(.+)__LOCATION_([0-9]+)$/;\nvar DEPRECATIONS_V6 = ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable'];\n\nvar VertexArray = function () {\n  function VertexArray(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, VertexArray);\n\n    var id = opts.id || opts.program && opts.program.id;\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null;\n    this.elements = null;\n    this.elementsAccessor = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null;\n    this.attributes = {};\n    this.vertexArrayObject = new VertexArrayObject(gl);\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', DEPRECATIONS_V6);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  _createClass(VertexArray, [{\n    key: \"delete\",\n    value: function _delete() {\n      if (this.buffer) {\n        this.buffer[\"delete\"]();\n      }\n\n      this.vertexArrayObject[\"delete\"]();\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.reset();\n      this.configuration = null;\n      this.bindOnUse = false;\n      return this.setProps(props);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.elements = null;\n      this.elementsAccessor = null;\n      var MAX_ATTRIBUTES = this.vertexArrayObject.MAX_ATTRIBUTES;\n      this.values = new Array(MAX_ATTRIBUTES).fill(null);\n      this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n      this.unused = {};\n      this.drawParams = null;\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('program' in props) {\n        this.configuration = props.program && props.program.configuration;\n      }\n\n      if ('configuration' in props) {\n        this.configuration = props.configuration;\n      }\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('elements' in props) {\n        this.setElementBuffer(props.elements);\n      }\n\n      if ('bindOnUse' in props) {\n        props = props.bindOnUse;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clearDrawParams\",\n    value: function clearDrawParams() {\n      this.drawParams = null;\n    }\n  }, {\n    key: \"getDrawParams\",\n    value: function getDrawParams() {\n      this.drawParams = this.drawParams || this._updateDrawParams();\n      return this.drawParams;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes(attributes) {\n      var _this = this;\n\n      Object.assign(this.attributes, attributes);\n      this.vertexArrayObject.bind(function () {\n        for (var locationOrName in attributes) {\n          var value = attributes[locationOrName];\n\n          _this._setAttribute(locationOrName, value);\n        }\n\n        _this.gl.bindBuffer(34962, null);\n      });\n      return this;\n    }\n  }, {\n    key: \"setElementBuffer\",\n    value: function setElementBuffer() {\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.elements = elementBuffer;\n      this.elementsAccessor = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(locationOrName, buffer) {\n      var appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (buffer.target === 34963) {\n        return this.setElementBuffer(buffer, appAccessor);\n      }\n\n      var _this$_resolveLocatio = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor),\n          location = _this$_resolveLocatio.location,\n          accessor = _this$_resolveLocatio.accessor;\n\n      if (location >= 0) {\n        this.values[location] = buffer;\n        this.accessors[location] = accessor;\n        this.clearDrawParams();\n        this.vertexArrayObject.setBuffer(location, buffer, accessor);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setConstant\",\n    value: function setConstant(locationOrName, arrayValue) {\n      var appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var _this$_resolveLocatio2 = this._resolveLocationAndAccessor(locationOrName, arrayValue, Object.assign({\n        size: arrayValue.length\n      }, appAccessor)),\n          location = _this$_resolveLocatio2.location,\n          accessor = _this$_resolveLocatio2.accessor;\n\n      if (location >= 0) {\n        arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue, accessor);\n        this.values[location] = arrayValue;\n        this.accessors[location] = accessor;\n        this.clearDrawParams();\n        this.vertexArrayObject.enable(location, false);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unbindBuffers\",\n    value: function unbindBuffers() {\n      var _this2 = this;\n\n      this.vertexArrayObject.bind(function () {\n        if (_this2.elements) {\n          _this2.vertexArrayObject.setElementBuffer(null);\n        }\n\n        _this2.buffer = _this2.buffer || new Buffer(_this2.gl, {\n          accessor: {\n            size: 4\n          }\n        });\n\n        for (var location = 0; location < _this2.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n          if (_this2.values[location] instanceof Buffer) {\n            _this2.gl.disableVertexAttribArray(location);\n\n            _this2.gl.bindBuffer(34962, _this2.buffer.handle);\n\n            _this2.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n          }\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"bindBuffers\",\n    value: function bindBuffers() {\n      var _this3 = this;\n\n      this.vertexArrayObject.bind(function () {\n        if (_this3.elements) {\n          _this3.setElementBuffer(_this3.elements);\n        }\n\n        for (var location = 0; location < _this3.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n          var buffer = _this3.values[location];\n\n          if (buffer instanceof Buffer) {\n            _this3.setBuffer(location, buffer);\n          }\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"bindForDraw\",\n    value: function bindForDraw(vertexCount, instanceCount, func) {\n      var _this4 = this;\n\n      var value;\n      this.vertexArrayObject.bind(function () {\n        _this4._setConstantAttributes(vertexCount, instanceCount);\n\n        value = func();\n      });\n      return value;\n    }\n  }, {\n    key: \"_resolveLocationAndAccessor\",\n    value: function _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n      var _this5 = this;\n\n      var _this$_getAttributeIn = this._getAttributeIndex(locationOrName),\n          location = _this$_getAttributeIn.location,\n          name = _this$_getAttributeIn.name;\n\n      if (!Number.isFinite(location) || location < 0) {\n        this.unused[locationOrName] = value;\n        log.once(3, function () {\n          return \"unused value \".concat(locationOrName, \" in \").concat(_this5.id);\n        })();\n        return this;\n      }\n\n      var accessInfo = this._getAttributeInfo(name || location);\n\n      if (!accessInfo) {\n        return {\n          location: -1,\n          accessor: null\n        };\n      }\n\n      var currentAccessor = this.accessors[location] || {};\n      var accessor = Accessor.resolve(accessInfo.accessor, currentAccessor, valueAccessor, appAccessor);\n      var size = accessor.size,\n          type = accessor.type;\n      assert(Number.isFinite(size) && Number.isFinite(type));\n      return {\n        location: location,\n        accessor: accessor\n      };\n    }\n  }, {\n    key: \"_getAttributeInfo\",\n    value: function _getAttributeInfo(attributeName) {\n      return this.configuration && this.configuration.getAttributeInfo(attributeName);\n    }\n  }, {\n    key: \"_getAttributeIndex\",\n    value: function _getAttributeIndex(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return {\n          location: location\n        };\n      }\n\n      var multiLocation = MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName);\n      var name = multiLocation ? multiLocation[1] : locationOrName;\n      var locationOffset = multiLocation ? Number(multiLocation[2]) : 0;\n\n      if (this.configuration) {\n        return {\n          location: this.configuration.getAttributeLocation(name) + locationOffset,\n          name: name\n        };\n      }\n\n      return {\n        location: -1\n      };\n    }\n  }, {\n    key: \"_setAttribute\",\n    value: function _setAttribute(locationOrName, value) {\n      if (value instanceof Buffer) {\n        this.setBuffer(locationOrName, value);\n      } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n        var buffer = value[0];\n        var accessor = value[1];\n        this.setBuffer(locationOrName, buffer, accessor);\n      } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n        var constant = value;\n        this.setConstant(locationOrName, constant);\n      } else if (value.buffer instanceof Buffer) {\n        var _accessor = value;\n        this.setBuffer(locationOrName, _accessor.buffer, _accessor);\n      } else {\n        throw new Error(ERR_ATTRIBUTE_TYPE);\n      }\n    }\n  }, {\n    key: \"_setConstantAttributes\",\n    value: function _setConstantAttributes(vertexCount, instanceCount) {\n      var elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n      var constant = this.values[0];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttributeZero(constant, elementCount);\n      }\n\n      for (var location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        constant = this.values[location];\n\n        if (ArrayBuffer.isView(constant)) {\n          this._setConstantAttribute(location, constant);\n        }\n      }\n    }\n  }, {\n    key: \"_setConstantAttributeZero\",\n    value: function _setConstantAttributeZero(constant, elementCount) {\n      if (VertexArrayObject.isSupported(this.gl, {\n        constantAttributeZero: true\n      })) {\n        this._setConstantAttribute(0, constant);\n\n        return;\n      }\n\n      var buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant);\n      this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n    }\n  }, {\n    key: \"_setConstantAttribute\",\n    value: function _setConstantAttribute(location, constant) {\n      VertexArrayObject.setConstant(this.gl, location, constant);\n    }\n  }, {\n    key: \"_updateDrawParams\",\n    value: function _updateDrawParams() {\n      var drawParams = {\n        isIndexed: false,\n        isInstanced: false,\n        indexCount: Infinity,\n        vertexCount: Infinity,\n        instanceCount: Infinity\n      };\n\n      for (var location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        this._updateDrawParamsForLocation(drawParams, location);\n      }\n\n      if (this.elements) {\n        drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n        drawParams.isIndexed = true;\n        drawParams.indexType = this.elementsAccessor.type || this.elements.accessor.type;\n        drawParams.indexOffset = this.elementsAccessor.offset || 0;\n      }\n\n      if (drawParams.indexCount === Infinity) {\n        drawParams.indexCount = 0;\n      }\n\n      if (drawParams.vertexCount === Infinity) {\n        drawParams.vertexCount = 0;\n      }\n\n      if (drawParams.instanceCount === Infinity) {\n        drawParams.instanceCount = 0;\n      }\n\n      return drawParams;\n    }\n  }, {\n    key: \"_updateDrawParamsForLocation\",\n    value: function _updateDrawParamsForLocation(drawParams, location) {\n      var value = this.values[location];\n      var accessor = this.accessors[location];\n\n      if (!value) {\n        return;\n      }\n\n      var divisor = accessor.divisor;\n      var isInstanced = divisor > 0;\n      drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n      if (value instanceof Buffer) {\n        var buffer = value;\n\n        if (isInstanced) {\n          var instanceCount = buffer.getVertexCount(accessor);\n          drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n        } else {\n          var vertexCount = buffer.getVertexCount(accessor);\n          drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n        }\n      }\n    }\n  }, {\n    key: \"setElements\",\n    value: function setElements() {\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      log.deprecated('setElements', 'setElementBuffer')();\n      return this.setElementBuffer(elementBuffer, accessor);\n    }\n  }]);\n\n  return VertexArray;\n}();\n\nexport { VertexArray as default };","import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.is-array\";\n\nfunction formatArrayValue(v, opts) {\n  var _opts$maxElts = opts.maxElts,\n      maxElts = _opts$maxElts === void 0 ? 16 : _opts$maxElts,\n      _opts$size = opts.size,\n      size = _opts$size === void 0 ? 1 : _opts$size;\n  var string = '[';\n\n  for (var i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  var terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatValue(v) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EPSILON = 1e-16;\n  var _opts$isInteger = opts.isInteger,\n      isInteger = _opts$isInteger === void 0 ? false : _opts$isInteger;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  var string = v.toPrecision(2);\n  var decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}","import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Buffer from '../classes/buffer';\nimport { getKey } from '../webgl-utils';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils';\nexport function getDebugTableForVertexArray() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      vertexArray = _ref.vertexArray,\n      _ref$header = _ref.header,\n      header = _ref$header === void 0 ? 'Attributes' : _ref$header;\n\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  var table = {};\n\n  if (vertexArray.elements) {\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  }\n\n  var attributes = vertexArray.values;\n\n  for (var attributeLocation in attributes) {\n    var info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      var rowHeader = \"\".concat(attributeLocation, \": \").concat(info.name);\n      var accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = \"\".concat(attributeLocation, \": \").concat(getGLSLDeclaration(info.name, accessor));\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  var _ref4;\n\n  var gl = vertexArray.gl;\n\n  if (!attribute) {\n    var _ref2;\n\n    return _ref2 = {}, _defineProperty(_ref2, header, 'null'), _defineProperty(_ref2, 'Format ', 'N/A'), _ref2;\n  }\n\n  var type = 'NOT PROVIDED';\n  var size = 'N/A';\n  var verts = 'N/A';\n  var bytes = 'N/A';\n  var isInteger;\n  var marker;\n  var value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size;\n    type = String(type).replace('Array', '');\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    var _ref3;\n\n    var buffer = attribute;\n\n    var _buffer$getDebugData = buffer.getDebugData(),\n        data = _buffer$getDebugData.data,\n        modified = _buffer$getDebugData.modified;\n\n    marker = modified ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    var format;\n\n    if (accessor) {\n      var instanced = accessor.divisor > 0;\n      format = \"\".concat(instanced ? 'I ' : 'P ', \" \").concat(verts, \" (x\").concat(size, \"=\").concat(bytes, \" bytes \").concat(getKey(gl, type), \")\");\n    } else {\n      isInteger = true;\n      format = \"\".concat(bytes, \" bytes\");\n    }\n\n    return _ref3 = {}, _defineProperty(_ref3, header, \"\".concat(marker).concat(formatValue(value, {\n      size: size,\n      isInteger: isInteger\n    }))), _defineProperty(_ref3, 'Format ', format), _ref3;\n  }\n\n  value = attribute;\n  size = attribute.length;\n  type = String(attribute.constructor.name).replace('Array', '');\n  isInteger = type.indexOf('nt') !== -1;\n  return _ref4 = {}, _defineProperty(_ref4, header, \"\".concat(formatValue(value, {\n    size: size,\n    isInteger: isInteger\n  }), \" (constant)\")), _defineProperty(_ref4, 'Format ', \"\".concat(size, \"x\").concat(type, \" (constant)\")), _ref4;\n}\n\nfunction getGLSLDeclaration(name, accessor) {\n  var type = accessor.type,\n      size = accessor.size;\n  var typeAndName = getCompositeGLType(type, size);\n  return typeAndName ? \"\".concat(name, \" (\").concat(typeAndName.name, \")\") : name;\n}","import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.sort\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { formatValue, assert } from '../utils';\nexport function getDebugTableForUniforms() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$header = _ref.header,\n      header = _ref$header === void 0 ? 'Uniforms' : _ref$header,\n      program = _ref.program,\n      uniforms = _ref.uniforms,\n      _ref$undefinedOnly = _ref.undefinedOnly,\n      undefinedOnly = _ref$undefinedOnly === void 0 ? false : _ref$undefinedOnly;\n\n  assert(program);\n  var SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  var PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix';\n  var uniformLocations = program._uniformSetters;\n  var table = {};\n  var uniformNames = Object.keys(uniformLocations).sort();\n  var count = 0;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = uniformNames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _uniformName = _step.value;\n\n      if (!_uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !_uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = uniformNames[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _uniformName2 = _step2.value;\n\n      if (_uniformName2.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName2,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = uniformNames[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _uniformName3 = _step3.value;\n\n      if (!table[_uniformName3]) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName3,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n        _iterator3[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  var unusedCount = 0;\n  var unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (var uniformName in uniforms) {\n      var uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = _defineProperty({\n          Type: \"NOT USED: \".concat(uniform)\n        }, header, formatValue(uniform));\n      }\n    }\n  }\n\n  return {\n    table: table,\n    count: count,\n    unusedTable: unusedTable,\n    unusedCount: unusedCount\n  };\n}\n\nfunction addUniformToTable(_ref2) {\n  var table = _ref2.table,\n      header = _ref2.header,\n      uniforms = _ref2.uniforms,\n      uniformName = _ref2.uniformName,\n      undefinedOnly = _ref2.undefinedOnly;\n  var value = uniforms[uniformName];\n  var isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    var _table$uniformName;\n\n    table[uniformName] = (_table$uniformName = {}, _defineProperty(_table$uniformName, header, isDefined ? formatValue(value) : 'N/A'), _defineProperty(_table$uniformName, 'Uniform Type', isDefined ? value : 'NOT PROVIDED'), _table$uniformName);\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  var table = {};\n  var header = \"Accessors for \".concat(config.id);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = config.attributeInfos[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var attributeInfo = _step.value;\n\n      if (attributeInfo) {\n        var glslDeclaration = getGLSLDeclaration(attributeInfo);\n        table[\"in \".concat(glslDeclaration)] = _defineProperty({}, header, JSON.stringify(attributeInfo.accessor));\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = config.varyingInfos[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var varyingInfo = _step2.value;\n\n      if (varyingInfo) {\n        var _glslDeclaration = getGLSLDeclaration(varyingInfo);\n\n        table[\"out \".concat(_glslDeclaration)] = _defineProperty({}, header, JSON.stringify(varyingInfo.accessor));\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  var _attributeInfo$access = attributeInfo.accessor,\n      type = _attributeInfo$access.type,\n      size = _attributeInfo$access.size;\n  var typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return \"\".concat(typeAndName.name, \" \").concat(attributeInfo.name);\n  }\n\n  return attributeInfo.name;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport { Buffer, assert } from '@luma.gl/webgl';\nvar GLTF_TO_LUMA_ATTRIBUTE_MAP = {\n  POSITION: 'positions',\n  NORMAL: 'normals',\n  COLOR_0: 'colors',\n  TEXCOORD_0: 'texCoords',\n  TEXCOORD_1: 'texCoords1',\n  TEXCOORD_2: 'texCoords2'\n};\nexport function getBuffersFromGeometry(gl, geometry, options) {\n  var buffers = {};\n  var indices = geometry.indices;\n\n  for (var name in geometry.attributes) {\n    var attribute = geometry.attributes[name];\n    var remappedName = mapAttributeName(name, options);\n\n    if (name === 'indices') {\n      indices = attribute;\n    } else if (attribute.constant) {\n      buffers[remappedName] = attribute.value;\n    } else {\n      var typedArray = attribute.value;\n\n      var accessor = _objectSpread({}, attribute);\n\n      delete accessor.value;\n      buffers[remappedName] = [new Buffer(gl, typedArray), accessor];\n      inferAttributeAccessor(name, accessor);\n    }\n  }\n\n  if (indices) {\n    var data = indices.value || indices;\n    assert(data instanceof Uint16Array || data instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n    var _accessor = {\n      size: 1,\n      isIndexed: indices.isIndexed === undefined ? true : indices.isIndexed\n    };\n    buffers.indices = [new Buffer(gl, {\n      data: data,\n      target: 34963\n    }), _accessor];\n  }\n\n  return buffers;\n}\n\nfunction mapAttributeName(name, options) {\n  var _ref = options || {},\n      _ref$attributeMap = _ref.attributeMap,\n      attributeMap = _ref$attributeMap === void 0 ? GLTF_TO_LUMA_ATTRIBUTE_MAP : _ref$attributeMap;\n\n  return attributeMap && attributeMap[name] || name;\n}\n\nexport function inferAttributeAccessor(attributeName, attribute) {\n  var category;\n\n  switch (attributeName) {\n    case 'texCoords':\n    case 'texCoord1':\n    case 'texCoord2':\n    case 'texCoord3':\n      category = 'uvs';\n      break;\n\n    case 'vertices':\n    case 'positions':\n    case 'normals':\n    case 'pickingColors':\n      category = 'vectors';\n      break;\n\n    default:\n  }\n\n  switch (category) {\n    case 'vectors':\n      attribute.size = attribute.size || 3;\n      break;\n\n    case 'uvs':\n      attribute.size = attribute.size || 2;\n      break;\n\n    default:\n  }\n\n  assert(Number.isFinite(attribute.size), \"attribute \".concat(attributeName, \" needs size\"));\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.date.now\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.object.assign\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL } from '@luma.gl/gltools';\nimport ProgramManager from './program-manager';\nimport { Program, VertexArray, clear as _clear, TransformFeedback, Buffer, log, isObjectEmpty, uid, assert } from '@luma.gl/webgl';\nimport { getDebugTableForUniforms, getDebugTableForVertexArray, getDebugTableForProgramConfiguration } from '@luma.gl/webgl';\nimport { getBuffersFromGeometry } from './model-utils';\nvar LOG_DRAW_PRIORITY = 2;\nvar LOG_DRAW_TIMEOUT = 10000;\nvar ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nvar NOOP = function NOOP() {};\n\nvar DRAW_PARAMS = {};\n\nvar Model = function () {\n  function Model(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Model);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('model') : _props$id;\n    assert(isWebGL(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || uid('Model');\n    this.lastLogTime = 0;\n    this.initialize(props);\n  }\n\n  _createClass(Model, [{\n    key: \"initialize\",\n    value: function initialize(props) {\n      this.props = {};\n      this.programManager = props.programManager || ProgramManager.getDefaultProgramManager(this.gl);\n      this._programManagerState = -1;\n      this._managedProgram = false;\n      var _props$program = props.program,\n          program = _props$program === void 0 ? null : _props$program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this.program = null;\n      this.vertexArray = null;\n      this._programDirty = true;\n      this.userData = {};\n      this.needsRedraw = true;\n      this._attributes = {};\n      this.attributes = {};\n      this.uniforms = {};\n      this.pickable = true;\n\n      this._checkProgram();\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n      this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n      this.vertexCount = props.vertexCount || 0;\n      this.geometryBuffers = {};\n      this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n      this._setModelProps(props);\n\n      this.geometry = {};\n      assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this._setModelProps(props);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      for (var key in this._attributes) {\n        if (this._attributes[key] !== this.attributes[key]) {\n          this._attributes[key][\"delete\"]();\n        }\n      }\n\n      if (this._managedProgram) {\n        this.programManager.release(this.program);\n      }\n\n      this.vertexArray[\"delete\"]();\n\n      this._deleteGeometryBuffers();\n    }\n  }, {\n    key: \"getDrawMode\",\n    value: function getDrawMode() {\n      return this.drawMode;\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      return this.vertexCount;\n    }\n  }, {\n    key: \"getInstanceCount\",\n    value: function getInstanceCount() {\n      return this.instanceCount;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getProgram\",\n    value: function getProgram() {\n      return this.program;\n    }\n  }, {\n    key: \"setProgram\",\n    value: function setProgram(props) {\n      var program = props.program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this._programDirty = true;\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms() {\n      return this.uniforms;\n    }\n  }, {\n    key: \"setDrawMode\",\n    value: function setDrawMode(drawMode) {\n      this.drawMode = drawMode;\n      return this;\n    }\n  }, {\n    key: \"setVertexCount\",\n    value: function setVertexCount(vertexCount) {\n      assert(Number.isFinite(vertexCount));\n      this.vertexCount = vertexCount;\n      return this;\n    }\n  }, {\n    key: \"setInstanceCount\",\n    value: function setInstanceCount(instanceCount) {\n      assert(Number.isFinite(instanceCount));\n      this.instanceCount = instanceCount;\n      return this;\n    }\n  }, {\n    key: \"setGeometry\",\n    value: function setGeometry(geometry) {\n      this.drawMode = geometry.drawMode;\n      this.vertexCount = geometry.getVertexCount();\n\n      this._deleteGeometryBuffers();\n\n      this.geometryBuffers = getBuffersFromGeometry(this.gl, geometry);\n      this.vertexArray.setAttributes(this.geometryBuffers);\n      return this;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (isObjectEmpty(attributes)) {\n        return this;\n      }\n\n      var normalizedAttributes = {};\n\n      for (var name in attributes) {\n        var attribute = attributes[name];\n        normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n      }\n\n      this.vertexArray.setAttributes(normalizedAttributes);\n      return this;\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.assign(this.uniforms, uniforms);\n      return this;\n    }\n  }, {\n    key: \"getModuleUniforms\",\n    value: function getModuleUniforms(opts) {\n      this._checkProgram();\n\n      var getUniforms = this.programManager.getUniforms(this.program);\n\n      if (getUniforms) {\n        return getUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"updateModuleSettings\",\n    value: function updateModuleSettings(opts) {\n      var uniforms = this.getModuleUniforms(opts || {});\n      return this.setUniforms(uniforms);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(opts) {\n      _clear(this.program.gl, opts);\n\n      return this;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._checkProgram();\n\n      var _opts$moduleSettings = opts.moduleSettings,\n          moduleSettings = _opts$moduleSettings === void 0 ? null : _opts$moduleSettings,\n          framebuffer = opts.framebuffer,\n          _opts$uniforms = opts.uniforms,\n          uniforms = _opts$uniforms === void 0 ? {} : _opts$uniforms,\n          _opts$attributes = opts.attributes,\n          attributes = _opts$attributes === void 0 ? {} : _opts$attributes,\n          _opts$transformFeedba = opts.transformFeedback,\n          transformFeedback = _opts$transformFeedba === void 0 ? this.transformFeedback : _opts$transformFeedba,\n          _opts$parameters = opts.parameters,\n          parameters = _opts$parameters === void 0 ? {} : _opts$parameters,\n          _opts$vertexArray = opts.vertexArray,\n          vertexArray = _opts$vertexArray === void 0 ? this.vertexArray : _opts$vertexArray;\n      this.setAttributes(attributes);\n      this.updateModuleSettings(moduleSettings);\n      this.setUniforms(uniforms);\n      var logPriority;\n\n      if (log.priority >= LOG_DRAW_PRIORITY) {\n        logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n      }\n\n      var drawParams = this.vertexArray.getDrawParams();\n      var _this$props = this.props,\n          _this$props$isIndexed = _this$props.isIndexed,\n          isIndexed = _this$props$isIndexed === void 0 ? drawParams.isIndexed : _this$props$isIndexed,\n          _this$props$indexType = _this$props.indexType,\n          indexType = _this$props$indexType === void 0 ? drawParams.indexType : _this$props$indexType,\n          _this$props$indexOffs = _this$props.indexOffset,\n          indexOffset = _this$props$indexOffs === void 0 ? drawParams.indexOffset : _this$props$indexOffs,\n          _this$props$vertexArr = _this$props.vertexArrayInstanced,\n          vertexArrayInstanced = _this$props$vertexArr === void 0 ? drawParams.isInstanced : _this$props$vertexArr;\n\n      if (vertexArrayInstanced && !this.isInstanced) {\n        log.warn('Found instanced attributes on non-instanced model', this.id)();\n      }\n\n      var isInstanced = this.isInstanced,\n          instanceCount = this.instanceCount;\n      var _this$props2 = this.props,\n          _this$props2$onBefore = _this$props2.onBeforeRender,\n          onBeforeRender = _this$props2$onBefore === void 0 ? NOOP : _this$props2$onBefore,\n          _this$props2$onAfterR = _this$props2.onAfterRender,\n          onAfterRender = _this$props2$onAfterR === void 0 ? NOOP : _this$props2$onAfterR;\n      onBeforeRender();\n      this.program.setUniforms(this.uniforms);\n      var didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n        logPriority: logPriority,\n        uniforms: null,\n        framebuffer: framebuffer,\n        parameters: parameters,\n        drawMode: this.getDrawMode(),\n        vertexCount: this.getVertexCount(),\n        vertexArray: vertexArray,\n        transformFeedback: transformFeedback,\n        isIndexed: isIndexed,\n        indexType: indexType,\n        isInstanced: isInstanced,\n        instanceCount: instanceCount,\n        offset: isIndexed ? indexOffset : 0\n      }));\n      onAfterRender();\n\n      if (log.priority >= LOG_DRAW_PRIORITY) {\n        this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n      }\n\n      return didDraw;\n    }\n  }, {\n    key: \"transform\",\n    value: function transform() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$discard = opts.discard,\n          discard = _opts$discard === void 0 ? true : _opts$discard,\n          feedbackBuffers = opts.feedbackBuffers,\n          _opts$unbindModels = opts.unbindModels,\n          unbindModels = _opts$unbindModels === void 0 ? [] : _opts$unbindModels;\n      var parameters = opts.parameters;\n\n      if (feedbackBuffers) {\n        this._setFeedbackBuffers(feedbackBuffers);\n      }\n\n      if (discard) {\n        parameters = Object.assign({}, parameters, _defineProperty({}, 35977, discard));\n      }\n\n      unbindModels.forEach(function (model) {\n        return model.vertexArray.unbindBuffers();\n      });\n\n      try {\n        this.draw(Object.assign({}, opts, {\n          parameters: parameters\n        }));\n      } finally {\n        unbindModels.forEach(function (model) {\n          return model.vertexArray.bindBuffers();\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n      return this.setUniforms(uniforms).draw();\n    }\n  }, {\n    key: \"_setModelProps\",\n    value: function _setModelProps(props) {\n      Object.assign(this.props, props);\n\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms);\n      }\n\n      if ('pickable' in props) {\n        this.pickable = props.pickable;\n      }\n\n      if ('instanceCount' in props) {\n        this.instanceCount = props.instanceCount;\n      }\n\n      if ('geometry' in props) {\n        this.setGeometry(props.geometry);\n      }\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('_feedbackBuffers' in props) {\n        this._setFeedbackBuffers(props._feedbackBuffers);\n      }\n    }\n  }, {\n    key: \"_checkProgram\",\n    value: function _checkProgram() {\n      var shaderCache = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n      if (!needsUpdate) {\n        return;\n      }\n\n      var program = this.programProps.program;\n\n      if (program) {\n        this._managedProgram = false;\n      } else {\n        var _this$programProps = this.programProps,\n            vs = _this$programProps.vs,\n            fs = _this$programProps.fs,\n            modules = _this$programProps.modules,\n            inject = _this$programProps.inject,\n            defines = _this$programProps.defines,\n            varyings = _this$programProps.varyings,\n            bufferMode = _this$programProps.bufferMode,\n            transpileToGLSL100 = _this$programProps.transpileToGLSL100;\n        program = this.programManager.get({\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          varyings: varyings,\n          bufferMode: bufferMode,\n          transpileToGLSL100: transpileToGLSL100\n        });\n\n        if (this.program && this._managedProgram) {\n          this.programManager.release(this.program);\n        }\n\n        this._programManagerState = this.programManager.stateHash;\n        this._managedProgram = true;\n      }\n\n      assert(program instanceof Program, 'Model needs a program');\n      this._programDirty = false;\n\n      if (program === this.program) {\n        return;\n      }\n\n      this.program = program;\n\n      if (this.vertexArray) {\n        this.vertexArray.setProps({\n          program: this.program,\n          attributes: this.vertexArray.attributes\n        });\n      } else {\n        this.vertexArray = new VertexArray(this.gl, {\n          program: this.program\n        });\n      }\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n    }\n  }, {\n    key: \"_deleteGeometryBuffers\",\n    value: function _deleteGeometryBuffers() {\n      for (var name in this.geometryBuffers) {\n        var buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n        if (buffer instanceof Buffer) {\n          buffer[\"delete\"]();\n        }\n      }\n    }\n  }, {\n    key: \"_setAnimationProps\",\n    value: function _setAnimationProps(animationProps) {\n      if (this.animated) {\n        assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n\n        var animatedUniforms = this._evaluateAnimateUniforms(animationProps);\n\n        Object.assign(this.uniforms, animatedUniforms);\n      }\n    }\n  }, {\n    key: \"_setFeedbackBuffers\",\n    value: function _setFeedbackBuffers() {\n      var feedbackBuffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (isObjectEmpty(feedbackBuffers)) {\n        return this;\n      }\n\n      var gl = this.program.gl;\n      this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n        program: this.program\n      });\n      this.transformFeedback.setBuffers(feedbackBuffers);\n      return this;\n    }\n  }, {\n    key: \"_logDrawCallStart\",\n    value: function _logDrawCallStart(logLevel) {\n      var logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n      if (Date.now() - this.lastLogTime < logDrawTimeout) {\n        return undefined;\n      }\n\n      this.lastLogTime = Date.now();\n      log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n        collapsed: log.level <= 2\n      })();\n      return logLevel;\n    }\n  }, {\n    key: \"_logDrawCallEnd\",\n    value: function _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n      if (logLevel === undefined) {\n        return;\n      }\n\n      var attributeTable = getDebugTableForVertexArray({\n        vertexArray: vertexArray,\n        header: \"\".concat(this.id, \" attributes\"),\n        attributes: this._attributes\n      });\n\n      var _getDebugTableForUnif = getDebugTableForUniforms({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms)\n      }),\n          uniformTable = _getDebugTableForUnif.table,\n          unusedTable = _getDebugTableForUnif.unusedTable,\n          unusedCount = _getDebugTableForUnif.unusedCount;\n\n      var _getDebugTableForUnif2 = getDebugTableForUniforms({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms),\n        undefinedOnly: true\n      }),\n          missingTable = _getDebugTableForUnif2.table,\n          missingCount = _getDebugTableForUnif2.count;\n\n      if (missingCount > 0) {\n        log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n      }\n\n      if (unusedCount > 0) {\n        log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n      }\n\n      var configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n      log.table(logLevel, attributeTable)();\n      log.table(logLevel, uniformTable)();\n      log.table(logLevel + 1, configTable)();\n\n      if (framebuffer) {\n        framebuffer.log({\n          logLevel: LOG_DRAW_PRIORITY,\n          message: \"Rendered to \".concat(framebuffer.id)\n        });\n      }\n\n      log.groupEnd(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id))();\n    }\n  }]);\n\n  return Model;\n}();\n\nexport { Model as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getPassthroughFS } from '@luma.gl/shadertools';\nimport BufferTransform from './buffer-transform';\nimport TextureTransform from './texture-transform';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert, isObjectEmpty, getShaderVersion } from '@luma.gl/webgl';\nimport Model from '../lib/model';\n\nvar Transform = function () {\n  _createClass(Transform, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function Transform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Transform);\n\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  _createClass(Transform, [{\n    key: \"delete\",\n    value: function _delete() {\n      var model = this.model,\n          bufferTransform = this.bufferTransform,\n          textureTransform = this.textureTransform;\n\n      if (model) {\n        model[\"delete\"]();\n      }\n\n      if (bufferTransform) {\n        bufferTransform[\"delete\"]();\n      }\n\n      if (textureTransform) {\n        textureTransform[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$clearRenderTarg = opts.clearRenderTarget,\n          clearRenderTarget = _opts$clearRenderTarg === void 0 ? true : _opts$clearRenderTarg;\n\n      var updatedOpts = this._updateDrawOptions(opts);\n\n      if (clearRenderTarget && updatedOpts.framebuffer) {\n        updatedOpts.framebuffer.clear({\n          color: true\n        });\n      }\n\n      this.model.transform(updatedOpts);\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      var swapped = false;\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = resourceTransforms[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var resourceTransform = _step.value;\n          swapped = swapped || resourceTransform.swap();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      assert(swapped, 'Nothing to swap');\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      var varyingName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = resourceTransforms[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var resourceTransform = _step2.value;\n          var data = resourceTransform.getData(opts);\n\n          if (data) {\n            return data;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      return this.textureTransform && this.textureTransform.getFramebuffer();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if ('elementCount' in opts) {\n        this.model.setVertexCount(opts.elementCount);\n      }\n\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = resourceTransforms[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var resourceTransform = _step3.value;\n          resourceTransform.update(opts);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var gl = this.gl;\n\n      this._buildResourceTransforms(gl, props);\n\n      props = this._updateModelProps(props);\n      this.model = new Model(gl, Object.assign({}, props, {\n        fs: props.fs || getPassthroughFS({\n          version: getShaderVersion(props.vs)\n        }),\n        id: props.id || 'transform-model',\n        drawMode: props.drawMode || 0,\n        vertexCount: props.elementCount\n      }));\n      this.bufferTransform && this.bufferTransform.setupResources({\n        model: this.model\n      });\n    }\n  }, {\n    key: \"_updateModelProps\",\n    value: function _updateModelProps(props) {\n      var updatedProps = Object.assign({}, props);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = resourceTransforms[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var resourceTransform = _step4.value;\n          updatedProps = resourceTransform.updateModelProps(updatedProps);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return updatedProps;\n    }\n  }, {\n    key: \"_buildResourceTransforms\",\n    value: function _buildResourceTransforms(gl, props) {\n      if (canCreateBufferTransform(props)) {\n        this.bufferTransform = new BufferTransform(gl, props);\n      }\n\n      if (canCreateTextureTransform(props)) {\n        this.textureTransform = new TextureTransform(gl, props);\n      }\n\n      assert(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n    }\n  }, {\n    key: \"_updateDrawOptions\",\n    value: function _updateDrawOptions(opts) {\n      var updatedOpts = Object.assign({}, opts);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = resourceTransforms[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var resourceTransform = _step5.value;\n          updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n            _iterator5[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      return updatedOpts;\n    }\n  }]);\n\n  return Transform;\n}();\n\nexport { Transform as default };\n\nfunction canCreateBufferTransform(props) {\n  if (!isObjectEmpty(props.feedbackBuffers) || !isObjectEmpty(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!isObjectEmpty(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}","import \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction noop() {}\n\nvar DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\n\nvar Transition = function () {\n  function Transition(timeline) {\n    _classCallCheck(this, Transition);\n\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n    this.settings = {};\n  }\n\n  _createClass(Transition, [{\n    key: \"start\",\n    value: function start(props) {\n      this.cancel();\n      this.settings = Object.assign({}, DEFAULT_SETTINGS, props);\n      this._inProgress = true;\n      this.settings.onStart(this);\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (this._inProgress) {\n        this.timeline.removeChannel(this._handle);\n        this._handle = null;\n        this._inProgress = false;\n        this.settings.onEnd(this);\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      if (this._inProgress) {\n        this.settings.onInterrupt(this);\n        this.timeline.removeChannel(this._handle);\n        this._handle = null;\n        this._inProgress = false;\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (!this._inProgress) {\n        return false;\n      }\n\n      if (this._handle === null) {\n        var timeline = this.timeline,\n            settings = this.settings;\n        this._handle = timeline.addChannel({\n          delay: timeline.getTime(),\n          duration: settings.duration\n        });\n      }\n\n      this.time = this.timeline.getTime(this._handle);\n\n      this._onUpdate();\n\n      this.settings.onUpdate(this);\n\n      if (this.timeline.isFinished(this._handle)) {\n        this.end();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_onUpdate\",\n    value: function _onUpdate() {}\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this._inProgress;\n    }\n  }]);\n\n  return Transition;\n}();\n\nexport { Transition as default };","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { Buffer, Transform } from '@luma.gl/core';\nimport Attribute from '../lib/attribute/attribute';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Transition from './transition';\n\nvar GPUInterpolationTransition = function () {\n  function GPUInterpolationTransition(_ref) {\n    var gl = _ref.gl,\n        attribute = _ref.attribute,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, GPUInterpolationTransition);\n\n    this.gl = gl;\n    this.type = 'interpolation';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    var bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  _createClass(GPUInterpolationTransition, [{\n    key: \"start\",\n    value: function start(transitionSettings, numInstances) {\n      if (transitionSettings.duration <= 0) {\n        this.transition.cancel();\n        return;\n      }\n\n      var gl = this.gl,\n          buffers = this.buffers,\n          attribute = this.attribute;\n      cycleBuffers(buffers);\n      var padBufferOpts = {\n        numInstances: numInstances,\n        attribute: attribute,\n        fromLength: this.currentLength,\n        fromStartIndices: this.currentStartIndices,\n        getData: transitionSettings.enter\n      };\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = buffers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var buffer = _step.value;\n          padBuffer(_objectSpread({\n            buffer: buffer\n          }, padBufferOpts));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.currentStartIndices = attribute.startIndices;\n      this.currentLength = getAttributeBufferLength(attribute, numInstances);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: attribute.value\n      });\n      this.transition.start(transitionSettings);\n      this.transform.update({\n        elementCount: Math.floor(this.currentLength / attribute.size),\n        sourceBuffers: {\n          aFrom: buffers[0],\n          aTo: getSourceBufferAttribute(gl, attribute)\n        },\n        feedbackBuffers: {\n          vCurrent: buffers[1]\n        }\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var updated = this.transition.update();\n\n      if (updated) {\n        var _this$transition = this.transition,\n            time = _this$transition.time,\n            _this$transition$sett = _this$transition.settings,\n            duration = _this$transition$sett.duration,\n            easing = _this$transition$sett.easing;\n        var t = easing(time / duration);\n        this.transform.run({\n          uniforms: {\n            time: t\n          }\n        });\n      }\n\n      return updated;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.transition.cancel();\n      this.transform[\"delete\"]();\n\n      while (this.buffers.length) {\n        this.buffers.pop()[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this.transition.inProgress;\n    }\n  }]);\n\n  return GPUInterpolationTransition;\n}();\n\nexport { GPUInterpolationTransition as default };\nvar vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  var attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    vs: vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { Buffer, Transform, Framebuffer, Texture2D, readPixelsToArray } from '@luma.gl/core';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Attribute from '../lib/attribute/attribute';\nimport Transition from './transition';\n\nvar GPUSpringTransition = function () {\n  function GPUSpringTransition(_ref) {\n    var gl = _ref.gl,\n        attribute = _ref.attribute,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, GPUSpringTransition);\n\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, Object.assign({}, attribute.settings, {\n      normalized: false\n    }));\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    var bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  _createClass(GPUSpringTransition, [{\n    key: \"start\",\n    value: function start(transitionSettings, numInstances) {\n      var gl = this.gl,\n          buffers = this.buffers,\n          attribute = this.attribute;\n      var padBufferOpts = {\n        numInstances: numInstances,\n        attribute: attribute,\n        fromLength: this.currentLength,\n        fromStartIndices: this.currentStartIndices,\n        getData: transitionSettings.enter\n      };\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = buffers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var buffer = _step.value;\n          padBuffer(_objectSpread({\n            buffer: buffer\n          }, padBufferOpts));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.currentStartIndices = attribute.startIndices;\n      this.currentLength = getAttributeBufferLength(attribute, numInstances);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: attribute.value\n      });\n      this.transition.start(transitionSettings);\n      this.transform.update({\n        elementCount: Math.floor(this.currentLength / attribute.size),\n        sourceBuffers: {\n          aTo: getSourceBufferAttribute(gl, attribute)\n        }\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var buffers = this.buffers,\n          transform = this.transform,\n          framebuffer = this.framebuffer,\n          transition = this.transition;\n      var updated = transition.update();\n\n      if (!updated) {\n        return false;\n      }\n\n      transform.update({\n        sourceBuffers: {\n          aPrev: buffers[0],\n          aCur: buffers[1]\n        },\n        feedbackBuffers: {\n          vNext: buffers[2]\n        }\n      });\n      transform.run({\n        framebuffer: framebuffer,\n        discard: false,\n        clearRenderTarget: true,\n        uniforms: {\n          stiffness: transition.settings.stiffness,\n          damping: transition.settings.damping\n        },\n        parameters: {\n          depthTest: false,\n          blend: true,\n          viewport: [0, 0, 1, 1],\n          blendFunc: [1, 1],\n          blendEquation: [32776, 32776]\n        }\n      });\n      cycleBuffers(buffers);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: this.attribute.value\n      });\n      var isTransitioning = readPixelsToArray(framebuffer)[0] > 0;\n\n      if (!isTransitioning) {\n        transition.end();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.transition.cancel();\n      this.transform[\"delete\"]();\n\n      while (this.buffers.length) {\n        this.buffers.pop()[\"delete\"]();\n      }\n\n      this.texture[\"delete\"]();\n      this.texture = null;\n      this.framebuffer[\"delete\"]();\n      this.framebuffer = null;\n    }\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this.transition.inProgress;\n    }\n  }]);\n\n  return GPUSpringTransition;\n}();\n\nexport { GPUSpringTransition as default };\n\nfunction getTransform(gl, attribute, framebuffer) {\n  var attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    framebuffer: framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: _defineProperty({}, 36064, texture)\n  });\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Transform } from '@luma.gl/core';\nimport GPUInterpolationTransition from '../../transitions/gpu-interpolation-transition';\nimport GPUSpringTransition from '../../transitions/gpu-spring-transition';\nimport log from '../../utils/log';\nvar TRANSITION_TYPES = {\n  interpolation: GPUInterpolationTransition,\n  spring: GPUSpringTransition\n};\n\nvar AttributeTransitionManager = function () {\n  function AttributeTransitionManager(gl, _ref) {\n    var id = _ref.id,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, AttributeTransitionManager);\n\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n\n    if (Transform.isSupported(gl)) {\n      this.isSupported = true;\n    } else if (gl) {\n      log.warn('WebGL2 not supported by this browser. Transition animation is disabled.')();\n    }\n  }\n\n  _createClass(AttributeTransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var attributeName in this.transitions) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref2) {\n      var attributes = _ref2.attributes,\n          _ref2$transitions = _ref2.transitions,\n          transitions = _ref2$transitions === void 0 ? {} : _ref2$transitions,\n          numInstances = _ref2.numInstances;\n      this.numInstances = numInstances || 1;\n\n      if (!this.isSupported) {\n        return;\n      }\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        var settings = attribute.getTransitionSetting(transitions);\n        if (!settings) continue;\n\n        this._updateAttribute(attributeName, attribute, settings);\n      }\n\n      for (var _attributeName in this.transitions) {\n        var _attribute = attributes[_attributeName];\n\n        if (!_attribute || !_attribute.getTransitionSetting(transitions)) {\n          this._removeTransition(_attributeName);\n        }\n      }\n    }\n  }, {\n    key: \"hasAttribute\",\n    value: function hasAttribute(attributeName) {\n      var transition = this.transitions[attributeName];\n      return transition && transition.inProgress;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      var animatedAttributes = {};\n\n      for (var attributeName in this.transitions) {\n        var transition = this.transitions[attributeName];\n\n        if (transition.inProgress) {\n          animatedAttributes[attributeName] = transition.attributeInTransition;\n        }\n      }\n\n      return animatedAttributes;\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      if (!this.isSupported || this.numInstances === 0) {\n        return false;\n      }\n\n      for (var attributeName in this.transitions) {\n        var updated = this.transitions[attributeName].update();\n\n        if (updated) {\n          this.needsRedraw = true;\n        }\n      }\n\n      var needsRedraw = this.needsRedraw;\n      this.needsRedraw = false;\n      return needsRedraw;\n    }\n  }, {\n    key: \"_removeTransition\",\n    value: function _removeTransition(attributeName) {\n      this.transitions[attributeName].cancel();\n      delete this.transitions[attributeName];\n    }\n  }, {\n    key: \"_updateAttribute\",\n    value: function _updateAttribute(attributeName, attribute, settings) {\n      var transition = this.transitions[attributeName];\n      var isNew = !transition || transition.type !== settings.type;\n\n      if (isNew) {\n        if (transition) {\n          this._removeTransition(attributeName);\n        }\n\n        var TransitionType = TRANSITION_TYPES[settings.type];\n\n        if (TransitionType) {\n          this.transitions[attributeName] = new TransitionType({\n            attribute: attribute,\n            timeline: this.timeline,\n            gl: this.gl\n          });\n        } else {\n          log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n          isNew = false;\n        }\n      }\n\n      if (isNew || attribute.needsRedraw()) {\n        this.needsRedraw = true;\n        this.transitions[attributeName].start(settings, this.numInstances);\n      }\n    }\n  }]);\n\n  return AttributeTransitionManager;\n}();\n\nexport { AttributeTransitionManager as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Attribute from './attribute';\nimport log from '../../utils/log';\nimport debug from '../../debug';\nimport AttributeTransitionManager from './attribute-transition-manager';\nvar TRACE_INVALIDATE = 'attributeManager.invalidate';\nvar TRACE_UPDATE_START = 'attributeManager.updateStart';\nvar TRACE_UPDATE_END = 'attributeManager.updateEnd';\nvar TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nvar TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nvar TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\n\nvar AttributeManager = function () {\n  function AttributeManager(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$id = _ref.id,\n        id = _ref$id === void 0 ? 'attribute-manager' : _ref$id,\n        stats = _ref.stats,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, AttributeManager);\n\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.accessors = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new AttributeTransitionManager(gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline: timeline\n    });\n    Object.seal(this);\n  }\n\n  _createClass(AttributeManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var attributeName in this.attributes) {\n        this.attributes[attributeName][\"delete\"]();\n      }\n\n      this.attributeTransitionManager.finalize();\n    }\n  }, {\n    key: \"getNeedsRedraw\",\n    value: function getNeedsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this.needsRedraw;\n      this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n      return redraw && this.id;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var redraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.needsRedraw = true;\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add(attributes, updaters) {\n      this._add(attributes, updaters);\n    }\n  }, {\n    key: \"addInstanced\",\n    value: function addInstanced(attributes, updaters) {\n      this._add(attributes, updaters, {\n        instanced: 1\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(attributeNameArray) {\n      for (var i = 0; i < attributeNameArray.length; i++) {\n        var name = attributeNameArray[i];\n\n        if (this.attributes[name] !== undefined) {\n          this.attributes[name][\"delete\"]();\n          delete this.attributes[name];\n        }\n      }\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(triggerName, dataRange) {\n      var invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n      debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n    }\n  }, {\n    key: \"invalidateAll\",\n    value: function invalidateAll(dataRange) {\n      for (var attributeName in this.attributes) {\n        this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n      }\n\n      debug(TRACE_INVALIDATE, this, 'all');\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          data = _ref2.data,\n          numInstances = _ref2.numInstances,\n          _ref2$startIndices = _ref2.startIndices,\n          startIndices = _ref2$startIndices === void 0 ? null : _ref2$startIndices,\n          transitions = _ref2.transitions,\n          _ref2$props = _ref2.props,\n          props = _ref2$props === void 0 ? {} : _ref2$props,\n          _ref2$buffers = _ref2.buffers,\n          buffers = _ref2$buffers === void 0 ? {} : _ref2$buffers,\n          _ref2$context = _ref2.context,\n          context = _ref2$context === void 0 ? {} : _ref2$context;\n\n      var updated = false;\n      debug(TRACE_UPDATE_START, this);\n\n      if (this.stats) {\n        this.stats.get('Update Attributes').timeStart();\n      }\n\n      for (var attributeName in this.attributes) {\n        var attribute = this.attributes[attributeName];\n        var accessorName = attribute.settings.accessor;\n        attribute.startIndices = startIndices;\n\n        if (props[attributeName]) {\n          log.removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n        }\n\n        if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(buffers[accessorName], data.startIndices)) {} else if (!buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n          updated = true;\n\n          this._updateAttribute({\n            attribute: attribute,\n            numInstances: numInstances,\n            data: data,\n            props: props,\n            context: context\n          });\n        }\n\n        this.needsRedraw |= attribute.needsRedraw();\n      }\n\n      if (updated) {\n        debug(TRACE_UPDATE_END, this, numInstances);\n      }\n\n      if (this.stats) {\n        this.stats.get('Update Attributes').timeEnd();\n      }\n\n      this.attributeTransitionManager.update({\n        attributes: this.attributes,\n        numInstances: numInstances,\n        transitions: transitions\n      });\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      var attributeTransitionManager = this.attributeTransitionManager;\n      var transitionUpdated = attributeTransitionManager.run();\n      this.needsRedraw = this.needsRedraw || transitionUpdated;\n      return transitionUpdated;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getChangedAttributes\",\n    value: function getChangedAttributes() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearChangedFlags: false\n      };\n      var attributes = this.attributes,\n          attributeTransitionManager = this.attributeTransitionManager;\n      var changedAttributes = Object.assign({}, attributeTransitionManager.getAttributes());\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n\n        if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n          changedAttributes[attributeName] = attribute;\n        }\n      }\n\n      return changedAttributes;\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes(attributes) {\n      var excludeAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!attributes) {\n        attributes = this.getAttributes();\n      }\n\n      var shaderAttributes = {};\n\n      for (var attributeName in attributes) {\n        if (!excludeAttributes[attributeName]) {\n          Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n        }\n      }\n\n      return shaderAttributes;\n    }\n  }, {\n    key: \"getAccessors\",\n    value: function getAccessors() {\n      return this.updateTriggers;\n    }\n  }, {\n    key: \"_add\",\n    value: function _add(attributes, updaters) {\n      var extraProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (updaters) {\n        log.warn('AttributeManager.add({updaters}) - updater map no longer supported')();\n      }\n\n      var newAttributes = {};\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n\n        var newAttribute = this._createAttribute(attributeName, attribute, extraProps);\n\n        newAttributes[attributeName] = newAttribute;\n      }\n\n      Object.assign(this.attributes, newAttributes);\n\n      this._mapUpdateTriggersToAttributes();\n    }\n  }, {\n    key: \"_createAttribute\",\n    value: function _createAttribute(name, attribute, extraProps) {\n      var props = {\n        id: name,\n        constant: attribute.constant || false,\n        isIndexed: attribute.isIndexed || attribute.elements,\n        size: attribute.elements && 1 || attribute.size,\n        value: attribute.value || null,\n        divisor: attribute.instanced || extraProps.instanced ? 1 : attribute.divisor\n      };\n      return new Attribute(this.gl, Object.assign({}, attribute, props));\n    }\n  }, {\n    key: \"_mapUpdateTriggersToAttributes\",\n    value: function _mapUpdateTriggersToAttributes() {\n      var _this = this;\n\n      var triggers = {};\n\n      var _loop = function _loop(attributeName) {\n        var attribute = _this.attributes[attributeName];\n        attribute.getUpdateTriggers().forEach(function (triggerName) {\n          if (!triggers[triggerName]) {\n            triggers[triggerName] = [];\n          }\n\n          triggers[triggerName].push(attributeName);\n        });\n      };\n\n      for (var attributeName in this.attributes) {\n        _loop(attributeName);\n      }\n\n      this.updateTriggers = triggers;\n    }\n  }, {\n    key: \"_invalidateTrigger\",\n    value: function _invalidateTrigger(triggerName, dataRange) {\n      var attributes = this.attributes,\n          updateTriggers = this.updateTriggers;\n      var invalidatedAttributes = updateTriggers[triggerName];\n\n      if (invalidatedAttributes) {\n        invalidatedAttributes.forEach(function (name) {\n          var attribute = attributes[name];\n\n          if (attribute) {\n            attribute.setNeedsUpdate(attribute.id, dataRange);\n          }\n        });\n      }\n\n      return invalidatedAttributes;\n    }\n  }, {\n    key: \"_updateAttribute\",\n    value: function _updateAttribute(opts) {\n      var attribute = opts.attribute,\n          numInstances = opts.numInstances;\n      debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n      if (attribute.allocate(numInstances)) {\n        debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n      }\n\n      var updated = attribute.updateBuffer(opts);\n\n      if (updated) {\n        this.needsRedraw = true;\n        debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n      }\n    }\n  }]);\n\n  return AttributeManager;\n}();\n\nexport { AttributeManager as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { lerp } from 'math.gl';\nimport Transition from './transition';\n\nvar CPUInterpolationTransition = function (_Transition) {\n  _inherits(CPUInterpolationTransition, _Transition);\n\n  function CPUInterpolationTransition() {\n    _classCallCheck(this, CPUInterpolationTransition);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CPUInterpolationTransition).apply(this, arguments));\n  }\n\n  _createClass(CPUInterpolationTransition, [{\n    key: \"_onUpdate\",\n    value: function _onUpdate() {\n      var time = this.time,\n          _this$settings = this.settings,\n          fromValue = _this$settings.fromValue,\n          toValue = _this$settings.toValue,\n          duration = _this$settings.duration,\n          easing = _this$settings.easing;\n      var t = easing(time / duration);\n      this._value = lerp(fromValue, toValue, t);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    }\n  }]);\n\n  return CPUInterpolationTransition;\n}(Transition);\n\nexport { CPUInterpolationTransition as default };","import \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Transition from './transition';\nvar EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  var velocity = cur - prev;\n  var delta = dest - cur;\n  var spring = delta * stiffness;\n  var damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    var next = [];\n\n    for (var i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    var distanceSquare = 0;\n\n    for (var i = 0; i < value1.length; i++) {\n      var d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nvar CPUSpringTransition = function (_Transition) {\n  _inherits(CPUSpringTransition, _Transition);\n\n  function CPUSpringTransition() {\n    _classCallCheck(this, CPUSpringTransition);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CPUSpringTransition).apply(this, arguments));\n  }\n\n  _createClass(CPUSpringTransition, [{\n    key: \"_onUpdate\",\n    value: function _onUpdate() {\n      var _this$settings = this.settings,\n          fromValue = _this$settings.fromValue,\n          toValue = _this$settings.toValue,\n          damping = _this$settings.damping,\n          stiffness = _this$settings.stiffness;\n\n      var _this$_prevValue = this._prevValue,\n          _prevValue = _this$_prevValue === void 0 ? fromValue : _this$_prevValue,\n          _this$_currValue = this._currValue,\n          _currValue = _this$_currValue === void 0 ? fromValue : _this$_currValue;\n\n      var nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n      var delta = distance(nextValue, toValue);\n      var velocity = distance(nextValue, _currValue);\n\n      if (delta < EPSILON && velocity < EPSILON) {\n        nextValue = toValue;\n        this.end();\n      }\n\n      this._prevValue = _currValue;\n      this._currValue = nextValue;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._currValue;\n    }\n  }]);\n\n  return CPUSpringTransition;\n}(Transition);\n\nexport { CPUSpringTransition as default };","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { normalizeTransitionSettings } from './attribute/attribute-transition-utils';\nimport CPUInterpolationTransition from '../transitions/cpu-interpolation-transition';\nimport CPUSpringTransition from '../transitions/cpu-spring-transition';\nimport log from '../utils/log';\nvar TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\n\nvar UniformTransitionManager = function () {\n  function UniformTransitionManager(timeline) {\n    _classCallCheck(this, UniformTransitionManager);\n\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  _createClass(UniformTransitionManager, [{\n    key: \"add\",\n    value: function add(key, fromValue, toValue, settings) {\n      var transitions = this.transitions;\n\n      if (transitions.has(key)) {\n        var _transition = transitions.get(key);\n\n        fromValue = _transition.value;\n        this.remove(key);\n      }\n\n      settings = normalizeTransitionSettings(settings);\n\n      if (!settings) {\n        return;\n      }\n\n      var TransitionType = TRANSITION_TYPES[settings.type];\n\n      if (!TransitionType) {\n        log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n        return;\n      }\n\n      var transition = new TransitionType(this.timeline);\n      transition.start(_objectSpread({}, settings, {\n        fromValue: fromValue,\n        toValue: toValue\n      }));\n      transitions.set(key, transition);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      var transitions = this.transitions;\n\n      if (transitions.has(key)) {\n        transitions.get(key).cancel();\n        transitions[\"delete\"](key);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var propsInTransition = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.transitions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              key = _step$value[0],\n              transition = _step$value[1];\n\n          transition.update();\n          propsInTransition[key] = transition.value;\n\n          if (!transition.inProgress) {\n            this.remove(key);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return propsInTransition;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.transitions.keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var key = _step2.value;\n          this.remove(key);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"active\",\n    get: function get() {\n      return this.transitions.size > 0;\n    }\n  }]);\n\n  return UniformTransitionManager;\n}();\n\nexport { UniformTransitionManager as default };","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nexport var LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nexport var PROP_SYMBOLS = {\n  COMPONENT: Symbol[\"for\"]('component'),\n  ASYNC_DEFAULTS: Symbol[\"for\"]('asyncPropDefaults'),\n  ASYNC_ORIGINAL: Symbol[\"for\"]('asyncPropOriginal'),\n  ASYNC_RESOLVED: Symbol[\"for\"]('asyncPropResolved')\n};","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { PROP_SYMBOLS } from './constants';\nvar COMPONENT = PROP_SYMBOLS.COMPONENT;\nexport function validateProps(props) {\n  var propTypes = getPropTypes(props);\n\n  for (var propName in propTypes) {\n    var propType = propTypes[propName];\n    var validate = propType.validate;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error(\"Invalid prop \".concat(propName, \": \").concat(props[propName]));\n    }\n  }\n}\nexport function diffProps(props, oldProps) {\n  var propsChangedReason = compareProps({\n    newProps: props,\n    oldProps: oldProps,\n    propTypes: getPropTypes(props),\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  var dataChangedReason = diffDataProps(props, oldProps);\n  var updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return null;\n  }\n\n  var result = {};\n  var propTypes = getPropTypes(props);\n\n  for (var key in props.transitions) {\n    var propType = propTypes[key];\n    var type = propType && propType.type;\n    var isTransitionable = type === 'number' || type === 'color' || type === 'array';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n    }\n  }\n\n  return result;\n}\n\nexport function compareProps() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      newProps = _ref.newProps,\n      oldProps = _ref.oldProps,\n      _ref$ignoreProps = _ref.ignoreProps,\n      ignoreProps = _ref$ignoreProps === void 0 ? {} : _ref$ignoreProps,\n      _ref$propTypes = _ref.propTypes,\n      propTypes = _ref$propTypes === void 0 ? {} : _ref$propTypes,\n      _ref$triggerName = _ref.triggerName,\n      triggerName = _ref$triggerName === void 0 ? 'props' : _ref$triggerName;\n\n  if (oldProps === newProps) {\n    return null;\n  }\n\n  if (_typeof(newProps) !== 'object' || newProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  if (_typeof(oldProps) !== 'object' || oldProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  for (var _i = 0, _Object$keys = Object.keys(newProps); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" added\");\n      }\n\n      var changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n      }\n    }\n  }\n\n  for (var _i2 = 0, _Object$keys2 = Object.keys(oldProps); _i2 < _Object$keys2.length; _i2++) {\n    var _key = _Object$keys2[_i2];\n\n    if (!(_key in ignoreProps)) {\n      if (!(_key in newProps)) {\n        return \"\".concat(triggerName, \".\").concat(_key, \" dropped\");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, _key)) {\n        var _changed = comparePropValues(newProps[_key], oldProps[_key], propTypes[_key]);\n\n        if (_changed) {\n          return \"\".concat(triggerName, \".\").concat(_key, \" \").concat(_changed);\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  var equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return 'changed deeply';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return 'changed deeply';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return 'changed shallowly';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  var dataChanged = null;\n  var dataComparator = props.dataComparator,\n      _dataDiff = props._dataDiff;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = 'Data comparator detected a change';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = 'A new data container was supplied';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  if ('all' in props.updateTriggers) {\n    var diffReason = diffUpdateTrigger(props, oldProps, 'all');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  var triggerChanged = {};\n  var reason = false;\n\n  for (var triggerName in props.updateTriggers) {\n    if (triggerName !== 'all') {\n      var _diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (_diffReason) {\n        triggerChanged[triggerName] = true;\n        reason = triggerChanged;\n      }\n    }\n  }\n\n  return reason;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  var oldExtensions = oldProps.extensions;\n  var extensions = props.extensions;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (var i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  var newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  var oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  var diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName: triggerName\n  });\n  return diffReason;\n}\n\nfunction getPropTypes(props) {\n  var layer = props[COMPONENT];\n  var LayerType = layer && layer.constructor;\n  return LayerType ? LayerType._propTypes : {};\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar ERR_NOT_OBJECT = 'count(): argument not an object';\nvar ERR_NOT_CONTAINER = 'count(): argument not a container';\nexport function count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && _typeof(value) === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && _typeof(value) === 'object';\n}","import \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nexport function mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  var result = Object.assign({}, target, source);\n\n  if ('defines' in source) {\n    result.defines = Object.assign({}, target.defines, source.defines);\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(function (module) {\n      return module.name === 'project64';\n    })) {\n      var index = result.modules.findIndex(function (module) {\n        return module.name === 'project32';\n      });\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      var mergedInjection = _objectSpread({}, target.inject);\n\n      for (var key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}","import * as vec4 from 'gl-matrix/vec4';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function transformVector(matrix, vector) {\n  var result = vec4.transformMat4([], vector, matrix);\n  vec4.scale(result, result, 1 / result[3]);\n  return result;\n}\nexport function mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n  }\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.math.log2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { createMat4, transformVector } from './math-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\nvar PI = Math.PI;\nvar PI_4 = PI / 4;\nvar DEGREES_TO_RADIANS = PI / 180;\nvar RADIANS_TO_DEGREES = 180 / PI;\nvar TILE_SIZE = 512;\nvar EARTH_CIRCUMFERENCE = 40.03e6;\nvar DEFAULT_ALTITUDE = 1.5;\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\nexport function scaleToZoom(scale) {\n  return Math.log2(scale);\n}\nexport function lngLatToWorld(_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      lng = _ref2[0],\n      lat = _ref2[1];\n\n  assert(Number.isFinite(lng));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n  var lambda2 = lng * DEGREES_TO_RADIANS;\n  var phi2 = lat * DEGREES_TO_RADIANS;\n  var x = TILE_SIZE * (lambda2 + PI) / (2 * PI);\n  var y = TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5))) / (2 * PI);\n  return [x, y];\n}\nexport function worldToLngLat(_ref3) {\n  var _ref4 = _slicedToArray(_ref3, 2),\n      x = _ref4[0],\n      y = _ref4[1];\n\n  var lambda2 = x / TILE_SIZE * (2 * PI) - PI;\n  var phi2 = 2 * (Math.atan(Math.exp(y / TILE_SIZE * (2 * PI) - PI)) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\nexport function getMeterZoom(_ref5) {\n  var latitude = _ref5.latitude;\n  assert(Number.isFinite(latitude));\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\nexport function getDistanceScales(_ref6) {\n  var latitude = _ref6.latitude,\n      longitude = _ref6.longitude,\n      _ref6$highPrecision = _ref6.highPrecision,\n      highPrecision = _ref6$highPrecision === void 0 ? false : _ref6$highPrecision;\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n  var result = {};\n  var worldSize = TILE_SIZE;\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  var unitsPerDegreeX = worldSize / 360;\n  var unitsPerDegreeY = unitsPerDegreeX / latCosine;\n  var altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n  result.unitsPerMeter = [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter];\n  result.metersPerUnit = [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter];\n  result.unitsPerDegree = [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter];\n  result.degreesPerUnit = [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter];\n\n  if (highPrecision) {\n    var latCosine2 = DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS) / latCosine;\n    var unitsPerDegreeY2 = unitsPerDegreeX * latCosine2 / 2;\n    var altUnitsPerDegree2 = worldSize / EARTH_CIRCUMFERENCE * latCosine2;\n    var altUnitsPerMeter2 = altUnitsPerDegree2 / unitsPerDegreeY * altUnitsPerMeter;\n    result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n    result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n  }\n\n  return result;\n}\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  var _lngLatZ = _slicedToArray(lngLatZ, 3),\n      longitude = _lngLatZ[0],\n      latitude = _lngLatZ[1],\n      z0 = _lngLatZ[2];\n\n  var _xyz = _slicedToArray(xyz, 3),\n      x = _xyz[0],\n      y = _xyz[1],\n      z = _xyz[2];\n\n  var _getDistanceScales = getDistanceScales({\n    longitude: longitude,\n    latitude: latitude,\n    highPrecision: true\n  }),\n      unitsPerMeter = _getDistanceScales.unitsPerMeter,\n      unitsPerMeter2 = _getDistanceScales.unitsPerMeter2;\n\n  var worldspace = lngLatToWorld(lngLatZ);\n  worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n  worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n  var newLngLat = worldToLngLat(worldspace);\n  var newZ = (z0 || 0) + (z || 0);\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\nexport function getViewMatrix(_ref7) {\n  var height = _ref7.height,\n      pitch = _ref7.pitch,\n      bearing = _ref7.bearing,\n      altitude = _ref7.altitude,\n      scale = _ref7.scale,\n      _ref7$center = _ref7.center,\n      center = _ref7$center === void 0 ? null : _ref7$center;\n  var vm = createMat4();\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n  scale /= height;\n  mat4.scale(vm, vm, [scale, scale, scale]);\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\nexport function getProjectionParameters(_ref8) {\n  var width = _ref8.width,\n      height = _ref8.height,\n      _ref8$altitude = _ref8.altitude,\n      altitude = _ref8$altitude === void 0 ? DEFAULT_ALTITUDE : _ref8$altitude,\n      _ref8$pitch = _ref8.pitch,\n      pitch = _ref8$pitch === void 0 ? 0 : _ref8$pitch,\n      _ref8$nearZMultiplier = _ref8.nearZMultiplier,\n      nearZMultiplier = _ref8$nearZMultiplier === void 0 ? 1 : _ref8$nearZMultiplier,\n      _ref8$farZMultiplier = _ref8.farZMultiplier,\n      farZMultiplier = _ref8$farZMultiplier === void 0 ? 1 : _ref8$farZMultiplier;\n  var pitchRadians = pitch * DEGREES_TO_RADIANS;\n  var halfFov = Math.atan(0.5 / altitude);\n  var topHalfSurfaceDistance = Math.sin(halfFov) * altitude / Math.sin(Math.min(Math.max(Math.PI / 2 - pitchRadians - halfFov, 0.01), Math.PI - 0.01));\n  var farZ = Math.sin(pitchRadians) * topHalfSurfaceDistance + altitude;\n  return {\n    fov: 2 * halfFov,\n    aspect: width / height,\n    focalDistance: altitude,\n    near: nearZMultiplier,\n    far: farZ * farZMultiplier\n  };\n}\nexport function getProjectionMatrix(_ref9) {\n  var width = _ref9.width,\n      height = _ref9.height,\n      pitch = _ref9.pitch,\n      altitude = _ref9.altitude,\n      nearZMultiplier = _ref9.nearZMultiplier,\n      farZMultiplier = _ref9.farZMultiplier;\n\n  var _getProjectionParamet = getProjectionParameters({\n    width: width,\n    height: height,\n    altitude: altitude,\n    pitch: pitch,\n    nearZMultiplier: nearZMultiplier,\n    farZMultiplier: farZMultiplier\n  }),\n      fov = _getProjectionParamet.fov,\n      aspect = _getProjectionParamet.aspect,\n      near = _getProjectionParamet.near,\n      far = _getProjectionParamet.far;\n\n  var projectionMatrix = mat4.perspective([], fov, aspect, near, far);\n  return projectionMatrix;\n}\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  var _xyz2 = _slicedToArray(xyz, 3),\n      x = _xyz2[0],\n      y = _xyz2[1],\n      _xyz2$ = _xyz2[2],\n      z = _xyz2$ === void 0 ? 0 : _xyz2$;\n\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix) {\n  var targetZ = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  var _xyz3 = _slicedToArray(xyz, 3),\n      x = _xyz3[0],\n      y = _xyz3[1],\n      z = _xyz3[2];\n\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    var coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  var coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  var coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n  var z0 = coord0[2];\n  var z1 = coord1[2];\n  var t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.bind\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { createMat4 } from './math-utils';\nimport { worldToPixels, pixelsToWorld } from './web-mercator-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nvar IDENTITY = createMat4();\n\nvar Viewport = function () {\n  function Viewport() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        width = _ref.width,\n        height = _ref.height,\n        scale = _ref.scale,\n        _ref$viewMatrix = _ref.viewMatrix,\n        viewMatrix = _ref$viewMatrix === void 0 ? IDENTITY : _ref$viewMatrix,\n        _ref$projectionMatrix = _ref.projectionMatrix,\n        projectionMatrix = _ref$projectionMatrix === void 0 ? IDENTITY : _ref$projectionMatrix;\n\n    _classCallCheck(this, Viewport);\n\n    this.width = width || 1;\n    this.height = height || 1;\n    this.scale = scale;\n    this.unitsPerMeter = 1;\n    this.viewMatrix = viewMatrix;\n    this.projectionMatrix = projectionMatrix;\n    var vpm = createMat4();\n    mat4.multiply(vpm, vpm, this.projectionMatrix);\n    mat4.multiply(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    var m = createMat4();\n    mat4.scale(m, m, [this.width / 2, -this.height / 2, 1]);\n    mat4.translate(m, m, [1, -1, 0]);\n    mat4.multiply(m, m, this.viewProjectionMatrix);\n    var mInverse = mat4.invert(createMat4(), m);\n\n    if (!mInverse) {\n      throw new Error('Pixel project matrix not invertible');\n    }\n\n    this.pixelProjectionMatrix = m;\n    this.pixelUnprojectionMatrix = mInverse;\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  _createClass(Viewport, [{\n    key: \"equals\",\n    value: function equals(viewport) {\n      if (!(viewport instanceof Viewport)) {\n        return false;\n      }\n\n      return viewport.width === this.width && viewport.height === this.height && mat4.equals(viewport.projectionMatrix, this.projectionMatrix) && mat4.equals(viewport.viewMatrix, this.viewMatrix);\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$topLeft = _ref2.topLeft,\n          topLeft = _ref2$topLeft === void 0 ? true : _ref2$topLeft;\n\n      var worldPosition = this.projectPosition(xyz);\n      var coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n\n      var _coord = _slicedToArray(coord, 2),\n          x = _coord[0],\n          y = _coord[1];\n\n      var y2 = topLeft ? y : this.height - y;\n      return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz) {\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$topLeft = _ref3.topLeft,\n          topLeft = _ref3$topLeft === void 0 ? true : _ref3$topLeft,\n          targetZ = _ref3.targetZ;\n\n      var _xyz = _slicedToArray(xyz, 3),\n          x = _xyz[0],\n          y = _xyz[1],\n          z = _xyz[2];\n\n      var y2 = topLeft ? y : this.height - y;\n      var targetZWorld = targetZ && targetZ * this.unitsPerMeter;\n      var coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n\n      var _this$unprojectPositi = this.unprojectPosition(coord),\n          _this$unprojectPositi2 = _slicedToArray(_this$unprojectPositi, 3),\n          X = _this$unprojectPositi2[0],\n          Y = _this$unprojectPositi2[1],\n          Z = _this$unprojectPositi2[2];\n\n      if (Number.isFinite(z)) {\n        return [X, Y, Z];\n      }\n\n      return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      var _this$projectFlat = this.projectFlat(xyz),\n          _this$projectFlat2 = _slicedToArray(_this$projectFlat, 2),\n          X = _this$projectFlat2[0],\n          Y = _this$projectFlat2[1];\n\n      var Z = (xyz[2] || 0) * this.unitsPerMeter;\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"unprojectPosition\",\n    value: function unprojectPosition(xyz) {\n      var _this$unprojectFlat = this.unprojectFlat(xyz),\n          _this$unprojectFlat2 = _slicedToArray(_this$unprojectFlat, 2),\n          X = _this$unprojectFlat2[0],\n          Y = _this$unprojectFlat2[1];\n\n      var Z = (xyz[2] || 0) / this.unitsPerMeter;\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"projectFlat\",\n    value: function projectFlat(xyz) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return xyz;\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xyz) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return xyz;\n    }\n  }]);\n\n  return Viewport;\n}();\n\nexport { Viewport as default };","import \"core-js/modules/es6.math.log2\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport WebMercatorViewport from './web-mercator-viewport';\nimport assert from './assert';\nexport default function fitBounds(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      bounds = _ref.bounds,\n      _ref$minExtent = _ref.minExtent,\n      minExtent = _ref$minExtent === void 0 ? 0 : _ref$minExtent,\n      _ref$maxZoom = _ref.maxZoom,\n      maxZoom = _ref$maxZoom === void 0 ? 24 : _ref$maxZoom,\n      _ref$padding = _ref.padding,\n      padding = _ref$padding === void 0 ? 0 : _ref$padding,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? [0, 0] : _ref$offset;\n\n  var _bounds = _slicedToArray(bounds, 2),\n      _bounds$ = _slicedToArray(_bounds[0], 2),\n      west = _bounds$[0],\n      south = _bounds$[1],\n      _bounds$2 = _slicedToArray(_bounds[1], 2),\n      east = _bounds$2[0],\n      north = _bounds$2[1];\n\n  if (Number.isFinite(padding)) {\n    var p = padding;\n    padding = {\n      top: p,\n      bottom: p,\n      left: p,\n      right: p\n    };\n  } else {\n    assert(Number.isFinite(padding.top) && Number.isFinite(padding.bottom) && Number.isFinite(padding.left) && Number.isFinite(padding.right));\n  }\n\n  var viewport = new WebMercatorViewport({\n    width: width,\n    height: height,\n    longitude: 0,\n    latitude: 0,\n    zoom: 0\n  });\n  var nw = viewport.project([west, north]);\n  var se = viewport.project([east, south]);\n  var size = [Math.max(Math.abs(se[0] - nw[0]), minExtent), Math.max(Math.abs(se[1] - nw[1]), minExtent)];\n  var targetSize = [width - padding.left - padding.right - Math.abs(offset[0]) * 2, height - padding.top - padding.bottom - Math.abs(offset[1]) * 2];\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n  var scaleX = targetSize[0] / size[0];\n  var scaleY = targetSize[1] / size[1];\n  var offsetX = (padding.right - padding.left) / 2 / scaleX;\n  var offsetY = (padding.bottom - padding.top) / 2 / scaleY;\n  var center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n  var centerLngLat = viewport.unproject(center);\n  var zoom = Math.min(maxZoom, viewport.zoom + Math.log2(Math.abs(Math.min(scaleX, scaleY))));\n  assert(Number.isFinite(zoom));\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom: zoom\n  };\n}","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Viewport from './viewport';\nimport { zoomToScale, pixelsToWorld, lngLatToWorld, worldToLngLat, getProjectionMatrix, getDistanceScales, getViewMatrix } from './web-mercator-utils';\nimport _fitBounds from './fit-bounds';\nimport * as vec2 from 'gl-matrix/vec2';\n\nvar WebMercatorViewport = function (_Viewport) {\n  _inherits(WebMercatorViewport, _Viewport);\n\n  function WebMercatorViewport() {\n    var _this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        width = _ref.width,\n        height = _ref.height,\n        _ref$latitude = _ref.latitude,\n        latitude = _ref$latitude === void 0 ? 0 : _ref$latitude,\n        _ref$longitude = _ref.longitude,\n        longitude = _ref$longitude === void 0 ? 0 : _ref$longitude,\n        _ref$zoom = _ref.zoom,\n        zoom = _ref$zoom === void 0 ? 0 : _ref$zoom,\n        _ref$pitch = _ref.pitch,\n        pitch = _ref$pitch === void 0 ? 0 : _ref$pitch,\n        _ref$bearing = _ref.bearing,\n        bearing = _ref$bearing === void 0 ? 0 : _ref$bearing,\n        _ref$altitude = _ref.altitude,\n        altitude = _ref$altitude === void 0 ? 1.5 : _ref$altitude,\n        _ref$nearZMultiplier = _ref.nearZMultiplier,\n        nearZMultiplier = _ref$nearZMultiplier === void 0 ? 0.02 : _ref$nearZMultiplier,\n        _ref$farZMultiplier = _ref.farZMultiplier,\n        farZMultiplier = _ref$farZMultiplier === void 0 ? 1.01 : _ref$farZMultiplier;\n\n    _classCallCheck(this, WebMercatorViewport);\n\n    width = width || 1;\n    height = height || 1;\n    var scale = zoomToScale(zoom);\n    altitude = Math.max(0.75, altitude);\n    var center = lngLatToWorld([longitude, latitude]);\n    center[2] = 0;\n    var projectionMatrix = getProjectionMatrix({\n      width: width,\n      height: height,\n      pitch: pitch,\n      bearing: bearing,\n      altitude: altitude,\n      nearZMultiplier: nearZMultiplier,\n      farZMultiplier: farZMultiplier\n    });\n    var viewMatrix = getViewMatrix({\n      height: height,\n      scale: scale,\n      center: center,\n      pitch: pitch,\n      bearing: bearing,\n      altitude: altitude\n    });\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WebMercatorViewport).call(this, {\n      width: width,\n      height: height,\n      scale: scale,\n      viewMatrix: viewMatrix,\n      projectionMatrix: projectionMatrix\n    }));\n    _this.latitude = latitude;\n    _this.longitude = longitude;\n    _this.zoom = zoom;\n    _this.pitch = pitch;\n    _this.bearing = bearing;\n    _this.altitude = altitude;\n    _this.center = center;\n    _this.unitsPerMeter = getDistanceScales(_assertThisInitialized(_this)).unitsPerMeter[2];\n    Object.freeze(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(WebMercatorViewport, [{\n    key: \"projectFlat\",\n    value: function projectFlat(lngLat) {\n      return lngLatToWorld(lngLat);\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xy) {\n      return worldToLngLat(xy);\n    }\n  }, {\n    key: \"getMapCenterByLngLatPosition\",\n    value: function getMapCenterByLngLatPosition(_ref2) {\n      var lngLat = _ref2.lngLat,\n          pos = _ref2.pos;\n      var fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n      var toLocation = lngLatToWorld(lngLat);\n      var translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n      var newCenter = vec2.add([], this.center, translate);\n      return worldToLngLat(newCenter, this.scale);\n    }\n  }, {\n    key: \"getLocationAtPoint\",\n    value: function getLocationAtPoint(_ref3) {\n      var lngLat = _ref3.lngLat,\n          pos = _ref3.pos;\n      return this.getMapCenterByLngLatPosition({\n        lngLat: lngLat,\n        pos: pos\n      });\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var width = this.width,\n          height = this.height;\n\n      var _fitBounds2 = _fitBounds(Object.assign({\n        width: width,\n        height: height,\n        bounds: bounds\n      }, options)),\n          longitude = _fitBounds2.longitude,\n          latitude = _fitBounds2.latitude,\n          zoom = _fitBounds2.zoom;\n\n      return new WebMercatorViewport({\n        width: width,\n        height: height,\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      });\n    }\n  }]);\n\n  return WebMercatorViewport;\n}(Viewport);\n\nexport { WebMercatorViewport as default };","import \"core-js/modules/es6.math.log2\";\nimport WebMercatorViewport from './web-mercator-viewport';\nimport { mod } from './math-utils';\nvar MAX_LATITUDE = 85.05113;\nvar MIN_LATITUDE = -85.05113;\nexport default function normalizeViewportProps(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      longitude = _ref.longitude,\n      latitude = _ref.latitude,\n      zoom = _ref.zoom,\n      _ref$pitch = _ref.pitch,\n      pitch = _ref$pitch === void 0 ? 0 : _ref$pitch,\n      _ref$bearing = _ref.bearing,\n      bearing = _ref$bearing === void 0 ? 0 : _ref$bearing;\n\n  if (longitude < -180 || longitude > 180) {\n    longitude = mod(longitude + 180, 360) - 180;\n  }\n\n  if (bearing < -180 || bearing > 180) {\n    bearing = mod(bearing + 180, 360) - 180;\n  }\n\n  var flatViewport = new WebMercatorViewport({\n    width: width,\n    height: height,\n    longitude: longitude,\n    latitude: latitude,\n    zoom: zoom\n  });\n  var topY = flatViewport.project([longitude, MAX_LATITUDE])[1];\n  var bottomY = flatViewport.project([longitude, MIN_LATITUDE])[1];\n  var shiftY = 0;\n\n  if (bottomY - topY < height) {\n    zoom += Math.log2(height / (bottomY - topY));\n    flatViewport = new WebMercatorViewport({\n      width: width,\n      height: height,\n      longitude: longitude,\n      latitude: latitude,\n      zoom: zoom\n    });\n    topY = flatViewport.project([longitude, MAX_LATITUDE])[1];\n    bottomY = flatViewport.project([longitude, MIN_LATITUDE])[1];\n  }\n\n  if (topY > 0) {\n    shiftY = topY;\n  } else if (bottomY < height) {\n    shiftY = bottomY - height;\n  }\n\n  if (shiftY) {\n    latitude = flatViewport.unproject([width / 2, height / 2 + shiftY])[1];\n  }\n\n  return {\n    width: width,\n    height: height,\n    longitude: longitude,\n    latitude: latitude,\n    zoom: zoom,\n    pitch: pitch,\n    bearing: bearing\n  };\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.math.sinh\";\nimport \"core-js/modules/es6.math.tanh\";\nimport \"core-js/modules/es6.math.cosh\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { lerp } from './math-utils';\nimport { scaleToZoom, zoomToScale, lngLatToWorld, worldToLngLat } from './web-mercator-utils';\nimport * as vec2 from 'gl-matrix/vec2';\nvar EPSILON = 0.01;\nvar VIEWPORT_TRANSITION_PROPS = ['longitude', 'latitude', 'zoom'];\nvar DEFAULT_OPTS = {\n  curve: 1.414,\n  speed: 1.2\n};\nexport default function flyToViewport(startProps, endProps, t) {\n  var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var viewport = {};\n\n  var _getFlyToTransitionPa = getFlyToTransitionParams(startProps, endProps, opts),\n      startZoom = _getFlyToTransitionPa.startZoom,\n      startCenterXY = _getFlyToTransitionPa.startCenterXY,\n      uDelta = _getFlyToTransitionPa.uDelta,\n      w0 = _getFlyToTransitionPa.w0,\n      u1 = _getFlyToTransitionPa.u1,\n      S = _getFlyToTransitionPa.S,\n      rho = _getFlyToTransitionPa.rho,\n      rho2 = _getFlyToTransitionPa.rho2,\n      r0 = _getFlyToTransitionPa.r0;\n\n  if (u1 < EPSILON) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = VIEWPORT_TRANSITION_PROPS[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var key = _step.value;\n        var startValue = startProps[key];\n        var endValue = endProps[key];\n        viewport[key] = lerp(startValue, endValue, t);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return viewport;\n  }\n\n  var s = t * S;\n  var w = Math.cosh(r0) / Math.cosh(r0 + rho * s);\n  var u = w0 * ((Math.cosh(r0) * Math.tanh(r0 + rho * s) - Math.sinh(r0)) / rho2) / u1;\n  var scaleIncrement = 1 / w;\n  var newZoom = startZoom + scaleToZoom(scaleIncrement);\n  var newCenterWorld = vec2.scale([], uDelta, u);\n  vec2.add(newCenterWorld, newCenterWorld, startCenterXY);\n  var newCenter = worldToLngLat(newCenterWorld);\n  viewport.longitude = newCenter[0];\n  viewport.latitude = newCenter[1];\n  viewport.zoom = newZoom;\n  return viewport;\n}\nexport function getFlyToDuration(startProps, endProps) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  opts = Object.assign({}, DEFAULT_OPTS, opts);\n  var _opts = opts,\n      screenSpeed = _opts.screenSpeed,\n      speed = _opts.speed,\n      maxDuration = _opts.maxDuration;\n\n  var _getFlyToTransitionPa2 = getFlyToTransitionParams(startProps, endProps, opts),\n      S = _getFlyToTransitionPa2.S,\n      rho = _getFlyToTransitionPa2.rho;\n\n  var length = 1000 * S;\n  var duration;\n\n  if (Number.isFinite(screenSpeed)) {\n    duration = length / (screenSpeed / rho);\n  } else {\n    duration = length / speed;\n  }\n\n  return Number.isFinite(maxDuration) && duration > maxDuration ? 0 : duration;\n}\n\nfunction getFlyToTransitionParams(startProps, endProps, opts) {\n  opts = Object.assign({}, DEFAULT_OPTS, opts);\n  var rho = opts.curve;\n  var startZoom = startProps.zoom;\n  var startCenter = [startProps.longitude, startProps.latitude];\n  var startScale = zoomToScale(startZoom);\n  var endZoom = endProps.zoom;\n  var endCenter = [endProps.longitude, endProps.latitude];\n  var scale = zoomToScale(endZoom - startZoom);\n  var startCenterXY = lngLatToWorld(startCenter);\n  var endCenterXY = lngLatToWorld(endCenter);\n  var uDelta = vec2.sub([], endCenterXY, startCenterXY);\n  var w0 = Math.max(startProps.width, startProps.height);\n  var w1 = w0 / scale;\n  var u1 = vec2.length(uDelta) * startScale;\n\n  var _u1 = Math.max(u1, EPSILON);\n\n  var rho2 = rho * rho;\n  var b0 = (w1 * w1 - w0 * w0 + rho2 * rho2 * _u1 * _u1) / (2 * w0 * rho2 * _u1);\n  var b1 = (w1 * w1 - w0 * w0 - rho2 * rho2 * _u1 * _u1) / (2 * w1 * rho2 * _u1);\n  var r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0);\n  var r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n  var S = (r1 - r0) / rho;\n  return {\n    startZoom: startZoom,\n    startCenterXY: startCenterXY,\n    uDelta: uDelta,\n    w0: w0,\n    u1: u1,\n    S: S,\n    rho: rho,\n    rho2: rho2,\n    r0: r0,\n    r1: r1\n  };\n}","import \"core-js/modules/es6.object.assign\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { COORDINATE_SYSTEM } from '../../lib/constants';\nimport { getOffsetOrigin } from './viewport-uniforms';\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport) {\n  var offsetMode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var _lngLatZ = _slicedToArray(lngLatZ, 3),\n      longitude = _lngLatZ[0],\n      latitude = _lngLatZ[1],\n      _lngLatZ$ = _lngLatZ[2],\n      z = _lngLatZ$ === void 0 ? 0 : _lngLatZ$;\n\n  var _viewport$projectFlat = viewport.projectFlat(lngLatZ),\n      _viewport$projectFlat2 = _slicedToArray(_viewport$projectFlat, 2),\n      X = _viewport$projectFlat2[0],\n      Y = _viewport$projectFlat2[1];\n\n  var distanceScales = viewport.getDistanceScales(offsetMode && [longitude, latitude]);\n  var Z = z * distanceScales.unitsPerMeter[2];\n  return [X, Y, Z];\n}\n\nfunction normalizeParameters(opts) {\n  var normalizedParams = Object.assign({}, opts);\n  var coordinateSystem = opts.coordinateSystem;\n  var viewport = opts.viewport,\n      coordinateOrigin = opts.coordinateOrigin,\n      fromCoordinateSystem = opts.fromCoordinateSystem,\n      fromCoordinateOrigin = opts.fromCoordinateOrigin;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    normalizedParams.fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    normalizedParams.fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  normalizedParams.coordinateSystem = coordinateSystem;\n  return normalizedParams;\n}\n\nexport function getWorldPosition(position, _ref) {\n  var viewport = _ref.viewport,\n      modelMatrix = _ref.modelMatrix,\n      coordinateSystem = _ref.coordinateSystem,\n      coordinateOrigin = _ref.coordinateOrigin,\n      offsetMode = _ref.offsetMode;\n\n  var _position = _slicedToArray(position, 3),\n      x = _position[0],\n      y = _position[1],\n      z = _position[2];\n\n  if (modelMatrix) {\n    var _vec4$transformMat = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n\n    var _vec4$transformMat2 = _slicedToArray(_vec4$transformMat, 3);\n\n    x = _vec4$transformMat2[0];\n    y = _vec4$transformMat2[1];\n    z = _vec4$transformMat2[2];\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x, y, z] : viewport.projectPosition([x, y, z]);\n  }\n}\nexport function projectPosition(position, params) {\n  var _normalizeParameters = normalizeParameters(params),\n      viewport = _normalizeParameters.viewport,\n      coordinateSystem = _normalizeParameters.coordinateSystem,\n      coordinateOrigin = _normalizeParameters.coordinateOrigin,\n      modelMatrix = _normalizeParameters.modelMatrix,\n      fromCoordinateSystem = _normalizeParameters.fromCoordinateSystem,\n      fromCoordinateOrigin = _normalizeParameters.fromCoordinateOrigin;\n\n  var _getOffsetOrigin = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin),\n      geospatialOrigin = _getOffsetOrigin.geospatialOrigin,\n      shaderCoordinateOrigin = _getOffsetOrigin.shaderCoordinateOrigin,\n      offsetMode = _getOffsetOrigin.offsetMode;\n\n  var worldPosition = getWorldPosition(position, {\n    viewport: viewport,\n    modelMatrix: modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode: offsetMode\n  });\n\n  if (offsetMode) {\n    var positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es7.object.entries\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar TYPE_DEFINITIONS = {\n  \"boolean\": {\n    validate: function validate(value, propType) {\n      return true;\n    },\n    equal: function equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n  },\n  number: {\n    validate: function validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n  },\n  color: {\n    validate: function validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n    equal: function equal(value1, value2, propType) {\n      return arrayEqual(value1, value2);\n    }\n  },\n  accessor: {\n    validate: function validate(value, propType) {\n      var valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n    equal: function equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return arrayEqual(value1, value2);\n    }\n  },\n  array: {\n    validate: function validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n    equal: function equal(value1, value2, propType) {\n      return propType.compare ? arrayEqual(value1, value2) : value1 === value2;\n    }\n  },\n  \"function\": {\n    validate: function validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n    equal: function equal(value1, value2, propType) {\n      return !propType.compare || value1 === value2;\n    }\n  }\n};\n\nfunction arrayEqual(array1, array2) {\n  if (array1 === array2) {\n    return true;\n  }\n\n  if (!isArray(array1) || !isArray(array2)) {\n    return false;\n  }\n\n  var len = array1.length;\n\n  if (len !== array2.length) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function parsePropTypes(propDefs) {\n  var propTypes = {};\n  var defaultProps = {};\n  var deprecatedProps = {};\n\n  for (var _i = 0, _Object$entries = Object.entries(propDefs); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        propName = _Object$entries$_i[0],\n        propDef = _Object$entries$_i[1];\n\n    if (propDef && propDef.deprecatedFor) {\n      deprecatedProps[propName] = Array.isArray(propDef.deprecatedFor) ? propDef.deprecatedFor : [propDef.deprecatedFor];\n    } else {\n      var propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes: propTypes,\n    defaultProps: defaultProps,\n    deprecatedProps: deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name: name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name: name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return Object.assign({\n      name: name,\n      type: getTypeOf(propDef.value)\n    }, propDef);\n  }\n\n  return Object.assign({\n    name: name\n  }, TYPE_DEFINITIONS[propDef.type], propDef);\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return _typeof(value);\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.freeze\";\nimport \"core-js/modules/es6.object.create\";\nimport log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { parsePropTypes } from './prop-types';\nimport { PROP_SYMBOLS } from './constants';\nvar COMPONENT = PROP_SYMBOLS.COMPONENT,\n    ASYNC_ORIGINAL = PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = PROP_SYMBOLS.ASYNC_DEFAULTS;\nexport function createProps() {\n  var component = this;\n  var propsPrototype = getPropsPrototype(component.constructor);\n  var propsInstance = Object.create(propsPrototype);\n  propsInstance[COMPONENT] = component;\n  propsInstance[ASYNC_ORIGINAL] = {};\n  propsInstance[ASYNC_RESOLVED] = {};\n\n  for (var i = 0; i < arguments.length; ++i) {\n    var props = arguments[i];\n\n    for (var key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\n\nfunction getPropsPrototype(componentClass) {\n  var defaultProps = getOwnProperty(componentClass, '_mergedDefaultProps');\n\n  if (!defaultProps) {\n    createPropsPrototypeAndTypes(componentClass);\n    return componentClass._mergedDefaultProps;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass) {\n  var parent = componentClass.prototype;\n\n  if (!parent) {\n    return;\n  }\n\n  var parentClass = Object.getPrototypeOf(componentClass);\n  var parentDefaultProps = getPropsPrototype(parentClass);\n  var componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  var componentPropDefs = parsePropTypes(componentDefaultProps);\n  var defaultProps = createPropsPrototype(componentPropDefs.defaultProps, parentDefaultProps, componentClass);\n  var propTypes = Object.assign({}, parentClass._propTypes, componentPropDefs.propTypes);\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  var deprecatedProps = Object.assign({}, parentClass._deprecatedProps, componentPropDefs.deprecatedProps);\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  componentClass._mergedDefaultProps = defaultProps;\n  componentClass._propTypes = propTypes;\n  componentClass._deprecatedProps = deprecatedProps;\n}\n\nfunction createPropsPrototype(props, parentProps, componentClass) {\n  var defaultProps = Object.create(null);\n  Object.assign(defaultProps, parentProps, props);\n  var id = getComponentName(componentClass);\n  delete props.id;\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n  return defaultProps;\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  var _loop = function _loop(propName) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n      set: function set(newValue) {\n        var nameStr = \"\".concat(this.id, \": \").concat(propName);\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = deprecatedProps[propName][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var newPropName = _step.value;\n\n            if (!hasOwnProperty(this, newPropName)) {\n              this[newPropName] = newValue;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n    });\n  };\n\n  for (var propName in deprecatedProps) {\n    _loop(propName);\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  var defaultValues = {};\n  var descriptors = {};\n\n  for (var propName in propTypes) {\n    var propType = propTypes[propName];\n    var name = propType.name,\n        value = propType.value;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name, value);\n    }\n  }\n\n  defaultProps[ASYNC_DEFAULTS] = defaultValues;\n  defaultProps[ASYNC_ORIGINAL] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n    set: function set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || isAsyncIterable(newValue)) {\n        this[ASYNC_ORIGINAL][name] = newValue;\n      } else {\n        this[ASYNC_RESOLVED][name] = newValue;\n      }\n    },\n    get: function get() {\n      if (this[ASYNC_RESOLVED]) {\n        if (name in this[ASYNC_RESOLVED]) {\n          var value = this[ASYNC_RESOLVED][name];\n\n          if (name === 'data') {\n            return value || this[ASYNC_DEFAULTS][name];\n          }\n\n          return value;\n        }\n\n        if (name in this[ASYNC_ORIGINAL]) {\n          var state = this[COMPONENT] && this[COMPONENT].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name);\n          }\n        }\n      }\n\n      return this[ASYNC_DEFAULTS][name];\n    }\n  };\n}\n\nfunction hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  var componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}","export default function _asyncIterator(iterable) {\n  var method;\n\n  if (typeof Symbol !== \"undefined\") {\n    if (Symbol.asyncIterator) {\n      method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      method = iterable[Symbol.iterator];\n      if (method != null) return method.call(iterable);\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.create\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\nimport log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { PROP_SYMBOLS } from './constants';\nvar ASYNC_ORIGINAL = PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = PROP_SYMBOLS.ASYNC_DEFAULTS;\nvar EMPTY_PROPS = Object.freeze({});\n\nvar ComponentState = function () {\n  function ComponentState() {\n    var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, ComponentState);\n\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = function () {};\n\n    this.oldProps = EMPTY_PROPS;\n    this.oldAsyncProps = null;\n  }\n\n  _createClass(ComponentState, [{\n    key: \"getOldProps\",\n    value: function getOldProps() {\n      return this.oldAsyncProps || this.oldProps;\n    }\n  }, {\n    key: \"resetOldProps\",\n    value: function resetOldProps() {\n      this.oldAsyncProps = null;\n      this.oldProps = this.component.props;\n    }\n  }, {\n    key: \"freezeAsyncOldProps\",\n    value: function freezeAsyncOldProps() {\n      if (!this.oldAsyncProps) {\n        this.oldProps = this.oldProps || this.component.props;\n        this.oldAsyncProps = Object.create(this.oldProps);\n\n        for (var propName in this.asyncProps) {\n          Object.defineProperty(this.oldAsyncProps, propName, {\n            enumerable: true,\n            value: this.oldProps[propName]\n          });\n        }\n      }\n    }\n  }, {\n    key: \"hasAsyncProp\",\n    value: function hasAsyncProp(propName) {\n      return propName in this.asyncProps;\n    }\n  }, {\n    key: \"getAsyncProp\",\n    value: function getAsyncProp(propName) {\n      var asyncProp = this.asyncProps[propName];\n      return asyncProp && asyncProp.resolvedValue;\n    }\n  }, {\n    key: \"isAsyncPropLoading\",\n    value: function isAsyncPropLoading(propName) {\n      if (propName) {\n        var asyncProp = this.asyncProps[propName];\n        return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n      }\n\n      for (var key in this.asyncProps) {\n        if (this.isAsyncPropLoading(key)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"setAsyncProps\",\n    value: function setAsyncProps(props) {\n      var resolvedValues = props[ASYNC_RESOLVED] || {};\n      var originalValues = props[ASYNC_ORIGINAL] || props;\n      var defaultValues = props[ASYNC_DEFAULTS] || {};\n\n      for (var propName in resolvedValues) {\n        var value = resolvedValues[propName];\n\n        this._createAsyncPropData(propName, value, defaultValues[propName]);\n\n        this._updateAsyncProp(propName, value);\n      }\n\n      for (var _propName in originalValues) {\n        var _value2 = originalValues[_propName];\n\n        this._createAsyncPropData(_propName, _value2, defaultValues[_propName]);\n\n        this._updateAsyncProp(_propName, _value2);\n      }\n    }\n  }, {\n    key: \"_updateAsyncProp\",\n    value: function _updateAsyncProp(propName, value) {\n      if (!this._didAsyncInputValueChange(propName, value)) {\n        return;\n      }\n\n      if (typeof value === 'string') {\n        var fetch = this.layer && this.layer.props.fetch;\n        var url = value;\n\n        if (fetch) {\n          value = fetch(url, {\n            propName: propName,\n            layer: this.layer\n          });\n        }\n      }\n\n      if (value instanceof Promise) {\n        this._watchPromise(propName, value);\n\n        return;\n      }\n\n      if (isAsyncIterable(value)) {\n        this._resolveAsyncIterable(propName, value);\n\n        return;\n      }\n\n      this._setPropValue(propName, value);\n    }\n  }, {\n    key: \"_didAsyncInputValueChange\",\n    value: function _didAsyncInputValueChange(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (value === asyncProp.lastValue) {\n        return false;\n      }\n\n      asyncProp.lastValue = value;\n      return true;\n    }\n  }, {\n    key: \"_setPropValue\",\n    value: function _setPropValue(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n      asyncProp.value = value;\n      asyncProp.resolvedValue = value;\n      asyncProp.pendingLoadCount++;\n      asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n    }\n  }, {\n    key: \"_setAsyncPropValue\",\n    value: function _setAsyncPropValue(propName, value, loadCount) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n        this.freezeAsyncOldProps();\n        asyncProp.resolvedValue = value;\n        asyncProp.resolvedLoadCount = loadCount;\n        this.onAsyncPropUpdated(propName, value);\n      }\n    }\n  }, {\n    key: \"_watchPromise\",\n    value: function _watchPromise(propName, promise) {\n      var _this = this;\n\n      var asyncProp = this.asyncProps[propName];\n      asyncProp.pendingLoadCount++;\n      var loadCount = asyncProp.pendingLoadCount;\n      promise.then(function (data) {\n        data = _this._postProcessValue(propName, data);\n\n        _this._setAsyncPropValue(propName, data, loadCount);\n\n        var onDataLoad = _this.layer && _this.layer.props.onDataLoad;\n\n        if (propName === 'data' && onDataLoad) {\n          onDataLoad(data, {\n            propName: propName,\n            layer: _this.layer\n          });\n        }\n      })[\"catch\"](function (error) {\n        return log.error(error)();\n      });\n    }\n  }, {\n    key: \"_resolveAsyncIterable\",\n    value: function () {\n      var _resolveAsyncIterable2 = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(propName, iterable) {\n        var asyncProp, loadCount, data, count, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk, onDataLoad;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (propName !== 'data') {\n                  this._setPropValue(propName, iterable);\n                }\n\n                asyncProp = this.asyncProps[propName];\n                asyncProp.pendingLoadCount++;\n                loadCount = asyncProp.pendingLoadCount;\n                data = [];\n                count = 0;\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _context.prev = 8;\n                _iterator = _asyncIterator(iterable);\n\n              case 10:\n                _context.next = 12;\n                return _iterator.next();\n\n              case 12:\n                _step = _context.sent;\n                _iteratorNormalCompletion = _step.done;\n                _context.next = 16;\n                return _step.value;\n\n              case 16:\n                _value = _context.sent;\n\n                if (_iteratorNormalCompletion) {\n                  _context.next = 26;\n                  break;\n                }\n\n                chunk = _value;\n                data = this._postProcessValue(propName, chunk, data);\n                Object.defineProperty(data, '__diff', {\n                  enumerable: false,\n                  value: [{\n                    startRow: count,\n                    endRow: data.length\n                  }]\n                });\n                count = data.length;\n\n                this._setAsyncPropValue(propName, data, loadCount);\n\n              case 23:\n                _iteratorNormalCompletion = true;\n                _context.next = 10;\n                break;\n\n              case 26:\n                _context.next = 32;\n                break;\n\n              case 28:\n                _context.prev = 28;\n                _context.t0 = _context[\"catch\"](8);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n\n              case 32:\n                _context.prev = 32;\n                _context.prev = 33;\n\n                if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n                  _context.next = 37;\n                  break;\n                }\n\n                _context.next = 37;\n                return _iterator[\"return\"]();\n\n              case 37:\n                _context.prev = 37;\n\n                if (!_didIteratorError) {\n                  _context.next = 40;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 40:\n                return _context.finish(37);\n\n              case 41:\n                return _context.finish(32);\n\n              case 42:\n                onDataLoad = this.layer && this.layer.props.onDataLoad;\n\n                if (onDataLoad) {\n                  onDataLoad(data, {\n                    propName: propName,\n                    layer: this.layer\n                  });\n                }\n\n              case 44:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 28, 32, 42], [33,, 37, 41]]);\n      }));\n\n      function _resolveAsyncIterable(_x, _x2) {\n        return _resolveAsyncIterable2.apply(this, arguments);\n      }\n\n      return _resolveAsyncIterable;\n    }()\n  }, {\n    key: \"_postProcessValue\",\n    value: function _postProcessValue(propName, value, previousValue) {\n      var _ref = this.component ? this.component.props : {},\n          dataTransform = _ref.dataTransform;\n\n      if (propName !== 'data') {\n        return value;\n      }\n\n      if (dataTransform) {\n        return dataTransform(value, previousValue);\n      }\n\n      return previousValue ? previousValue.concat(value) : value;\n    }\n  }, {\n    key: \"_createAsyncPropData\",\n    value: function _createAsyncPropData(propName, value, defaultValue) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (!asyncProp) {\n        this.asyncProps[propName] = {\n          lastValue: null,\n          resolvedValue: defaultValue,\n          pendingLoadCount: 0,\n          resolvedLoadCount: 0\n        };\n      }\n    }\n  }]);\n\n  return ComponentState;\n}();\n\nexport { ComponentState as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport { createProps } from './create-props';\nimport { PROP_SYMBOLS } from './constants';\nvar ASYNC_ORIGINAL = PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = PROP_SYMBOLS.ASYNC_DEFAULTS;\nimport ComponentState from './component-state';\nvar defaultProps = {};\nvar counter = 0;\n\nvar Component = function () {\n  function Component() {\n    _classCallCheck(this, Component);\n\n    this.props = createProps.apply(this, arguments);\n    this.id = this.props.id;\n    this.count = counter++;\n    this.lifecycle = LIFECYCLE.NO_STATE;\n    this.parent = null;\n    this.context = null;\n    this.state = null;\n    this.internalState = null;\n    Object.seal(this);\n  }\n\n  _createClass(Component, [{\n    key: \"clone\",\n    value: function clone(newProps) {\n      var props = this.props;\n      var asyncProps = {};\n\n      for (var key in props[ASYNC_DEFAULTS]) {\n        if (key in props[ASYNC_RESOLVED]) {\n          asyncProps[key] = props[ASYNC_RESOLVED][key];\n        } else if (key in props[ASYNC_ORIGINAL]) {\n          asyncProps[key] = props[ASYNC_ORIGINAL][key];\n        }\n      }\n\n      return new this.constructor(Object.assign({}, props, asyncProps, newProps));\n    }\n  }, {\n    key: \"_initState\",\n    value: function _initState() {\n      this.internalState = new ComponentState({});\n    }\n  }, {\n    key: \"stats\",\n    get: function get() {\n      return this.internalState.stats;\n    }\n  }]);\n\n  return Component;\n}();\n\nexport { Component as default };\nComponent.componentName = 'Component';\nComponent.defaultProps = defaultProps;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport ComponentState from '../lifecycle/component-state';\n\nvar LayerState = function (_ComponentState) {\n  _inherits(LayerState, _ComponentState);\n\n  function LayerState(_ref) {\n    var _this;\n\n    var attributeManager = _ref.attributeManager,\n        layer = _ref.layer;\n\n    _classCallCheck(this, LayerState);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LayerState).call(this, layer));\n    _this.attributeManager = attributeManager;\n    _this.model = null;\n    _this.needsRedraw = true;\n    _this.subLayers = null;\n    return _this;\n  }\n\n  _createClass(LayerState, [{\n    key: \"layer\",\n    get: function get() {\n      return this.component;\n    },\n    set: function set(layer) {\n      this.component = layer;\n    }\n  }]);\n\n  return LayerState;\n}(ComponentState);\n\nexport { LayerState as default };","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isBoolean = function isBoolean(x) {\n  return typeof x === 'boolean';\n};\n\nvar isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nexport var isObject = function isObject(x) {\n  return x !== null && _typeof(x) === 'object';\n};\nexport var isPromise = function isPromise(x) {\n  return isObject(x) && isFunction(x.then);\n};\nexport var isIterable = function isIterable(x) {\n  return x && typeof x[Symbol.iterator] === 'function';\n};\nexport var isAsyncIterable = function isAsyncIterable(x) {\n  return x && typeof x[Symbol.asyncIterator] === 'function';\n};\nexport var isIterator = function isIterator(x) {\n  return x && isFunction(x.next);\n};\nexport var isResponse = function isResponse(x) {\n  return typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\n};\nexport var isFile = function isFile(x) {\n  return typeof File !== 'undefined' && x instanceof File;\n};\nexport var isBlob = function isBlob(x) {\n  return typeof Blob !== 'undefined' && x instanceof Blob;\n};\nexport var isWritableDOMStream = function isWritableDOMStream(x) {\n  return isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n};\nexport var isReadableDOMStream = function isReadableDOMStream(x) {\n  return typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\n};\nexport var isBuffer = function isBuffer(x) {\n  return x && _typeof(x) === 'object' && x.isBuffer;\n};\nexport var isWritableNodeStream = function isWritableNodeStream(x) {\n  return isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\n};\nexport var isReadableNodeStream = function isReadableNodeStream(x) {\n  return isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\n};\nexport var isReadableStream = function isReadableStream(x) {\n  return isReadableDOMStream(x) || isReadableNodeStream(x);\n};\nexport var isWritableStream = function isWritableStream(x) {\n  return isWritableDOMStream(x) || isWritableNodeStream(x);\n};","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.assign\";\nvar pathPrefix = '';\nvar fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (var alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      var replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = \"\".concat(pathPrefix).concat(filename);\n  }\n\n  return filename;\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '@loaders.gl/loader-utils';\n\nvar FileReadableResponse = function () {\n  function FileReadableResponse(fileOrBlob, options) {\n    _classCallCheck(this, FileReadableResponse);\n\n    this._fileOrBlob = fileOrBlob;\n    this.bodyUsed = false;\n  }\n\n  _createClass(FileReadableResponse, [{\n    key: \"arrayBuffer\",\n    value: function () {\n      var _arrayBuffer = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var _this$_getFileReader, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$_getFileReader = this._getFileReader(), reader = _this$_getFileReader.reader, promise = _this$_getFileReader.promise;\n                reader.readAsArrayBuffer(this._fileOrBlob);\n                return _context.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function arrayBuffer() {\n        return _arrayBuffer.apply(this, arguments);\n      }\n\n      return arrayBuffer;\n    }()\n  }, {\n    key: \"text\",\n    value: function () {\n      var _text = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n        var _this$_getFileReader2, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$_getFileReader2 = this._getFileReader(), reader = _this$_getFileReader2.reader, promise = _this$_getFileReader2.promise;\n                reader.readAsText(this._fileOrBlob);\n                return _context2.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function text() {\n        return _text.apply(this, arguments);\n      }\n\n      return text;\n    }()\n  }, {\n    key: \"json\",\n    value: function () {\n      var _json = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3() {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.text();\n\n              case 2:\n                text = _context3.sent;\n                return _context3.abrupt(\"return\", JSON.parse(text));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function json() {\n        return _json.apply(this, arguments);\n      }\n\n      return json;\n    }()\n  }, {\n    key: \"_getFileReader\",\n    value: function _getFileReader() {\n      assert(!this.bodyUsed);\n      this.bodyUsed = true;\n      var reader = new FileReader();\n      var promise = new Promise(function (resolve, reject) {\n        try {\n          reader.onerror = function (_) {\n            return reject(new Error('Read error'));\n          };\n\n          reader.onabort = function () {\n            return reject(new Error('Read aborted.'));\n          };\n\n          reader.onload = function () {\n            return resolve(reader.result);\n          };\n        } catch (error) {\n          reject(error);\n        }\n      });\n      return {\n        reader: reader,\n        promise: promise\n      };\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      return new Headers({\n        'Content-Length': this._fileOrBlob.size,\n        'Content-Type': this._fileOrBlob.type\n      });\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return 200;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._fileOrBlob.name || '';\n    }\n  }]);\n\n  return FileReadableResponse;\n}();\n\nexport default function fetchFileReadable(fileOrBlob, options) {\n  return Promise.resolve(new FileReadableResponse(fileOrBlob, options));\n}","import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function getErrorMessageFromResponseSync(response) {\n  return \"Failed to fetch resource \".concat(response.url, \"(\").concat(response.status, \"): \").concat(response.statusText, \" \");\n}\nexport function getErrorMessageFromResponse(_x) {\n  return _getErrorMessageFromResponse.apply(this, arguments);\n}\n\nfunction _getErrorMessageFromResponse() {\n  _getErrorMessageFromResponse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(response) {\n    var message, contentType;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n            _context.prev = 1;\n            contentType = response.headers.get('Content-Type');\n\n            if (!contentType.includes('application/json')) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.t0 = message;\n            _context.next = 7;\n            return response.text();\n\n          case 7:\n            message = _context.t0 += _context.sent;\n            _context.next = 11;\n            break;\n\n          case 10:\n            message += response.statusText;\n\n          case 11:\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](1);\n            return _context.abrupt(\"return\", message);\n\n          case 16:\n            return _context.abrupt(\"return\", message);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 13]]);\n  }));\n  return _getErrorMessageFromResponse.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport { isBlob } from '../../javascript-utils/is-type';\nimport fetchFileReadable from './fetch-file.browser';\nimport { getErrorMessageFromResponse } from './fetch-error-message';\nexport function fetchFile(_x) {\n  return _fetchFile.apply(this, arguments);\n}\n\nfunction _fetchFile() {\n  _fetchFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url) {\n    var options,\n        response,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n            if (!isBlob(url)) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetchFileReadable(url, options));\n\n          case 3:\n            url = resolvePath(url);\n            _context.next = 6;\n            return fetch(url, options);\n\n          case 6:\n            response = _context.sent;\n\n            if (!(!response.ok && options[\"throws\"])) {\n              _context.next = 13;\n              break;\n            }\n\n            _context.t0 = Error;\n            _context.next = 11;\n            return getErrorMessageFromResponse(response);\n\n          case 11:\n            _context.t1 = _context.sent;\n            throw new _context.t0(_context.t1);\n\n          case 13:\n            return _context.abrupt(\"return\", response);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchFile.apply(this, arguments);\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  var hasParser = loader.parseTextSync || loader.parseSync || loader.parse || loader.parseStream || loader.parseInBatches;\n  var loaderOptions = loader.options && loader.options[loader.id];\n  hasParser = hasParser || loaderOptions && loaderOptions.workerUrl;\n  return hasParser;\n}\nexport function normalizeLoader(loader) {\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  var options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = _objectSpread(_objectSpread({}, loader), {}, {\n      options: _objectSpread(_objectSpread({}, loader.options), options)\n    });\n  }\n\n  if (loader.extension) {\n    loader.extensions = loader.extensions || loader.extension;\n    delete loader.extension;\n  }\n\n  if (!Array.isArray(loader.extensions)) {\n    loader.extensions = [loader.extensions];\n  }\n\n  assert(loader.extensions && loader.extensions.length > 0 && loader.extensions[0]);\n\n  if (loader.parseTextSync) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.map\";\nimport assert from './env-utils/assert';\nvar VERSION = typeof \"2.2.2\" !== 'undefined' ? \"2.2.2\" : '';\nexport function validateLoaderVersion(loader) {\n  var coreVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : VERSION;\n  assert(loader, 'no loader provided');\n  var loaderVersion = loader.version;\n\n  if (!coreVersion || !loaderVersion) {\n    return;\n  }\n\n  coreVersion = parseVersion(coreVersion);\n  loaderVersion = parseVersion(loaderVersion);\n}\n\nfunction parseVersion(version) {\n  var parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}","import \"core-js/modules/es6.function.bind\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var NullLog = function () {\n  function NullLog() {\n    _classCallCheck(this, NullLog);\n  }\n\n  _createClass(NullLog, [{\n    key: \"log\",\n    value: function log() {\n      return function (_) {};\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      return function (_) {};\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      return function (_) {};\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      return function (_) {};\n    }\n  }]);\n\n  return NullLog;\n}();\nexport var ConsoleLog = function () {\n  function ConsoleLog() {\n    _classCallCheck(this, ConsoleLog);\n\n    this.console = console;\n  }\n\n  _createClass(ConsoleLog, [{\n    key: \"log\",\n    value: function log() {\n      var _this$console$log;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_this$console$log = this.console.log).bind.apply(_this$console$log, [this.console].concat(args));\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      var _this$console$info;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return (_this$console$info = this.console.info).bind.apply(_this$console$info, [this.console].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var _this$console$warn;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return (_this$console$warn = this.console.warn).bind.apply(_this$console$warn, [this.console].concat(args));\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var _this$console$error;\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return (_this$console$error = this.console.error).bind.apply(_this$console$error, [this.console].concat(args));\n    }\n  }]);\n\n  return ConsoleLog;\n}();","import { ConsoleLog } from './loader-utils/loggers';\nexport var DEFAULT_LOADER_OPTIONS = {\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  log: new ConsoleLog(),\n  dataType: 'arraybuffer',\n  metadata: false\n};","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { DEFAULT_LOADER_OPTIONS } from '../constants';\nimport { NullLog } from './loggers';\n\nvar isPureObject = function isPureObject(value) {\n  return value && _typeof(value) === 'object' && value.constructor === {}.constructor;\n};\n\nvar globalOptions = _objectSpread({}, DEFAULT_LOADER_OPTIONS);\n\nexport function setGlobalOptions(options) {\n  globalOptions = mergeOptionsInternal(globalOptions, options);\n}\nexport function mergeOptions(loader, options, url) {\n  var topOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  validateLoaderOptions(loader, options, topOptions);\n  return mergeOptionsInternal(loader, options, url);\n}\n\nfunction validateLoaderOptions(loader, options) {\n  var topOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_LOADER_OPTIONS;\n  var log = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : console;\n\n  if (topOptions) {\n    for (var key in options) {\n      if (_typeof(options[key]) !== 'object' && !topOptions[key]) {\n        log.warn(\"Top-level loader option \".concat(key, \" not recognized\"));\n      }\n    }\n  }\n\n  var idOptions = options && options[loader.id] || {};\n  var loaderOptions = loader.options && loader.options[loader.id] || {};\n  var deprecatedOptions = loader.defaultOptions && loader.defaultOptions[loader.id] || {};\n\n  for (var _key in idOptions) {\n    if (!(_key in loaderOptions)) {\n      if (_key in deprecatedOptions) {\n        log.warn(\"\".concat(loader.name, \" loader option \").concat(loader.id, \".\").concat(_key, \" deprecated, use \").concat(deprecatedOptions[_key]));\n      } else {\n        log.warn(\"\".concat(loader.name, \" loader option \").concat(loader.id, \".\").concat(_key, \" not recognized\"));\n      }\n    }\n  }\n}\n\nfunction mergeOptionsInternal(loader, options, url) {\n  var loaderDefaultOptions = loader.options || {};\n\n  var mergedOptions = _objectSpread({}, loaderDefaultOptions);\n\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, globalOptions);\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (var key in options) {\n    if (key in options) {\n      var value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = _objectSpread(_objectSpread({}, mergedOptions[key]), options[key]);\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = _regeneratorRuntime.mark(makeStringIterator);\n\nexport function makeStringIterator(string) {\n  var options,\n      _options$chunkSize,\n      chunkSize,\n      offset,\n      textEncoder,\n      chunkLength,\n      chunk,\n      _args = arguments;\n\n  return _regeneratorRuntime.wrap(function makeStringIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _options$chunkSize = options.chunkSize, chunkSize = _options$chunkSize === void 0 ? 256 * 1024 : _options$chunkSize;\n          offset = 0;\n          textEncoder = new TextEncoder();\n\n        case 4:\n          if (!(offset < string.length)) {\n            _context.next = 12;\n            break;\n          }\n\n          chunkLength = Math.min(string.length - offset, chunkSize);\n          chunk = string.slice(offset, offset + chunkLength);\n          offset += chunkLength;\n          _context.next = 10;\n          return textEncoder.encode(chunk);\n\n        case 10:\n          _context.next = 4;\n          break;\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = _regeneratorRuntime.mark(makeArrayBufferIterator);\n\nexport function makeArrayBufferIterator(arrayBuffer) {\n  var options,\n      _options$chunkSize,\n      chunkSize,\n      byteOffset,\n      chunkByteLength,\n      chunk,\n      sourceArray,\n      chunkArray,\n      _args = arguments;\n\n  return _regeneratorRuntime.wrap(function makeArrayBufferIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _options$chunkSize = options.chunkSize, chunkSize = _options$chunkSize === void 0 ? 256 * 1024 : _options$chunkSize;\n          byteOffset = 0;\n\n        case 3:\n          if (!(byteOffset < arrayBuffer.byteLength)) {\n            _context.next = 14;\n            break;\n          }\n\n          chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n          chunk = new ArrayBuffer(chunkByteLength);\n          sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n          chunkArray = new Uint8Array(chunk);\n          chunkArray.set(sourceArray);\n          byteOffset += chunkByteLength;\n          _context.next = 12;\n          return chunk;\n\n        case 12:\n          _context.next = 3;\n          break;\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}","export default function _AwaitValue(value) {\n  this.wrapped = value;\n}","import AwaitValue from \"./AwaitValue\";\nexport default function _awaitAsyncGenerator(value) {\n  return new AwaitValue(value);\n}","import AwaitValue from \"./AwaitValue\";\nexport default function AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen[\"return\"] !== \"function\") {\n    this[\"return\"] = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};","import AsyncGenerator from \"./AsyncGenerator\";\nexport default function _wrapAsyncGenerator(fn) {\n  return function () {\n    return new AsyncGenerator(fn.apply(this, arguments));\n  };\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nvar DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport function makeBlobIterator(_x) {\n  return _makeBlobIterator.apply(this, arguments);\n}\n\nfunction _makeBlobIterator() {\n  _makeBlobIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(file) {\n    var options,\n        chunkSize,\n        offset,\n        end,\n        slice,\n        chunk,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            chunkSize = options.chunkSize || DEFAULT_CHUNK_SIZE;\n            offset = 0;\n\n          case 3:\n            if (!(offset < file.size)) {\n              _context.next = 14;\n              break;\n            }\n\n            end = offset + chunkSize;\n            slice = file.slice(offset, end);\n            _context.next = 8;\n            return _awaitAsyncGenerator(readFileSlice(slice));\n\n          case 8:\n            chunk = _context.sent;\n            offset = end;\n            _context.next = 12;\n            return chunk;\n\n          case 12:\n            _context.next = 3;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _makeBlobIterator.apply(this, arguments);\n}\n\nfunction readFileSlice(_x2) {\n  return _readFileSlice.apply(this, arguments);\n}\n\nfunction _readFileSlice() {\n  _readFileSlice = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(slice) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return new Promise(function (resolve, reject) {\n              var fileReader = new FileReader();\n\n              fileReader.onloadend = function (event) {\n                return resolve(event.target.result);\n              };\n\n              fileReader.onerror = function (error) {\n                return reject(error);\n              };\n\n              fileReader.readAsArrayBuffer(slice);\n            });\n\n          case 2:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _readFileSlice.apply(this, arguments);\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nimport { isBrowser, nodeVersion } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream) {\n  if (isBrowser || nodeVersion >= 10) {\n    if (typeof stream[Symbol.asyncIterator] === 'function') {\n      return stream;\n    }\n\n    if (typeof stream.getIterator === 'function') {\n      return stream.getIterator();\n    }\n  }\n\n  return isBrowser ? makeBrowserStreamIterator(stream) : makeNodeStreamIterator(stream);\n}\n\nfunction makeBrowserStreamIterator(_x) {\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction _makeBrowserStreamIterator() {\n  _makeBrowserStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(stream) {\n    var reader, _yield$_awaitAsyncGen, done, value;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            reader = stream.getReader();\n            _context.prev = 1;\n\n          case 2:\n            if (!true) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 5;\n            return _awaitAsyncGenerator(reader.read());\n\n          case 5:\n            _yield$_awaitAsyncGen = _context.sent;\n            done = _yield$_awaitAsyncGen.done;\n            value = _yield$_awaitAsyncGen.value;\n\n            if (!done) {\n              _context.next = 10;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 10:\n            _context.next = 12;\n            return value;\n\n          case 12:\n            _context.next = 2;\n            break;\n\n          case 14:\n            _context.next = 19;\n            break;\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](1);\n            reader.releaseLock();\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 16]]);\n  }));\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction makeNodeStreamIterator(_x2) {\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction _makeNodeStreamIterator() {\n  _makeNodeStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee2(stream) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _awaitAsyncGenerator(stream);\n\n          case 2:\n            stream = _context2.sent;\n\n          case 3:\n            if (!true) {\n              _context2.next = 15;\n              break;\n            }\n\n            data = stream.read();\n\n            if (!(data !== null)) {\n              _context2.next = 9;\n              break;\n            }\n\n            _context2.next = 8;\n            return data;\n\n          case 8:\n            return _context2.abrupt(\"continue\", 3);\n\n          case 9:\n            if (!stream._readableState.ended) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 11:\n            _context2.next = 13;\n            return _awaitAsyncGenerator(onceReadable(stream));\n\n          case 13:\n            _context2.next = 3;\n            break;\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction onceReadable(_x3) {\n  return _onceReadable.apply(this, arguments);\n}\n\nfunction _onceReadable() {\n  _onceReadable = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(stream) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", new Promise(function (resolve) {\n              stream.once('readable', resolve);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _onceReadable.apply(this, arguments);\n}","import { makeStringIterator } from './string-iterator';\nimport { makeArrayBufferIterator } from './array-buffer-iterator';\nimport { makeBlobIterator } from './blob-iterator';\nimport { assert } from '@loaders.gl/loader-utils';\nimport { makeStreamIterator } from './stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data);\n  }\n\n  if (isResponse(data)) {\n    return makeStreamIterator(data.body);\n  }\n\n  return assert(false);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport function concatenateArrayBuffers(source1, source2) {\n  var sourceArray1 = source1 instanceof ArrayBuffer ? new Uint8Array(source1) : source1;\n  var sourceArray2 = source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  var temp = new Uint8Array(sourceArray1.byteLength + sourceArray2.byteLength);\n  temp.set(sourceArray1, 0);\n  temp.set(sourceArray2, sourceArray1.byteLength);\n  return temp;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\nimport { concatenateArrayBuffers } from '../javascript-utils/memory-copy-utils';\nexport function forEach(_x, _x2) {\n  return _forEach.apply(this, arguments);\n}\n\nfunction _forEach() {\n  _forEach = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(iterator, visitor) {\n    var _yield$iterator$next, done, value, cancel;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!true) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 3;\n            return iterator.next();\n\n          case 3:\n            _yield$iterator$next = _context.sent;\n            done = _yield$iterator$next.done;\n            value = _yield$iterator$next.value;\n\n            if (!done) {\n              _context.next = 9;\n              break;\n            }\n\n            iterator[\"return\"]();\n            return _context.abrupt(\"return\");\n\n          case 9:\n            cancel = visitor(value);\n\n            if (!cancel) {\n              _context.next = 12;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 12:\n            _context.next = 0;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _forEach.apply(this, arguments);\n}\n\nexport function concatenateChunksAsync(_x3) {\n  return _concatenateChunksAsync.apply(this, arguments);\n}\n\nfunction _concatenateChunksAsync() {\n  _concatenateChunksAsync = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(asyncIterator) {\n    var arrayBuffer, string, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            arrayBuffer = new ArrayBuffer(0);\n            string = '';\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _context2.prev = 4;\n            _iterator = _asyncIterator(asyncIterator);\n\n          case 6:\n            _context2.next = 8;\n            return _iterator.next();\n\n          case 8:\n            _step = _context2.sent;\n            _iteratorNormalCompletion = _step.done;\n            _context2.next = 12;\n            return _step.value;\n\n          case 12:\n            _value = _context2.sent;\n\n            if (_iteratorNormalCompletion) {\n              _context2.next = 19;\n              break;\n            }\n\n            chunk = _value;\n\n            if (typeof chunk === 'string') {\n              string += chunk;\n            } else {\n              arrayBuffer = concatenateArrayBuffers(arrayBuffer, chunk);\n            }\n\n          case 16:\n            _iteratorNormalCompletion = true;\n            _context2.next = 6;\n            break;\n\n          case 19:\n            _context2.next = 25;\n            break;\n\n          case 21:\n            _context2.prev = 21;\n            _context2.t0 = _context2[\"catch\"](4);\n            _didIteratorError = true;\n            _iteratorError = _context2.t0;\n\n          case 25:\n            _context2.prev = 25;\n            _context2.prev = 26;\n\n            if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n              _context2.next = 30;\n              break;\n            }\n\n            _context2.next = 30;\n            return _iterator[\"return\"]();\n\n          case 30:\n            _context2.prev = 30;\n\n            if (!_didIteratorError) {\n              _context2.next = 33;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 33:\n            return _context2.finish(30);\n\n          case 34:\n            return _context2.finish(25);\n\n          case 35:\n            return _context2.abrupt(\"return\", string || arrayBuffer);\n\n          case 36:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[4, 21, 25, 35], [26,, 30, 34]]);\n  }));\n  return _concatenateChunksAsync.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function checkFetchResponseStatus(_x) {\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nfunction _checkFetchResponseStatus() {\n  _checkFetchResponseStatus = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(response) {\n    var errorMessage, text;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (response.ok) {\n              _context.next = 12;\n              break;\n            }\n\n            errorMessage = \"fetch failed \".concat(response.status, \" \").concat(response.statusText);\n            _context.prev = 2;\n            _context.next = 5;\n            return response.text().slice(10);\n\n          case 5:\n            text = _context.sent;\n            errorMessage += text;\n            _context.next = 11;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](2);\n\n          case 11:\n            throw new Error(errorMessage);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 9]]);\n  }));\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nexport function checkFetchResponseStatusSync(response) {\n  if (!response.ok) {\n    throw new Error(\"fetch failed \".concat(response.status));\n  }\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterator-utils/make-iterator/make-iterator';\nimport { concatenateChunksAsync } from '../../iterator-utils/async-iteration';\nimport fetchFileReadable from '../fetch/fetch-file.browser';\nimport { checkFetchResponseStatus } from './check-errors';\nvar ERR_DATA = 'Cannot convert supplied data type';\nexport function getUrlFromData(data, url) {\n  if (isResponse(data)) {\n    url = url || data.url;\n  } else if (isBlob(url)) {\n    url = url.name;\n  }\n\n  return typeof url === 'string' ? url.replace(/\\?.*/, '') : url;\n}\nexport function getArrayBufferOrStringFromDataSync(data, loader) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    var arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      var textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data) || isBuffer(data)) {\n    if (loader.text && !loader.binary) {\n      var _textDecoder = new TextDecoder('utf8');\n\n      return _textDecoder.decode(data);\n    }\n\n    var _arrayBuffer = data.buffer;\n    var byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== _arrayBuffer.byteLength) {\n      _arrayBuffer = _arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return _arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport function getArrayBufferOrStringFromData(_x, _x2) {\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nfunction _getArrayBufferOrStringFromData() {\n  _getArrayBufferOrStringFromData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loader) {\n    var isArrayBuffer, response;\n    return _regeneratorRuntime.wrap(function _callee$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return data;\n\n          case 2:\n            data = _context3.sent;\n            isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n            if (!(typeof data === 'string' || isArrayBuffer)) {\n              _context3.next = 6;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", getArrayBufferOrStringFromDataSync(data, loader));\n\n          case 6:\n            if (!isBlob(data)) {\n              _context3.next = 10;\n              break;\n            }\n\n            _context3.next = 9;\n            return fetchFileReadable(data);\n\n          case 9:\n            data = _context3.sent;\n\n          case 10:\n            if (!isResponse(data)) {\n              _context3.next = 24;\n              break;\n            }\n\n            response = data;\n            _context3.next = 14;\n            return checkFetchResponseStatus(response);\n\n          case 14:\n            if (!loader.binary) {\n              _context3.next = 20;\n              break;\n            }\n\n            _context3.next = 17;\n            return response.arrayBuffer();\n\n          case 17:\n            _context3.t0 = _context3.sent;\n            _context3.next = 23;\n            break;\n\n          case 20:\n            _context3.next = 22;\n            return response.text();\n\n          case 22:\n            _context3.t0 = _context3.sent;\n\n          case 23:\n            return _context3.abrupt(\"return\", _context3.t0);\n\n          case 24:\n            if (isReadableStream(data)) {\n              data = makeIterator(data);\n            }\n\n            if (!(isIterable(data) || isAsyncIterable(data))) {\n              _context3.next = 27;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", concatenateChunksAsync(data));\n\n          case 27:\n            throw new Error(ERR_DATA);\n\n          case 28:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nexport function getAsyncIteratorFromData(_x3) {\n  return _getAsyncIteratorFromData.apply(this, arguments);\n}\n\nfunction _getAsyncIteratorFromData() {\n  _getAsyncIteratorFromData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(data) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (!isIterator(data)) {\n              _context4.next = 2;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", data);\n\n          case 2:\n            if (!isResponse(data)) {\n              _context4.next = 6;\n              break;\n            }\n\n            _context4.next = 5;\n            return checkFetchResponseStatus(data);\n\n          case 5:\n            return _context4.abrupt(\"return\", makeIterator(data.body));\n\n          case 6:\n            if (!(isBlob(data) || isReadableStream(data))) {\n              _context4.next = 8;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", makeIterator(data));\n\n          case 8:\n            if (!isAsyncIterable(data)) {\n              _context4.next = 10;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", data[Symbol.asyncIterator]());\n\n          case 10:\n            return _context4.abrupt(\"return\", getIteratorFromData(data));\n\n          case 11:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getAsyncIteratorFromData.apply(this, arguments);\n}\n\nexport function getIteratorFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return data.buffer;\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return data;\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { fetchFile } from '../fetch/fetch-file';\nexport function getLoaderContext(context, options) {\n  var previousContext = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  if (previousContext) {\n    return previousContext;\n  }\n\n  context = _objectSpread({\n    fetch: context.fetch || fetchFile\n  }, context);\n\n  if (!Array.isArray(context.loaders)) {\n    context.loaders = null;\n  }\n\n  return context;\n}\nexport function getLoaders(loaders, context) {\n  if (!context && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  var candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    var contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [].concat(_toConsumableArray(candidateLoaders), _toConsumableArray(contextLoaders)) : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}","import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport { assert } from '@loaders.gl/loader-utils';\nvar workerURLCache = new Map();\nexport function getWorkerURL(workerSource) {\n  var workerName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Worker';\n  assert(typeof workerSource === 'string', 'worker source');\n\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    var workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n\n    workerSource = buildScript(workerUrl);\n  }\n\n  var workerURL = workerURLCache.get(workerSource);\n\n  if (!workerURL) {\n    var blob = new Blob([workerSource], {\n      type: 'application/javascript'\n    });\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n\n  return workerURL;\n}\n\nfunction buildScript(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n}\");\n}","import \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport function getTransferList(object) {\n  var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var transfers = arguments.length > 2 ? arguments[2] : undefined;\n  var transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (recursive && _typeof(object) === 'object') {\n    for (var key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : null;\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getWorkerURL } from './get-worker-url';\nimport { getTransferList } from '@loaders.gl/loader-utils';\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n\n    _classCallCheck(this, WorkerThread);\n\n    var url = getWorkerURL(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  _createClass(WorkerThread, [{\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.worker.onmessage = function (event) {\n                    return _this.onMessage({\n                      worker: _this.worker,\n                      data: event.data,\n                      resolve: resolve,\n                      reject: reject\n                    });\n                  };\n\n                  _this.worker.onerror = function (error) {\n                    var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                    if (error.message) {\n                      message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                    }\n\n                    var betterError = new Error(message);\n                    console.error(error);\n                    reject(betterError);\n                  };\n\n                  var transferList = getTransferList(data);\n\n                  _this.worker.postMessage(data, transferList);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n\n  return WorkerThread;\n}();\n\nexport { WorkerThread as default };","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerThread from './worker-thread';\n\nvar WorkerPool = function () {\n  function WorkerPool(_ref) {\n    var source = _ref.source,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? 'unnamed' : _ref$name,\n        _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? 1 : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerPool);\n\n    this.source = source;\n    this.name = name;\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.jobQueue = [];\n    this.idleQueue = [];\n    this.count = 0;\n    this.isDestroyed = false;\n  }\n\n  _createClass(WorkerPool, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.idleQueue.forEach(function (worker) {\n        return worker.destroy();\n      });\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, jobName) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.jobQueue.push({\n                    data: data,\n                    jobName: jobName,\n                    resolve: resolve,\n                    reject: reject\n                  });\n\n                  _this._startQueuedJob();\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x, _x2) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_startQueuedJob\",\n    value: function _startQueuedJob() {\n      var _this2 = this;\n\n      if (!this.jobQueue.length) {\n        return;\n      }\n\n      var worker = this._getAvailableWorker();\n\n      if (!worker) {\n        return;\n      }\n\n      var job = this.jobQueue.shift();\n      this.onDebug({\n        message: 'processing',\n        worker: worker.name,\n        job: job.jobName,\n        backlog: this.jobQueue.length\n      });\n      worker.process(job.data).then(function (result) {\n        return job.resolve(result);\n      })[\"catch\"](function (error) {\n        return job.reject(error);\n      }).then(function () {\n        return _this2._onWorkerDone(worker);\n      });\n    }\n  }, {\n    key: \"_onWorkerDone\",\n    value: function _onWorkerDone(worker) {\n      if (this.isDestroyed) {\n        worker.destroy();\n      } else {\n        this.idleQueue.push(worker);\n\n        this._startQueuedJob();\n      }\n    }\n  }, {\n    key: \"_getAvailableWorker\",\n    value: function _getAvailableWorker() {\n      if (this.idleQueue.length > 0) {\n        return this.idleQueue.shift();\n      }\n\n      if (this.count < this.maxConcurrency) {\n        this.count++;\n        var name = \"\".concat(this.name.toLowerCase(), \" (#\").concat(this.count, \" of \").concat(this.maxConcurrency, \")\");\n        return new WorkerThread({\n          source: this.source,\n          onMessage: this.onMessage,\n          name: name\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return WorkerPool;\n}();\n\nexport { WorkerPool as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerPool from './worker-pool';\nvar DEFAULT_MAX_CONCURRENCY = 5;\n\nvar WorkerFarm = function () {\n  _createClass(WorkerFarm, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof Worker !== 'undefined';\n    }\n  }]);\n\n  function WorkerFarm(_ref) {\n    var _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? DEFAULT_MAX_CONCURRENCY : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerFarm);\n\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.workerPools = new Map();\n  }\n\n  _createClass(WorkerFarm, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('maxConcurrency' in props) {\n        this.maxConcurrency = props.maxConcurrency;\n      }\n\n      if ('onDebug' in props) {\n        this.onDebug = props.onDebug;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.workerPools.forEach(function (workerPool) {\n        return workerPool.destroy();\n      });\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(workerSource, workerName, data) {\n        var workerPool;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                workerPool = this._getWorkerPool(workerSource, workerName);\n                return _context.abrupt(\"return\", workerPool.process(data));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function process(_x, _x2, _x3) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_getWorkerPool\",\n    value: function _getWorkerPool(workerSource, workerName) {\n      var workerPool = this.workerPools.get(workerName);\n\n      if (!workerPool) {\n        workerPool = new WorkerPool({\n          source: workerSource,\n          name: workerName,\n          onMessage: this.onMessage,\n          maxConcurrency: this.maxConcurrency,\n          onDebug: this.onDebug\n        });\n        this.workerPools.set(workerName, workerPool);\n      }\n\n      return workerPool;\n    }\n  }]);\n\n  return WorkerFarm;\n}();\n\nexport { WorkerFarm as default };","import { assert } from '@loaders.gl/loader-utils';\nimport { toArrayBuffer as bufferToArrayBuffer } from '../node/utils/to-array-buffer.node';\nexport function toArrayBuffer(data) {\n  if (bufferToArrayBuffer) {\n    data = bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","import \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport WorkerFarm from '../../worker-utils/worker-farm';\nimport { toArrayBuffer } from '../../javascript-utils/binary-utils';\nimport { getTransferList } from '@loaders.gl/loader-utils';\nimport { parse } from '../api/parse';\nvar VERSION = typeof \"2.2.2\" !== 'undefined' ? \"2.2.2\" : 'latest';\nexport function canParseWithWorker(loader, data, options, context) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\nexport default function parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  var warning = loader.version !== VERSION ? \"(core version \".concat(VERSION, \")\") : '';\n  return workerFarm.process(workerSource, \"\".concat(workerName, \"-worker@\").concat(loader.version).concat(warning), {\n    arraybuffer: toArrayBuffer(data),\n    options: options,\n    source: \"loaders.gl@\".concat(VERSION),\n    type: 'parse'\n  });\n}\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new WorkerFarm({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_x) {\n  return _onWorkerMessage.apply(this, arguments);\n}\n\nfunction _onWorkerMessage() {\n  _onWorkerMessage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2) {\n    var worker, data, resolve, reject, result;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n            _context.t0 = data.type;\n            _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n            break;\n\n          case 4:\n            resolve(data.result);\n            return _context.abrupt(\"break\", 19);\n\n          case 6:\n            _context.prev = 6;\n            _context.next = 9;\n            return parse(data.arraybuffer, data.options, data.url);\n\n          case 9:\n            result = _context.sent;\n            worker.postMessage({\n              type: 'parse-done',\n              id: data.id,\n              result: result\n            }, getTransferList(result));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](6);\n            worker.postMessage({\n              type: 'parse-error',\n              id: data.id,\n              message: _context.t1.message\n            });\n\n          case 16:\n            return _context.abrupt(\"break\", 19);\n\n          case 17:\n            reject(data.message);\n            return _context.abrupt(\"break\", 19);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n  return _onWorkerMessage.apply(this, arguments);\n}","import \"core-js/modules/es6.regexp.match\";\nvar DATA_URL_PATTERN = /^data:(.*?)(;|,)/;\nvar MIME_TYPE_PATTERN = /^(.*?)(;|,)/;\nexport function parseMIMEType(mimeString) {\n  if (typeof mimeString !== 'string') {\n    return '';\n  }\n\n  var matches = mimeString.match(MIME_TYPE_PATTERN);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\nexport function parseMIMETypeFromURL(dataUrl) {\n  if (typeof dataUrl !== 'string') {\n    return '';\n  }\n\n  var matches = dataUrl.match(DATA_URL_PATTERN);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}","import \"core-js/modules/es6.regexp.replace\";\nimport { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nvar QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    var contentType = parseMIMEType(resource.headers.get('content-type'));\n    var urlType = parseMIMETypeFromURL(resource.url);\n    return {\n      url: stripQueryString(resource.url || ''),\n      type: contentType || urlType || null\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.url || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}","import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nvar registeredLoaders = [];\nexport function registerLoaders(loaders) {\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  var _iterator = _createForOfIteratorHelper(loaders),\n      _step;\n\n  try {\n    var _loop = function _loop() {\n      var loader = _step.value;\n      var normalizedLoader = normalizeLoader(loader);\n\n      if (!registeredLoaders.find(function (registeredLoader) {\n        return normalizedLoader === registeredLoader;\n      })) {\n        registeredLoaders.unshift(normalizedLoader);\n      }\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nexport function getRegisteredLoaders() {\n  return registeredLoaders;\n}\nexport function _unregisterLoaders() {\n  registeredLoaders = [];\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nvar EXT_PATTERN = /\\.([^.]+)$/;\nexport function selectLoader(data) {\n  var loaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var context = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  loaders = [].concat(_toConsumableArray(loaders || []), _toConsumableArray(getRegisteredLoaders()));\n  normalizeLoaders(loaders);\n\n  var _getResourceUrlAndTyp = getResourceUrlAndType(data),\n      url = _getResourceUrlAndTyp.url,\n      type = _getResourceUrlAndTyp.type;\n\n  var loader = findLoaderByUrl(loaders, url || context.url);\n  loader = loader || findLoaderByContentType(loaders, type);\n  loader = loader || findLoaderByExamingInitialData(loaders, data);\n\n  if (!loader && !options.nothrow) {\n    throw new Error(getNoValidLoaderMessage(data, url, type));\n  }\n\n  return loader;\n}\n\nfunction getNoValidLoaderMessage(data, url, contentType) {\n  var message = 'No valid loader found';\n\n  if (data) {\n    message += \" data: \\\"\".concat(getFirstCharacters(data), \"\\\"\");\n  }\n\n  if (url) {\n    message += \" for \".concat(url);\n  }\n\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  var _iterator = _createForOfIteratorHelper(loaders),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var loader = _step.value;\n      normalizeLoader(loader);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  var match = url && url.match(EXT_PATTERN);\n  var extension = match && match[1];\n  return extension && findLoaderByExtension(loaders, extension);\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  var _iterator2 = _createForOfIteratorHelper(loaders),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var loader = _step2.value;\n\n      var _iterator3 = _createForOfIteratorHelper(loader.extensions),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var loaderExtension = _step3.value;\n\n          if (loaderExtension.toLowerCase() === extension) {\n            return loader;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return null;\n}\n\nfunction findLoaderByContentType(loaders, mimeType) {\n  var _iterator4 = _createForOfIteratorHelper(loaders),\n      _step4;\n\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var loader = _step4.value;\n\n      if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n        return loader;\n      }\n\n      if (mimeType === \"application/x.\".concat(loader.id)) {\n        return loader;\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n\n  return null;\n}\n\nfunction findLoaderByExamingInitialData(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  var _iterator5 = _createForOfIteratorHelper(loaders),\n      _step5;\n\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var loader = _step5.value;\n\n      if (typeof data === 'string') {\n        if (testText(data, loader)) {\n          return loader;\n        }\n      } else if (ArrayBuffer.isView(data)) {\n        if (testBinary(data.buffer, data.byteOffset, loader)) {\n          return loader;\n        }\n      } else if (data instanceof ArrayBuffer) {\n        var byteOffset = 0;\n\n        if (testBinary(data, byteOffset, loader)) {\n          return loader;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n\n  return null;\n}\n\nfunction testText(data, loader) {\n  return loader.testText && loader.testText(data);\n}\n\nfunction testBinary(data, byteOffset, loader) {\n  var type = Array.isArray(loader.test) ? 'array' : _typeof(loader.test);\n\n  switch (type) {\n    case 'function':\n      return loader.test(data, loader);\n\n    case 'string':\n    case 'array':\n      var tests = Array.isArray(loader.test) ? loader.test : [loader.test];\n      return tests.some(function (test) {\n        var magic = getMagicString(data, byteOffset, test.length);\n        return test === magic;\n      });\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { assert, validateLoaderVersion } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { mergeOptions } from '../loader-utils/merge-options';\nimport { getUrlFromData } from '../loader-utils/get-data';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaders, getLoaderContext } from '../loader-utils/get-loader-context';\nimport parseWithWorker, { canParseWithWorker } from '../loader-utils/parse-with-worker';\nimport { selectLoader } from './select-loader';\nexport function parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loaders, options, context) {\n    var url, autoUrl, candidateLoaders, loader;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n              context = options;\n              options = loaders;\n              loaders = null;\n            }\n\n            url = '';\n\n            if (typeof context === 'string') {\n              url = context;\n              context = null;\n            }\n\n            options = options || {};\n            autoUrl = getUrlFromData(data, url);\n            candidateLoaders = getLoaders(loaders, context);\n            loader = selectLoader(data, candidateLoaders, options, {\n              url: autoUrl\n            });\n\n            if (loader) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 9:\n            options = mergeOptions(loader, options, autoUrl);\n            context = getLoaderContext({\n              url: autoUrl,\n              parse: parse,\n              loaders: candidateLoaders\n            }, options, context);\n            _context.next = 13;\n            return parseWithLoader(loader, data, options, context);\n\n          case 13:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction parseWithLoader(_x5, _x6, _x7, _x8) {\n  return _parseWithLoader.apply(this, arguments);\n}\n\nfunction _parseWithLoader() {\n  _parseWithLoader = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(loader, data, options, context) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            validateLoaderVersion(loader);\n            _context2.next = 3;\n            return getArrayBufferOrStringFromData(data, loader);\n\n          case 3:\n            data = _context2.sent;\n\n            if (!(loader.parseTextSync && typeof data === 'string')) {\n              _context2.next = 7;\n              break;\n            }\n\n            options.dataType = 'text';\n            return _context2.abrupt(\"return\", loader.parseTextSync(data, options, context, loader));\n\n          case 7:\n            if (!canParseWithWorker(loader, data, options, context)) {\n              _context2.next = 11;\n              break;\n            }\n\n            _context2.next = 10;\n            return parseWithWorker(loader, data, options, context);\n\n          case 10:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 11:\n            if (!loader.parse) {\n              _context2.next = 15;\n              break;\n            }\n\n            _context2.next = 14;\n            return loader.parse(data, options, context, loader);\n\n          case 14:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 15:\n            assert(!loader.parseSync);\n            return _context2.abrupt(\"return\", assert(false));\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseWithLoader.apply(this, arguments);\n}","import \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isBlob } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { parse } from './parse';\nexport function load(_x, _x2, _x3) {\n  return _load.apply(this, arguments);\n}\n\nfunction _load() {\n  _load = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url, loaders, options) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n              options = loaders;\n              loaders = null;\n            }\n\n            data = url;\n\n            if (!(typeof url === 'string')) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 5;\n            return fetchFile(url, options);\n\n          case 5:\n            data = _context.sent;\n            _context.next = 9;\n            break;\n\n          case 8:\n            url = null;\n\n          case 9:\n            if (!isBlob(url)) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 12;\n            return fetchFile(url, options);\n\n          case 12:\n            data = _context.sent;\n            url = null;\n\n          case 14:\n            _context.next = 16;\n            return parse(data, loaders, options, url);\n\n          case 16:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _load.apply(this, arguments);\n}","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-integer\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.create\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.typed.uint8-clamped-array\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { COORDINATE_SYSTEM } from './constants';\nimport AttributeManager from './attribute/attribute-manager';\nimport UniformTransitionManager from './uniform-transition-manager';\nimport { diffProps as _diffProps, validateProps as _validateProps } from '../lifecycle/props';\nimport { count } from '../utils/count';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { withParameters, setParameters } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport { mergeShaders } from '../utils/shader';\nimport { projectPosition as _projectPosition, getWorldPosition } from '../shaderlib/project/project-functions';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport Component from '../lifecycle/component';\nimport LayerState from './layer-state';\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nvar TRACE_CHANGE_FLAG = 'layer.changeFlag';\nvar TRACE_INITIALIZE = 'layer.initialize';\nvar TRACE_UPDATE = 'layer.update';\nvar TRACE_FINALIZE = 'layer.finalize';\nvar TRACE_MATCHED = 'layer.matched';\nvar EMPTY_ARRAY = Object.freeze([]);\nvar pickingColorCache = new Uint8ClampedArray(0);\nvar defaultProps = {\n  data: {\n    type: 'data',\n    value: EMPTY_ARRAY,\n    async: true\n  },\n  dataComparator: null,\n  _dataDiff: {\n    type: 'function',\n    value: function value(data) {\n      return data && data.__diff;\n    },\n    compare: false,\n    optional: true\n  },\n  dataTransform: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDataLoad: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  fetch: {\n    type: 'function',\n    value: function value(url, _ref) {\n      var layer = _ref.layer;\n      return load(url, layer.getLoadOptions());\n    },\n    compare: false\n  },\n  updateTriggers: {},\n  visible: true,\n  pickable: false,\n  opacity: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  onHover: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onClick: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragStart: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDrag: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragEnd: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin: {\n    type: 'array',\n    value: [0, 0, 0],\n    compare: true\n  },\n  modelMatrix: {\n    type: 'array',\n    value: null,\n    compare: true,\n    optional: true\n  },\n  wrapLongitude: false,\n  positionFormat: 'XYZ',\n  colorFormat: 'RGBA',\n  parameters: {},\n  uniforms: {},\n  extensions: [],\n  getPolygonOffset: {\n    type: 'function',\n    value: function value(_ref2) {\n      var layerIndex = _ref2.layerIndex;\n      return [0, -layerIndex * 100];\n    },\n    compare: false\n  },\n  highlightedObjectIndex: null,\n  autoHighlight: false,\n  highlightColor: {\n    type: 'accessor',\n    value: [0, 0, 128, 128]\n  }\n};\n\nvar Layer = function (_Component) {\n  _inherits(Layer, _Component);\n\n  function Layer() {\n    _classCallCheck(this, Layer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Layer).apply(this, arguments));\n  }\n\n  _createClass(Layer, [{\n    key: \"toString\",\n    value: function toString() {\n      var className = this.constructor.layerName || this.constructor.name;\n      return \"\".concat(className, \"({id: '\").concat(this.props.id, \"'})\");\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(updateObject) {\n      this.setChangeFlags({\n        stateChanged: true\n      });\n      Object.assign(this.state, updateObject);\n      this.setNeedsRedraw();\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var redraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (this.internalState) {\n        this.internalState.needsRedraw = redraw;\n      }\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate() {\n      this.context.layerManager.setNeedsUpdate(String(this));\n      this.internalState.needsUpdate = true;\n    }\n  }, {\n    key: \"getNeedsRedraw\",\n    value: function getNeedsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      return this._getNeedsRedraw(opts);\n    }\n  }, {\n    key: \"needsUpdate\",\n    value: function needsUpdate() {\n      return this.internalState.needsUpdate || this.hasUniformTransition() || this.shouldUpdateState(this._getUpdateParams());\n    }\n  }, {\n    key: \"hasUniformTransition\",\n    value: function hasUniformTransition() {\n      return this.internalState.uniformTransitions.active;\n    }\n  }, {\n    key: \"isPickable\",\n    value: function isPickable() {\n      return this.props.pickable && this.props.visible;\n    }\n  }, {\n    key: \"getModels\",\n    value: function getModels() {\n      return this.state && (this.state.models || (this.state.model ? [this.state.model] : []));\n    }\n  }, {\n    key: \"getAttributeManager\",\n    value: function getAttributeManager() {\n      return this.internalState && this.internalState.attributeManager;\n    }\n  }, {\n    key: \"getCurrentLayer\",\n    value: function getCurrentLayer() {\n      return this.internalState && this.internalState.layer;\n    }\n  }, {\n    key: \"getLoadOptions\",\n    value: function getLoadOptions() {\n      return this.props.loadOptions;\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var viewport = this.context.viewport;\n      var worldPosition = getWorldPosition(xyz, {\n        viewport: viewport,\n        modelMatrix: this.props.modelMatrix,\n        coordinateOrigin: this.props.coordinateOrigin,\n        coordinateSystem: this.props.coordinateSystem\n      });\n\n      var _worldToPixels = worldToPixels(worldPosition, viewport.pixelProjectionMatrix),\n          _worldToPixels2 = _slicedToArray(_worldToPixels, 3),\n          x = _worldToPixels2[0],\n          y = _worldToPixels2[1],\n          z = _worldToPixels2[2];\n\n      return xyz.length === 2 ? [x, y] : [x, y, z];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xy) {\n      var viewport = this.context.viewport;\n      return viewport.unproject(xy);\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      return _projectPosition(xyz, {\n        viewport: this.context.viewport,\n        modelMatrix: this.props.modelMatrix,\n        coordinateOrigin: this.props.coordinateOrigin,\n        coordinateSystem: this.props.coordinateSystem\n      });\n    }\n  }, {\n    key: \"use64bitPositions\",\n    value: function use64bitPositions() {\n      var coordinateSystem = this.props.coordinateSystem;\n      return coordinateSystem === COORDINATE_SYSTEM.DEFAULT || coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN;\n    }\n  }, {\n    key: \"onHover\",\n    value: function onHover(info, pickingEvent) {\n      if (this.props.onHover) {\n        return this.props.onHover(info, pickingEvent);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(info, pickingEvent) {\n      if (this.props.onClick) {\n        return this.props.onClick(info, pickingEvent);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"nullPickingColor\",\n    value: function nullPickingColor() {\n      return [0, 0, 0];\n    }\n  }, {\n    key: \"encodePickingColor\",\n    value: function encodePickingColor(i) {\n      var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      target[0] = i + 1 & 255;\n      target[1] = i + 1 >> 8 & 255;\n      target[2] = i + 1 >> 8 >> 8 & 255;\n      return target;\n    }\n  }, {\n    key: \"decodePickingColor\",\n    value: function decodePickingColor(color) {\n      assert(color instanceof Uint8Array);\n\n      var _color = _slicedToArray(color, 3),\n          i1 = _color[0],\n          i2 = _color[1],\n          i3 = _color[2];\n\n      var index = i1 + i2 * 256 + i3 * 65536 - 1;\n      return index;\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      throw new Error(\"Layer \".concat(this, \" has not defined initializeState\"));\n    }\n  }, {\n    key: \"getShaders\",\n    value: function getShaders(shaders) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.props.extensions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var extension = _step.value;\n          shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return shaders;\n    }\n  }, {\n    key: \"shouldUpdateState\",\n    value: function shouldUpdateState(_ref3) {\n      var oldProps = _ref3.oldProps,\n          props = _ref3.props,\n          context = _ref3.context,\n          changeFlags = _ref3.changeFlags;\n      return changeFlags.propsOrDataChanged;\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref4) {\n      var oldProps = _ref4.oldProps,\n          props = _ref4.props,\n          context = _ref4.context,\n          changeFlags = _ref4.changeFlags;\n      var attributeManager = this.getAttributeManager();\n\n      if (changeFlags.dataChanged && attributeManager) {\n        var dataChanged = changeFlags.dataChanged;\n\n        if (Array.isArray(dataChanged)) {\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = dataChanged[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var dataRange = _step2.value;\n              attributeManager.invalidateAll(dataRange);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                _iterator2[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        } else {\n          attributeManager.invalidateAll();\n        }\n      }\n    }\n  }, {\n    key: \"finalizeState\",\n    value: function finalizeState() {\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.getModels()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var model = _step3.value;\n          model[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      var attributeManager = this.getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.finalize();\n      }\n\n      this.internalState.uniformTransitions.clear();\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(opts) {\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.getModels()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var model = _step4.value;\n          model.draw(opts);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"getPickingInfo\",\n    value: function getPickingInfo(_ref5) {\n      var info = _ref5.info,\n          mode = _ref5.mode;\n      var index = info.index;\n\n      if (index >= 0) {\n        if (Array.isArray(this.props.data)) {\n          info.object = this.props.data[index];\n        }\n      }\n\n      return info;\n    }\n  }, {\n    key: \"invalidateAttribute\",\n    value: function invalidateAttribute() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'all';\n      var diffReason = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var attributeManager = this.getAttributeManager();\n\n      if (!attributeManager) {\n        return;\n      }\n\n      if (name === 'all') {\n        attributeManager.invalidateAll();\n      } else {\n        attributeManager.invalidate(name);\n      }\n    }\n  }, {\n    key: \"updateAttributes\",\n    value: function updateAttributes(changedAttributes) {\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = this.getModels()[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var model = _step5.value;\n\n          this._setModelAttributes(model, changedAttributes);\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n            _iterator5[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_updateAttributes\",\n    value: function _updateAttributes(props) {\n      var attributeManager = this.getAttributeManager();\n\n      if (!attributeManager) {\n        return;\n      }\n\n      var numInstances = this.getNumInstances(props);\n      var startIndices = this.getStartIndices(props);\n      attributeManager.update({\n        data: props.data,\n        numInstances: numInstances,\n        startIndices: startIndices,\n        props: props,\n        transitions: props.transitions,\n        buffers: props.data.attributes,\n        context: this,\n        ignoreUnknownAttributes: true\n      });\n      var changedAttributes = attributeManager.getChangedAttributes({\n        clearChangedFlags: true\n      });\n      this.updateAttributes(changedAttributes);\n    }\n  }, {\n    key: \"_updateAttributeTransition\",\n    value: function _updateAttributeTransition() {\n      var attributeManager = this.getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.updateTransition();\n      }\n    }\n  }, {\n    key: \"_updateUniformTransition\",\n    value: function _updateUniformTransition() {\n      var uniformTransitions = this.internalState.uniformTransitions;\n\n      if (uniformTransitions.active) {\n        var propsInTransition = uniformTransitions.update();\n        var props = Object.create(this.props);\n\n        for (var key in propsInTransition) {\n          Object.defineProperty(props, key, {\n            value: propsInTransition[key]\n          });\n        }\n\n        return props;\n      }\n\n      return this.props;\n    }\n  }, {\n    key: \"calculateInstancePickingColors\",\n    value: function calculateInstancePickingColors(attribute, _ref6) {\n      var numInstances = _ref6.numInstances;\n      var cacheSize = pickingColorCache.length / 3;\n\n      if (cacheSize < numInstances) {\n        pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n          size: 3,\n          copy: true\n        });\n        var newCacheSize = pickingColorCache.length / 3;\n        var pickingColor = [];\n        assert(newCacheSize < 16777215, 'index out of picking color range');\n\n        for (var i = cacheSize; i < newCacheSize; i++) {\n          this.encodePickingColor(i, pickingColor);\n          pickingColorCache[i * 3 + 0] = pickingColor[0];\n          pickingColorCache[i * 3 + 1] = pickingColor[1];\n          pickingColorCache[i * 3 + 2] = pickingColor[2];\n        }\n      }\n\n      attribute.value = pickingColorCache.subarray(0, numInstances * 3);\n    }\n  }, {\n    key: \"_setModelAttributes\",\n    value: function _setModelAttributes(model, changedAttributes) {\n      var attributeManager = this.getAttributeManager();\n      var excludeAttributes = model.userData.excludeAttributes || {};\n      var shaderAttributes = attributeManager.getShaderAttributes(changedAttributes, excludeAttributes);\n      model.setAttributes(shaderAttributes);\n    }\n  }, {\n    key: \"clearPickingColor\",\n    value: function clearPickingColor(color) {\n      var _this$getAttributeMan = this.getAttributeManager().attributes,\n          pickingColors = _this$getAttributeMan.pickingColors,\n          instancePickingColors = _this$getAttributeMan.instancePickingColors;\n      var colors = pickingColors || instancePickingColors;\n      var i = this.decodePickingColor(color);\n      var start = colors.getVertexOffset(i);\n      var end = colors.getVertexOffset(i + 1);\n      colors.buffer.subData({\n        data: new Uint8Array(end - start),\n        offset: start\n      });\n    }\n  }, {\n    key: \"restorePickingColors\",\n    value: function restorePickingColors() {\n      var _this$getAttributeMan2 = this.getAttributeManager().attributes,\n          pickingColors = _this$getAttributeMan2.pickingColors,\n          instancePickingColors = _this$getAttributeMan2.instancePickingColors;\n      var colors = pickingColors || instancePickingColors;\n      colors.updateSubBuffer({\n        startOffset: 0\n      });\n    }\n  }, {\n    key: \"getNumInstances\",\n    value: function getNumInstances(props) {\n      props = props || this.props;\n\n      if (props.numInstances !== undefined) {\n        return props.numInstances;\n      }\n\n      if (this.state && this.state.numInstances !== undefined) {\n        return this.state.numInstances;\n      }\n\n      return count(props.data);\n    }\n  }, {\n    key: \"getStartIndices\",\n    value: function getStartIndices(props) {\n      props = props || this.props;\n\n      if (props.startIndices !== undefined) {\n        return props.startIndices;\n      }\n\n      if (this.state && this.state.startIndices) {\n        return this.state.startIndices;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      debug(TRACE_INITIALIZE, this);\n\n      this._initState();\n\n      this.initializeState(this.context);\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = this.props.extensions[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var extension = _step6.value;\n          extension.initializeState.call(this, this.context, extension);\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6[\"return\"] != null) {\n            _iterator6[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n\n      this.setChangeFlags({\n        dataChanged: true,\n        propsChanged: true,\n        viewportChanged: true,\n        extensionsChanged: true\n      });\n\n      this._updateState();\n    }\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      var stateNeedsUpdate = this.needsUpdate();\n      debug(TRACE_UPDATE, this, stateNeedsUpdate);\n\n      if (stateNeedsUpdate) {\n        this._updateState();\n      }\n    }\n  }, {\n    key: \"_updateState\",\n    value: function _updateState() {\n      var currentProps = this.props;\n\n      var propsInTransition = this._updateUniformTransition();\n\n      this.internalState.propsInTransition = propsInTransition;\n      this.props = propsInTransition;\n\n      var updateParams = this._getUpdateParams();\n\n      if (this.context.gl) {\n        this.updateState(updateParams);\n      } else {\n        try {\n          this.updateState(updateParams);\n        } catch (error) {}\n      }\n\n      var _iteratorNormalCompletion7 = true;\n      var _didIteratorError7 = false;\n      var _iteratorError7 = undefined;\n\n      try {\n        for (var _iterator7 = this.props.extensions[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n          var extension = _step7.value;\n          extension.updateState.call(this, updateParams, extension);\n        }\n      } catch (err) {\n        _didIteratorError7 = true;\n        _iteratorError7 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion7 && _iterator7[\"return\"] != null) {\n            _iterator7[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError7) {\n            throw _iteratorError7;\n          }\n        }\n      }\n\n      this._updateModules(updateParams);\n\n      if (this.isComposite) {\n        this._renderLayers(updateParams);\n      } else {\n        this.setNeedsRedraw();\n\n        this._updateAttributes(this.props);\n\n        if (this.state.model) {\n          this.state.model.setInstanceCount(this.getNumInstances());\n        }\n      }\n\n      this.props = currentProps;\n      this.clearChangeFlags();\n      this.internalState.needsUpdate = false;\n      this.internalState.resetOldProps();\n    }\n  }, {\n    key: \"_finalize\",\n    value: function _finalize() {\n      debug(TRACE_FINALIZE, this);\n      assert(this.internalState && this.state);\n      this.finalizeState(this.context);\n      var _iteratorNormalCompletion8 = true;\n      var _didIteratorError8 = false;\n      var _iteratorError8 = undefined;\n\n      try {\n        for (var _iterator8 = this.props.extensions[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n          var extension = _step8.value;\n          extension.finalizeState.call(this, extension);\n        }\n      } catch (err) {\n        _didIteratorError8 = true;\n        _iteratorError8 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion8 && _iterator8[\"return\"] != null) {\n            _iterator8[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError8) {\n            throw _iteratorError8;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"drawLayer\",\n    value: function drawLayer(_ref7) {\n      var _this = this;\n\n      var _ref7$moduleParameter = _ref7.moduleParameters,\n          moduleParameters = _ref7$moduleParameter === void 0 ? null : _ref7$moduleParameter,\n          _ref7$uniforms = _ref7.uniforms,\n          uniforms = _ref7$uniforms === void 0 ? {} : _ref7$uniforms,\n          _ref7$parameters = _ref7.parameters,\n          parameters = _ref7$parameters === void 0 ? {} : _ref7$parameters;\n\n      this._updateAttributeTransition();\n\n      var currentProps = this.props;\n      this.props = this.internalState.propsInTransition || currentProps;\n      var opacity = this.props.opacity;\n      uniforms.opacity = Math.pow(opacity, 1 / 2.2);\n\n      if (moduleParameters) {\n        this.setModuleParameters(moduleParameters);\n      }\n\n      var getPolygonOffset = this.props.getPolygonOffset;\n      var offsets = getPolygonOffset && getPolygonOffset(uniforms) || [0, 0];\n      setParameters(this.context.gl, {\n        polygonOffset: offsets\n      });\n      withParameters(this.context.gl, parameters, function () {\n        var opts = {\n          moduleParameters: moduleParameters,\n          uniforms: uniforms,\n          parameters: parameters,\n          context: _this.context\n        };\n        var _iteratorNormalCompletion9 = true;\n        var _didIteratorError9 = false;\n        var _iteratorError9 = undefined;\n\n        try {\n          for (var _iterator9 = _this.props.extensions[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n            var extension = _step9.value;\n            extension.draw.call(_this, opts, extension);\n          }\n        } catch (err) {\n          _didIteratorError9 = true;\n          _iteratorError9 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion9 && _iterator9[\"return\"] != null) {\n              _iterator9[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError9) {\n              throw _iteratorError9;\n            }\n          }\n        }\n\n        _this.draw(opts);\n      });\n      this.props = currentProps;\n    }\n  }, {\n    key: \"getChangeFlags\",\n    value: function getChangeFlags() {\n      return this.internalState.changeFlags;\n    }\n  }, {\n    key: \"setChangeFlags\",\n    value: function setChangeFlags(flags) {\n      var changeFlags = this.internalState.changeFlags;\n\n      for (var key in changeFlags) {\n        if (flags[key] && !changeFlags[key]) {\n          changeFlags[key] = flags[key];\n          debug(TRACE_CHANGE_FLAG, this, key, flags);\n        }\n      }\n\n      var propsOrDataChanged = changeFlags.dataChanged || changeFlags.updateTriggersChanged || changeFlags.propsChanged || changeFlags.extensionsChanged;\n      changeFlags.propsOrDataChanged = propsOrDataChanged;\n      changeFlags.somethingChanged = propsOrDataChanged || flags.viewportChanged || flags.stateChanged;\n    }\n  }, {\n    key: \"clearChangeFlags\",\n    value: function clearChangeFlags() {\n      this.internalState.changeFlags = {\n        dataChanged: false,\n        propsChanged: false,\n        updateTriggersChanged: false,\n        viewportChanged: false,\n        stateChanged: false,\n        extensionsChanged: false,\n        propsOrDataChanged: false,\n        somethingChanged: false\n      };\n    }\n  }, {\n    key: \"diffProps\",\n    value: function diffProps(newProps, oldProps) {\n      var changeFlags = _diffProps(newProps, oldProps);\n\n      if (changeFlags.updateTriggersChanged) {\n        for (var key in changeFlags.updateTriggersChanged) {\n          if (changeFlags.updateTriggersChanged[key]) {\n            this.invalidateAttribute(key);\n          }\n        }\n      }\n\n      if (changeFlags.transitionsChanged) {\n        for (var _key in changeFlags.transitionsChanged) {\n          this.internalState.uniformTransitions.add(_key, oldProps[_key], newProps[_key], newProps.transitions[_key]);\n        }\n      }\n\n      return this.setChangeFlags(changeFlags);\n    }\n  }, {\n    key: \"validateProps\",\n    value: function validateProps() {\n      _validateProps(this.props);\n    }\n  }, {\n    key: \"setModuleParameters\",\n    value: function setModuleParameters(moduleParameters) {\n      var _iteratorNormalCompletion10 = true;\n      var _didIteratorError10 = false;\n      var _iteratorError10 = undefined;\n\n      try {\n        for (var _iterator10 = this.getModels()[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n          var model = _step10.value;\n          model.updateModuleSettings(moduleParameters);\n        }\n      } catch (err) {\n        _didIteratorError10 = true;\n        _iteratorError10 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion10 && _iterator10[\"return\"] != null) {\n            _iterator10[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError10) {\n            throw _iteratorError10;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_updateModules\",\n    value: function _updateModules(_ref8) {\n      var props = _ref8.props,\n          oldProps = _ref8.oldProps;\n      var autoHighlight = props.autoHighlight,\n          highlightedObjectIndex = props.highlightedObjectIndex,\n          highlightColor = props.highlightColor;\n\n      if (oldProps.autoHighlight !== autoHighlight || oldProps.highlightedObjectIndex !== highlightedObjectIndex || oldProps.highlightColor !== highlightColor) {\n        var parameters = {};\n\n        if (!autoHighlight) {\n          parameters.pickingSelectedColor = null;\n        }\n\n        if (Array.isArray(highlightColor)) {\n          parameters.pickingHighlightColor = highlightColor;\n        }\n\n        if (Number.isInteger(highlightedObjectIndex)) {\n          parameters.pickingSelectedColor = highlightedObjectIndex >= 0 ? this.encodePickingColor(highlightedObjectIndex) : null;\n        }\n\n        this.setModuleParameters(parameters);\n      }\n    }\n  }, {\n    key: \"_getUpdateParams\",\n    value: function _getUpdateParams() {\n      return {\n        props: this.props,\n        oldProps: this.internalState.getOldProps(),\n        context: this.context,\n        changeFlags: this.internalState.changeFlags\n      };\n    }\n  }, {\n    key: \"_getNeedsRedraw\",\n    value: function _getNeedsRedraw(opts) {\n      if (!this.internalState) {\n        return false;\n      }\n\n      var redraw = false;\n      redraw = redraw || this.internalState.needsRedraw && this.id;\n      this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n      var attributeManager = this.getAttributeManager();\n      var attributeManagerNeedsRedraw = attributeManager && attributeManager.getNeedsRedraw(opts);\n      redraw = redraw || attributeManagerNeedsRedraw;\n      return redraw;\n    }\n  }, {\n    key: \"_getAttributeManager\",\n    value: function _getAttributeManager() {\n      return new AttributeManager(this.context.gl, {\n        id: this.props.id,\n        stats: this.context.stats,\n        timeline: this.context.timeline\n      });\n    }\n  }, {\n    key: \"_initState\",\n    value: function _initState() {\n      assert(!this.internalState && !this.state);\n      assert(isFinite(this.props.coordinateSystem), \"\".concat(this.id, \": invalid coordinateSystem\"));\n\n      var attributeManager = this._getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.addInstanced({\n          instancePickingColors: {\n            type: 5121,\n            size: 3,\n            noAlloc: true,\n            update: this.calculateInstancePickingColors\n          }\n        });\n      }\n\n      this.internalState = new LayerState({\n        attributeManager: attributeManager,\n        layer: this\n      });\n      this.clearChangeFlags();\n      this.state = {};\n      Object.defineProperty(this.state, 'attributeManager', {\n        get: function get() {\n          log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()');\n          return attributeManager;\n        }\n      });\n      this.internalState.layer = this;\n      this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n      this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n      this.internalState.setAsyncProps(this.props);\n    }\n  }, {\n    key: \"_transferState\",\n    value: function _transferState(oldLayer) {\n      debug(TRACE_MATCHED, this, this === oldLayer);\n      var state = oldLayer.state,\n          internalState = oldLayer.internalState;\n      assert(state && internalState);\n\n      if (this === oldLayer) {\n        return;\n      }\n\n      this.internalState = internalState;\n      this.internalState.layer = this;\n      this.state = state;\n      this.internalState.setAsyncProps(this.props);\n      this.diffProps(this.props, this.internalState.getOldProps());\n    }\n  }, {\n    key: \"_onAsyncPropUpdated\",\n    value: function _onAsyncPropUpdated() {\n      this.diffProps(this.props, this.internalState.getOldProps());\n      this.setNeedsUpdate();\n    }\n  }, {\n    key: \"isLoaded\",\n    get: function get() {\n      return this.internalState && !this.internalState.isAsyncPropLoading();\n    }\n  }]);\n\n  return Layer;\n}(Component);\n\nexport { Layer as default };\nLayer.layerName = 'Layer';\nLayer.defaultProps = defaultProps;","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.object.assign\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { uid, assert } from '@luma.gl/webgl';\nexport var DRAW_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\n\nvar Geometry = function () {\n  _createClass(Geometry, null, [{\n    key: \"DRAW_MODE\",\n    get: function get() {\n      return DRAW_MODE;\n    }\n  }]);\n\n  function Geometry() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Geometry);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('geometry') : _props$id,\n        _props$drawMode = props.drawMode,\n        drawMode = _props$drawMode === void 0 ? DRAW_MODE.TRIANGLES : _props$drawMode,\n        _props$attributes = props.attributes,\n        attributes = _props$attributes === void 0 ? {} : _props$attributes,\n        _props$indices = props.indices,\n        indices = _props$indices === void 0 ? null : _props$indices,\n        _props$vertexCount = props.vertexCount,\n        vertexCount = _props$vertexCount === void 0 ? null : _props$vertexCount;\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n  }\n\n  _createClass(Geometry, [{\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      return this.vertexCount;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.indices ? _objectSpread({\n        indices: this.indices\n      }, this.attributes) : this.attributes;\n    }\n  }, {\n    key: \"_print\",\n    value: function _print(attributeName) {\n      return \"Geometry \".concat(this.id, \" attribute \").concat(attributeName);\n    }\n  }, {\n    key: \"_setAttributes\",\n    value: function _setAttributes(attributes, indices) {\n      if (indices) {\n        this.indices = ArrayBuffer.isView(indices) ? {\n          value: indices,\n          size: 1\n        } : indices;\n      }\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        attribute = ArrayBuffer.isView(attribute) ? {\n          value: attribute\n        } : attribute;\n        assert(ArrayBuffer.isView(attribute.value), \"\".concat(this._print(attributeName), \": must be typed array or object with value as typed array\"));\n\n        if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n          attribute.size = 3;\n        }\n\n        if (attributeName === 'indices') {\n          assert(!this.indices);\n          this.indices = attribute;\n        } else {\n          this.attributes[attributeName] = attribute;\n        }\n      }\n\n      if (this.indices && this.indices.isIndexed !== undefined) {\n        this.indices = Object.assign({}, this.indices);\n        delete this.indices.isIndexed;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_calculateVertexCount\",\n    value: function _calculateVertexCount(attributes, indices) {\n      if (indices) {\n        return indices.value.length;\n      }\n\n      var vertexCount = Infinity;\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        var value = attribute.value,\n            size = attribute.size,\n            constant = attribute.constant;\n\n        if (!constant && value && size >= 1) {\n          vertexCount = Math.min(vertexCount, value.length / size);\n        }\n      }\n\n      assert(Number.isFinite(vertexCount));\n      return vertexCount;\n    }\n  }, {\n    key: \"mode\",\n    get: function get() {\n      return this.drawMode;\n    }\n  }]);\n\n  return Geometry;\n}();\n\nexport { Geometry as default };","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.max-safe-integer\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { Layer, project32, picking } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/core';\nimport vs from './scatterplot-layer-vertex.glsl';\nimport fs from './scatterplot-layer-fragment.glsl';\nvar DEFAULT_COLOR = [0, 0, 0, 255];\nvar defaultProps = {\n  radiusScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  radiusMinPixels: {\n    type: 'number',\n    min: 0,\n    value: 0\n  },\n  radiusMaxPixels: {\n    type: 'number',\n    min: 0,\n    value: Number.MAX_SAFE_INTEGER\n  },\n  lineWidthUnits: 'meters',\n  lineWidthScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  lineWidthMinPixels: {\n    type: 'number',\n    min: 0,\n    value: 0\n  },\n  lineWidthMaxPixels: {\n    type: 'number',\n    min: 0,\n    value: Number.MAX_SAFE_INTEGER\n  },\n  stroked: false,\n  filled: true,\n  getPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.position;\n    }\n  },\n  getRadius: {\n    type: 'accessor',\n    value: 1\n  },\n  getFillColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineWidth: {\n    type: 'accessor',\n    value: 1\n  },\n  strokeWidth: {\n    deprecatedFor: 'getLineWidth'\n  },\n  outline: {\n    deprecatedFor: 'stroked'\n  },\n  getColor: {\n    deprecatedFor: ['getFillColor', 'getLineColor']\n  }\n};\n\nvar ScatterplotLayer = function (_Layer) {\n  _inherits(ScatterplotLayer, _Layer);\n\n  function ScatterplotLayer() {\n    _classCallCheck(this, ScatterplotLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ScatterplotLayer).apply(this, arguments));\n  }\n\n  _createClass(ScatterplotLayer, [{\n    key: \"getShaders\",\n    value: function getShaders(id) {\n      return _get(_getPrototypeOf(ScatterplotLayer.prototype), \"getShaders\", this).call(this, {\n        vs: vs,\n        fs: fs,\n        modules: [project32, picking]\n      });\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      this.getAttributeManager().addInstanced({\n        instancePositions: {\n          size: 3,\n          type: 5130,\n          fp64: this.use64bitPositions(),\n          transition: true,\n          accessor: 'getPosition'\n        },\n        instanceRadius: {\n          size: 1,\n          transition: true,\n          accessor: 'getRadius',\n          defaultValue: 1\n        },\n        instanceFillColors: {\n          size: this.props.colorFormat.length,\n          transition: true,\n          normalized: true,\n          type: 5121,\n          accessor: 'getFillColor',\n          defaultValue: [0, 0, 0, 255]\n        },\n        instanceLineColors: {\n          size: this.props.colorFormat.length,\n          transition: true,\n          normalized: true,\n          type: 5121,\n          accessor: 'getLineColor',\n          defaultValue: [0, 0, 0, 255]\n        },\n        instanceLineWidths: {\n          size: 1,\n          transition: true,\n          accessor: 'getLineWidth',\n          defaultValue: 1\n        }\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref) {\n      var props = _ref.props,\n          oldProps = _ref.oldProps,\n          changeFlags = _ref.changeFlags;\n\n      _get(_getPrototypeOf(ScatterplotLayer.prototype), \"updateState\", this).call(this, {\n        props: props,\n        oldProps: oldProps,\n        changeFlags: changeFlags\n      });\n\n      if (changeFlags.extensionsChanged) {\n        var gl = this.context.gl;\n\n        if (this.state.model) {\n          this.state.model[\"delete\"]();\n        }\n\n        this.setState({\n          model: this._getModel(gl)\n        });\n        this.getAttributeManager().invalidateAll();\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref2) {\n      var uniforms = _ref2.uniforms;\n      var viewport = this.context.viewport;\n      var _this$props = this.props,\n          radiusScale = _this$props.radiusScale,\n          radiusMinPixels = _this$props.radiusMinPixels,\n          radiusMaxPixels = _this$props.radiusMaxPixels,\n          stroked = _this$props.stroked,\n          filled = _this$props.filled,\n          lineWidthUnits = _this$props.lineWidthUnits,\n          lineWidthScale = _this$props.lineWidthScale,\n          lineWidthMinPixels = _this$props.lineWidthMinPixels,\n          lineWidthMaxPixels = _this$props.lineWidthMaxPixels;\n      var widthMultiplier = lineWidthUnits === 'pixels' ? viewport.metersPerPixel : 1;\n      this.state.model.setUniforms(uniforms).setUniforms({\n        stroked: stroked ? 1 : 0,\n        filled: filled,\n        radiusScale: radiusScale,\n        radiusMinPixels: radiusMinPixels,\n        radiusMaxPixels: radiusMaxPixels,\n        lineWidthScale: lineWidthScale * widthMultiplier,\n        lineWidthMinPixels: lineWidthMinPixels,\n        lineWidthMaxPixels: lineWidthMaxPixels\n      }).draw();\n    }\n  }, {\n    key: \"_getModel\",\n    value: function _getModel(gl) {\n      var positions = [-1, -1, 0, -1, 1, 0, 1, 1, 0, 1, -1, 0];\n      return new Model(gl, Object.assign(this.getShaders(), {\n        id: this.props.id,\n        geometry: new Geometry({\n          drawMode: 6,\n          vertexCount: 4,\n          attributes: {\n            positions: {\n              size: 3,\n              value: new Float32Array(positions)\n            }\n          }\n        }),\n        isInstanced: true\n      }));\n    }\n  }]);\n\n  return ScatterplotLayer;\n}(Layer);\n\nexport { ScatterplotLayer as default };\nScatterplotLayer.layerName = 'ScatterplotLayer';\nScatterplotLayer.defaultProps = defaultProps;","export default \"#define SHADER_NAME scatterplot-layer-vertex-shader\\n\\nattribute vec3 positions;\\n\\nattribute vec3 instancePositions;\\nattribute vec3 instancePositions64Low;\\nattribute float instanceRadius;\\nattribute float instanceLineWidths;\\nattribute vec4 instanceFillColors;\\nattribute vec4 instanceLineColors;\\nattribute vec3 instancePickingColors;\\n\\nuniform float opacity;\\nuniform float radiusScale;\\nuniform float radiusMinPixels;\\nuniform float radiusMaxPixels;\\nuniform float lineWidthScale;\\nuniform float lineWidthMinPixels;\\nuniform float lineWidthMaxPixels;\\nuniform float stroked;\\nuniform bool filled;\\n\\nvarying vec4 vFillColor;\\nvarying vec4 vLineColor;\\nvarying vec2 unitPosition;\\nvarying float innerUnitRadius;\\nvarying float outerRadiusPixels;\\n\\nvoid main(void) {\\n  geometry.worldPosition = instancePositions;\\n  outerRadiusPixels = clamp(\\n    project_size_to_pixel(radiusScale * instanceRadius),\\n    radiusMinPixels, radiusMaxPixels\\n  );\\n  float lineWidthPixels = clamp(\\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\\n    lineWidthMinPixels, lineWidthMaxPixels\\n  );\\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\\n  unitPosition = positions.xy;\\n  geometry.uv = unitPosition;\\n  geometry.pickingColor = instancePickingColors;\\n\\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\\n  \\n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\\n  DECKGL_FILTER_SIZE(offset, geometry);\\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\\n}\\n\";","export default \"#define SHADER_NAME scatterplot-layer-fragment-shader\\n\\nprecision highp float;\\n\\nuniform bool filled;\\nuniform float stroked;\\n\\nvarying vec4 vFillColor;\\nvarying vec4 vLineColor;\\nvarying vec2 unitPosition;\\nvarying float innerUnitRadius;\\nvarying float outerRadiusPixels;\\n\\nvoid main(void) {\\n  geometry.uv = unitPosition;\\n\\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\\n\\n  if (inCircle == 0.0) {\\n    discard;\\n  }\\n\\n  if (stroked > 0.5) {\\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\\n    if (filled) {\\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\\n    } else {\\n      if (isLine == 0.0) {\\n        discard;\\n      }\\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\\n    }\\n  } else if (filled) {\\n    gl_FragColor = vFillColor;\\n  } else {\\n    discard;\\n  }\\n\\n  gl_FragColor.a *= inCircle;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.repeat\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar channelHandles = 1;\nvar animationHandles = 1;\nexport var Timeline = function () {\n  function Timeline() {\n    _classCallCheck(this, Timeline);\n\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  _createClass(Timeline, [{\n    key: \"addChannel\",\n    value: function addChannel(props) {\n      var _props$delay = props.delay,\n          delay = _props$delay === void 0 ? 0 : _props$delay,\n          _props$duration = props.duration,\n          duration = _props$duration === void 0 ? Number.POSITIVE_INFINITY : _props$duration,\n          _props$rate = props.rate,\n          rate = _props$rate === void 0 ? 1 : _props$rate,\n          _props$repeat = props.repeat,\n          repeat = _props$repeat === void 0 ? 1 : _props$repeat;\n      var handle = channelHandles++;\n      var channel = {\n        time: 0,\n        delay: delay,\n        duration: duration,\n        rate: rate,\n        repeat: repeat\n      };\n\n      this._setChannelTime(channel, this.time);\n\n      this.channels.set(handle, channel);\n      return handle;\n    }\n  }, {\n    key: \"removeChannel\",\n    value: function removeChannel(handle) {\n      this.channels[\"delete\"](handle);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.animations[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              animationHandle = _step$value[0],\n              animation = _step$value[1];\n\n          if (animation.channel === handle) {\n            this.detachAnimation(animationHandle);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isFinished\",\n    value: function isFinished(handle) {\n      var channel = this.channels.get(handle);\n\n      if (channel === undefined) {\n        return false;\n      }\n\n      return this.time >= channel.delay + channel.duration * channel.repeat;\n    }\n  }, {\n    key: \"getTime\",\n    value: function getTime(handle) {\n      if (handle === undefined) {\n        return this.time;\n      }\n\n      var channel = this.channels.get(handle);\n\n      if (channel === undefined) {\n        return -1;\n      }\n\n      return channel.time;\n    }\n  }, {\n    key: \"setTime\",\n    value: function setTime(time) {\n      this.time = Math.max(0, time);\n      var channels = this.channels.values();\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = channels[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var channel = _step2.value;\n\n          this._setChannelTime(channel, this.time);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var animations = this.animations.values();\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = animations[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var animationData = _step3.value;\n          var animation = animationData.animation,\n              _channel = animationData.channel;\n          animation.setTime(this.getTime(_channel));\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.playing = true;\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.playing = false;\n      this.lastEngineTime = -1;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setTime(0);\n    }\n  }, {\n    key: \"attachAnimation\",\n    value: function attachAnimation(animation, channelHandle) {\n      var animationHandle = animationHandles++;\n      this.animations.set(animationHandle, {\n        animation: animation,\n        channel: channelHandle\n      });\n      animation.setTime(this.getTime(channelHandle));\n      return animationHandle;\n    }\n  }, {\n    key: \"detachAnimation\",\n    value: function detachAnimation(handle) {\n      this.animations[\"delete\"](handle);\n    }\n  }, {\n    key: \"update\",\n    value: function update(engineTime) {\n      if (this.playing) {\n        if (this.lastEngineTime === -1) {\n          this.lastEngineTime = engineTime;\n        }\n\n        this.setTime(this.time + (engineTime - this.lastEngineTime));\n        this.lastEngineTime = engineTime;\n      }\n    }\n  }, {\n    key: \"_setChannelTime\",\n    value: function _setChannelTime(channel, time) {\n      var offsetTime = time - channel.delay;\n      var totalDuration = channel.duration * channel.repeat;\n\n      if (offsetTime >= totalDuration) {\n        channel.time = channel.duration * channel.rate;\n      } else {\n        channel.time = Math.max(0, offsetTime) % channel.duration;\n        channel.time *= channel.rate;\n      }\n    }\n  }]);\n\n  return Timeline;\n}();","import \"core-js/modules/es6.math.log2\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.bind\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport log from '../utils/log';\nimport { createMat4, extractCameraVectors, getFrustumPlanes as _getFrustumPlanes } from '../utils/math-utils';\nimport { Matrix4, Vector3, equals as _equals } from 'math.gl';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { getDistanceScales as _getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from '../lib/constants';\nvar DEGREES_TO_RADIANS = Math.PI / 180;\nvar IDENTITY = createMat4();\nvar ZERO_VECTOR = [0, 0, 0];\nvar DEFAULT_ZOOM = 0;\nvar DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\n\nvar Viewport = function () {\n  function Viewport() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Viewport);\n\n    var _opts$id = opts.id,\n        id = _opts$id === void 0 ? null : _opts$id,\n        _opts$x = opts.x,\n        x = _opts$x === void 0 ? 0 : _opts$x,\n        _opts$y = opts.y,\n        y = _opts$y === void 0 ? 0 : _opts$y,\n        _opts$width = opts.width,\n        width = _opts$width === void 0 ? 1 : _opts$width,\n        _opts$height = opts.height,\n        height = _opts$height === void 0 ? 1 : _opts$height;\n    this.id = id || this.constructor.displayName || 'viewport';\n    this.x = x;\n    this.y = y;\n    this.width = width || 1;\n    this.height = height || 1;\n    this._frustumPlanes = {};\n\n    this._initViewMatrix(opts);\n\n    this._initProjectionMatrix(opts);\n\n    this._initPixelMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  _createClass(Viewport, [{\n    key: \"equals\",\n    value: function equals(viewport) {\n      if (!(viewport instanceof Viewport)) {\n        return false;\n      }\n\n      return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && _equals(viewport.projectionMatrix, this.projectionMatrix) && _equals(viewport.viewMatrix, this.viewMatrix);\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$topLeft = _ref.topLeft,\n          topLeft = _ref$topLeft === void 0 ? true : _ref$topLeft;\n\n      var worldPosition = this.projectPosition(xyz);\n      var coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n\n      var _coord = _slicedToArray(coord, 2),\n          x = _coord[0],\n          y = _coord[1];\n\n      var y2 = topLeft ? y : this.height - y;\n      return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$topLeft = _ref2.topLeft,\n          topLeft = _ref2$topLeft === void 0 ? true : _ref2$topLeft,\n          targetZ = _ref2.targetZ;\n\n      var _xyz = _slicedToArray(xyz, 3),\n          x = _xyz[0],\n          y = _xyz[1],\n          z = _xyz[2];\n\n      var y2 = topLeft ? y : this.height - y;\n      var targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n      var coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n\n      var _this$unprojectPositi = this.unprojectPosition(coord),\n          _this$unprojectPositi2 = _slicedToArray(_this$unprojectPositi, 3),\n          X = _this$unprojectPositi2[0],\n          Y = _this$unprojectPositi2[1],\n          Z = _this$unprojectPositi2[2];\n\n      if (Number.isFinite(z)) {\n        return [X, Y, Z];\n      }\n\n      return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      var _this$projectFlat = this.projectFlat(xyz),\n          _this$projectFlat2 = _slicedToArray(_this$projectFlat, 2),\n          X = _this$projectFlat2[0],\n          Y = _this$projectFlat2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"unprojectPosition\",\n    value: function unprojectPosition(xyz) {\n      var _this$unprojectFlat = this.unprojectFlat(xyz),\n          _this$unprojectFlat2 = _slicedToArray(_this$unprojectFlat, 2),\n          X = _this$unprojectFlat2[0],\n          Y = _this$unprojectFlat2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"projectFlat\",\n    value: function projectFlat(xyz) {\n      if (this.isGeospatial) {\n        return lngLatToWorld(xyz);\n      }\n\n      return xyz;\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xyz) {\n      if (this.isGeospatial) {\n        return worldToLngLat(xyz);\n      }\n\n      return xyz;\n    }\n  }, {\n    key: \"getDistanceScales\",\n    value: function getDistanceScales() {\n      var coordinateOrigin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (coordinateOrigin) {\n        return _getDistanceScales({\n          longitude: coordinateOrigin[0],\n          latitude: coordinateOrigin[1],\n          highPrecision: true\n        });\n      }\n\n      return this.distanceScales;\n    }\n  }, {\n    key: \"containsPixel\",\n    value: function containsPixel(_ref3) {\n      var x = _ref3.x,\n          y = _ref3.y,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height;\n      return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n    }\n  }, {\n    key: \"getFrustumPlanes\",\n    value: function getFrustumPlanes() {\n      if (this._frustumPlanes.near) {\n        return this._frustumPlanes;\n      }\n\n      var _this$projectionProps = this.projectionProps,\n          near = _this$projectionProps.near,\n          far = _this$projectionProps.far,\n          fovyRadians = _this$projectionProps.fovyRadians,\n          aspect = _this$projectionProps.aspect;\n      Object.assign(this._frustumPlanes, _getFrustumPlanes({\n        aspect: aspect,\n        near: near,\n        far: far,\n        fovyRadians: fovyRadians,\n        position: this.cameraPosition,\n        direction: this.cameraDirection,\n        up: this.cameraUp,\n        right: this.cameraRight\n      }));\n      return this._frustumPlanes;\n    }\n  }, {\n    key: \"getCameraPosition\",\n    value: function getCameraPosition() {\n      return this.cameraPosition;\n    }\n  }, {\n    key: \"getCameraDirection\",\n    value: function getCameraDirection() {\n      return this.cameraDirection;\n    }\n  }, {\n    key: \"getCameraUp\",\n    value: function getCameraUp() {\n      return this.cameraUp;\n    }\n  }, {\n    key: \"_createProjectionMatrix\",\n    value: function _createProjectionMatrix(_ref4) {\n      var orthographic = _ref4.orthographic,\n          fovyRadians = _ref4.fovyRadians,\n          aspect = _ref4.aspect,\n          focalDistance = _ref4.focalDistance,\n          near = _ref4.near,\n          far = _ref4.far;\n      return orthographic ? new Matrix4().orthographic({\n        fovy: fovyRadians,\n        aspect: aspect,\n        focalDistance: focalDistance,\n        near: near,\n        far: far\n      }) : new Matrix4().perspective({\n        fovy: fovyRadians,\n        aspect: aspect,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"_initViewMatrix\",\n    value: function _initViewMatrix(opts) {\n      var _opts$viewMatrix = opts.viewMatrix,\n          viewMatrix = _opts$viewMatrix === void 0 ? IDENTITY : _opts$viewMatrix,\n          _opts$longitude = opts.longitude,\n          longitude = _opts$longitude === void 0 ? null : _opts$longitude,\n          _opts$latitude = opts.latitude,\n          latitude = _opts$latitude === void 0 ? null : _opts$latitude,\n          _opts$zoom = opts.zoom,\n          zoom = _opts$zoom === void 0 ? null : _opts$zoom,\n          _opts$position = opts.position,\n          position = _opts$position === void 0 ? null : _opts$position,\n          _opts$modelMatrix = opts.modelMatrix,\n          modelMatrix = _opts$modelMatrix === void 0 ? null : _opts$modelMatrix,\n          _opts$focalDistance = opts.focalDistance,\n          focalDistance = _opts$focalDistance === void 0 ? 1 : _opts$focalDistance,\n          _opts$distanceScales = opts.distanceScales,\n          distanceScales = _opts$distanceScales === void 0 ? null : _opts$distanceScales;\n      this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n      this.zoom = zoom;\n\n      if (!Number.isFinite(this.zoom)) {\n        this.zoom = this.isGeospatial ? getMeterZoom({\n          latitude: latitude\n        }) + Math.log2(focalDistance) : DEFAULT_ZOOM;\n      }\n\n      var scale = Math.pow(2, this.zoom);\n      this.scale = scale;\n      this.distanceScales = this.isGeospatial ? _getDistanceScales({\n        latitude: latitude,\n        longitude: longitude\n      }) : distanceScales || DEFAULT_DISTANCE_SCALES;\n      this.focalDistance = focalDistance;\n      this.distanceScales.metersPerUnit = new Vector3(this.distanceScales.metersPerUnit);\n      this.distanceScales.unitsPerMeter = new Vector3(this.distanceScales.unitsPerMeter);\n      this.position = ZERO_VECTOR;\n      this.meterOffset = ZERO_VECTOR;\n\n      if (position) {\n        this.position = position;\n        this.modelMatrix = modelMatrix;\n        this.meterOffset = modelMatrix ? modelMatrix.transformVector(position) : position;\n      }\n\n      if (this.isGeospatial) {\n        this.longitude = longitude;\n        this.latitude = latitude;\n        this.center = this._getCenterInWorld({\n          longitude: longitude,\n          latitude: latitude\n        });\n      } else {\n        this.center = position ? this.projectPosition(position) : [0, 0, 0];\n      }\n\n      this.viewMatrixUncentered = viewMatrix;\n      this.viewMatrix = new Matrix4().multiplyRight(this.viewMatrixUncentered).translate(new Vector3(this.center || ZERO_VECTOR).negate());\n    }\n  }, {\n    key: \"_getCenterInWorld\",\n    value: function _getCenterInWorld(_ref5) {\n      var longitude = _ref5.longitude,\n          latitude = _ref5.latitude;\n      var meterOffset = this.meterOffset,\n          distanceScales = this.distanceScales;\n      var center2d = this.projectFlat([longitude, latitude]);\n      var center = new Vector3(center2d[0], center2d[1], 0);\n\n      if (meterOffset) {\n        var commonPosition = new Vector3(meterOffset).scale(distanceScales.unitsPerMeter);\n        center.add(commonPosition);\n      }\n\n      return center;\n    }\n  }, {\n    key: \"_initProjectionMatrix\",\n    value: function _initProjectionMatrix(opts) {\n      var _opts$projectionMatri = opts.projectionMatrix,\n          projectionMatrix = _opts$projectionMatri === void 0 ? null : _opts$projectionMatri,\n          _opts$orthographic = opts.orthographic,\n          orthographic = _opts$orthographic === void 0 ? false : _opts$orthographic,\n          fovyRadians = opts.fovyRadians,\n          _opts$fovy = opts.fovy,\n          fovy = _opts$fovy === void 0 ? 75 : _opts$fovy,\n          _opts$near = opts.near,\n          near = _opts$near === void 0 ? 0.1 : _opts$near,\n          _opts$far = opts.far,\n          far = _opts$far === void 0 ? 1000 : _opts$far,\n          _opts$focalDistance2 = opts.focalDistance,\n          focalDistance = _opts$focalDistance2 === void 0 ? 1 : _opts$focalDistance2;\n      this.projectionProps = {\n        orthographic: orthographic,\n        fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n        aspect: this.width / this.height,\n        focalDistance: focalDistance,\n        near: near,\n        far: far\n      };\n      this.projectionMatrix = projectionMatrix || this._createProjectionMatrix(this.projectionProps);\n    }\n  }, {\n    key: \"_initPixelMatrices\",\n    value: function _initPixelMatrices() {\n      var vpm = createMat4();\n      mat4.multiply(vpm, vpm, this.projectionMatrix);\n      mat4.multiply(vpm, vpm, this.viewMatrix);\n      this.viewProjectionMatrix = vpm;\n      this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n\n      var _extractCameraVectors = extractCameraVectors({\n        viewMatrix: this.viewMatrix,\n        viewMatrixInverse: this.viewMatrixInverse\n      }),\n          eye = _extractCameraVectors.eye,\n          direction = _extractCameraVectors.direction,\n          up = _extractCameraVectors.up,\n          right = _extractCameraVectors.right;\n\n      this.cameraPosition = eye;\n      this.cameraDirection = direction;\n      this.cameraUp = up;\n      this.cameraRight = right;\n      var viewportMatrix = createMat4();\n      var pixelProjectionMatrix = createMat4();\n      mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n      mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n      mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n      this.pixelProjectionMatrix = pixelProjectionMatrix;\n      this.viewportMatrix = viewportMatrix;\n      this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n\n      if (!this.pixelUnprojectionMatrix) {\n        log.warn('Pixel project matrix not invertible')();\n      }\n    }\n  }, {\n    key: \"metersPerPixel\",\n    get: function get() {\n      return this.distanceScales.metersPerUnit[2] / this.scale;\n    }\n  }, {\n    key: \"projectionMode\",\n    get: function get() {\n      if (this.isGeospatial) {\n        return this.zoom < 12 ? PROJECTION_MODE.WEB_MERCATOR : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n      }\n\n      return PROJECTION_MODE.IDENTITY;\n    }\n  }]);\n\n  return Viewport;\n}();\n\nexport { Viewport as default };\nViewport.displayName = 'Viewport';","var vs = \"\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry;\\n\";\nvar fs = \"\\n#define SMOOTH_EDGE_RADIUS 0.5\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n\";\nexport default {\n  name: 'geometry',\n  vs: vs,\n  fs: fs\n};","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { ProgramManager } from '@luma.gl/core';\nimport { gouraudLighting, phongLighting } from '@luma.gl/core';\nimport geometry from './misc/geometry';\nimport project from './project/project';\nimport project32 from './project32/project32';\nimport shadow from './shadow/shadow';\nimport picking from './picking/picking';\nvar DEFAULT_MODULES = [geometry, project];\nvar SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nexport function createProgramManager(gl) {\n  var programManager = ProgramManager.getDefaultProgramManager(gl);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = DEFAULT_MODULES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var shaderModule = _step.value;\n      programManager.addDefaultModule(shaderModule);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = SHADER_HOOKS[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var shaderHook = _step2.value;\n      programManager.addShaderHook(shaderHook);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return programManager;\n}\nexport { picking, project, project32, gouraudLighting, phongLighting, shadow };","import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport assert from '../utils/assert';\nimport { Timeline } from '@luma.gl/core';\nimport Layer from './layer';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { Stats } from 'probe.gl';\nimport Viewport from '../viewports/viewport';\nimport { createProgramManager } from '../shaderlib';\nvar TRACE_SET_LAYERS = 'layerManager.setLayers';\nvar TRACE_ACTIVATE_VIEWPORT = 'layerManager.activateViewport';\nvar INITIAL_CONTEXT = Object.seal({\n  layerManager: null,\n  deck: null,\n  gl: null,\n  stats: null,\n  shaderCache: null,\n  pickingFBO: null,\n  mousePosition: null,\n  userData: {}\n});\n\nvar layerName = function layerName(layer) {\n  return layer instanceof Layer ? \"\".concat(layer) : !layer ? 'null' : 'invalid';\n};\n\nvar LayerManager = function () {\n  function LayerManager(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        deck = _ref.deck,\n        stats = _ref.stats,\n        _ref$viewport = _ref.viewport,\n        viewport = _ref$viewport === void 0 ? null : _ref$viewport,\n        _ref$timeline = _ref.timeline,\n        timeline = _ref$timeline === void 0 ? null : _ref$timeline;\n\n    _classCallCheck(this, LayerManager);\n\n    this.lastRenderedLayers = [];\n    this.layers = [];\n    this.context = Object.assign({}, INITIAL_CONTEXT, {\n      layerManager: this,\n      deck: deck,\n      gl: gl,\n      programManager: gl && createProgramManager(gl),\n      stats: stats || new Stats({\n        id: 'deck.gl'\n      }),\n      viewport: viewport || new Viewport({\n        id: 'DEFAULT-INITIAL-VIEWPORT'\n      }),\n      timeline: timeline || new Timeline()\n    });\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = false;\n    this._debug = false;\n    this._onError = null;\n    this.activateViewport = this.activateViewport.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(LayerManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.layers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var layer = _step.value;\n\n          this._finalizeLayer(layer);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.layers[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var layer = _step2.value;\n          var layerNeedsRedraw = layer.getNeedsRedraw(opts);\n          redraw = redraw || layerNeedsRedraw;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"needsUpdate\",\n    value: function needsUpdate() {\n      return this._needsUpdate;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw(reason) {\n      this._needsRedraw = this._needsRedraw || reason;\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate(reason) {\n      this._needsUpdate = this._needsUpdate || reason;\n    }\n  }, {\n    key: \"getLayers\",\n    value: function getLayers() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$layerIds = _ref2.layerIds,\n          layerIds = _ref2$layerIds === void 0 ? null : _ref2$layerIds;\n\n      return layerIds ? this.layers.filter(function (layer) {\n        return layerIds.find(function (layerId) {\n          return layer.id.indexOf(layerId) === 0;\n        });\n      }) : this.layers;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('debug' in props) {\n        this._debug = props.debug;\n      }\n\n      if ('userData' in props) {\n        this.context.userData = props.userData;\n      }\n\n      if ('layers' in props) {\n        this.setLayers(props.layers);\n      }\n\n      if ('onError' in props) {\n        this._onError = props.onError;\n      }\n    }\n  }, {\n    key: \"setLayers\",\n    value: function setLayers(newLayers) {\n      var forceUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var shouldUpdate = forceUpdate || newLayers !== this.lastRenderedLayers;\n      debug(TRACE_SET_LAYERS, this, shouldUpdate, newLayers);\n\n      if (!shouldUpdate) {\n        return this;\n      }\n\n      this.lastRenderedLayers = newLayers;\n      newLayers = flatten(newLayers, Boolean);\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = newLayers[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var layer = _step3.value;\n          layer.context = this.context;\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      this._updateLayers(this.layers, newLayers);\n\n      return this;\n    }\n  }, {\n    key: \"updateLayers\",\n    value: function updateLayers() {\n      var reason = this.needsUpdate();\n\n      if (reason) {\n        this.setNeedsRedraw(\"updating layers: \".concat(reason));\n        var forceUpdate = true;\n        this.setLayers(this.lastRenderedLayers, forceUpdate);\n      }\n    }\n  }, {\n    key: \"activateViewport\",\n    value: function activateViewport(viewport) {\n      assert(viewport, 'LayerManager: viewport not set');\n      var oldViewport = this.context.viewport;\n      var viewportChanged = !oldViewport || !viewport.equals(oldViewport);\n\n      if (viewportChanged) {\n        debug(TRACE_ACTIVATE_VIEWPORT, this, viewport);\n        this.context.viewport = viewport;\n        var changeFlags = {\n          viewportChanged: true\n        };\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = this.layers[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var layer = _step4.value;\n            layer.setChangeFlags(changeFlags);\n\n            this._updateLayer(layer);\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n              _iterator4[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_handleError\",\n    value: function _handleError(stage, error, layer) {\n      if (this._onError) {\n        this._onError(error, layer);\n      } else {\n        log.error(\"error during \".concat(stage, \" of \").concat(layerName(layer)), error)();\n      }\n    }\n  }, {\n    key: \"_updateLayers\",\n    value: function _updateLayers(oldLayers, newLayers) {\n      var oldLayerMap = {};\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = oldLayers[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var oldLayer = _step5.value;\n\n          if (oldLayerMap[oldLayer.id]) {\n            log.warn(\"Multiple old layers with same id \".concat(layerName(oldLayer)))();\n          } else {\n            oldLayerMap[oldLayer.id] = oldLayer;\n          }\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n            _iterator5[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      var generatedLayers = [];\n\n      this._updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers);\n\n      this._finalizeOldLayers(oldLayerMap);\n\n      var needsUpdate = false;\n\n      for (var _i = 0, _generatedLayers = generatedLayers; _i < _generatedLayers.length; _i++) {\n        var layer = _generatedLayers[_i];\n\n        if (layer.hasUniformTransition()) {\n          needsUpdate = true;\n          break;\n        }\n      }\n\n      this._needsUpdate = needsUpdate;\n      this.layers = generatedLayers;\n    }\n  }, {\n    key: \"_updateSublayersRecursively\",\n    value: function _updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers) {\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = newLayers[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var newLayer = _step6.value;\n          newLayer.context = this.context;\n          var oldLayer = oldLayerMap[newLayer.id];\n\n          if (oldLayer === null) {\n            log.warn(\"Multiple new layers with same id \".concat(layerName(newLayer)))();\n          }\n\n          oldLayerMap[newLayer.id] = null;\n          var sublayers = null;\n\n          try {\n            if (this._debug && oldLayer !== newLayer) {\n              newLayer.validateProps();\n            }\n\n            if (!oldLayer) {\n              this._initializeLayer(newLayer);\n            } else {\n              this._transferLayerState(oldLayer, newLayer);\n\n              this._updateLayer(newLayer);\n            }\n\n            generatedLayers.push(newLayer);\n            sublayers = newLayer.isComposite && newLayer.getSubLayers();\n          } catch (err) {\n            this._handleError('matching', err, newLayer);\n          }\n\n          if (sublayers) {\n            this._updateSublayersRecursively(sublayers, oldLayerMap, generatedLayers);\n          }\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6[\"return\"] != null) {\n            _iterator6[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_finalizeOldLayers\",\n    value: function _finalizeOldLayers(oldLayerMap) {\n      for (var layerId in oldLayerMap) {\n        var layer = oldLayerMap[layerId];\n\n        if (layer) {\n          this._finalizeLayer(layer);\n        }\n      }\n    }\n  }, {\n    key: \"_initializeLayer\",\n    value: function _initializeLayer(layer) {\n      try {\n        layer._initialize();\n\n        layer.lifecycle = LIFECYCLE.INITIALIZED;\n      } catch (err) {\n        this._handleError('initialization', err, layer);\n      }\n    }\n  }, {\n    key: \"_transferLayerState\",\n    value: function _transferLayerState(oldLayer, newLayer) {\n      newLayer._transferState(oldLayer);\n\n      newLayer.lifecycle = LIFECYCLE.MATCHED;\n\n      if (newLayer !== oldLayer) {\n        oldLayer.lifecycle = LIFECYCLE.AWAITING_GC;\n      }\n    }\n  }, {\n    key: \"_updateLayer\",\n    value: function _updateLayer(layer) {\n      try {\n        layer._update();\n      } catch (err) {\n        this._handleError('update', err, layer);\n      }\n    }\n  }, {\n    key: \"_finalizeLayer\",\n    value: function _finalizeLayer(layer) {\n      this._needsRedraw = this._needsRedraw || \"finalized \".concat(layerName(layer));\n      layer.lifecycle = LIFECYCLE.AWAITING_FINALIZATION;\n\n      try {\n        layer._finalize();\n\n        layer.lifecycle = LIFECYCLE.FINALIZED;\n      } catch (err) {\n        this._handleError('finalization', err, layer);\n      }\n    }\n  }]);\n\n  return LayerManager;\n}();\n\nexport { LayerManager as default };","import \"core-js/modules/es6.array.is-array\";\nexport function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  for (var key in a) {\n    var aValue = a[key];\n    var bValue = b[key];\n    var equals = aValue === bValue || Array.isArray(aValue) && Array.isArray(bValue) && deepEqual(aValue, bValue);\n\n    if (!equals) {\n      return false;\n    }\n  }\n\n  return true;\n}","import \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.object.seal\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport assert from '../utils/assert';\nimport { deepEqual } from '../utils/deep-equal';\nimport log from '../utils/log';\nimport { flatten } from '../utils/flatten';\n\nvar ViewManager = function () {\n  function ViewManager() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ViewManager);\n\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = true;\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractiveStateChange: props.onInteractiveStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  _createClass(ViewManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var key in this.controllers) {\n        if (this.controllers[key]) {\n          this.controllers[key].finalize();\n        }\n      }\n\n      this.controllers = {};\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate(reason) {\n      this._needsUpdate = this._needsUpdate || reason;\n      this._needsRedraw = this._needsRedraw || reason;\n    }\n  }, {\n    key: \"updateViewStates\",\n    value: function updateViewStates() {\n      for (var viewId in this.controllers) {\n        var controller = this.controllers[viewId];\n\n        if (controller) {\n          controller.updateTransition();\n        }\n      }\n    }\n  }, {\n    key: \"getViewports\",\n    value: function getViewports(rect) {\n      if (rect) {\n        return this._viewports.filter(function (viewport) {\n          return viewport.containsPixel(rect);\n        });\n      }\n\n      return this._viewports;\n    }\n  }, {\n    key: \"getViews\",\n    value: function getViews() {\n      var viewMap = {};\n      this.views.forEach(function (view) {\n        viewMap[view.id] = view;\n      });\n      return viewMap;\n    }\n  }, {\n    key: \"getView\",\n    value: function getView(viewOrViewId) {\n      return typeof viewOrViewId === 'string' ? this.views.find(function (view) {\n        return view.id === viewOrViewId;\n      }) : viewOrViewId;\n    }\n  }, {\n    key: \"getViewState\",\n    value: function getViewState(viewId) {\n      var view = this.getView(viewId);\n      var viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n      return view ? view.filterViewState(viewState) : viewState;\n    }\n  }, {\n    key: \"getViewport\",\n    value: function getViewport(viewId) {\n      return this._viewportMap[viewId];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz, opts) {\n      var viewports = this.getViewports();\n      var pixel = {\n        x: xyz[0],\n        y: xyz[1]\n      };\n\n      for (var i = viewports.length - 1; i >= 0; --i) {\n        var viewport = viewports[i];\n\n        if (viewport.containsPixel(pixel)) {\n          var p = xyz.slice();\n          p[0] -= viewport.x;\n          p[1] -= viewport.y;\n          return viewport.unproject(p, opts);\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('views' in props) {\n        this._setViews(props.views);\n      }\n\n      if ('viewState' in props) {\n        this._setViewState(props.viewState);\n      }\n\n      if ('width' in props || 'height' in props) {\n        this._setSize(props.width, props.height);\n      }\n\n      if (!this._isUpdating) {\n        this._update();\n      }\n    }\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      this._isUpdating = true;\n\n      if (this._needsUpdate) {\n        this._needsUpdate = false;\n\n        this._rebuildViewports();\n      }\n\n      if (this._needsUpdate) {\n        this._needsUpdate = false;\n\n        this._rebuildViewports();\n      }\n\n      this._isUpdating = false;\n    }\n  }, {\n    key: \"_setSize\",\n    value: function _setSize(width, height) {\n      assert(Number.isFinite(width) && Number.isFinite(height));\n\n      if (width !== this.width || height !== this.height) {\n        this.width = width;\n        this.height = height;\n        this.setNeedsUpdate('Size changed');\n      }\n    }\n  }, {\n    key: \"_setViews\",\n    value: function _setViews(views) {\n      views = flatten(views, Boolean);\n\n      var viewsChanged = this._diffViews(views, this.views);\n\n      if (viewsChanged) {\n        this.setNeedsUpdate('views changed');\n      }\n\n      this.views = views;\n    }\n  }, {\n    key: \"_setViewState\",\n    value: function _setViewState(viewState) {\n      if (viewState) {\n        var viewStateChanged = !deepEqual(viewState, this.viewState);\n\n        if (viewStateChanged) {\n          this.setNeedsUpdate('viewState changed');\n        }\n\n        this.viewState = viewState;\n      } else {\n        log.warn('missing `viewState` or `initialViewState`')();\n      }\n    }\n  }, {\n    key: \"_onViewStateChange\",\n    value: function _onViewStateChange(viewId, event) {\n      event.viewId = viewId;\n\n      this._eventCallbacks.onViewStateChange(event);\n    }\n  }, {\n    key: \"_createController\",\n    value: function _createController(props) {\n      var Controller = props.type;\n      var controller = new Controller(Object.assign({\n        timeline: this.timeline,\n        eventManager: this._eventManager,\n        onViewStateChange: this._onViewStateChange.bind(this, props.id),\n        onStateChange: this._eventCallbacks.onInteractiveStateChange\n      }, props));\n      return controller;\n    }\n  }, {\n    key: \"_updateController\",\n    value: function _updateController(view, viewState, viewport, controller) {\n      if (view.controller) {\n        var controllerProps = Object.assign({}, view.controller, viewState, {\n          id: view.id,\n          x: viewport.x,\n          y: viewport.y,\n          width: viewport.width,\n          height: viewport.height\n        });\n\n        if (controller) {\n          controller.setProps(controllerProps);\n        } else {\n          controller = this._createController(controllerProps);\n        }\n\n        return controller;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_rebuildViewports\",\n    value: function _rebuildViewports() {\n      var width = this.width,\n          height = this.height,\n          views = this.views;\n      var oldControllers = this.controllers;\n      this._viewports = [];\n      this.controllers = {};\n\n      for (var i = views.length; i--;) {\n        var view = views[i];\n        var viewState = this.getViewState(view);\n        var viewport = view.makeViewport({\n          width: width,\n          height: height,\n          viewState: viewState\n        });\n        this.controllers[view.id] = this._updateController(view, viewState, viewport, oldControllers[view.id]);\n\n        this._viewports.unshift(viewport);\n      }\n\n      for (var id in oldControllers) {\n        if (oldControllers[id] && !this.controllers[id]) {\n          oldControllers[id].finalize();\n        }\n      }\n\n      this._buildViewportMap();\n    }\n  }, {\n    key: \"_buildViewportMap\",\n    value: function _buildViewportMap() {\n      var _this = this;\n\n      this._viewportMap = {};\n\n      this._viewports.forEach(function (viewport) {\n        if (viewport.id) {\n          _this._viewportMap[viewport.id] = _this._viewportMap[viewport.id] || viewport;\n        }\n      });\n    }\n  }, {\n    key: \"_diffViews\",\n    value: function _diffViews(newViews, oldViews) {\n      if (newViews.length !== oldViews.length) {\n        return true;\n      }\n\n      return newViews.some(function (_, i) {\n        return !newViews[i].equals(oldViews[i]);\n      });\n    }\n  }]);\n\n  return ViewManager;\n}();\n\nexport { ViewManager as default };","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nexport function parsePosition(value) {\n  switch (_typeof(value)) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      var match = value.match(PERCENT_OR_PIXELS_REGEX);\n\n      if (match && match.length >= 3) {\n        var relative = match[2] === '%';\n        var position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative: relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nexport function getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}","import \"core-js/modules/es6.object.seal\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Viewport from '../viewports/viewport';\nimport { parsePosition, getPosition } from '../utils/positions';\nimport { deepEqual } from '../utils/deep-equal';\nimport assert from '../utils/assert';\n\nvar View = function () {\n  function View() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, View);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? null : _props$id,\n        _props$x = props.x,\n        x = _props$x === void 0 ? 0 : _props$x,\n        _props$y = props.y,\n        y = _props$y === void 0 ? 0 : _props$y,\n        _props$width = props.width,\n        width = _props$width === void 0 ? '100%' : _props$width,\n        _props$height = props.height,\n        height = _props$height === void 0 ? '100%' : _props$height,\n        _props$projectionMatr = props.projectionMatrix,\n        projectionMatrix = _props$projectionMatr === void 0 ? null : _props$projectionMatr,\n        _props$fovy = props.fovy,\n        fovy = _props$fovy === void 0 ? 50 : _props$fovy,\n        _props$near = props.near,\n        near = _props$near === void 0 ? 0.1 : _props$near,\n        _props$far = props.far,\n        far = _props$far === void 0 ? 1000 : _props$far,\n        _props$modelMatrix = props.modelMatrix,\n        modelMatrix = _props$modelMatrix === void 0 ? null : _props$modelMatrix,\n        _props$viewportInstan = props.viewportInstance,\n        viewportInstance = _props$viewportInstan === void 0 ? null : _props$viewportInstan,\n        _props$type = props.type,\n        type = _props$type === void 0 ? Viewport : _props$type;\n    assert(!viewportInstance || viewportInstance instanceof Viewport);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.type = type;\n    this.props = Object.assign({}, props, {\n      id: this.id,\n      projectionMatrix: projectionMatrix,\n      fovy: fovy,\n      near: near,\n      far: far,\n      modelMatrix: modelMatrix\n    });\n\n    this._parseDimensions({\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    });\n\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(View, [{\n    key: \"equals\",\n    value: function equals(view) {\n      if (this === view) {\n        return true;\n      }\n\n      if (this.viewportInstance) {\n        return view.viewportInstance && this.viewportInstance.equals(view.viewportInstance);\n      }\n\n      var viewChanged = deepEqual(this.props, view.props);\n      return viewChanged;\n    }\n  }, {\n    key: \"makeViewport\",\n    value: function makeViewport(_ref) {\n      var width = _ref.width,\n          height = _ref.height,\n          viewState = _ref.viewState;\n\n      if (this.viewportInstance) {\n        return this.viewportInstance;\n      }\n\n      viewState = this.filterViewState(viewState);\n      var viewportDimensions = this.getDimensions({\n        width: width,\n        height: height\n      });\n      var props = Object.assign({\n        viewState: viewState\n      }, viewState, this.props, viewportDimensions);\n      return this._getViewport(props);\n    }\n  }, {\n    key: \"getViewStateId\",\n    value: function getViewStateId() {\n      switch (_typeof(this.props.viewState)) {\n        case 'string':\n          return this.props.viewState;\n\n        case 'object':\n          return this.props.viewState && this.props.viewState.id;\n\n        default:\n          return this.id;\n      }\n    }\n  }, {\n    key: \"filterViewState\",\n    value: function filterViewState(viewState) {\n      if (this.props.viewState && _typeof(this.props.viewState) === 'object') {\n        if (!this.props.viewState.id) {\n          return this.props.viewState;\n        }\n\n        var newViewState = Object.assign({}, viewState);\n\n        for (var key in this.props.viewState) {\n          if (key !== 'id') {\n            newViewState[key] = this.props.viewState[key];\n          }\n        }\n\n        return newViewState;\n      }\n\n      return viewState;\n    }\n  }, {\n    key: \"getDimensions\",\n    value: function getDimensions(_ref2) {\n      var width = _ref2.width,\n          height = _ref2.height;\n      return {\n        x: getPosition(this._x, width),\n        y: getPosition(this._y, height),\n        width: getPosition(this._width, width),\n        height: getPosition(this._height, height)\n      };\n    }\n  }, {\n    key: \"_getControllerProps\",\n    value: function _getControllerProps(defaultOpts) {\n      var opts = this.props.controller;\n\n      if (!opts) {\n        return null;\n      }\n\n      if (opts === true) {\n        return defaultOpts;\n      }\n\n      if (typeof opts === 'function') {\n        opts = {\n          type: opts\n        };\n      }\n\n      return Object.assign({}, defaultOpts, opts);\n    }\n  }, {\n    key: \"_getViewport\",\n    value: function _getViewport(props) {\n      var ViewportType = this.type;\n      return new ViewportType(props);\n    }\n  }, {\n    key: \"_parseDimensions\",\n    value: function _parseDimensions(_ref3) {\n      var x = _ref3.x,\n          y = _ref3.y,\n          width = _ref3.width,\n          height = _ref3.height;\n      this._x = parsePosition(x);\n      this._y = parsePosition(y);\n      this._width = parsePosition(width);\n      this._height = parsePosition(height);\n    }\n  }]);\n\n  return View;\n}();\n\nexport { View as default };","import \"core-js/modules/es6.object.freeze\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.string.repeat\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport Viewport from './viewport';\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat as _addMetersToLngLat, getProjectionParameters, fitBounds as _fitBounds } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { Matrix4 } from 'math.gl';\n\nvar WebMercatorViewport = function (_Viewport) {\n  _inherits(WebMercatorViewport, _Viewport);\n\n  function WebMercatorViewport() {\n    var _this;\n\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, WebMercatorViewport);\n\n    var _opts$latitude = opts.latitude,\n        latitude = _opts$latitude === void 0 ? 0 : _opts$latitude,\n        _opts$longitude = opts.longitude,\n        longitude = _opts$longitude === void 0 ? 0 : _opts$longitude,\n        _opts$zoom = opts.zoom,\n        zoom = _opts$zoom === void 0 ? 11 : _opts$zoom,\n        _opts$pitch = opts.pitch,\n        pitch = _opts$pitch === void 0 ? 0 : _opts$pitch,\n        _opts$bearing = opts.bearing,\n        bearing = _opts$bearing === void 0 ? 0 : _opts$bearing,\n        _opts$nearZMultiplier = opts.nearZMultiplier,\n        nearZMultiplier = _opts$nearZMultiplier === void 0 ? 0.1 : _opts$nearZMultiplier,\n        _opts$farZMultiplier = opts.farZMultiplier,\n        farZMultiplier = _opts$farZMultiplier === void 0 ? 1.01 : _opts$farZMultiplier,\n        _opts$orthographic = opts.orthographic,\n        orthographic = _opts$orthographic === void 0 ? false : _opts$orthographic,\n        _opts$repeat = opts.repeat,\n        repeat = _opts$repeat === void 0 ? false : _opts$repeat,\n        _opts$worldOffset = opts.worldOffset,\n        worldOffset = _opts$worldOffset === void 0 ? 0 : _opts$worldOffset;\n    var width = opts.width,\n        height = opts.height,\n        _opts$altitude = opts.altitude,\n        altitude = _opts$altitude === void 0 ? 1.5 : _opts$altitude;\n    var scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    altitude = Math.max(0.75, altitude);\n\n    var _getProjectionParamet = getProjectionParameters({\n      width: width,\n      height: height,\n      pitch: pitch,\n      altitude: altitude,\n      nearZMultiplier: nearZMultiplier,\n      farZMultiplier: farZMultiplier\n    }),\n        fov = _getProjectionParamet.fov,\n        aspect = _getProjectionParamet.aspect,\n        focalDistance = _getProjectionParamet.focalDistance,\n        near = _getProjectionParamet.near,\n        far = _getProjectionParamet.far;\n\n    var viewMatrixUncentered = getViewMatrix({\n      height: height,\n      pitch: pitch,\n      bearing: bearing,\n      scale: scale,\n      altitude: altitude\n    });\n\n    if (worldOffset) {\n      var viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    var viewportOpts = Object.assign({}, opts, {\n      width: width,\n      height: height,\n      viewMatrix: viewMatrixUncentered,\n      longitude: longitude,\n      latitude: latitude,\n      zoom: zoom,\n      orthographic: orthographic,\n      fovyRadians: fov,\n      aspect: aspect,\n      focalDistance: orthographic ? focalDistance : 1,\n      near: near,\n      far: far\n    });\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WebMercatorViewport).call(this, viewportOpts));\n    _this.latitude = latitude;\n    _this.longitude = longitude;\n    _this.zoom = zoom;\n    _this.pitch = pitch;\n    _this.bearing = bearing;\n    _this.altitude = altitude;\n    _this.orthographic = orthographic;\n    _this._subViewports = repeat ? [] : null;\n    Object.freeze(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(WebMercatorViewport, [{\n    key: \"addMetersToLngLat\",\n    value: function addMetersToLngLat(lngLatZ, xyz) {\n      return _addMetersToLngLat(lngLatZ, xyz);\n    }\n  }, {\n    key: \"getMapCenterByLngLatPosition\",\n    value: function getMapCenterByLngLatPosition(_ref) {\n      var lngLat = _ref.lngLat,\n          pos = _ref.pos;\n      var fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n      var toLocation = this.projectFlat(lngLat);\n      var translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n      var newCenter = vec2.add([], this.center, translate);\n      return this.unprojectFlat(newCenter);\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var width = this.width,\n          height = this.height;\n\n      var _fitBounds2 = _fitBounds(Object.assign({\n        width: width,\n        height: height,\n        bounds: bounds\n      }, options)),\n          longitude = _fitBounds2.longitude,\n          latitude = _fitBounds2.latitude,\n          zoom = _fitBounds2.zoom;\n\n      return new WebMercatorViewport({\n        width: width,\n        height: height,\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      });\n    }\n  }, {\n    key: \"subViewports\",\n    get: function get() {\n      if (this._subViewports && !this._subViewports.length) {\n        var topLeft = this.unproject([0, 0]);\n        var topRight = this.unproject([this.width, 0]);\n        var bottomLeft = this.unproject([0, this.height]);\n        var bottomRight = this.unproject([this.width, this.height]);\n        var minLon = Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\n        var maxLon = Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\n        var minOffset = Math.floor((minLon + 180) / 360);\n        var maxOffset = Math.ceil((maxLon - 180) / 360);\n\n        for (var x = minOffset; x <= maxOffset; x++) {\n          var offsetViewport = x ? new WebMercatorViewport(_objectSpread({}, this, {\n            worldOffset: x\n          })) : this;\n\n          this._subViewports.push(offsetViewport);\n        }\n      }\n\n      return this._subViewports;\n    }\n  }]);\n\n  return WebMercatorViewport;\n}(Viewport);\n\nexport { WebMercatorViewport as default };\nWebMercatorViewport.displayName = 'WebMercatorViewport';","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { equals } from 'math.gl';\nimport assert from '../utils/assert';\n\nvar TransitionInterpolator = function () {\n  function TransitionInterpolator() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, TransitionInterpolator);\n\n    if (Array.isArray(opts)) {\n      opts = {\n        compare: opts,\n        extract: opts,\n        required: opts\n      };\n    }\n\n    var _opts = opts,\n        compare = _opts.compare,\n        extract = _opts.extract,\n        required = _opts.required;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract;\n    this._requiredProps = required;\n  }\n\n  _createClass(TransitionInterpolator, [{\n    key: \"arePropsEqual\",\n    value: function arePropsEqual(currentProps, nextProps) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = (this._propsToCompare || Object.keys(nextProps))[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n\n          if (!(key in currentProps) || !(key in nextProps) || !equals(currentProps[key], nextProps[key])) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"initializeProps\",\n    value: function initializeProps(startProps, endProps) {\n      var result;\n\n      if (this._propsToExtract) {\n        var startViewStateProps = {};\n        var endViewStateProps = {};\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = this._propsToExtract[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var key = _step2.value;\n            startViewStateProps[key] = startProps[key];\n            endViewStateProps[key] = endProps[key];\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n              _iterator2[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        result = {\n          start: startViewStateProps,\n          end: endViewStateProps\n        };\n      } else {\n        result = {\n          start: startProps,\n          end: endProps\n        };\n      }\n\n      this._checkRequiredProps(result.start);\n\n      this._checkRequiredProps(result.end);\n\n      return result;\n    }\n  }, {\n    key: \"interpolateProps\",\n    value: function interpolateProps(startProps, endProps, t) {\n      return endProps;\n    }\n  }, {\n    key: \"getDuration\",\n    value: function getDuration(startProps, endProps) {\n      return endProps.transitionDuration;\n    }\n  }, {\n    key: \"_checkRequiredProps\",\n    value: function _checkRequiredProps(props) {\n      if (!this._requiredProps) {\n        return;\n      }\n\n      this._requiredProps.forEach(function (propName) {\n        var value = props[propName];\n        assert(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n      });\n    }\n  }]);\n\n  return TransitionInterpolator;\n}();\n\nexport { TransitionInterpolator as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport TransitionInterpolator from './transition-interpolator';\nimport { lerp } from 'math.gl';\nvar VIEWPORT_TRANSITION_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\n\nvar LinearInterpolator = function (_TransitionInterpolat) {\n  _inherits(LinearInterpolator, _TransitionInterpolat);\n\n  function LinearInterpolator() {\n    var transitionProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : VIEWPORT_TRANSITION_PROPS;\n\n    _classCallCheck(this, LinearInterpolator);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LinearInterpolator).call(this, transitionProps));\n  }\n\n  _createClass(LinearInterpolator, [{\n    key: \"interpolateProps\",\n    value: function interpolateProps(startProps, endProps, t) {\n      var viewport = {};\n\n      for (var key in endProps) {\n        viewport[key] = lerp(startProps[key], endProps[key], t);\n      }\n\n      return viewport;\n    }\n  }]);\n\n  return LinearInterpolator;\n}(TransitionInterpolator);\n\nexport { LinearInterpolator as default };","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport LinearInterpolator from '../transitions/linear-interpolator';\nimport Transition from '../transitions/transition';\n\nvar noop = function noop() {};\n\nexport var TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\nvar DEFAULT_PROPS = {\n  transitionDuration: 0,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new LinearInterpolator(),\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop\n};\n\nvar TransitionManager = function () {\n  function TransitionManager(ControllerState) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TransitionManager);\n\n    this.ControllerState = ControllerState;\n    this.props = Object.assign({}, DEFAULT_PROPS, props);\n    this.propsInTransition = null;\n    this.transition = new Transition(props.timeline);\n    this.onViewStateChange = props.onViewStateChange;\n    this._onTransitionUpdate = this._onTransitionUpdate.bind(this);\n  }\n\n  _createClass(TransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.transition.cancel();\n    }\n  }, {\n    key: \"getViewportInTransition\",\n    value: function getViewportInTransition() {\n      return this.propsInTransition;\n    }\n  }, {\n    key: \"processViewStateChange\",\n    value: function processViewStateChange(nextProps) {\n      var transitionTriggered = false;\n      var currentProps = this.props;\n      nextProps = Object.assign({}, DEFAULT_PROPS, nextProps);\n      this.props = nextProps;\n\n      if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n        return transitionTriggered;\n      }\n\n      if (this._isTransitionEnabled(nextProps)) {\n        var _this$transition$sett = this.transition.settings,\n            interruption = _this$transition$sett.interruption,\n            endProps = _this$transition$sett.endProps;\n        var startProps = Object.assign({}, currentProps, interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps);\n\n        this._triggerTransition(startProps, nextProps);\n\n        transitionTriggered = true;\n      } else {\n        this.transition.cancel();\n      }\n\n      return transitionTriggered;\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      this.transition.update();\n    }\n  }, {\n    key: \"_isTransitionEnabled\",\n    value: function _isTransitionEnabled(props) {\n      var transitionDuration = props.transitionDuration,\n          transitionInterpolator = props.transitionInterpolator;\n      return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n    }\n  }, {\n    key: \"_isUpdateDueToCurrentTransition\",\n    value: function _isUpdateDueToCurrentTransition(props) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_shouldIgnoreViewportChange\",\n    value: function _shouldIgnoreViewportChange(currentProps, nextProps) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n      } else if (this._isTransitionEnabled(nextProps)) {\n        return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_triggerTransition\",\n    value: function _triggerTransition(startProps, endProps) {\n      var startViewstate = new this.ControllerState(startProps);\n      var endViewStateProps = new this.ControllerState(endProps).shortestPathFrom(startViewstate);\n      var transitionInterpolator = endProps.transitionInterpolator;\n      var duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n      var initialProps = endProps.transitionInterpolator.initializeProps(startProps, endViewStateProps);\n      this.propsInTransition = {};\n      this.duration = duration;\n      this.transition.start({\n        duration: duration,\n        easing: endProps.transitionEasing,\n        interpolator: endProps.transitionInterpolator,\n        interruption: endProps.transitionInterruption,\n        startProps: initialProps.start,\n        endProps: initialProps.end,\n        onStart: endProps.onTransitionStart,\n        onUpdate: this._onTransitionUpdate,\n        onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n        onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n      });\n      this.updateTransition();\n    }\n  }, {\n    key: \"_onTransitionEnd\",\n    value: function _onTransitionEnd(callback) {\n      var _this = this;\n\n      return function (transition) {\n        _this.propsInTransition = null;\n        callback(transition);\n      };\n    }\n  }, {\n    key: \"_onTransitionUpdate\",\n    value: function _onTransitionUpdate(transition) {\n      var time = transition.time,\n          _transition$settings = transition.settings,\n          interpolator = _transition$settings.interpolator,\n          startProps = _transition$settings.startProps,\n          endProps = _transition$settings.endProps,\n          duration = _transition$settings.duration,\n          easing = _transition$settings.easing;\n      var t = easing(time / duration);\n      var viewport = interpolator.interpolateProps(startProps, endProps, t);\n      this.propsInTransition = new this.ControllerState(Object.assign({}, this.props, viewport)).getViewportProps();\n\n      if (this.onViewStateChange) {\n        this.onViewStateChange({\n          viewState: this.propsInTransition,\n          interactionState: {\n            inTransition: true\n          },\n          oldViewState: this.props\n        });\n      }\n    }\n  }]);\n\n  return TransitionManager;\n}();\n\nexport { TransitionManager as default };\nTransitionManager.defaultProps = DEFAULT_PROPS;","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.function.bind\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport TransitionManager from './transition-manager';\nimport log from '../utils/log';\nimport assert from '../utils/assert';\nvar NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nvar ZOOM_ACCEL = 0.01;\nvar EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\n\nvar Controller = function () {\n  function Controller(ControllerState) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Controller);\n\n    assert(ControllerState);\n    this.ControllerState = ControllerState;\n    this.controllerState = null;\n    this.controllerStateProps = null;\n    this.eventManager = null;\n    this.transitionManager = new TransitionManager(ControllerState, options);\n    this._events = null;\n    this._state = {\n      isDragging: false\n    };\n    this._customEvents = [];\n    this.onViewStateChange = null;\n    this.onStateChange = null;\n    this.invertPan = false;\n    this.handleEvent = this.handleEvent.bind(this);\n    this.setProps(options);\n  }\n\n  _createClass(Controller, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var eventName in this._events) {\n        if (this._events[eventName]) {\n          this.eventManager.off(eventName, this.handleEvent);\n        }\n      }\n\n      this.transitionManager.finalize();\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      var ControllerState = this.ControllerState;\n      this.controllerState = new ControllerState(Object.assign({}, this.controllerStateProps, this._state));\n\n      switch (event.type) {\n        case 'panstart':\n          return this._onPanStart(event);\n\n        case 'panmove':\n          return this._onPan(event);\n\n        case 'panend':\n          return this._onPanEnd(event);\n\n        case 'pinchstart':\n          return this._onPinchStart(event);\n\n        case 'pinchmove':\n          return this._onPinch(event);\n\n        case 'pinchend':\n          return this._onPinchEnd(event);\n\n        case 'doubletap':\n          return this._onDoubleTap(event);\n\n        case 'wheel':\n          return this._onWheel(event);\n\n        case 'keydown':\n          return this._onKeyDown(event);\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(event) {\n      var _this$controllerState = this.controllerStateProps,\n          x = _this$controllerState.x,\n          y = _this$controllerState.y;\n      var offsetCenter = event.offsetCenter;\n      return [offsetCenter.x - x, offsetCenter.y - y];\n    }\n  }, {\n    key: \"isPointInBounds\",\n    value: function isPointInBounds(pos, event) {\n      var _this$controllerState2 = this.controllerStateProps,\n          width = _this$controllerState2.width,\n          height = _this$controllerState2.height;\n\n      if (event && event.handled) {\n        return false;\n      }\n\n      var inside = pos[0] >= 0 && pos[0] <= width && pos[1] >= 0 && pos[1] <= height;\n\n      if (inside && event) {\n        event.stopPropagation();\n      }\n\n      return inside;\n    }\n  }, {\n    key: \"isFunctionKeyPressed\",\n    value: function isFunctionKeyPressed(event) {\n      var srcEvent = event.srcEvent;\n      return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return this._state.isDragging;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('onViewportChange' in props) {\n        log.removed('onViewportChange')();\n      }\n\n      if ('onViewStateChange' in props) {\n        this.onViewStateChange = props.onViewStateChange;\n      }\n\n      if ('onStateChange' in props) {\n        this.onStateChange = props.onStateChange;\n      }\n\n      this.controllerStateProps = props;\n\n      if ('eventManager' in props && this.eventManager !== props.eventManager) {\n        this.eventManager = props.eventManager;\n        this._events = {};\n        this.toggleEvents(this._customEvents, true);\n      }\n\n      this.transitionManager.processViewStateChange(this.controllerStateProps);\n      var _props$scrollZoom = props.scrollZoom,\n          scrollZoom = _props$scrollZoom === void 0 ? true : _props$scrollZoom,\n          _props$dragPan = props.dragPan,\n          dragPan = _props$dragPan === void 0 ? true : _props$dragPan,\n          _props$dragRotate = props.dragRotate,\n          dragRotate = _props$dragRotate === void 0 ? true : _props$dragRotate,\n          _props$doubleClickZoo = props.doubleClickZoom,\n          doubleClickZoom = _props$doubleClickZoo === void 0 ? true : _props$doubleClickZoo,\n          _props$touchZoom = props.touchZoom,\n          touchZoom = _props$touchZoom === void 0 ? true : _props$touchZoom,\n          _props$touchRotate = props.touchRotate,\n          touchRotate = _props$touchRotate === void 0 ? false : _props$touchRotate,\n          _props$keyboard = props.keyboard,\n          keyboard = _props$keyboard === void 0 ? true : _props$keyboard;\n      var isInteractive = Boolean(this.onViewStateChange);\n      this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n      this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n      this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n      this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n      this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n      this.scrollZoom = scrollZoom;\n      this.dragPan = dragPan;\n      this.dragRotate = dragRotate;\n      this.doubleClickZoom = doubleClickZoom;\n      this.touchZoom = touchZoom;\n      this.touchRotate = touchRotate;\n      this.keyboard = keyboard;\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      this.transitionManager.updateTransition();\n    }\n  }, {\n    key: \"toggleEvents\",\n    value: function toggleEvents(eventNames, enabled) {\n      var _this = this;\n\n      if (this.eventManager) {\n        eventNames.forEach(function (eventName) {\n          if (_this._events[eventName] !== enabled) {\n            _this._events[eventName] = enabled;\n\n            if (enabled) {\n              _this.eventManager.on(eventName, _this.handleEvent);\n            } else {\n              _this.eventManager.off(eventName, _this.handleEvent);\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"updateViewport\",\n    value: function updateViewport(newControllerState) {\n      var extraProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var interactionState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var viewState = Object.assign({}, newControllerState.getViewportProps(), extraProps);\n      var changed = this.controllerState !== newControllerState;\n\n      if (changed) {\n        var oldViewState = this.controllerState ? this.controllerState.getViewportProps() : null;\n\n        if (this.onViewStateChange) {\n          this.onViewStateChange({\n            viewState: viewState,\n            interactionState: interactionState,\n            oldViewState: oldViewState\n          });\n        }\n      }\n\n      Object.assign(this._state, newControllerState.getInteractiveState(), interactionState);\n\n      if (this.onStateChange) {\n        this.onStateChange(this._state);\n      }\n    }\n  }, {\n    key: \"_onPanStart\",\n    value: function _onPanStart(event) {\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var newControllerState = this.controllerState.panStart({\n        pos: pos\n      }).rotateStart({\n        pos: pos\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPan\",\n    value: function _onPan(event) {\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var alternateMode = this.isFunctionKeyPressed(event) || event.rightButton;\n      alternateMode = this.invertPan ? !alternateMode : alternateMode;\n      return alternateMode ? this._onPanMove(event) : this._onPanRotate(event);\n    }\n  }, {\n    key: \"_onPanEnd\",\n    value: function _onPanEnd(event) {\n      var newControllerState = this.controllerState.panEnd().rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isRotating: false\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPanMove\",\n    value: function _onPanMove(event) {\n      if (!this.dragPan) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n      var newControllerState = this.controllerState.pan({\n        pos: pos\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isPanning: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPanRotate\",\n    value: function _onPanRotate(event) {\n      if (!this.dragRotate) {\n        return false;\n      }\n\n      var deltaX = event.deltaX,\n          deltaY = event.deltaY;\n\n      var _this$controllerState3 = this.controllerState.getViewportProps(),\n          width = _this$controllerState3.width,\n          height = _this$controllerState3.height;\n\n      var deltaScaleX = deltaX / width;\n      var deltaScaleY = deltaY / height;\n      var newControllerState = this.controllerState.rotate({\n        deltaScaleX: deltaScaleX,\n        deltaScaleY: deltaScaleY\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isRotating: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onWheel\",\n    value: function _onWheel(event) {\n      if (!this.scrollZoom) {\n        return false;\n      }\n\n      event.preventDefault();\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var delta = event.delta;\n      var scale = 2 / (1 + Math.exp(-Math.abs(delta * ZOOM_ACCEL)));\n\n      if (delta < 0 && scale !== 0) {\n        scale = 1 / scale;\n      }\n\n      var newControllerState = this.controllerState.zoom({\n        pos: pos,\n        scale: scale\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isZooming: true,\n        isPanning: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPinchStart\",\n    value: function _onPinchStart(event) {\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var newControllerState = this.controllerState.zoomStart({\n        pos: pos\n      }).rotateStart({\n        pos: pos\n      });\n      this._state.startPinchRotation = event.rotation;\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPinch\",\n    value: function _onPinch(event) {\n      if (!this.touchZoom && !this.touchRotate) {\n        return false;\n      }\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var newControllerState = this.controllerState;\n\n      if (this.touchZoom) {\n        var scale = event.scale;\n        var pos = this.getCenter(event);\n        newControllerState = newControllerState.zoom({\n          pos: pos,\n          scale: scale\n        });\n      }\n\n      if (this.touchRotate) {\n        var rotation = event.rotation;\n        var startPinchRotation = this._state.startPinchRotation;\n        newControllerState = newControllerState.rotate({\n          deltaScaleX: -(rotation - startPinchRotation) / 180\n        });\n      }\n\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: this.touchRotate\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPinchEnd\",\n    value: function _onPinchEnd(event) {\n      var newControllerState = this.controllerState.zoomEnd().rotateEnd();\n      this._state.startPinchRotation = 0;\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isZooming: false,\n        isRotating: false\n      });\n      return true;\n    }\n  }, {\n    key: \"_onDoubleTap\",\n    value: function _onDoubleTap(event) {\n      if (!this.doubleClickZoom) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var isZoomOut = this.isFunctionKeyPressed(event);\n      var newControllerState = this.controllerState.zoom({\n        pos: pos,\n        scale: isZoomOut ? 0.5 : 2\n      });\n      this.updateViewport(newControllerState, this._getTransitionProps(), {\n        isZooming: true,\n        isPanning: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onKeyDown\",\n    value: function _onKeyDown(event) {\n      if (!this.keyboard) {\n        return false;\n      }\n\n      var funcKey = this.isFunctionKeyPressed(event);\n      var controllerState = this.controllerState;\n      var newControllerState;\n      var interactionState = {};\n\n      switch (event.srcEvent.keyCode) {\n        case 189:\n          newControllerState = funcKey ? controllerState.zoomOut().zoomOut() : controllerState.zoomOut();\n          interactionState.isZooming = true;\n          break;\n\n        case 187:\n          newControllerState = funcKey ? controllerState.zoomIn().zoomIn() : controllerState.zoomIn();\n          interactionState.isZooming = true;\n          break;\n\n        case 37:\n          if (funcKey) {\n            newControllerState = controllerState.rotateLeft();\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveLeft();\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        case 39:\n          if (funcKey) {\n            newControllerState = controllerState.rotateRight();\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveRight();\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        case 38:\n          if (funcKey) {\n            newControllerState = controllerState.rotateUp();\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveUp();\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        case 40:\n          if (funcKey) {\n            newControllerState = controllerState.rotateDown();\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveDown();\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        default:\n          return false;\n      }\n\n      this.updateViewport(newControllerState, this._getTransitionProps(), interactionState);\n      return true;\n    }\n  }, {\n    key: \"_getTransitionProps\",\n    value: function _getTransitionProps() {\n      return NO_TRANSITION_PROPS;\n    }\n  }, {\n    key: \"events\",\n    set: function set(customEvents) {\n      this.toggleEvents(this._customEvents, false);\n      this.toggleEvents(customEvents, true);\n      this._customEvents = customEvents;\n      this.setProps(this.controllerStateProps);\n    }\n  }]);\n\n  return Controller;\n}();\n\nexport { Controller as default };","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport assert from '../utils/assert';\n\nvar ViewState = function () {\n  function ViewState(opts) {\n    _classCallCheck(this, ViewState);\n\n    assert(Number.isFinite(opts.width), '`width` must be supplied');\n    assert(Number.isFinite(opts.height), '`height` must be supplied');\n    this._viewportProps = this._applyConstraints(opts);\n  }\n\n  _createClass(ViewState, [{\n    key: \"getViewportProps\",\n    value: function getViewportProps() {\n      return this._viewportProps;\n    }\n  }, {\n    key: \"shortestPathFrom\",\n    value: function shortestPathFrom(viewState) {\n      return this._viewportProps;\n    }\n  }, {\n    key: \"_applyConstraints\",\n    value: function _applyConstraints(props) {\n      return props;\n    }\n  }]);\n\n  return ViewState;\n}();\n\nexport { ViewState as default };","import \"core-js/modules/es6.math.log2\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { clamp } from 'math.gl';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport WebMercatorViewport, { normalizeViewportProps } from '@math.gl/web-mercator';\nimport assert from '../utils/assert';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nimport { TRANSITION_EVENTS } from './transition-manager';\nvar PITCH_MOUSE_THRESHOLD = 5;\nvar PITCH_ACCEL = 1.2;\nvar LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new LinearInterpolator(),\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\nvar NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nexport var MAPBOX_LIMITS = {\n  minZoom: 0,\n  maxZoom: 20,\n  minPitch: 0,\n  maxPitch: 60\n};\nvar DEFAULT_STATE = {\n  pitch: 0,\n  bearing: 0,\n  altitude: 1.5\n};\n\nvar MapState = function (_ViewState) {\n  _inherits(MapState, _ViewState);\n\n  function MapState() {\n    var _this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        width = _ref.width,\n        height = _ref.height,\n        latitude = _ref.latitude,\n        longitude = _ref.longitude,\n        zoom = _ref.zoom,\n        _ref$bearing = _ref.bearing,\n        bearing = _ref$bearing === void 0 ? DEFAULT_STATE.bearing : _ref$bearing,\n        _ref$pitch = _ref.pitch,\n        pitch = _ref$pitch === void 0 ? DEFAULT_STATE.pitch : _ref$pitch,\n        _ref$altitude = _ref.altitude,\n        altitude = _ref$altitude === void 0 ? DEFAULT_STATE.altitude : _ref$altitude,\n        _ref$maxZoom = _ref.maxZoom,\n        maxZoom = _ref$maxZoom === void 0 ? MAPBOX_LIMITS.maxZoom : _ref$maxZoom,\n        _ref$minZoom = _ref.minZoom,\n        minZoom = _ref$minZoom === void 0 ? MAPBOX_LIMITS.minZoom : _ref$minZoom,\n        _ref$maxPitch = _ref.maxPitch,\n        maxPitch = _ref$maxPitch === void 0 ? MAPBOX_LIMITS.maxPitch : _ref$maxPitch,\n        _ref$minPitch = _ref.minPitch,\n        minPitch = _ref$minPitch === void 0 ? MAPBOX_LIMITS.minPitch : _ref$minPitch,\n        startPanLngLat = _ref.startPanLngLat,\n        startZoomLngLat = _ref.startZoomLngLat,\n        startBearing = _ref.startBearing,\n        startPitch = _ref.startPitch,\n        startZoom = _ref.startZoom;\n\n    _classCallCheck(this, MapState);\n\n    assert(Number.isFinite(longitude), '`longitude` must be supplied');\n    assert(Number.isFinite(latitude), '`latitude` must be supplied');\n    assert(Number.isFinite(zoom), '`zoom` must be supplied');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MapState).call(this, {\n      width: width,\n      height: height,\n      latitude: latitude,\n      longitude: longitude,\n      zoom: zoom,\n      bearing: bearing,\n      pitch: pitch,\n      altitude: altitude,\n      maxZoom: maxZoom,\n      minZoom: minZoom,\n      maxPitch: maxPitch,\n      minPitch: minPitch\n    }));\n    _this._interactiveState = {\n      startPanLngLat: startPanLngLat,\n      startZoomLngLat: startZoomLngLat,\n      startBearing: startBearing,\n      startPitch: startPitch,\n      startZoom: startZoom\n    };\n    return _this;\n  }\n\n  _createClass(MapState, [{\n    key: \"getViewportProps\",\n    value: function getViewportProps() {\n      return this._viewportProps;\n    }\n  }, {\n    key: \"getInteractiveState\",\n    value: function getInteractiveState() {\n      return this._interactiveState;\n    }\n  }, {\n    key: \"panStart\",\n    value: function panStart(_ref2) {\n      var pos = _ref2.pos;\n      return this._getUpdatedState({\n        startPanLngLat: this._unproject(pos)\n      });\n    }\n  }, {\n    key: \"pan\",\n    value: function pan(_ref3) {\n      var pos = _ref3.pos,\n          startPos = _ref3.startPos;\n\n      var startPanLngLat = this._interactiveState.startPanLngLat || this._unproject(startPos);\n\n      if (!startPanLngLat) {\n        return this;\n      }\n\n      var _this$_calculateNewLn = this._calculateNewLngLat({\n        startPanLngLat: startPanLngLat,\n        pos: pos\n      }),\n          _this$_calculateNewLn2 = _slicedToArray(_this$_calculateNewLn, 2),\n          longitude = _this$_calculateNewLn2[0],\n          latitude = _this$_calculateNewLn2[1];\n\n      return this._getUpdatedState({\n        longitude: longitude,\n        latitude: latitude\n      });\n    }\n  }, {\n    key: \"panEnd\",\n    value: function panEnd() {\n      return this._getUpdatedState({\n        startPanLngLat: null\n      });\n    }\n  }, {\n    key: \"rotateStart\",\n    value: function rotateStart(_ref4) {\n      var pos = _ref4.pos;\n      return this._getUpdatedState({\n        startBearing: this._viewportProps.bearing,\n        startPitch: this._viewportProps.pitch\n      });\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(_ref5) {\n      var _ref5$deltaScaleX = _ref5.deltaScaleX,\n          deltaScaleX = _ref5$deltaScaleX === void 0 ? 0 : _ref5$deltaScaleX,\n          _ref5$deltaScaleY = _ref5.deltaScaleY,\n          deltaScaleY = _ref5$deltaScaleY === void 0 ? 0 : _ref5$deltaScaleY;\n      var _this$_interactiveSta = this._interactiveState,\n          startBearing = _this$_interactiveSta.startBearing,\n          startPitch = _this$_interactiveSta.startPitch;\n\n      if (!Number.isFinite(startBearing) || !Number.isFinite(startPitch)) {\n        return this;\n      }\n\n      var _this$_calculateNewPi = this._calculateNewPitchAndBearing({\n        deltaScaleX: deltaScaleX,\n        deltaScaleY: deltaScaleY,\n        startBearing: startBearing,\n        startPitch: startPitch\n      }),\n          pitch = _this$_calculateNewPi.pitch,\n          bearing = _this$_calculateNewPi.bearing;\n\n      return this._getUpdatedState({\n        bearing: bearing,\n        pitch: pitch\n      });\n    }\n  }, {\n    key: \"rotateEnd\",\n    value: function rotateEnd() {\n      return this._getUpdatedState({\n        startBearing: null,\n        startPitch: null\n      });\n    }\n  }, {\n    key: \"zoomStart\",\n    value: function zoomStart(_ref6) {\n      var pos = _ref6.pos;\n      return this._getUpdatedState({\n        startZoomLngLat: this._unproject(pos),\n        startZoom: this._viewportProps.zoom\n      });\n    }\n  }, {\n    key: \"zoom\",\n    value: function zoom(_ref7) {\n      var pos = _ref7.pos,\n          startPos = _ref7.startPos,\n          scale = _ref7.scale;\n      var _this$_interactiveSta2 = this._interactiveState,\n          startZoom = _this$_interactiveSta2.startZoom,\n          startZoomLngLat = _this$_interactiveSta2.startZoomLngLat;\n\n      if (!Number.isFinite(startZoom)) {\n        startZoom = this._viewportProps.zoom;\n        startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n      }\n\n      var zoom = this._calculateNewZoom({\n        scale: scale,\n        startZoom: startZoom\n      });\n\n      var zoomedViewport = new WebMercatorViewport(Object.assign({}, this._viewportProps, {\n        zoom: zoom\n      }));\n\n      var _zoomedViewport$getMa = zoomedViewport.getMapCenterByLngLatPosition({\n        lngLat: startZoomLngLat,\n        pos: pos\n      }),\n          _zoomedViewport$getMa2 = _slicedToArray(_zoomedViewport$getMa, 2),\n          longitude = _zoomedViewport$getMa2[0],\n          latitude = _zoomedViewport$getMa2[1];\n\n      return this._getUpdatedState({\n        zoom: zoom,\n        longitude: longitude,\n        latitude: latitude\n      });\n    }\n  }, {\n    key: \"zoomEnd\",\n    value: function zoomEnd() {\n      return this._getUpdatedState({\n        startZoomLngLat: null,\n        startZoom: null\n      });\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      return this._zoomFromCenter(2);\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      return this._zoomFromCenter(0.5);\n    }\n  }, {\n    key: \"moveLeft\",\n    value: function moveLeft() {\n      return this._panFromCenter([100, 0]);\n    }\n  }, {\n    key: \"moveRight\",\n    value: function moveRight() {\n      return this._panFromCenter([-100, 0]);\n    }\n  }, {\n    key: \"moveUp\",\n    value: function moveUp() {\n      return this._panFromCenter([0, 100]);\n    }\n  }, {\n    key: \"moveDown\",\n    value: function moveDown() {\n      return this._panFromCenter([0, -100]);\n    }\n  }, {\n    key: \"rotateLeft\",\n    value: function rotateLeft() {\n      return this._getUpdatedState({\n        bearing: this._viewportProps.bearing - 15\n      });\n    }\n  }, {\n    key: \"rotateRight\",\n    value: function rotateRight() {\n      return this._getUpdatedState({\n        bearing: this._viewportProps.bearing + 15\n      });\n    }\n  }, {\n    key: \"rotateUp\",\n    value: function rotateUp() {\n      return this._getUpdatedState({\n        pitch: this._viewportProps.pitch + 10\n      });\n    }\n  }, {\n    key: \"rotateDown\",\n    value: function rotateDown() {\n      return this._getUpdatedState({\n        pitch: this._viewportProps.pitch - 10\n      });\n    }\n  }, {\n    key: \"shortestPathFrom\",\n    value: function shortestPathFrom(viewState) {\n      var fromProps = viewState.getViewportProps();\n      var props = Object.assign({}, this._viewportProps);\n      var bearing = props.bearing,\n          longitude = props.longitude;\n\n      if (Math.abs(bearing - fromProps.bearing) > 180) {\n        props.bearing = bearing < 0 ? bearing + 360 : bearing - 360;\n      }\n\n      if (Math.abs(longitude - fromProps.longitude) > 180) {\n        props.longitude = longitude < 0 ? longitude + 360 : longitude - 360;\n      }\n\n      return props;\n    }\n  }, {\n    key: \"_zoomFromCenter\",\n    value: function _zoomFromCenter(scale) {\n      var _this$_viewportProps = this._viewportProps,\n          width = _this$_viewportProps.width,\n          height = _this$_viewportProps.height;\n      return this.zoom({\n        pos: [width / 2, height / 2],\n        scale: scale\n      });\n    }\n  }, {\n    key: \"_panFromCenter\",\n    value: function _panFromCenter(offset) {\n      var _this$_viewportProps2 = this._viewportProps,\n          width = _this$_viewportProps2.width,\n          height = _this$_viewportProps2.height;\n      return this.pan({\n        startPos: [width / 2, height / 2],\n        pos: [width / 2 + offset[0], height / 2 + offset[1]]\n      });\n    }\n  }, {\n    key: \"_getUpdatedState\",\n    value: function _getUpdatedState(newProps) {\n      return new MapState(Object.assign({}, this._viewportProps, this._interactiveState, newProps));\n    }\n  }, {\n    key: \"_applyConstraints\",\n    value: function _applyConstraints(props) {\n      var maxZoom = props.maxZoom,\n          minZoom = props.minZoom,\n          zoom = props.zoom;\n      props.zoom = clamp(zoom, minZoom, maxZoom);\n      var maxPitch = props.maxPitch,\n          minPitch = props.minPitch,\n          pitch = props.pitch;\n      props.pitch = clamp(pitch, minPitch, maxPitch);\n      Object.assign(props, normalizeViewportProps(props));\n      return props;\n    }\n  }, {\n    key: \"_unproject\",\n    value: function _unproject(pos) {\n      var viewport = new WebMercatorViewport(this._viewportProps);\n      return pos && viewport.unproject(pos);\n    }\n  }, {\n    key: \"_calculateNewLngLat\",\n    value: function _calculateNewLngLat(_ref8) {\n      var startPanLngLat = _ref8.startPanLngLat,\n          pos = _ref8.pos;\n      var viewport = new WebMercatorViewport(this._viewportProps);\n      return viewport.getMapCenterByLngLatPosition({\n        lngLat: startPanLngLat,\n        pos: pos\n      });\n    }\n  }, {\n    key: \"_calculateNewZoom\",\n    value: function _calculateNewZoom(_ref9) {\n      var scale = _ref9.scale,\n          startZoom = _ref9.startZoom;\n      var _this$_viewportProps3 = this._viewportProps,\n          maxZoom = _this$_viewportProps3.maxZoom,\n          minZoom = _this$_viewportProps3.minZoom;\n      var zoom = startZoom + Math.log2(scale);\n      return clamp(zoom, minZoom, maxZoom);\n    }\n  }, {\n    key: \"_calculateNewPitchAndBearing\",\n    value: function _calculateNewPitchAndBearing(_ref10) {\n      var deltaScaleX = _ref10.deltaScaleX,\n          deltaScaleY = _ref10.deltaScaleY,\n          startBearing = _ref10.startBearing,\n          startPitch = _ref10.startPitch;\n      deltaScaleY = clamp(deltaScaleY, -1, 1);\n      var _this$_viewportProps4 = this._viewportProps,\n          minPitch = _this$_viewportProps4.minPitch,\n          maxPitch = _this$_viewportProps4.maxPitch;\n      var bearing = startBearing + 180 * deltaScaleX;\n      var pitch = startPitch;\n\n      if (deltaScaleY > 0) {\n        pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n      } else if (deltaScaleY < 0) {\n        pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n      }\n\n      return {\n        pitch: pitch,\n        bearing: bearing\n      };\n    }\n  }]);\n\n  return MapState;\n}(ViewState);\n\nvar MapController = function (_Controller) {\n  _inherits(MapController, _Controller);\n\n  function MapController(props) {\n    var _this2;\n\n    _classCallCheck(this, MapController);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(MapController).call(this, MapState, props));\n    _this2.invertPan = true;\n    return _this2;\n  }\n\n  _createClass(MapController, [{\n    key: \"_getTransitionProps\",\n    value: function _getTransitionProps() {\n      return LINEAR_TRANSITION_PROPS;\n    }\n  }, {\n    key: \"_onPanRotate\",\n    value: function _onPanRotate(event) {\n      if (!this.dragRotate) {\n        return false;\n      }\n\n      var deltaX = event.deltaX,\n          deltaY = event.deltaY;\n\n      var _this$getCenter = this.getCenter(event),\n          _this$getCenter2 = _slicedToArray(_this$getCenter, 2),\n          centerY = _this$getCenter2[1];\n\n      var startY = centerY - deltaY;\n\n      var _this$controllerState = this.controllerState.getViewportProps(),\n          width = _this$controllerState.width,\n          height = _this$controllerState.height;\n\n      var deltaScaleX = deltaX / width;\n      var deltaScaleY = 0;\n\n      if (deltaY > 0) {\n        if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n          deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n        }\n      } else if (deltaY < 0) {\n        if (startY > PITCH_MOUSE_THRESHOLD) {\n          deltaScaleY = 1 - centerY / startY;\n        }\n      }\n\n      deltaScaleY = Math.min(1, Math.max(-1, deltaScaleY));\n      var newControllerState = this.controllerState.rotate({\n        deltaScaleX: deltaScaleX,\n        deltaScaleY: deltaScaleY\n      });\n      return this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isRotating: true\n      });\n    }\n  }]);\n\n  return MapController;\n}(Controller);\n\nexport { MapController as default };\nexport var testExports = {\n  MapState: MapState\n};","import \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport View from './view';\nimport WebMercatorViewport from '../viewports/web-mercator-viewport';\nimport MapController from '../controllers/map-controller';\n\nvar MapView = function (_View) {\n  _inherits(MapView, _View);\n\n  function MapView(props) {\n    _classCallCheck(this, MapView);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MapView).call(this, Object.assign({}, props, {\n      type: WebMercatorViewport\n    })));\n  }\n\n  _createClass(MapView, [{\n    key: \"controller\",\n    get: function get() {\n      return this._getControllerProps({\n        type: MapController\n      });\n    }\n  }]);\n\n  return MapView;\n}(View);\n\nexport { MapView as default };\nMapView.displayName = 'MapView';","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nvar DEFAULT_LIGHT_COLOR = [255, 255, 255];\nvar DEFAULT_LIGHT_INTENSITY = 1.0;\nvar idCount = 0;\nexport var AmbientLight = function AmbientLight() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  _classCallCheck(this, AmbientLight);\n\n  var _props$color = props.color,\n      color = _props$color === void 0 ? DEFAULT_LIGHT_COLOR : _props$color;\n  var _props$intensity = props.intensity,\n      intensity = _props$intensity === void 0 ? DEFAULT_LIGHT_INTENSITY : _props$intensity;\n  this.id = props.id || \"ambient-\".concat(idCount++);\n  this.color = color;\n  this.intensity = intensity;\n  this.type = 'ambient';\n};","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3 } from 'math.gl';\nvar DEFAULT_LIGHT_COLOR = [255, 255, 255];\nvar DEFAULT_LIGHT_INTENSITY = 1.0;\nvar DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\nvar idCount = 0;\nexport var DirectionalLight = function () {\n  function DirectionalLight() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, DirectionalLight);\n\n    var _props$color = props.color,\n        color = _props$color === void 0 ? DEFAULT_LIGHT_COLOR : _props$color;\n    var _props$intensity = props.intensity,\n        intensity = _props$intensity === void 0 ? DEFAULT_LIGHT_INTENSITY : _props$intensity;\n    var _props$direction = props.direction,\n        direction = _props$direction === void 0 ? DEFAULT_LIGHT_DIRECTION : _props$direction;\n\n    var _props$_shadow = props._shadow,\n        _shadow = _props$_shadow === void 0 ? false : _props$_shadow;\n\n    this.id = props.id || \"directional-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'directional';\n    this.direction = new Vector3(direction).normalize().toArray();\n    this.shadow = _shadow;\n  }\n\n  _createClass(DirectionalLight, [{\n    key: \"getProjectedLight\",\n    value: function getProjectedLight() {\n      return this;\n    }\n  }]);\n\n  return DirectionalLight;\n}();","import \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Effect = function () {\n  function Effect() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Effect);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? 'effect' : _props$id;\n    this.id = id;\n    this.props = {};\n    Object.assign(this.props, props);\n  }\n\n  _createClass(Effect, [{\n    key: \"preRender\",\n    value: function preRender() {}\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {}\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {}\n  }]);\n\n  return Effect;\n}();\n\nexport { Effect as default };","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.object.create\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Pass from './pass';\nimport { clear, setParameters, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nimport log from '../utils/log';\n\nvar LayersPass = function (_Pass) {\n  _inherits(LayersPass, _Pass);\n\n  function LayersPass() {\n    _classCallCheck(this, LayersPass);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LayersPass).apply(this, arguments));\n  }\n\n  _createClass(LayersPass, [{\n    key: \"render\",\n    value: function render(props) {\n      var gl = this.gl;\n      setParameters(gl, {\n        framebuffer: props.target\n      });\n      return this._drawLayers(props);\n    }\n  }, {\n    key: \"_drawLayers\",\n    value: function _drawLayers(props) {\n      var viewports = props.viewports,\n          views = props.views,\n          onViewportActive = props.onViewportActive,\n          _props$clearCanvas = props.clearCanvas,\n          clearCanvas = _props$clearCanvas === void 0 ? true : _props$clearCanvas;\n      var gl = this.gl;\n\n      if (clearCanvas) {\n        clearGLCanvas(gl);\n      }\n\n      var renderStats = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = viewports[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var viewportOrDescriptor = _step.value;\n          var viewport = viewportOrDescriptor.viewport || viewportOrDescriptor;\n          var view = views && views[viewport.id];\n          onViewportActive(viewport);\n          props.view = view;\n          var subViewports = viewport.subViewports || [viewport];\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = subViewports[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var subViewport = _step2.value;\n              props.viewport = subViewport;\n\n              var stats = this._drawLayersInViewport(gl, props);\n\n              renderStats.push(stats);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                _iterator2[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return renderStats;\n    }\n  }, {\n    key: \"_drawLayersInViewport\",\n    value: function _drawLayersInViewport(gl, _ref) {\n      var layers = _ref.layers,\n          layerFilter = _ref.layerFilter,\n          onError = _ref.onError,\n          viewport = _ref.viewport,\n          view = _ref.view,\n          _ref$pass = _ref.pass,\n          pass = _ref$pass === void 0 ? 'unknown' : _ref$pass,\n          effects = _ref.effects,\n          moduleParameters = _ref.moduleParameters;\n      var glViewport = getGLViewport(gl, {\n        viewport: viewport\n      });\n\n      if (view && view.props.clear) {\n        var clearOpts = view.props.clear === true ? {\n          color: true,\n          depth: true\n        } : view.props.clear;\n        withParameters(gl, {\n          scissorTest: true,\n          scissor: glViewport\n        }, function () {\n          return clear(gl, clearOpts);\n        });\n      }\n\n      var renderStatus = {\n        totalCount: layers.length,\n        visibleCount: 0,\n        compositeCount: 0,\n        pickableCount: 0\n      };\n      setParameters(gl, {\n        viewport: glViewport\n      });\n      var indexResolver = layerIndexResolver();\n\n      for (var layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n        var layer = layers[layerIndex];\n\n        var shouldDrawLayer = this._shouldDrawLayer(layer, viewport, pass, layerFilter);\n\n        var layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n\n        if (shouldDrawLayer && layer.props.pickable) {\n          renderStatus.pickableCount++;\n        }\n\n        if (layer.isComposite) {\n          renderStatus.compositeCount++;\n        }\n\n        if (shouldDrawLayer) {\n          renderStatus.visibleCount++;\n\n          var _moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n\n          var layerParameters = this.getLayerParameters(layer, layerIndex);\n          _moduleParameters.viewport = viewport;\n\n          try {\n            layer.drawLayer({\n              moduleParameters: _moduleParameters,\n              uniforms: {\n                layerIndex: layerRenderIndex\n              },\n              parameters: layerParameters\n            });\n          } catch (err) {\n            if (onError) {\n              onError(err, layer);\n            } else {\n              log.error(\"error during drawing of \".concat(layer), err)();\n            }\n          }\n        }\n      }\n\n      return renderStatus;\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return true;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters(layer, effects) {\n      return null;\n    }\n  }, {\n    key: \"getLayerParameters\",\n    value: function getLayerParameters(layer, layerIndex) {\n      return layer.props.parameters;\n    }\n  }, {\n    key: \"_shouldDrawLayer\",\n    value: function _shouldDrawLayer(layer, viewport, pass, layerFilter) {\n      var shouldDrawLayer = this.shouldDrawLayer(layer) && !layer.isComposite && layer.props.visible;\n\n      if (shouldDrawLayer && layerFilter) {\n        shouldDrawLayer = layerFilter({\n          layer: layer,\n          viewport: viewport,\n          isPicking: pass.startsWith('picking'),\n          renderPass: pass\n        });\n      }\n\n      return shouldDrawLayer;\n    }\n  }, {\n    key: \"_getModuleParameters\",\n    value: function _getModuleParameters(layer, effects, pass, overrides) {\n      var moduleParameters = Object.assign(Object.create(layer.props), {\n        viewport: layer.context.viewport,\n        mousePosition: layer.context.mousePosition,\n        pickingActive: 0,\n        devicePixelRatio: cssToDeviceRatio(this.gl)\n      });\n\n      if (effects) {\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = effects[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var effect = _step3.value;\n            Object.assign(moduleParameters, effect.getModuleParameters(layer));\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n              _iterator3[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      }\n\n      return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n    }\n  }]);\n\n  return LayersPass;\n}(Pass);\n\nexport { LayersPass as default };\nexport function layerIndexResolver() {\n  var startIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var layerIndices = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var resolvers = {};\n  return function (layer, isDrawn) {\n    var indexOverride = layer.props._offset;\n    var layerId = layer.id;\n    var parentId = layer.parent && layer.parent.id;\n    var index;\n\n    if (parentId in resolvers) {\n      var resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n}\n\nfunction getGLViewport(gl, _ref2) {\n  var viewport = _ref2.viewport;\n  var height = gl.canvas ? gl.canvas.clientHeight || gl.canvas.height : 100;\n  var dimensions = viewport;\n  var pixelRatio = cssToDeviceRatio(gl);\n  return [dimensions.x * pixelRatio, (height - dimensions.y - dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl) {\n  var width = gl.drawingBufferWidth;\n  var height = gl.drawingBufferHeight;\n  setParameters(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}","import \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Pass = function () {\n  function Pass(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Pass);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? 'pass' : _props$id;\n    this.id = id;\n    this.gl = gl;\n    this.props = {};\n    Object.assign(this.props, props);\n  }\n\n  _createClass(Pass, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      Object.assign(this.props, props);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {}\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {}\n  }]);\n\n  return Pass;\n}();\n\nexport { Pass as default };","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { default as LayersPass } from './layers-pass';\nimport { Framebuffer, Texture2D, Renderbuffer, withParameters, cssToDeviceRatio } from '@luma.gl/core';\n\nvar ShadowPass = function (_LayersPass) {\n  _inherits(ShadowPass, _LayersPass);\n\n  function ShadowPass(gl, props) {\n    var _parameters, _attachments;\n\n    var _this;\n\n    _classCallCheck(this, ShadowPass);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ShadowPass).call(this, gl, props));\n    _this.shadowMap = new Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9729), _defineProperty(_parameters, 10240, 9729), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters)\n    });\n    _this.depthBuffer = new Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    _this.fbo = new Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: (_attachments = {}, _defineProperty(_attachments, 36064, _this.shadowMap), _defineProperty(_attachments, 36096, _this.depthBuffer), _attachments)\n    });\n    return _this;\n  }\n\n  _createClass(ShadowPass, [{\n    key: \"render\",\n    value: function render(params) {\n      var _this2 = this;\n\n      var target = this.fbo;\n      withParameters(this.gl, {\n        depthRange: [0, 1],\n        depthTest: true,\n        blend: false,\n        clearColor: [1, 1, 1, 1]\n      }, function () {\n        var viewport = params.viewports[0];\n        var pixelRatio = cssToDeviceRatio(_this2.gl);\n        var width = viewport.width * pixelRatio;\n        var height = viewport.height * pixelRatio;\n\n        if (width !== target.width || height !== target.height) {\n          target.resize({\n            width: width,\n            height: height\n          });\n        }\n\n        _get(_getPrototypeOf(ShadowPass.prototype), \"render\", _this2).call(_this2, _objectSpread({}, params, {\n          target: target,\n          pass: 'shadow'\n        }));\n      });\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return layer.props.shadowEnabled !== false;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {\n      return {\n        drawToShadowMap: true\n      };\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.fbo) {\n        this.fbo[\"delete\"]();\n        this.fbo = null;\n      }\n\n      if (this.shadowMap) {\n        this.shadowMap[\"delete\"]();\n        this.shadowMap = null;\n      }\n\n      if (this.depthBuffer) {\n        this.depthBuffer[\"delete\"]();\n        this.depthBuffer = null;\n      }\n    }\n  }]);\n\n  return ShadowPass;\n}(LayersPass);\n\nexport { ShadowPass as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport project from '../project/project';\nimport { Vector3, Matrix4 } from 'math.gl';\nimport memoize from '../../utils/memoize';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nvar vs = \"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\";\nvar fs = \"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\";\nvar getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nvar getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\nvar DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nvar VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  var _xyz = _slicedToArray(xyz, 3),\n      x = _xyz[0],\n      y = _xyz[1],\n      z = _xyz[2];\n\n  var coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition(_ref) {\n  var viewport = _ref.viewport,\n      center = _ref.center;\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices(_ref2) {\n  var viewport = _ref2.viewport,\n      shadowMatrices = _ref2.shadowMatrices;\n  var projectionMatrices = [];\n  var pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  var farZ = viewport.isGeospatial ? undefined : 1;\n  var corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(function (pixel) {\n    return screenToCommonSpace(pixel, pixelUnprojectionMatrix);\n  });\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var shadowMatrix = _step.value;\n      var viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n      var positions = corners.map(function (corner) {\n        return viewMatrix.transform(corner);\n      });\n      var projectionMatrix = new Matrix4().ortho({\n        left: Math.min.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[0];\n        }))),\n        right: Math.max.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[0];\n        }))),\n        bottom: Math.min.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[1];\n        }))),\n        top: Math.max.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[1];\n        }))),\n        near: Math.min.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return -position[2];\n        }))),\n        far: Math.max.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return -position[2];\n        })))\n      });\n      projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n    };\n\n    for (var _iterator = shadowMatrices[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  var center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  var projectCenters = [];\n  var viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (var i = 0; i < opts.shadowMatrices.length; i++) {\n    var viewProjectionMatrix = viewProjectionMatrices[i];\n    var viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new Vector3(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT && context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (var _i = 0; _i < viewProjectionMatrices.length; _i++) {\n    uniforms[\"shadow_uViewProjectionMatrices[\".concat(_i, \"]\")] = viewProjectionMatrices[_i];\n    uniforms[\"shadow_uProjectCenters[\".concat(_i, \"]\")] = projectCenters[_i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[\"shadow_uShadowMap\".concat(_i)] = opts.shadowMaps[_i];\n    } else {\n      uniforms[\"shadow_uShadowMap\".concat(_i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs: vs,\n  fs: fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': \"\\n    color = shadow_filterShadowColor(color);\\n    \"\n  },\n  getUniforms: function getUniforms() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0) {\n      var shadowUniforms = {};\n      var _opts$shadowEnabled = opts.shadowEnabled,\n          shadowEnabled = _opts$shadowEnabled === void 0 ? true : _opts$shadowEnabled;\n\n      if (shadowEnabled && opts.shadowMatrices && opts.shadowMatrices.length > 0) {\n        Object.assign(shadowUniforms, createShadowUniforms(opts, context));\n      } else {\n        Object.assign(shadowUniforms, {\n          shadow_uDrawShadowMap: false,\n          shadow_uUseShadowMap: false\n        });\n      }\n\n      return shadowUniforms;\n    }\n\n    return {};\n  }\n};","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.some\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { Texture2D, ProgramManager } from '@luma.gl/core';\nimport { AmbientLight } from './ambient-light';\nimport { DirectionalLight } from './directional-light';\nimport Effect from '../../lib/effect';\nimport { Matrix4, Vector3 } from 'math.gl';\nimport ShadowPass from '../../passes/shadow-pass';\nimport { default as shadow } from '../../shaderlib/shadow/shadow';\nvar DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nvar DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nvar DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\n\nvar LightingEffect = function (_Effect) {\n  _inherits(LightingEffect, _Effect);\n\n  function LightingEffect(props) {\n    var _this;\n\n    _classCallCheck(this, LightingEffect);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LightingEffect).call(this, props));\n    _this.ambientLight = null;\n    _this.directionalLights = [];\n    _this.pointLights = [];\n    _this.shadowColor = DEFAULT_SHADOW_COLOR;\n    _this.shadowPasses = [];\n    _this.shadowMaps = [];\n    _this.dummyShadowMap = null;\n    _this.shadow = false;\n    _this.programManager = null;\n\n    for (var key in props) {\n      var lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          _this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          _this.directionalLights.push(lightSource);\n\n          break;\n\n        case 'point':\n          _this.pointLights.push(lightSource);\n\n          break;\n\n        default:\n      }\n    }\n\n    _this._applyDefaultLights();\n\n    _this.shadow = _this.directionalLights.some(function (light) {\n      return light.shadow;\n    });\n    return _this;\n  }\n\n  _createClass(LightingEffect, [{\n    key: \"preRender\",\n    value: function preRender(gl, _ref) {\n      var layers = _ref.layers,\n          layerFilter = _ref.layerFilter,\n          viewports = _ref.viewports,\n          onViewportActive = _ref.onViewportActive,\n          views = _ref.views;\n      if (!this.shadow) return;\n      this.shadowMatrices = this._createLightMatrix();\n\n      if (this.shadowPasses.length === 0) {\n        this._createShadowPasses(gl);\n      }\n\n      if (!this.programManager) {\n        this.programManager = ProgramManager.getDefaultProgramManager(gl);\n\n        if (shadow) {\n          this.programManager.addDefaultModule(shadow);\n        }\n      }\n\n      if (!this.dummyShadowMap) {\n        this.dummyShadowMap = new Texture2D(gl, {\n          width: 1,\n          height: 1\n        });\n      }\n\n      for (var i = 0; i < this.shadowPasses.length; i++) {\n        var shadowPass = this.shadowPasses[i];\n        shadowPass.render({\n          layers: layers,\n          layerFilter: layerFilter,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          views: views,\n          moduleParameters: {\n            shadowLightId: i,\n            dummyShadowMap: this.dummyShadowMap,\n            shadowMatrices: this.shadowMatrices\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters(layer) {\n      var parameters = this.shadow ? {\n        shadowMaps: this.shadowMaps,\n        dummyShadowMap: this.dummyShadowMap,\n        shadowColor: this.shadowColor,\n        shadowMatrices: this.shadowMatrices\n      } : {};\n      parameters.lightSources = {\n        ambientLight: this.ambientLight,\n        directionalLights: this.directionalLights.map(function (directionalLight) {\n          return directionalLight.getProjectedLight({\n            layer: layer\n          });\n        }),\n        pointLights: this.pointLights.map(function (pointLight) {\n          return pointLight.getProjectedLight({\n            layer: layer\n          });\n        })\n      };\n      return parameters;\n    }\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.shadowPasses[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var shadowPass = _step.value;\n          shadowPass[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.shadowPasses.length = 0;\n      this.shadowMaps.length = 0;\n\n      if (this.dummyShadowMap) {\n        this.dummyShadowMap[\"delete\"]();\n        this.dummyShadowMap = null;\n      }\n\n      if (this.shadow && this.programManager) {\n        this.programManager.removeDefaultModule(shadow);\n        this.programManager = null;\n      }\n    }\n  }, {\n    key: \"_createLightMatrix\",\n    value: function _createLightMatrix() {\n      var lightMatrices = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.directionalLights[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var light = _step2.value;\n          var viewMatrix = new Matrix4().lookAt({\n            eye: new Vector3(light.direction).negate()\n          });\n          lightMatrices.push(viewMatrix);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return lightMatrices;\n    }\n  }, {\n    key: \"_createShadowPasses\",\n    value: function _createShadowPasses(gl) {\n      for (var i = 0; i < this.directionalLights.length; i++) {\n        var shadowPass = new ShadowPass(gl);\n        this.shadowPasses[i] = shadowPass;\n        this.shadowMaps[i] = shadowPass.shadowMap;\n      }\n    }\n  }, {\n    key: \"_applyDefaultLights\",\n    value: function _applyDefaultLights() {\n      var ambientLight = this.ambientLight,\n          pointLights = this.pointLights,\n          directionalLights = this.directionalLights;\n\n      if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n        this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n        this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n      }\n    }\n  }]);\n\n  return LightingEffect;\n}(Effect);\n\nexport { LightingEffect as default };","import \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { deepEqual } from '../utils/deep-equal';\nimport { default as LightingEffect } from '../effects/lighting/lighting-effect';\nvar DEFAULT_LIGHTING_EFFECT = new LightingEffect();\n\nvar EffectManager = function () {\n  function EffectManager() {\n    _classCallCheck(this, EffectManager);\n\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  _createClass(EffectManager, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('effects' in props) {\n        if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n          this.setEffects(props.effects);\n          this._needsRedraw = 'effects changed';\n        }\n      }\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"getEffects\",\n    value: function getEffects() {\n      return this._internalEffects;\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      this.cleanup();\n    }\n  }, {\n    key: \"setEffects\",\n    value: function setEffects() {\n      var effects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      this.cleanup();\n      this.effects = effects;\n\n      this._createInternalEffects();\n    }\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.effects[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var effect = _step.value;\n          effect.cleanup();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this._internalEffects[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _effect = _step2.value;\n\n          _effect.cleanup();\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      this.effects.length = 0;\n      this._internalEffects.length = 0;\n    }\n  }, {\n    key: \"_createInternalEffects\",\n    value: function _createInternalEffects() {\n      this._internalEffects = this.effects.slice();\n\n      if (!this.effects.some(function (effect) {\n        return effect instanceof LightingEffect;\n      })) {\n        this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n      }\n    }\n  }]);\n\n  return EffectManager;\n}();\n\nexport { EffectManager as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport LayersPass from './layers-pass';\n\nvar DrawLayersPass = function (_LayersPass) {\n  _inherits(DrawLayersPass, _LayersPass);\n\n  function DrawLayersPass() {\n    _classCallCheck(this, DrawLayersPass);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DrawLayersPass).apply(this, arguments));\n  }\n\n  return DrawLayersPass;\n}(LayersPass);\n\nexport { DrawLayersPass as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport LayersPass from './layers-pass';\nimport { withParameters } from '@luma.gl/core';\nvar PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\n\nvar PickLayersPass = function (_LayersPass) {\n  _inherits(PickLayersPass, _LayersPass);\n\n  function PickLayersPass() {\n    _classCallCheck(this, PickLayersPass);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PickLayersPass).apply(this, arguments));\n  }\n\n  _createClass(PickLayersPass, [{\n    key: \"render\",\n    value: function render(props) {\n      if (props.pickingFBO) {\n        this._drawPickingBuffer(props);\n      } else {\n        _get(_getPrototypeOf(PickLayersPass.prototype), \"render\", this).call(this, props);\n      }\n    }\n  }, {\n    key: \"_drawPickingBuffer\",\n    value: function _drawPickingBuffer(_ref) {\n      var _this = this;\n\n      var layers = _ref.layers,\n          layerFilter = _ref.layerFilter,\n          viewports = _ref.viewports,\n          onViewportActive = _ref.onViewportActive,\n          pickingFBO = _ref.pickingFBO,\n          _ref$deviceRect = _ref.deviceRect,\n          x = _ref$deviceRect.x,\n          y = _ref$deviceRect.y,\n          width = _ref$deviceRect.width,\n          height = _ref$deviceRect.height,\n          _ref$pass = _ref.pass,\n          pass = _ref$pass === void 0 ? 'picking' : _ref$pass,\n          redrawReason = _ref.redrawReason,\n          pickZ = _ref.pickZ;\n      var gl = this.gl;\n      this.pickZ = pickZ;\n      return withParameters(gl, _objectSpread({\n        scissorTest: true,\n        scissor: [x, y, width, height],\n        clearColor: [0, 0, 0, 0],\n        depthMask: true,\n        depthTest: true,\n        depthRange: [0, 1],\n        colorMask: [true, true, true, true]\n      }, PICKING_PARAMETERS, {\n        blend: !pickZ\n      }), function () {\n        _get(_getPrototypeOf(PickLayersPass.prototype), \"render\", _this).call(_this, {\n          target: pickingFBO,\n          layers: layers,\n          layerFilter: layerFilter,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          pass: pass,\n          redrawReason: redrawReason\n        });\n      });\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return layer.props.pickable;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {\n      return {\n        pickingActive: 1,\n        pickingAttribute: this.pickZ,\n        lightSources: {}\n      };\n    }\n  }, {\n    key: \"getLayerParameters\",\n    value: function getLayerParameters(layer, layerIndex) {\n      var pickParameters = this.pickZ ? {\n        blend: false\n      } : _objectSpread({}, PICKING_PARAMETERS, {\n        blend: true,\n        blendColor: [0, 0, 0, (layerIndex + 1) / 255]\n      });\n      return Object.assign({}, layer.props.parameters, pickParameters);\n    }\n  }]);\n\n  return PickLayersPass;\n}(LayersPass);\n\nexport { PickLayersPass as default };","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport debug from '../debug';\nimport DrawLayersPass from '../passes/draw-layers-pass';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { Framebuffer } from '@luma.gl/core';\nvar TRACE_RENDER_LAYERS = 'deckRenderer.renderLayers';\n\nvar DeckRenderer = function () {\n  function DeckRenderer(gl) {\n    _classCallCheck(this, DeckRenderer);\n\n    this.gl = gl;\n    this.layerFilter = null;\n    this.drawPickingColors = false;\n    this.drawLayersPass = new DrawLayersPass(gl);\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.renderCount = 0;\n    this._needsRedraw = 'Initial render';\n    this.renderBuffers = [];\n    this.lastPostProcessEffect = null;\n    this._onError = null;\n  }\n\n  _createClass(DeckRenderer, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('layerFilter' in props && this.layerFilter !== props.layerFilter) {\n        this.layerFilter = props.layerFilter;\n        this._needsRedraw = 'layerFilter changed';\n      }\n\n      if ('drawPickingColors' in props && this.drawPickingColors !== props.drawPickingColors) {\n        this.drawPickingColors = props.drawPickingColors;\n        this._needsRedraw = 'drawPickingColors changed';\n      }\n\n      if ('onError' in props) {\n        this._onError = props.onError;\n      }\n    }\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers(opts) {\n      var layerPass = this.drawPickingColors ? this.pickLayersPass : this.drawLayersPass;\n      opts.layerFilter = this.layerFilter;\n      opts.onError = this._onError;\n      opts.effects = opts.effects || [];\n      opts.target = opts.target || Framebuffer.getDefaultFramebuffer(this.gl);\n\n      this._preRender(opts.effects, opts);\n\n      var outputBuffer = this.lastPostProcessEffect ? this.renderBuffers[0] : opts.target;\n      var renderStats = layerPass.render(_objectSpread({}, opts, {\n        target: outputBuffer\n      }));\n\n      this._postRender(opts.effects, opts);\n\n      this.renderCount++;\n      debug(TRACE_RENDER_LAYERS, this, renderStats, opts);\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      var renderBuffers = this.renderBuffers;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = renderBuffers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var buffer = _step.value;\n          buffer[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      renderBuffers.length = 0;\n    }\n  }, {\n    key: \"_preRender\",\n    value: function _preRender(effects, opts) {\n      var lastPostProcessEffect = null;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = effects[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var effect = _step2.value;\n          effect.preRender(this.gl, opts);\n\n          if (effect.postRender) {\n            lastPostProcessEffect = effect;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      if (lastPostProcessEffect) {\n        this._resizeRenderBuffers();\n      }\n\n      this.lastPostProcessEffect = lastPostProcessEffect;\n    }\n  }, {\n    key: \"_resizeRenderBuffers\",\n    value: function _resizeRenderBuffers() {\n      var renderBuffers = this.renderBuffers;\n\n      if (renderBuffers.length === 0) {\n        renderBuffers.push(new Framebuffer(this.gl), new Framebuffer(this.gl));\n      }\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = renderBuffers[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var buffer = _step3.value;\n          buffer.resize();\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_postRender\",\n    value: function _postRender(effects, opts) {\n      var renderBuffers = this.renderBuffers;\n      var params = {\n        inputBuffer: renderBuffers[0],\n        swapBuffer: renderBuffers[1],\n        target: null\n      };\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = effects[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var effect = _step4.value;\n\n          if (effect.postRender) {\n            if (effect === this.lastPostProcessEffect) {\n              params.target = opts.target;\n              effect.postRender(this.gl, params);\n              break;\n            }\n\n            var buffer = effect.postRender(this.gl, params);\n            params.inputBuffer = buffer;\n            params.swapBuffer = buffer === renderBuffers[0] ? renderBuffers[1] : renderBuffers[0];\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  }]);\n\n  return DeckRenderer;\n}();\n\nexport { DeckRenderer as default };","import \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport log from '../../utils/log';\nvar NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedLayer: null,\n  pickedObjectIndex: -1\n};\nexport function getClosestObject(_ref) {\n  var pickedColors = _ref.pickedColors,\n      layers = _ref.layers,\n      deviceX = _ref.deviceX,\n      deviceY = _ref.deviceY,\n      deviceRadius = _ref.deviceRadius,\n      deviceRect = _ref.deviceRect;\n\n  if (pickedColors) {\n    var x = deviceRect.x,\n        y = deviceRect.y,\n        width = deviceRect.width,\n        height = deviceRect.height;\n    var minSquareDistanceToCenter = deviceRadius * deviceRadius;\n    var closestPixelIndex = -1;\n    var i = 0;\n\n    for (var row = 0; row < height; row++) {\n      var dy = row + y - deviceY;\n      var dy2 = dy * dy;\n\n      if (dy2 > minSquareDistanceToCenter) {\n        i += 4 * width;\n      } else {\n        for (var col = 0; col < width; col++) {\n          var pickedLayerIndex = pickedColors[i + 3] - 1;\n\n          if (pickedLayerIndex >= 0) {\n            var dx = col + x - deviceX;\n            var d2 = dx * dx + dy2;\n\n            if (d2 <= minSquareDistanceToCenter) {\n              minSquareDistanceToCenter = d2;\n              closestPixelIndex = i;\n            }\n          }\n\n          i += 4;\n        }\n      }\n    }\n\n    if (closestPixelIndex >= 0) {\n      var _pickedLayerIndex = pickedColors[closestPixelIndex + 3] - 1;\n\n      var pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n      var pickedLayer = layers[_pickedLayerIndex];\n\n      if (pickedLayer) {\n        var pickedObjectIndex = pickedLayer.decodePickingColor(pickedColor);\n\n        var _dy = Math.floor(closestPixelIndex / 4 / width);\n\n        var _dx = closestPixelIndex / 4 - _dy * width;\n\n        return {\n          pickedColor: pickedColor,\n          pickedLayer: pickedLayer,\n          pickedObjectIndex: pickedObjectIndex,\n          pickedX: x + _dx,\n          pickedY: y + _dy\n        };\n      }\n\n      log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n    }\n  }\n\n  return NO_PICKED_OBJECT;\n}\nexport function getUniqueObjects(_ref2) {\n  var pickedColors = _ref2.pickedColors,\n      layers = _ref2.layers;\n  var uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (var i = 0; i < pickedColors.length; i += 4) {\n      var pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        var pickedColor = pickedColors.slice(i, i + 4);\n        var colorKey = pickedColor.join(',');\n\n        if (!uniqueColors.has(colorKey)) {\n          var pickedLayer = layers[pickedLayerIndex];\n\n          if (pickedLayer) {\n            uniqueColors.set(colorKey, {\n              pickedColor: pickedColor,\n              pickedLayer: pickedLayer,\n              pickedObjectIndex: pickedLayer.decodePickingColor(pickedColor)\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport \"core-js/modules/es6.array.find\";\nexport function processPickInfo(_ref) {\n  var pickInfo = _ref.pickInfo,\n      lastPickedInfo = _ref.lastPickedInfo,\n      mode = _ref.mode,\n      layers = _ref.layers,\n      viewports = _ref.viewports,\n      x = _ref.x,\n      y = _ref.y,\n      z = _ref.z,\n      pixelRatio = _ref.pixelRatio;\n  var pickedColor = pickInfo.pickedColor,\n      pickedLayer = pickInfo.pickedLayer,\n      pickedObjectIndex = pickInfo.pickedObjectIndex;\n  var affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    var lastPickedObjectIndex = lastPickedInfo.index;\n    var lastPickedLayerId = lastPickedInfo.layerId;\n    var pickedLayerId = pickedLayer && pickedLayer.props.id;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedObjectIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        var lastPickedLayer = layers.find(function (layer) {\n          return layer.props.id === lastPickedLayerId;\n        });\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  var viewport = getViewportFromCoordinates({\n    viewports: viewports\n  });\n  var coordinate = viewport && viewport.unproject([x, y], {\n    targetZ: z\n  });\n  var baseInfo = {\n    color: null,\n    layer: null,\n    index: -1,\n    picked: false,\n    x: x,\n    y: y,\n    pixel: [x, y],\n    coordinate: coordinate,\n    lngLat: coordinate,\n    devicePixel: [pickInfo.pickedX, pickInfo.pickedY],\n    pixelRatio: pixelRatio\n  };\n  var infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(function (layer) {\n    var info = Object.assign({}, baseInfo);\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer: layer,\n      info: info,\n      mode: mode\n    });\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    if (info) {\n      infos.set(info.layer.id, info);\n    }\n\n    if (mode === 'hover' && layer.props.autoHighlight) {\n      var pickingModuleParameters = {\n        pickingSelectedColor: pickedLayer === layer ? pickedColor : null\n      };\n      var highlightColor = layer.props.highlightColor;\n\n      if (pickedLayer === layer && typeof highlightColor === 'function') {\n        pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n      }\n\n      layer.setModuleParameters(pickingModuleParameters);\n      layer.setNeedsRedraw();\n    }\n  });\n  return infos;\n}\nexport function getLayerPickingInfo(_ref2) {\n  var layer = _ref2.layer,\n      info = _ref2.info,\n      mode = _ref2.mode;\n\n  while (layer && info) {\n    var sourceLayer = info.layer || layer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info: info,\n      mode: mode,\n      sourceLayer: sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(_ref3) {\n  var viewports = _ref3.viewports;\n  var viewport = viewports[0];\n  return viewport;\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.find\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Framebuffer, Texture2D, isWebGL2, readPixelsToArray, cssToDeviceRatio, cssToDevicePixels } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport log from '../utils/log';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { getClosestObject, getUniqueObjects } from './picking/query-object';\nimport { processPickInfo, getLayerPickingInfo } from './picking/pick-info';\n\nvar DeckPicker = function () {\n  function DeckPicker(gl) {\n    _classCallCheck(this, DeckPicker);\n\n    this.gl = gl;\n    this.pickingFBO = null;\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.layerFilter = null;\n    this.lastPickedInfo = {\n      index: -1,\n      layerId: null,\n      info: null\n    };\n    this._onError = null;\n  }\n\n  _createClass(DeckPicker, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('layerFilter' in props) {\n        this.layerFilter = props.layerFilter;\n      }\n\n      if ('onError' in props) {\n        this._onError = props.onError;\n      }\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      if (this.pickingFBO) {\n        this.pickingFBO[\"delete\"]();\n      }\n\n      if (this.depthFBO) {\n        this.depthFBO.color[\"delete\"]();\n        this.depthFBO[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"pickObject\",\n    value: function pickObject(opts) {\n      return this._pickClosestObject(opts);\n    }\n  }, {\n    key: \"pickObjects\",\n    value: function pickObjects(opts) {\n      return this._pickVisibleObjects(opts);\n    }\n  }, {\n    key: \"getLastPickedObject\",\n    value: function getLastPickedObject(_ref) {\n      var x = _ref.x,\n          y = _ref.y,\n          layers = _ref.layers,\n          viewports = _ref.viewports;\n      var lastPickedInfo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.lastPickedInfo.info;\n      var lastPickedLayerId = lastPickedInfo && lastPickedInfo.layer && lastPickedInfo.layer.id;\n      var layer = lastPickedLayerId ? layers.find(function (l) {\n        return l.id === lastPickedLayerId;\n      }) : null;\n      var coordinate = viewports[0] && viewports[0].unproject([x, y]);\n      var info = {\n        x: x,\n        y: y,\n        coordinate: coordinate,\n        lngLat: coordinate,\n        layer: layer\n      };\n\n      if (layer) {\n        return Object.assign({}, lastPickedInfo, info);\n      }\n\n      return Object.assign(info, {\n        color: null,\n        object: null,\n        index: -1\n      });\n    }\n  }, {\n    key: \"_resizeBuffer\",\n    value: function _resizeBuffer() {\n      var gl = this.gl;\n\n      if (!this.pickingFBO) {\n        this.pickingFBO = new Framebuffer(gl);\n\n        if (Framebuffer.isSupported(gl, {\n          colorBufferFloat: true\n        })) {\n          this.depthFBO = new Framebuffer(gl);\n          this.depthFBO.attach(_defineProperty({}, 36064, new Texture2D(gl, {\n            format: isWebGL2(gl) ? 34836 : 6408,\n            type: 5126\n          })));\n        }\n      }\n\n      this.pickingFBO.resize({\n        width: gl.canvas.width,\n        height: gl.canvas.height\n      });\n\n      if (this.depthFBO) {\n        this.depthFBO.resize({\n          width: gl.canvas.width,\n          height: gl.canvas.height\n        });\n      }\n\n      return this.pickingFBO;\n    }\n  }, {\n    key: \"_getPickable\",\n    value: function _getPickable(layers) {\n      var pickableLayers = layers.filter(function (layer) {\n        return layer.isPickable() && !layer.isComposite;\n      });\n\n      if (pickableLayers.length > 255) {\n        log.warn('Too many pickable layers, only picking the first 255')();\n        return pickableLayers.slice(0, 255);\n      }\n\n      return pickableLayers;\n    }\n  }, {\n    key: \"_pickClosestObject\",\n    value: function _pickClosestObject(_ref2) {\n      var layers = _ref2.layers,\n          viewports = _ref2.viewports,\n          x = _ref2.x,\n          y = _ref2.y,\n          _ref2$radius = _ref2.radius,\n          radius = _ref2$radius === void 0 ? 0 : _ref2$radius,\n          _ref2$depth = _ref2.depth,\n          depth = _ref2$depth === void 0 ? 1 : _ref2$depth,\n          _ref2$mode = _ref2.mode,\n          mode = _ref2$mode === void 0 ? 'query' : _ref2$mode,\n          unproject3D = _ref2.unproject3D,\n          onViewportActive = _ref2.onViewportActive;\n      layers = this._getPickable(layers);\n\n      this._resizeBuffer();\n\n      var pixelRatio = cssToDeviceRatio(this.gl);\n      var devicePixelRange = cssToDevicePixels(this.gl, [x, y], true);\n      var devicePixel = [devicePixelRange.x + Math.floor(devicePixelRange.width / 2), devicePixelRange.y + Math.floor(devicePixelRange.height / 2)];\n      var deviceRadius = Math.round(radius * pixelRatio);\n      var _this$pickingFBO = this.pickingFBO,\n          width = _this$pickingFBO.width,\n          height = _this$pickingFBO.height;\n\n      var deviceRect = this._getPickingRect({\n        deviceX: devicePixel[0],\n        deviceY: devicePixel[1],\n        deviceRadius: deviceRadius,\n        deviceWidth: width,\n        deviceHeight: height\n      });\n\n      var infos;\n      var result = [];\n      var affectedLayers = {};\n\n      for (var i = 0; i < depth; i++) {\n        var pickedColors = deviceRect && this._drawAndSample({\n          layers: layers,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          deviceRect: deviceRect,\n          pass: \"picking:\".concat(mode),\n          redrawReason: mode\n        });\n\n        var pickInfo = getClosestObject({\n          pickedColors: pickedColors,\n          layers: layers,\n          deviceX: devicePixel[0],\n          deviceY: devicePixel[1],\n          deviceRadius: deviceRadius,\n          deviceRect: deviceRect\n        });\n        var z = void 0;\n\n        if (pickInfo.pickedLayer && unproject3D && this.depthFBO) {\n          var zValues = this._drawAndSample({\n            layers: [pickInfo.pickedLayer],\n            viewports: viewports,\n            onViewportActive: onViewportActive,\n            deviceRect: {\n              x: pickInfo.pickedX,\n              y: pickInfo.pickedY,\n              width: 1,\n              height: 1\n            },\n            pass: \"picking:\".concat(mode),\n            redrawReason: 'pick-z',\n            pickZ: true\n          });\n\n          z = zValues[0] * viewports[0].distanceScales.metersPerUnit[2] + viewports[0].position[2];\n        }\n\n        if (pickInfo.pickedColor && i + 1 < depth) {\n          var layerId = pickInfo.pickedColor[3] - 1;\n          affectedLayers[layerId] = true;\n          layers[layerId].clearPickingColor(pickInfo.pickedColor);\n        }\n\n        infos = processPickInfo({\n          pickInfo: pickInfo,\n          lastPickedInfo: this.lastPickedInfo,\n          mode: mode,\n          layers: layers,\n          viewports: viewports,\n          x: x,\n          y: y,\n          z: z,\n          pixelRatio: pixelRatio\n        });\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = infos.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var info = _step.value;\n\n            if (info.layer) {\n              result.push(info);\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (!pickInfo.pickedColor) {\n          break;\n        }\n      }\n\n      for (var _layerId in affectedLayers) {\n        layers[_layerId].restorePickingColors();\n      }\n\n      return {\n        result: result,\n        emptyInfo: infos && infos.get(null)\n      };\n    }\n  }, {\n    key: \"_pickVisibleObjects\",\n    value: function _pickVisibleObjects(_ref3) {\n      var layers = _ref3.layers,\n          viewports = _ref3.viewports,\n          x = _ref3.x,\n          y = _ref3.y,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height,\n          _ref3$mode = _ref3.mode,\n          mode = _ref3$mode === void 0 ? 'query' : _ref3$mode,\n          onViewportActive = _ref3.onViewportActive;\n      layers = this._getPickable(layers);\n\n      this._resizeBuffer();\n\n      var pixelRatio = cssToDeviceRatio(this.gl);\n      var leftTop = cssToDevicePixels(this.gl, [x, y], true);\n      var deviceLeft = leftTop.x;\n      var deviceTop = leftTop.y + leftTop.height;\n      var rightBottom = cssToDevicePixels(this.gl, [x + width, y + height], true);\n      var deviceRight = rightBottom.x + rightBottom.width;\n      var deviceBottom = rightBottom.y;\n      var deviceRect = {\n        x: deviceLeft,\n        y: deviceBottom,\n        width: deviceRight - deviceLeft,\n        height: deviceTop - deviceBottom\n      };\n\n      var pickedColors = this._drawAndSample({\n        layers: layers,\n        viewports: viewports,\n        onViewportActive: onViewportActive,\n        deviceRect: deviceRect,\n        pass: \"picking:\".concat(mode),\n        redrawReason: mode\n      });\n\n      var pickInfos = getUniqueObjects({\n        pickedColors: pickedColors,\n        layers: layers\n      });\n      var uniqueInfos = new Map();\n      pickInfos.forEach(function (pickInfo) {\n        var info = {\n          color: pickInfo.pickedColor,\n          layer: null,\n          index: pickInfo.pickedObjectIndex,\n          picked: true,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          pixelRatio: pixelRatio\n        };\n        info = getLayerPickingInfo({\n          layer: pickInfo.pickedLayer,\n          info: info,\n          mode: mode\n        });\n\n        if (!uniqueInfos.has(info.object)) {\n          uniqueInfos.set(info.object, info);\n        }\n      });\n      return Array.from(uniqueInfos.values());\n    }\n  }, {\n    key: \"_drawAndSample\",\n    value: function _drawAndSample(_ref4) {\n      var layers = _ref4.layers,\n          viewports = _ref4.viewports,\n          onViewportActive = _ref4.onViewportActive,\n          deviceRect = _ref4.deviceRect,\n          pass = _ref4.pass,\n          redrawReason = _ref4.redrawReason,\n          pickZ = _ref4.pickZ;\n      assert(deviceRect.width > 0 && deviceRect.height > 0);\n\n      if (layers.length < 1) {\n        return null;\n      }\n\n      var pickingFBO = pickZ ? this.depthFBO : this.pickingFBO;\n      this.pickLayersPass.render({\n        layers: layers,\n        layerFilter: this.layerFilter,\n        onError: this._onError,\n        viewports: viewports,\n        onViewportActive: onViewportActive,\n        pickingFBO: pickingFBO,\n        deviceRect: deviceRect,\n        pass: pass,\n        redrawReason: redrawReason,\n        pickZ: pickZ\n      });\n      var x = deviceRect.x,\n          y = deviceRect.y,\n          width = deviceRect.width,\n          height = deviceRect.height;\n      var pickedColors = new (pickZ ? Float32Array : Uint8Array)(width * height * 4);\n      readPixelsToArray(pickingFBO, {\n        sourceX: x,\n        sourceY: y,\n        sourceWidth: width,\n        sourceHeight: height,\n        target: pickedColors\n      });\n      return pickedColors;\n    }\n  }, {\n    key: \"_getPickingRect\",\n    value: function _getPickingRect(_ref5) {\n      var deviceX = _ref5.deviceX,\n          deviceY = _ref5.deviceY,\n          deviceRadius = _ref5.deviceRadius,\n          deviceWidth = _ref5.deviceWidth,\n          deviceHeight = _ref5.deviceHeight;\n      var x = Math.max(0, deviceX - deviceRadius);\n      var y = Math.max(0, deviceY - deviceRadius);\n      var width = Math.min(deviceWidth, deviceX + deviceRadius + 1) - x;\n      var height = Math.min(deviceHeight, deviceY + deviceRadius + 1) - y;\n\n      if (width <= 0 || height <= 0) {\n        return null;\n      }\n\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    }\n  }]);\n\n  return DeckPicker;\n}();\n\nexport { DeckPicker as default };","import \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar defaultStyle = {\n  zIndex: 1,\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: 0,\n  left: 0,\n  display: 'none'\n};\n\nvar Tooltip = function () {\n  function Tooltip(canvas) {\n    _classCallCheck(this, Tooltip);\n\n    var canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n  }\n\n  _createClass(Tooltip, [{\n    key: \"setTooltip\",\n    value: function setTooltip(displayInfo, x, y) {\n      var el = this.el;\n\n      if (typeof displayInfo === 'string') {\n        el.innerText = displayInfo;\n      } else if (!displayInfo) {\n        el.style.display = 'none';\n        return;\n      } else {\n        if ('text' in displayInfo) {\n          el.innerText = displayInfo.text;\n        }\n\n        if ('html' in displayInfo) {\n          el.innerHTML = displayInfo.html;\n        }\n\n        if ('className' in displayInfo) {\n          el.className = displayInfo.className;\n        }\n\n        Object.assign(el.style, displayInfo.style);\n      }\n\n      el.style.display = 'block';\n      el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      if (this.el) {\n        this.el.remove();\n      }\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexport { Tooltip as default };","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}","import { global, isBrowser } from '../utils/globals';\nvar _parseImageNode = global._parseImageNode;\nvar IMAGE_SUPPORTED = typeof Image !== 'undefined';\nvar IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nvar NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nvar DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    case 'html':\n      return IMAGE_SUPPORTED;\n\n    case 'ndarray':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\");\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assert from '../utils/assert';\nexport function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  var format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      var imageData = context.getImageData(0, 0, image.width, image.height);\n      return imageData;\n\n    default:\n      return assert(false);\n  }\n}\nexport { getImageData as getImageSize };\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && _typeof(image) === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}","import \"core-js/modules/es6.typed.uint8-array\";\nvar SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nvar SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    var textDecoder = new TextDecoder();\n    var xmlText = textDecoder.decode(arrayBuffer);\n    var src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { getBlobOrSVGDataUrl } from './svg-utils';\nexport default function parseToImage(_x, _x2, _x3) {\n  return _parseToImage.apply(this, arguments);\n}\n\nfunction _parseToImage() {\n  _parseToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blobOrDataUrl, URL, objectUrl;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n            URL = self.URL || self.webkitURL;\n            objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n            _context.prev = 3;\n            _context.next = 6;\n            return loadToImage(objectUrl || blobOrDataUrl, options);\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n            _context.prev = 7;\n\n            if (objectUrl) {\n              URL.revokeObjectURL(objectUrl);\n            }\n\n            return _context.finish(7);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3,, 7, 10]]);\n  }));\n  return _parseToImage.apply(this, arguments);\n}\n\nexport function loadToImage(_x4, _x5) {\n  return _loadToImage.apply(this, arguments);\n}\n\nfunction _loadToImage() {\n  _loadToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    var image;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            image = new Image();\n            image.src = url;\n\n            if (!(options.image && options.image.decode && image.decode)) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 5;\n            return image.decode();\n\n          case 5:\n            return _context2.abrupt(\"return\", image);\n\n          case 6:\n            _context2.next = 8;\n            return new Promise(function (resolve, reject) {\n              try {\n                image.onload = function () {\n                  return resolve(image);\n                };\n\n                image.onerror = function (err) {\n                  return reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n                };\n              } catch (error) {\n                reject(error);\n              }\n            });\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadToImage.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nvar EMPTY_OBJECT = {};\nvar imagebitmapOptionsSupported = true;\nexport default function parseToImageBitmap(_x, _x2, _x3) {\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction _parseToImageBitmap() {\n  _parseToImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blob, image, imagebitmapOptions;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isSVG(url)) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 3;\n            return parseToImage(arrayBuffer, options, url);\n\n          case 3:\n            image = _context.sent;\n            blob = image;\n            _context.next = 8;\n            break;\n\n          case 7:\n            blob = getBlob(arrayBuffer, url);\n\n          case 8:\n            imagebitmapOptions = options && options.imagebitmap;\n            _context.next = 11;\n            return safeCreateImageBitmap(blob, imagebitmapOptions);\n\n          case 11:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction safeCreateImageBitmap(_x4) {\n  return _safeCreateImageBitmap.apply(this, arguments);\n}\n\nfunction _safeCreateImageBitmap() {\n  _safeCreateImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(blob) {\n    var imagebitmapOptions,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            imagebitmapOptions = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : null;\n\n            if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n              imagebitmapOptions = null;\n            }\n\n            if (!imagebitmapOptions) {\n              _context2.next = 13;\n              break;\n            }\n\n            _context2.prev = 3;\n            _context2.next = 6;\n            return createImageBitmap(blob, imagebitmapOptions);\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](3);\n            console.warn(_context2.t0);\n            imagebitmapOptionsSupported = false;\n\n          case 13:\n            _context2.next = 15;\n            return createImageBitmap(blob);\n\n          case 15:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[3, 9]]);\n  }));\n  return _safeCreateImageBitmap.apply(this, arguments);\n}\n\nfunction isEmptyObject(object) {\n  for (var key in object || EMPTY_OBJECT) {\n    return true;\n  }\n\n  return false;\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nvar BIG_ENDIAN = false;\nvar LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  var _getJpegMarkers = getJpegMarkers(),\n      tableMarkers = _getJpegMarkers.tableMarkers,\n      sofMarkers = _getJpegMarkers.sofMarkers;\n\n  var i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    var marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  var tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (var i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  var sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers: tableMarkers,\n    sofMarkers: sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}","import { global } from '../utils/globals';\nimport assert from '../utils/assert';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  var _ref = getBinaryImageMetadata(arrayBuffer) || {},\n      mimeType = _ref.mimeType;\n\n  var _parseImageNode = global._parseImageNode;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport assert from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default function parseImage(_x, _x2, _x3) {\n  return _parseImage.apply(this, arguments);\n}\n\nfunction _parseImage() {\n  _parseImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context) {\n    var imageOptions, imageType, _ref, url, loadType, image;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = options || {};\n            imageOptions = options.image || {};\n            imageType = imageOptions.type || 'auto';\n            _ref = context || {}, url = _ref.url;\n            loadType = getLoadableImageType(imageType);\n            _context.t0 = loadType;\n            _context.next = _context.t0 === 'imagebitmap' ? 8 : _context.t0 === 'image' ? 12 : _context.t0 === 'data' ? 16 : 20;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return parseToImageBitmap(arrayBuffer, options, url);\n\n          case 10:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 12:\n            _context.next = 14;\n            return parseToImage(arrayBuffer, options, url);\n\n          case 14:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 16:\n            _context.next = 18;\n            return parseToNodeImage(arrayBuffer, options);\n\n          case 18:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 20:\n            assert(false);\n\n          case 21:\n            if (imageType === 'data') {\n              image = getImageData(image);\n            }\n\n            return _context.abrupt(\"return\", image);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImage.apply(this, arguments);\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}","import \"core-js/modules/es6.typed.data-view\";\nimport parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nvar VERSION = typeof \"2.2.2\" !== 'undefined' ? \"2.2.2\" : 'latest';\nvar EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nvar MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vndmicrosofticon', 'image/svg+xml'];\nvar ImageLoader = {\n  id: 'image',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  test: function test(arrayBuffer) {\n    return Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)));\n  },\n  options: {\n    image: {\n      type: 'auto',\n      decode: true\n    }\n  }\n};\nexport default ImageLoader;","function isJSON(text) {\n  var firstChar = text[0];\n  var lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\nexport default {\n  name: 'JSON',\n  extensions: ['json', 'geojson'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n};","import \"core-js/modules/es6.object.assign\";\nimport { registerLoaders } from '@loaders.gl/core';\nimport { ImageLoader } from '@loaders.gl/images';\nimport { global } from 'probe.gl/env';\nimport log from '../utils/log';\nimport { register } from '../debug';\nimport jsonLoader from '../utils/json-loader';\nvar version = typeof \"8.1.12\" !== 'undefined' ? \"8.1.12\" : global.DECK_VERSION || 'untranspiled source';\nvar existingVersion = global.deck && global.deck.VERSION;\n\nif (existingVersion && existingVersion !== version) {\n  throw new Error(\"deck.gl - multiple versions detected: \".concat(existingVersion, \" vs \").concat(version));\n}\n\nif (!existingVersion) {\n  if (process.env.NODE_ENV !== 'production') {\n    log.log(0, \"deck.gl \".concat(version, \" - set deck.log.level=1 (or higher) to trace attribute updates\"))();\n  }\n\n  global.deck = Object.assign(global.deck || {}, {\n    VERSION: version,\n    version: version,\n    log: log,\n    _registerLoggers: register\n  });\n  registerLoaders([jsonLoader, ImageLoader]);\n}\n\nexport default global.deck;","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.object.seal\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport { FEATURES, hasFeatures } from '../features';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nvar GL_QUERY_RESULT = 0x8866;\nvar GL_QUERY_RESULT_AVAILABLE = 0x8867;\nvar GL_TIME_ELAPSED_EXT = 0x88bf;\nvar GL_GPU_DISJOINT_EXT = 0x8fbb;\nvar GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\nvar GL_ANY_SAMPLES_PASSED = 0x8c2f;\nvar GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\n\nvar Query = function (_Resource) {\n  _inherits(Query, _Resource);\n\n  _createClass(Query, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var webgl2 = isWebGL2(gl);\n      var hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n      var supported = webgl2 || hasTimerQuery;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = opts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n\n          switch (key) {\n            case 'queries':\n              supported = supported && webgl2;\n              break;\n\n            case 'timers':\n              supported = supported && hasTimerQuery;\n              break;\n\n            default:\n              assert(false);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return supported;\n    }\n  }]);\n\n  function Query(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Query);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Query).call(this, gl, opts));\n    _this.target = null;\n    _this._queryPending = false;\n    _this._pollingPromise = null;\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Query, [{\n    key: \"beginTimeElapsedQuery\",\n    value: function beginTimeElapsedQuery() {\n      return this.begin(GL_TIME_ELAPSED_EXT);\n    }\n  }, {\n    key: \"beginOcclusionQuery\",\n    value: function beginOcclusionQuery() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$conservative = _ref.conservative,\n          conservative = _ref$conservative === void 0 ? false : _ref$conservative;\n\n      return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n    }\n  }, {\n    key: \"beginTransformFeedbackQuery\",\n    value: function beginTransformFeedbackQuery() {\n      return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n    }\n  }, {\n    key: \"begin\",\n    value: function begin(target) {\n      if (this._queryPending) {\n        return this;\n      }\n\n      this.target = target;\n      this.gl.beginQuery(this.target, this.handle);\n      return this;\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (this._queryPending) {\n        return this;\n      }\n\n      if (this.target) {\n        this.gl.endQuery(this.target);\n        this.target = null;\n        this._queryPending = true;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"isResultAvailable\",\n    value: function isResultAvailable() {\n      if (!this._queryPending) {\n        return false;\n      }\n\n      var resultAvailable = this.gl.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n\n      if (resultAvailable) {\n        this._queryPending = false;\n      }\n\n      return resultAvailable;\n    }\n  }, {\n    key: \"isTimerDisjoint\",\n    value: function isTimerDisjoint() {\n      return this.gl.getParameter(GL_GPU_DISJOINT_EXT);\n    }\n  }, {\n    key: \"getResult\",\n    value: function getResult() {\n      return this.gl.getQueryParameter(this.handle, GL_QUERY_RESULT);\n    }\n  }, {\n    key: \"getTimerMilliseconds\",\n    value: function getTimerMilliseconds() {\n      return this.getResult() / 1e6;\n    }\n  }, {\n    key: \"createPoll\",\n    value: function createPoll() {\n      var _this2 = this;\n\n      var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.POSITIVE_INFINITY;\n\n      if (this._pollingPromise) {\n        return this._pollingPromise;\n      }\n\n      var counter = 0;\n      this._pollingPromise = new Promise(function (resolve, reject) {\n        var poll = function poll() {\n          if (_this2.isResultAvailable()) {\n            resolve(_this2.getResult());\n            _this2._pollingPromise = null;\n          } else if (counter++ > limit) {\n            reject('Timed out');\n            _this2._pollingPromise = null;\n          } else {\n            requestAnimationFrame(poll);\n          }\n        };\n\n        requestAnimationFrame(poll);\n      });\n      return this._pollingPromise;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return Query.isSupported(this.gl) ? this.gl.createQuery() : null;\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteQuery(this.handle);\n    }\n  }]);\n\n  return Query;\n}(Resource);\n\nexport { Query as default };","export function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.date.now\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.bind\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL, createGLContext, instrumentGLContext, resizeGLContext, resetParameters } from '@luma.gl/gltools';\nimport { requestAnimationFrame, cancelAnimationFrame, Query, lumaStats, Framebuffer, log, assert } from '@luma.gl/webgl';\nimport { isBrowser } from 'probe.gl/env';\nvar isPage = isBrowser() && typeof document !== 'undefined';\nvar statIdCounter = 0;\n\nvar AnimationLoop = function () {\n  function AnimationLoop() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AnimationLoop);\n\n    var _props$onCreateContex = props.onCreateContext,\n        onCreateContext = _props$onCreateContex === void 0 ? function (opts) {\n      return createGLContext(opts);\n    } : _props$onCreateContex,\n        _props$onAddHTML = props.onAddHTML,\n        onAddHTML = _props$onAddHTML === void 0 ? null : _props$onAddHTML,\n        _props$onInitialize = props.onInitialize,\n        onInitialize = _props$onInitialize === void 0 ? function () {} : _props$onInitialize,\n        _props$onRender = props.onRender,\n        onRender = _props$onRender === void 0 ? function () {} : _props$onRender,\n        _props$onFinalize = props.onFinalize,\n        onFinalize = _props$onFinalize === void 0 ? function () {} : _props$onFinalize,\n        onError = props.onError,\n        _props$gl = props.gl,\n        gl = _props$gl === void 0 ? null : _props$gl,\n        _props$glOptions = props.glOptions,\n        glOptions = _props$glOptions === void 0 ? {} : _props$glOptions,\n        _props$debug = props.debug,\n        debug = _props$debug === void 0 ? false : _props$debug,\n        _props$createFramebuf = props.createFramebuffer,\n        createFramebuffer = _props$createFramebuf === void 0 ? false : _props$createFramebuf,\n        _props$autoResizeView = props.autoResizeViewport,\n        autoResizeViewport = _props$autoResizeView === void 0 ? true : _props$autoResizeView,\n        _props$autoResizeDraw = props.autoResizeDrawingBuffer,\n        autoResizeDrawingBuffer = _props$autoResizeDraw === void 0 ? true : _props$autoResizeDraw,\n        _props$stats = props.stats,\n        stats = _props$stats === void 0 ? lumaStats.get(\"animation-loop-\".concat(statIdCounter++)) : _props$stats;\n    var _props$useDevicePixel = props.useDevicePixels,\n        useDevicePixels = _props$useDevicePixel === void 0 ? true : _props$useDevicePixel;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext: onCreateContext,\n      onAddHTML: onAddHTML,\n      onInitialize: onInitialize,\n      onRender: onRender,\n      onFinalize: onFinalize,\n      onError: onError,\n      gl: gl,\n      glOptions: glOptions,\n      debug: debug,\n      createFramebuffer: createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport: autoResizeViewport,\n      autoResizeDrawingBuffer: autoResizeDrawingBuffer,\n      useDevicePixels: useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  _createClass(AnimationLoop, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.stop();\n\n      this._setDisplay(null);\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw(reason) {\n      assert(typeof reason === 'string');\n      this.needsRedraw = this.needsRedraw || reason;\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('autoResizeViewport' in props) {\n        this.autoResizeViewport = props.autoResizeViewport;\n      }\n\n      if ('autoResizeDrawingBuffer' in props) {\n        this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n      }\n\n      if ('useDevicePixels' in props) {\n        this.useDevicePixels = props.useDevicePixels;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._running) {\n        return this;\n      }\n\n      this._running = true;\n\n      var startPromise = this._getPageLoadPromise().then(function () {\n        if (!_this._running || _this._initialized) {\n          return null;\n        }\n\n        _this._createWebGLContext(opts);\n\n        _this._createFramebuffer();\n\n        _this._startEventHandling();\n\n        _this._initializeCallbackData();\n\n        _this._updateCallbackData();\n\n        _this._resizeCanvasDrawingBuffer();\n\n        _this._resizeViewport();\n\n        _this._gpuTimeQuery = Query.isSupported(_this.gl, ['timers']) ? new Query(_this.gl) : null;\n        _this._initialized = true;\n        return _this.onInitialize(_this.animationProps);\n      }).then(function (appContext) {\n        if (_this._running) {\n          _this._addCallbackData(appContext || {});\n\n          if (appContext !== false) {\n            _this._startLoop();\n          }\n        }\n      });\n\n      if (this.props.onError) {\n        startPromise[\"catch\"](this.props.onError);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      this._beginTimers();\n\n      this._setupFrame();\n\n      this._updateCallbackData();\n\n      this._renderFrame(this.animationProps);\n\n      this._clearNeedsRedraw();\n\n      if (this.offScreen && this.gl.commit) {\n        this.gl.commit();\n      }\n\n      if (this._resolveNextFrame) {\n        this._resolveNextFrame(this);\n\n        this._nextFramePromise = null;\n        this._resolveNextFrame = null;\n      }\n\n      this._endTimers();\n\n      return this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this._running) {\n        this._finalizeCallbackData();\n\n        cancelAnimationFrame(this._animationFrameId);\n        this._nextFramePromise = null;\n        this._resolveNextFrame = null;\n        this._animationFrameId = null;\n        this._running = false;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"attachTimeline\",\n    value: function attachTimeline(timeline) {\n      this.timeline = timeline;\n      return this.timeline;\n    }\n  }, {\n    key: \"detachTimeline\",\n    value: function detachTimeline() {\n      this.timeline = null;\n    }\n  }, {\n    key: \"waitForRender\",\n    value: function waitForRender() {\n      var _this2 = this;\n\n      this.setNeedsRedraw('waitForRender');\n\n      if (!this._nextFramePromise) {\n        this._nextFramePromise = new Promise(function (resolve) {\n          _this2._resolveNextFrame = resolve;\n        });\n      }\n\n      return this._nextFramePromise;\n    }\n  }, {\n    key: \"toDataURL\",\n    value: function () {\n      var _toDataURL = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setNeedsRedraw('toDataURL');\n                _context.next = 3;\n                return this.waitForRender();\n\n              case 3:\n                return _context.abrupt(\"return\", this.gl.canvas.toDataURL());\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function toDataURL() {\n        return _toDataURL.apply(this, arguments);\n      }\n\n      return toDataURL;\n    }()\n  }, {\n    key: \"onCreateContext\",\n    value: function onCreateContext() {\n      var _this$props;\n\n      return (_this$props = this.props).onCreateContext.apply(_this$props, arguments);\n    }\n  }, {\n    key: \"onInitialize\",\n    value: function onInitialize() {\n      var _this$props2;\n\n      return (_this$props2 = this.props).onInitialize.apply(_this$props2, arguments);\n    }\n  }, {\n    key: \"onRender\",\n    value: function onRender() {\n      var _this$props3;\n\n      return (_this$props3 = this.props).onRender.apply(_this$props3, arguments);\n    }\n  }, {\n    key: \"onFinalize\",\n    value: function onFinalize() {\n      var _this$props4;\n\n      return (_this$props4 = this.props).onFinalize.apply(_this$props4, arguments);\n    }\n  }, {\n    key: \"getHTMLControlValue\",\n    value: function getHTMLControlValue(id) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var element = document.getElementById(id);\n      return element ? Number(element.value) : defaultValue;\n    }\n  }, {\n    key: \"setViewParameters\",\n    value: function setViewParameters() {\n      log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n      return this;\n    }\n  }, {\n    key: \"_startLoop\",\n    value: function _startLoop() {\n      var _this3 = this;\n\n      var renderFrame = function renderFrame() {\n        if (!_this3._running) {\n          return;\n        }\n\n        _this3.redraw();\n\n        _this3._animationFrameId = _this3._requestAnimationFrame(renderFrame);\n      };\n\n      cancelAnimationFrame(this._animationFrameId);\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    }\n  }, {\n    key: \"_getPageLoadPromise\",\n    value: function _getPageLoadPromise() {\n      if (!this._pageLoadPromise) {\n        this._pageLoadPromise = isPage ? new Promise(function (resolve, reject) {\n          if (isPage && document.readyState === 'complete') {\n            resolve(document);\n            return;\n          }\n\n          window.addEventListener('load', function () {\n            resolve(document);\n          });\n        }) : Promise.resolve({});\n      }\n\n      return this._pageLoadPromise;\n    }\n  }, {\n    key: \"_setDisplay\",\n    value: function _setDisplay(display) {\n      if (this.display) {\n        this.display[\"delete\"]();\n        this.display.animationLoop = null;\n      }\n\n      if (display) {\n        display.animationLoop = this;\n      }\n\n      this.display = display;\n    }\n  }, {\n    key: \"_requestAnimationFrame\",\n    value: function _requestAnimationFrame(renderFrameCallback) {\n      if (this.display && this.display.requestAnimationFrame(renderFrameCallback)) {\n        return;\n      }\n\n      requestAnimationFrame(renderFrameCallback);\n    }\n  }, {\n    key: \"_renderFrame\",\n    value: function _renderFrame() {\n      if (this.display) {\n        var _this$display;\n\n        (_this$display = this.display)._renderFrame.apply(_this$display, arguments);\n\n        return;\n      }\n\n      this.onRender.apply(this, arguments);\n    }\n  }, {\n    key: \"_clearNeedsRedraw\",\n    value: function _clearNeedsRedraw() {\n      this.needsRedraw = null;\n    }\n  }, {\n    key: \"_setupFrame\",\n    value: function _setupFrame() {\n      if (this._onSetupFrame) {\n        this._onSetupFrame(this.animationProps);\n      } else {\n        this._resizeCanvasDrawingBuffer();\n\n        this._resizeViewport();\n\n        this._resizeFramebuffer();\n      }\n    }\n  }, {\n    key: \"_initializeCallbackData\",\n    value: function _initializeCallbackData() {\n      this.animationProps = {\n        gl: this.gl,\n        stop: this.stop,\n        canvas: this.gl.canvas,\n        framebuffer: this.framebuffer,\n        useDevicePixels: this.useDevicePixels,\n        needsRedraw: null,\n        startTime: Date.now(),\n        engineTime: 0,\n        tick: 0,\n        tock: 0,\n        time: 0,\n        _timeline: this.timeline,\n        _loop: this,\n        _animationLoop: this,\n        _mousePosition: null\n      };\n    }\n  }, {\n    key: \"_updateCallbackData\",\n    value: function _updateCallbackData() {\n      var _this$_getSizeAndAspe = this._getSizeAndAspect(),\n          width = _this$_getSizeAndAspe.width,\n          height = _this$_getSizeAndAspe.height,\n          aspect = _this$_getSizeAndAspe.aspect;\n\n      if (width !== this.animationProps.width || height !== this.animationProps.height) {\n        this.setNeedsRedraw('drawing buffer resized');\n      }\n\n      if (aspect !== this.animationProps.aspect) {\n        this.setNeedsRedraw('drawing buffer aspect changed');\n      }\n\n      this.animationProps.width = width;\n      this.animationProps.height = height;\n      this.animationProps.aspect = aspect;\n      this.animationProps.needsRedraw = this.needsRedraw;\n      this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n      if (this.timeline) {\n        this.timeline.update(this.animationProps.engineTime);\n      }\n\n      this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n      this.animationProps.tock++;\n      this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n      this.animationProps._offScreen = this.offScreen;\n    }\n  }, {\n    key: \"_finalizeCallbackData\",\n    value: function _finalizeCallbackData() {\n      this.onFinalize(this.animationProps);\n    }\n  }, {\n    key: \"_addCallbackData\",\n    value: function _addCallbackData(appContext) {\n      if (_typeof(appContext) === 'object' && appContext !== null) {\n        this.animationProps = Object.assign({}, this.animationProps, appContext);\n      }\n    }\n  }, {\n    key: \"_createWebGLContext\",\n    value: function _createWebGLContext(opts) {\n      this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n      opts = Object.assign({}, opts, this.props.glOptions);\n      this.gl = this.props.gl ? instrumentGLContext(this.props.gl, opts) : this.onCreateContext(opts);\n\n      if (!isWebGL(this.gl)) {\n        throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n      }\n\n      resetParameters(this.gl);\n\n      this._createInfoDiv();\n    }\n  }, {\n    key: \"_createInfoDiv\",\n    value: function _createInfoDiv() {\n      if (this.gl.canvas && this.props.onAddHTML) {\n        var wrapperDiv = document.createElement('div');\n        document.body.appendChild(wrapperDiv);\n        wrapperDiv.style.position = 'relative';\n        var div = document.createElement('div');\n        div.style.position = 'absolute';\n        div.style.left = '10px';\n        div.style.bottom = '10px';\n        div.style.width = '300px';\n        div.style.background = 'white';\n        wrapperDiv.appendChild(this.gl.canvas);\n        wrapperDiv.appendChild(div);\n        var html = this.props.onAddHTML(div);\n\n        if (html) {\n          div.innerHTML = html;\n        }\n      }\n    }\n  }, {\n    key: \"_getSizeAndAspect\",\n    value: function _getSizeAndAspect() {\n      var width = this.gl.drawingBufferWidth;\n      var height = this.gl.drawingBufferHeight;\n      var aspect = 1;\n      var canvas = this.gl.canvas;\n\n      if (canvas && canvas.clientHeight) {\n        aspect = canvas.clientWidth / canvas.clientHeight;\n      } else if (width > 0 && height > 0) {\n        aspect = width / height;\n      }\n\n      return {\n        width: width,\n        height: height,\n        aspect: aspect\n      };\n    }\n  }, {\n    key: \"_resizeViewport\",\n    value: function _resizeViewport() {\n      if (this.autoResizeViewport) {\n        this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n      }\n    }\n  }, {\n    key: \"_resizeCanvasDrawingBuffer\",\n    value: function _resizeCanvasDrawingBuffer() {\n      if (this.autoResizeDrawingBuffer) {\n        resizeGLContext(this.gl, {\n          useDevicePixels: this.useDevicePixels\n        });\n      }\n    }\n  }, {\n    key: \"_createFramebuffer\",\n    value: function _createFramebuffer() {\n      if (this.props.createFramebuffer) {\n        this.framebuffer = new Framebuffer(this.gl);\n      }\n    }\n  }, {\n    key: \"_resizeFramebuffer\",\n    value: function _resizeFramebuffer() {\n      if (this.framebuffer) {\n        this.framebuffer.resize({\n          width: this.gl.drawingBufferWidth,\n          height: this.gl.drawingBufferHeight\n        });\n      }\n    }\n  }, {\n    key: \"_beginTimers\",\n    value: function _beginTimers() {\n      this.frameRate.timeEnd();\n      this.frameRate.timeStart();\n\n      if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n        this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n      }\n\n      if (this._gpuTimeQuery) {\n        this._gpuTimeQuery.beginTimeElapsedQuery();\n      }\n\n      this.cpuTime.timeStart();\n    }\n  }, {\n    key: \"_endTimers\",\n    value: function _endTimers() {\n      this.cpuTime.timeEnd();\n\n      if (this._gpuTimeQuery) {\n        this._gpuTimeQuery.end();\n      }\n    }\n  }, {\n    key: \"_startEventHandling\",\n    value: function _startEventHandling() {\n      var canvas = this.gl.canvas;\n\n      if (canvas) {\n        canvas.addEventListener('mousemove', this._onMousemove);\n        canvas.addEventListener('mouseleave', this._onMouseleave);\n      }\n    }\n  }, {\n    key: \"_onMousemove\",\n    value: function _onMousemove(e) {\n      this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n    }\n  }, {\n    key: \"_onMouseleave\",\n    value: function _onMouseleave(e) {\n      this.animationProps._mousePosition = null;\n    }\n  }]);\n\n  return AnimationLoop;\n}();\n\nexport { AnimationLoop as default };","var INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar MOUSE_INPUT_MAP = {\n  mousedown: INPUT_START,\n  mousemove: INPUT_MOVE,\n  mouseup: INPUT_END\n};\n\nfunction some(array, predict) {\n  for (var i = 0; i < array.length; i++) {\n    if (predict(array[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function enhancePointerEventInput(PointerEventInput) {\n  var oldHandler = PointerEventInput.prototype.handler;\n\n  PointerEventInput.prototype.handler = function handler(ev) {\n    var store = this.store;\n\n    if (ev.button > 0) {\n      if (!some(store, function (e) {\n        return e.pointerId === ev.pointerId;\n      })) {\n        store.push(ev);\n      }\n    }\n\n    oldHandler.call(this, ev);\n  };\n}\nexport function enhanceMouseInput(MouseInput) {\n  MouseInput.prototype.handler = function handler(ev) {\n    var eventType = MOUSE_INPUT_MAP[ev.type];\n\n    if (eventType & INPUT_START && ev.button >= 0) {\n      this.pressed = true;\n    }\n\n    if (eventType & INPUT_MOVE && ev.which === 0) {\n      eventType = INPUT_END;\n    }\n\n    if (!this.pressed) {\n      return;\n    }\n\n    if (eventType & INPUT_END) {\n      this.pressed = false;\n    }\n\n    this.callback(this.manager, eventType, {\n      pointers: [ev],\n      changedPointers: [ev],\n      pointerType: 'mouse',\n      srcEvent: ev\n    });\n  };\n}","import hammerjs from 'hammerjs';\nimport { enhancePointerEventInput, enhanceMouseInput } from './hammer-overrides';\nenhancePointerEventInput(hammerjs.PointerEventInput);\nenhanceMouseInput(hammerjs.MouseInput);\nexport var Manager = hammerjs.Manager;\nexport default hammerjs;","import Hammer from './utils/hammer';\nexport var RECOGNIZERS = Hammer ? [[Hammer.Rotate, {\n  enable: false\n}], [Hammer.Pinch, {\n  enable: false\n}], [Hammer.Swipe, {\n  enable: false\n}], [Hammer.Pan, {\n  threshold: 0,\n  enable: false\n}], [Hammer.Press, {\n  enable: false\n}], [Hammer.Tap, {\n  event: 'doubletap',\n  taps: 2,\n  enable: false\n}], [Hammer.Tap, {\n  event: 'anytap',\n  enable: false\n}], [Hammer.Tap, {\n  enable: false\n}]] : null;\nexport var RECOGNIZER_COMPATIBLE_MAP = {\n  rotate: ['pinch'],\n  pinch: ['pan'],\n  pan: ['press', 'doubletap', 'anytap', 'tap'],\n  doubletap: ['anytap'],\n  anytap: ['tap']\n};\nexport var RECOGNIZER_FALLBACK_MAP = {\n  doubletap: ['tap']\n};\nexport var BASIC_EVENT_ALIASES = {\n  pointerdown: 'pointerdown',\n  pointermove: 'pointermove',\n  pointerup: 'pointerup',\n  touchstart: 'pointerdown',\n  touchmove: 'pointermove',\n  touchend: 'pointerup',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup'\n};\nexport var INPUT_EVENT_TYPES = {\n  KEY_EVENTS: ['keydown', 'keyup'],\n  MOUSE_EVENTS: ['mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'mouseleave'],\n  WHEEL_EVENTS: ['wheel', 'mousewheel', 'DOMMouseScroll']\n};\nexport var EVENT_RECOGNIZER_MAP = {\n  tap: 'tap',\n  anytap: 'anytap',\n  doubletap: 'doubletap',\n  press: 'press',\n  pinch: 'pinch',\n  pinchin: 'pinch',\n  pinchout: 'pinch',\n  pinchstart: 'pinch',\n  pinchmove: 'pinch',\n  pinchend: 'pinch',\n  pinchcancel: 'pinch',\n  rotate: 'rotate',\n  rotatestart: 'rotate',\n  rotatemove: 'rotate',\n  rotateend: 'rotate',\n  rotatecancel: 'rotate',\n  pan: 'pan',\n  panstart: 'pan',\n  panmove: 'pan',\n  panup: 'pan',\n  pandown: 'pan',\n  panleft: 'pan',\n  panright: 'pan',\n  panend: 'pan',\n  pancancel: 'pan',\n  swipe: 'swipe',\n  swipeleft: 'swipe',\n  swiperight: 'swipe',\n  swipeup: 'swipe',\n  swipedown: 'swipe'\n};\nexport var GESTURE_EVENT_ALIASES = {\n  click: 'tap',\n  anyclick: 'anytap',\n  dblclick: 'doubletap',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup',\n  mouseover: 'pointerover',\n  mouseout: 'pointerout',\n  mouseleave: 'pointerleave'\n};","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.index-of\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nvar firefox = userAgent.indexOf('firefox') !== -1;\nvar WHEEL_EVENTS = INPUT_EVENT_TYPES.WHEEL_EVENTS;\nvar EVENT_TYPE = 'wheel';\nvar WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nvar WHEEL_DELTA_PER_LINE = 40;\nvar SHIFT_MULTIPLIER = 0.25;\n\nvar WheelInput = function () {\n  function WheelInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, WheelInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.events = WHEEL_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent, passiveSupported ? {\n        passive: false\n      } : false);\n    });\n  }\n\n  _createClass(WheelInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (!this.options.enable) {\n        return;\n      }\n\n      var value = event.deltaY;\n\n      if (window.WheelEvent) {\n        if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n          value /= window.devicePixelRatio;\n        }\n\n        if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n          value *= WHEEL_DELTA_PER_LINE;\n        }\n      }\n\n      var wheelPosition = {\n        x: event.clientX,\n        y: event.clientY\n      };\n\n      if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n        value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n      }\n\n      if (event.shiftKey && value) {\n        value = value * SHIFT_MULTIPLIER;\n      }\n\n      this._onWheel(event, -value, wheelPosition);\n    }\n  }, {\n    key: \"_onWheel\",\n    value: function _onWheel(srcEvent, delta, position) {\n      this.callback({\n        type: EVENT_TYPE,\n        center: position,\n        delta: delta,\n        srcEvent: srcEvent,\n        pointerType: 'mouse',\n        target: srcEvent.target\n      });\n    }\n  }]);\n\n  return WheelInput;\n}();\n\nexport { WheelInput as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { INPUT_EVENT_TYPES } from '../constants';\nvar MOUSE_EVENTS = INPUT_EVENT_TYPES.MOUSE_EVENTS;\nvar MOVE_EVENT_TYPE = 'pointermove';\nvar OVER_EVENT_TYPE = 'pointerover';\nvar OUT_EVENT_TYPE = 'pointerout';\nvar LEAVE_EVENT_TYPE = 'pointerleave';\n\nvar MoveInput = function () {\n  function MoveInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, MoveInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.pressed = false;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableMoveEvent = this.options.enable;\n    this.enableLeaveEvent = this.options.enable;\n    this.enableOutEvent = this.options.enable;\n    this.enableOverEvent = this.options.enable;\n    this.events = MOUSE_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent);\n    });\n  }\n\n  _createClass(MoveInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === MOVE_EVENT_TYPE) {\n        this.enableMoveEvent = enabled;\n      }\n\n      if (eventType === OVER_EVENT_TYPE) {\n        this.enableOverEvent = enabled;\n      }\n\n      if (eventType === OUT_EVENT_TYPE) {\n        this.enableOutEvent = enabled;\n      }\n\n      if (eventType === LEAVE_EVENT_TYPE) {\n        this.enableLeaveEvent = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      this.handleOverEvent(event);\n      this.handleOutEvent(event);\n      this.handleLeaveEvent(event);\n      this.handleMoveEvent(event);\n    }\n  }, {\n    key: \"handleOverEvent\",\n    value: function handleOverEvent(event) {\n      if (this.enableOverEvent) {\n        if (event.type === 'mouseover') {\n          this.callback({\n            type: OVER_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleOutEvent\",\n    value: function handleOutEvent(event) {\n      if (this.enableOutEvent) {\n        if (event.type === 'mouseout') {\n          this.callback({\n            type: OUT_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleLeaveEvent\",\n    value: function handleLeaveEvent(event) {\n      if (this.enableLeaveEvent) {\n        if (event.type === 'mouseleave') {\n          this.callback({\n            type: LEAVE_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleMoveEvent\",\n    value: function handleMoveEvent(event) {\n      if (this.enableMoveEvent) {\n        switch (event.type) {\n          case 'mousedown':\n            if (event.button >= 0) {\n              this.pressed = true;\n            }\n\n            break;\n\n          case 'mousemove':\n            if (event.which === 0) {\n              this.pressed = false;\n            }\n\n            if (!this.pressed) {\n              this.callback({\n                type: MOVE_EVENT_TYPE,\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n              });\n            }\n\n            break;\n\n          case 'mouseup':\n            this.pressed = false;\n            break;\n\n          default:\n        }\n      }\n    }\n  }]);\n\n  return MoveInput;\n}();\n\nexport { MoveInput as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { INPUT_EVENT_TYPES } from '../constants';\nvar KEY_EVENTS = INPUT_EVENT_TYPES.KEY_EVENTS;\nvar DOWN_EVENT_TYPE = 'keydown';\nvar UP_EVENT_TYPE = 'keyup';\n\nvar KeyInput = function () {\n  function KeyInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, KeyInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableDownEvent = this.options.enable;\n    this.enableUpEvent = this.options.enable;\n    this.events = KEY_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.tabIndex = options.tabIndex || 0;\n    element.style.outline = 'none';\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent);\n    });\n  }\n\n  _createClass(KeyInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === DOWN_EVENT_TYPE) {\n        this.enableDownEvent = enabled;\n      }\n\n      if (eventType === UP_EVENT_TYPE) {\n        this.enableUpEvent = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      var targetElement = event.target || event.srcElement;\n\n      if (targetElement.tagName === 'INPUT' && targetElement.type === 'text' || targetElement.tagName === 'TEXTAREA') {\n        return;\n      }\n\n      if (this.enableDownEvent && event.type === 'keydown') {\n        this.callback({\n          type: DOWN_EVENT_TYPE,\n          srcEvent: event,\n          key: event.key,\n          target: event.target\n        });\n      }\n\n      if (this.enableUpEvent && event.type === 'keyup') {\n        this.callback({\n          type: UP_EVENT_TYPE,\n          srcEvent: event,\n          key: event.key,\n          target: event.target\n        });\n      }\n    }\n  }]);\n\n  return KeyInput;\n}();\n\nexport { KeyInput as default };","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar EVENT_TYPE = 'contextmenu';\n\nvar ContextmenuInput = function () {\n  function ContextmenuInput(element, callback) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, ContextmenuInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.addEventListener('contextmenu', this.handleEvent);\n  }\n\n  _createClass(ContextmenuInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.element.removeEventListener('contextmenu', this.handleEvent);\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (!this.options.enable) {\n        return;\n      }\n\n      this.callback({\n        type: EVENT_TYPE,\n        center: {\n          x: event.clientX,\n          y: event.clientY\n        },\n        srcEvent: event,\n        pointerType: 'mouse',\n        target: event.target\n      });\n    }\n  }]);\n\n  return ContextmenuInput;\n}();\n\nexport { ContextmenuInput as default };","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nvar DOWN_EVENT = 1;\nvar MOVE_EVENT = 2;\nvar UP_EVENT = 4;\nvar MOUSE_EVENTS = {\n  pointerdown: DOWN_EVENT,\n  pointermove: MOVE_EVENT,\n  pointerup: UP_EVENT,\n  mousedown: DOWN_EVENT,\n  mousemove: MOVE_EVENT,\n  mouseup: UP_EVENT\n};\nvar MOUSE_EVENT_WHICH_LEFT = 1;\nvar MOUSE_EVENT_WHICH_MIDDLE = 2;\nvar MOUSE_EVENT_WHICH_RIGHT = 3;\nvar MOUSE_EVENT_BUTTON_LEFT = 0;\nvar MOUSE_EVENT_BUTTON_MIDDLE = 1;\nvar MOUSE_EVENT_BUTTON_RIGHT = 2;\nvar MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nvar MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nvar MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\nexport function whichButtons(event) {\n  var eventType = MOUSE_EVENTS[event.srcEvent.type];\n\n  if (!eventType) {\n    return null;\n  }\n\n  var _event$srcEvent = event.srcEvent,\n      buttons = _event$srcEvent.buttons,\n      button = _event$srcEvent.button,\n      which = _event$srcEvent.which;\n  var leftButton = false;\n  var middleButton = false;\n  var rightButton = false;\n\n  if (eventType === UP_EVENT || eventType === MOVE_EVENT && !Number.isFinite(buttons)) {\n    leftButton = which === MOUSE_EVENT_WHICH_LEFT;\n    middleButton = which === MOUSE_EVENT_WHICH_MIDDLE;\n    rightButton = which === MOUSE_EVENT_WHICH_RIGHT;\n  } else if (eventType === MOVE_EVENT) {\n    leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n    middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n    rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n  } else if (eventType === DOWN_EVENT) {\n    leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n    middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n    rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n  }\n\n  return {\n    leftButton: leftButton,\n    middleButton: middleButton,\n    rightButton: rightButton\n  };\n}\nexport function getOffsetPosition(event, rootElement) {\n  var srcEvent = event.srcEvent;\n\n  if (!event.center && !Number.isFinite(srcEvent.clientX)) {\n    return null;\n  }\n\n  var center = event.center || {\n    x: srcEvent.clientX,\n    y: srcEvent.clientY\n  };\n  var rect = rootElement.getBoundingClientRect();\n  var scaleX = rect.width / rootElement.offsetWidth;\n  var scaleY = rect.height / rootElement.offsetHeight;\n  var offsetCenter = {\n    x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n    y: (center.y - rect.top - rootElement.clientTop) / scaleY\n  };\n  return {\n    center: center,\n    offsetCenter: offsetCenter\n  };\n}","import \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { whichButtons, getOffsetPosition } from './event-utils';\nvar DEFAULT_OPTIONS = {\n  srcElement: 'root',\n  priority: 0\n};\n\nvar EventRegistrar = function () {\n  function EventRegistrar(eventManager) {\n    _classCallCheck(this, EventRegistrar);\n\n    this.eventManager = eventManager;\n    this.handlers = [];\n    this.handlersByElement = new Map();\n    this.handleEvent = this.handleEvent.bind(this);\n    this._active = false;\n  }\n\n  _createClass(EventRegistrar, [{\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return !this._active;\n    }\n  }, {\n    key: \"add\",\n    value: function add(type, handler, opts) {\n      var once = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var passive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      if (opts && (_typeof(opts) !== 'object' || opts.addEventListener)) {\n        opts = {\n          srcElement: opts\n        };\n      }\n\n      opts = opts ? Object.assign({}, DEFAULT_OPTIONS, opts) : DEFAULT_OPTIONS;\n      var entries = handlersByElement.get(opts.srcElement);\n\n      if (!entries) {\n        entries = [];\n        handlersByElement.set(opts.srcElement, entries);\n      }\n\n      var entry = {\n        type: type,\n        handler: handler,\n        srcElement: opts.srcElement,\n        priority: opts.priority\n      };\n\n      if (once) {\n        entry.once = true;\n      }\n\n      if (passive) {\n        entry.passive = true;\n      }\n\n      handlers.push(entry);\n      this._active = this._active || !entry.passive;\n      var insertPosition = entries.length - 1;\n\n      while (insertPosition >= 0) {\n        if (entries[insertPosition].priority >= entry.priority) {\n          break;\n        }\n\n        insertPosition--;\n      }\n\n      entries.splice(insertPosition + 1, 0, entry);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(type, handler) {\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      for (var i = handlers.length - 1; i >= 0; i--) {\n        var entry = handlers[i];\n\n        if (entry.type === type && entry.handler === handler) {\n          handlers.splice(i, 1);\n          var entries = handlersByElement.get(entry.srcElement);\n          entries.splice(entries.indexOf(entry), 1);\n\n          if (entries.length === 0) {\n            handlersByElement[\"delete\"](entry.srcElement);\n          }\n        }\n      }\n\n      this._active = handlers.some(function (entry) {\n        return !entry.passive;\n      });\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (this.isEmpty()) {\n        return;\n      }\n\n      var mjolnirEvent = this._normalizeEvent(event);\n\n      var target = event.srcEvent.target;\n\n      while (target && target !== mjolnirEvent.rootElement) {\n        this._emit(mjolnirEvent, target);\n\n        if (mjolnirEvent.handled) {\n          return;\n        }\n\n        target = target.parentNode;\n      }\n\n      this._emit(mjolnirEvent, 'root');\n    }\n  }, {\n    key: \"_emit\",\n    value: function _emit(event, srcElement) {\n      var entries = this.handlersByElement.get(srcElement);\n\n      if (entries) {\n        var immediatePropagationStopped = false;\n\n        var stopPropagation = function stopPropagation() {\n          event.handled = true;\n        };\n\n        var stopImmediatePropagation = function stopImmediatePropagation() {\n          event.handled = true;\n          immediatePropagationStopped = true;\n        };\n\n        var entriesToRemove = [];\n\n        for (var i = 0; i < entries.length; i++) {\n          var _entries$i = entries[i],\n              type = _entries$i.type,\n              handler = _entries$i.handler,\n              once = _entries$i.once;\n          handler(Object.assign({}, event, {\n            type: type,\n            stopPropagation: stopPropagation,\n            stopImmediatePropagation: stopImmediatePropagation\n          }));\n\n          if (once) {\n            entriesToRemove.push(entries[i]);\n          }\n\n          if (immediatePropagationStopped) {\n            break;\n          }\n        }\n\n        for (var _i = 0; _i < entriesToRemove.length; _i++) {\n          var _entriesToRemove$_i = entriesToRemove[_i],\n              type = _entriesToRemove$_i.type,\n              handler = _entriesToRemove$_i.handler;\n          this.remove(type, handler);\n        }\n      }\n    }\n  }, {\n    key: \"_normalizeEvent\",\n    value: function _normalizeEvent(event) {\n      var rootElement = this.eventManager.element;\n      return Object.assign({}, event, whichButtons(event), getOffsetPosition(event, rootElement), {\n        handled: false,\n        rootElement: rootElement\n      });\n    }\n  }]);\n\n  return EventRegistrar;\n}();\n\nexport { EventRegistrar as default };","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport \"core-js/modules/es6.object.assign\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Manager } from './utils/hammer';\nimport WheelInput from './inputs/wheel-input';\nimport MoveInput from './inputs/move-input';\nimport KeyInput from './inputs/key-input';\nimport ContextmenuInput from './inputs/contextmenu-input';\nimport EventRegistrar from './utils/event-registrar';\nimport { BASIC_EVENT_ALIASES, EVENT_RECOGNIZER_MAP, GESTURE_EVENT_ALIASES, RECOGNIZERS, RECOGNIZER_COMPATIBLE_MAP, RECOGNIZER_FALLBACK_MAP } from './constants';\nvar DEFAULT_OPTIONS = {\n  events: null,\n  recognizers: null,\n  recognizerOptions: {},\n  Manager: Manager,\n  touchAction: 'none',\n  tabIndex: 0\n};\n\nvar EventManager = function () {\n  function EventManager() {\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, EventManager);\n\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.events = new Map();\n    this._onBasicInput = this._onBasicInput.bind(this);\n    this._onOtherEvent = this._onOtherEvent.bind(this);\n    this.setElement(element);\n    var events = options.events;\n\n    if (events) {\n      this.on(events);\n    }\n  }\n\n  _createClass(EventManager, [{\n    key: \"setElement\",\n    value: function setElement(element) {\n      var _this = this;\n\n      if (this.element) {\n        this.destroy();\n      }\n\n      this.element = element;\n\n      if (!element) {\n        return;\n      }\n\n      var options = this.options;\n      var ManagerClass = options.Manager;\n      this.manager = new ManagerClass(element, {\n        touchAction: options.touchAction,\n        recognizers: options.recognizers || RECOGNIZERS\n      }).on('hammer.input', this._onBasicInput);\n\n      if (!options.recognizers) {\n        Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(function (name) {\n          var recognizer = _this.manager.get(name);\n\n          if (recognizer) {\n            RECOGNIZER_COMPATIBLE_MAP[name].forEach(function (otherName) {\n              recognizer.recognizeWith(otherName);\n            });\n          }\n        });\n      }\n\n      for (var recognizerName in options.recognizerOptions) {\n        var recognizer = this.manager.get(recognizerName);\n\n        if (recognizer) {\n          var recognizerOption = options.recognizerOptions[recognizerName];\n          delete recognizerOption.enable;\n          recognizer.set(recognizerOption);\n        }\n      }\n\n      this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      this.moveInput = new MoveInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      this.keyInput = new KeyInput(element, this._onOtherEvent, {\n        enable: false,\n        tabIndex: options.tabIndex\n      });\n      this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.events[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              eventAlias = _step$value[0],\n              eventRegistrar = _step$value[1];\n\n          if (!eventRegistrar.isEmpty()) {\n            this._toggleRecognizer(eventRegistrar.recognizerName, true);\n\n            this.manager.on(eventAlias, eventRegistrar.handleEvent);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.element) {\n        this.wheelInput.destroy();\n        this.moveInput.destroy();\n        this.keyInput.destroy();\n        this.contextmenuInput.destroy();\n        this.manager.destroy();\n        this.wheelInput = null;\n        this.moveInput = null;\n        this.keyInput = null;\n        this.contextmenuInput = null;\n        this.manager = null;\n        this.element = null;\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, handler, opts) {\n      this._addEventHandler(event, handler, opts, false);\n    }\n  }, {\n    key: \"once\",\n    value: function once(event, handler, opts) {\n      this._addEventHandler(event, handler, opts, true);\n    }\n  }, {\n    key: \"watch\",\n    value: function watch(event, handler, opts) {\n      this._addEventHandler(event, handler, opts, false, true);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, handler) {\n      this._removeEventHandler(event, handler);\n    }\n  }, {\n    key: \"_toggleRecognizer\",\n    value: function _toggleRecognizer(name, enabled) {\n      var manager = this.manager;\n\n      if (!manager) {\n        return;\n      }\n\n      var recognizer = manager.get(name);\n\n      if (recognizer && recognizer.options.enable !== enabled) {\n        recognizer.set({\n          enable: enabled\n        });\n        var fallbackRecognizers = RECOGNIZER_FALLBACK_MAP[name];\n\n        if (fallbackRecognizers && !this.options.recognizers) {\n          fallbackRecognizers.forEach(function (otherName) {\n            var otherRecognizer = manager.get(otherName);\n\n            if (enabled) {\n              otherRecognizer.requireFailure(name);\n              recognizer.dropRequireFailure(otherName);\n            } else {\n              otherRecognizer.dropRequireFailure(name);\n            }\n          });\n        }\n      }\n\n      this.wheelInput.enableEventType(name, enabled);\n      this.moveInput.enableEventType(name, enabled);\n      this.keyInput.enableEventType(name, enabled);\n      this.contextmenuInput.enableEventType(name, enabled);\n    }\n  }, {\n    key: \"_addEventHandler\",\n    value: function _addEventHandler(event, handler, opts, once, passive) {\n      if (typeof event !== 'string') {\n        opts = handler;\n\n        for (var eventName in event) {\n          this._addEventHandler(eventName, event[eventName], opts, once, passive);\n        }\n\n        return;\n      }\n\n      var manager = this.manager,\n          events = this.events;\n      var eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n      var eventRegistrar = events.get(eventAlias);\n\n      if (!eventRegistrar) {\n        eventRegistrar = new EventRegistrar(this);\n        events.set(eventAlias, eventRegistrar);\n        eventRegistrar.recognizerName = EVENT_RECOGNIZER_MAP[eventAlias] || eventAlias;\n\n        if (manager) {\n          manager.on(eventAlias, eventRegistrar.handleEvent);\n        }\n      }\n\n      eventRegistrar.add(event, handler, opts, once, passive);\n\n      if (!eventRegistrar.isEmpty()) {\n        this._toggleRecognizer(eventRegistrar.recognizerName, true);\n      }\n    }\n  }, {\n    key: \"_removeEventHandler\",\n    value: function _removeEventHandler(event, handler) {\n      if (typeof event !== 'string') {\n        for (var eventName in event) {\n          this._removeEventHandler(eventName, event[eventName]);\n        }\n\n        return;\n      }\n\n      var events = this.events;\n      var eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n      var eventRegistrar = events.get(eventAlias);\n\n      if (!eventRegistrar) {\n        return;\n      }\n\n      eventRegistrar.remove(event, handler);\n\n      if (eventRegistrar.isEmpty()) {\n        var recognizerName = eventRegistrar.recognizerName;\n        var isRecognizerUsed = false;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = events.values()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var eh = _step2.value;\n\n            if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n              isRecognizerUsed = true;\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n              _iterator2[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        if (!isRecognizerUsed) {\n          this._toggleRecognizer(recognizerName, false);\n        }\n      }\n    }\n  }, {\n    key: \"_onBasicInput\",\n    value: function _onBasicInput(event) {\n      var srcEvent = event.srcEvent;\n      var alias = BASIC_EVENT_ALIASES[srcEvent.type];\n\n      if (alias) {\n        this.manager.emit(alias, event);\n      }\n    }\n  }, {\n    key: \"_onOtherEvent\",\n    value: function _onOtherEvent(event) {\n      this.manager.emit(event.type, event);\n    }\n  }]);\n\n  return EventManager;\n}();\n\nexport { EventManager as default };","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.object.create\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport LayerManager from './layer-manager';\nimport ViewManager from './view-manager';\nimport MapView from '../views/map-view';\nimport EffectManager from './effect-manager';\nimport Effect from './effect';\nimport DeckRenderer from './deck-renderer';\nimport DeckPicker from './deck-picker';\nimport Tooltip from './tooltip';\nimport log from '../utils/log';\nimport { deepEqual } from '../utils/deep-equal';\nimport deckGlobal from './init';\nimport { getBrowser } from 'probe.gl/env';\nimport { AnimationLoop, createGLContext, instrumentGLContext, setParameters, Timeline, lumaStats } from '@luma.gl/core';\nimport { Stats } from 'probe.gl';\nimport { EventManager } from 'mjolnir.js';\nimport assert from '../utils/assert';\nimport { EVENTS } from './constants';\n\nfunction noop() {}\n\nvar getCursor = function getCursor(_ref) {\n  var isDragging = _ref.isDragging;\n  return isDragging ? 'grabbing' : 'grab';\n};\n\nfunction getPropTypes(PropTypes) {\n  return {\n    id: PropTypes.string,\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    layers: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    layerFilter: PropTypes.func,\n    views: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    viewState: PropTypes.object,\n    effects: PropTypes.arrayOf(PropTypes.instanceOf(Effect)),\n    controller: PropTypes.oneOfType([PropTypes.func, PropTypes.bool, PropTypes.object]),\n    gl: PropTypes.object,\n    glOptions: PropTypes.object,\n    parameters: PropTypes.object,\n    pickingRadius: PropTypes.number,\n    useDevicePixels: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n    touchAction: PropTypes.string,\n    onWebGLInitialized: PropTypes.func,\n    onResize: PropTypes.func,\n    onViewStateChange: PropTypes.func,\n    onBeforeRender: PropTypes.func,\n    onAfterRender: PropTypes.func,\n    onLoad: PropTypes.func,\n    onError: PropTypes.func,\n    debug: PropTypes.bool,\n    drawPickingColors: PropTypes.bool,\n    _framebuffer: PropTypes.object,\n    _animate: PropTypes.bool\n  };\n}\n\nvar defaultProps = {\n  id: 'deckgl-overlay',\n  width: '100%',\n  height: '100%',\n  pickingRadius: 0,\n  layerFilter: null,\n  glOptions: {},\n  gl: null,\n  layers: [],\n  effects: [],\n  views: null,\n  controller: null,\n  useDevicePixels: true,\n  touchAction: 'none',\n  _framebuffer: null,\n  _animate: false,\n  onWebGLInitialized: noop,\n  onResize: noop,\n  onViewStateChange: noop,\n  onBeforeRender: noop,\n  onAfterRender: noop,\n  onLoad: noop,\n  onError: null,\n  _onMetrics: null,\n  getCursor: getCursor,\n  debug: false,\n  drawPickingColors: false\n};\n\nvar Deck = function () {\n  function Deck(props) {\n    _classCallCheck(this, Deck);\n\n    props = Object.assign({}, defaultProps, props);\n    this.props = {};\n    this.width = 0;\n    this.height = 0;\n    this.viewManager = null;\n    this.layerManager = null;\n    this.effectManager = null;\n    this.deckRenderer = null;\n    this.deckPicker = null;\n    this._needsRedraw = true;\n    this._pickRequest = {};\n    this._lastPointerDownInfo = null;\n    this.viewState = null;\n    this.interactiveState = {\n      isDragging: false\n    };\n    this._onEvent = this._onEvent.bind(this);\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this._onPointerMove = this._onPointerMove.bind(this);\n    this._pickAndCallback = this._pickAndCallback.bind(this);\n    this._onRendererInitialized = this._onRendererInitialized.bind(this);\n    this._onRenderFrame = this._onRenderFrame.bind(this);\n    this._onViewStateChange = this._onViewStateChange.bind(this);\n    this._onInteractiveStateChange = this._onInteractiveStateChange.bind(this);\n\n    if (props.viewState && props.initialViewState) {\n      log.warn('View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.')();\n    }\n\n    if (getBrowser() === 'IE') {\n      log.warn('IE 11 support will be deprecated in v8.0')();\n    }\n\n    if (!props.gl) {\n      if (typeof document !== 'undefined') {\n        this.canvas = this._createCanvas(props);\n      }\n    }\n\n    this.animationLoop = this._createAnimationLoop(props);\n    this.stats = new Stats({\n      id: 'deck.gl'\n    });\n    this.metrics = {\n      fps: 0,\n      setPropsTime: 0,\n      updateAttributesTime: 0,\n      framesRedrawn: 0,\n      pickTime: 0,\n      pickCount: 0,\n      gpuTime: 0,\n      gpuTimePerFrame: 0,\n      cpuTime: 0,\n      cpuTimePerFrame: 0,\n      bufferMemory: 0,\n      textureMemory: 0,\n      renderbufferMemory: 0,\n      gpuMemory: 0\n    };\n    this._metricsCounter = 0;\n    this.setProps(props);\n    this.animationLoop.start();\n  }\n\n  _createClass(Deck, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.animationLoop.stop();\n      this.animationLoop = null;\n      this._lastPointerDownInfo = null;\n\n      if (this.layerManager) {\n        this.layerManager.finalize();\n        this.layerManager = null;\n        this.viewManager.finalize();\n        this.viewManager = null;\n        this.effectManager.finalize();\n        this.effectManager = null;\n        this.deckRenderer.finalize();\n        this.deckRenderer = null;\n        this.deckPicker.finalize();\n        this.deckPicker = null;\n        this.eventManager.destroy();\n        this.eventManager = null;\n        this.tooltip.remove();\n        this.tooltip = null;\n      }\n\n      if (!this.props.canvas && !this.props.gl && this.canvas) {\n        this.canvas.parentElement.removeChild(this.canvas);\n        this.canvas = null;\n      }\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this.stats.get('setProps Time').timeStart();\n\n      if ('onLayerHover' in props) {\n        log.removed('onLayerHover', 'onHover')();\n      }\n\n      if ('onLayerClick' in props) {\n        log.removed('onLayerClick', 'onClick')();\n      }\n\n      if (props.initialViewState && !deepEqual(this.props.initialViewState, props.initialViewState)) {\n        this.viewState = props.initialViewState;\n      }\n\n      Object.assign(this.props, props);\n\n      this._setCanvasSize(this.props);\n\n      var resolvedProps = Object.create(this.props);\n      Object.assign(resolvedProps, {\n        views: this._getViews(),\n        width: this.width,\n        height: this.height,\n        viewState: this._getViewState()\n      });\n      this.animationLoop.setProps(resolvedProps);\n\n      if (this.layerManager) {\n        this.viewManager.setProps(resolvedProps);\n        this.layerManager.setProps(resolvedProps);\n        this.effectManager.setProps(resolvedProps);\n        this.deckRenderer.setProps(resolvedProps);\n        this.deckPicker.setProps(resolvedProps);\n      }\n\n      this.stats.get('setProps Time').timeEnd();\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n\n      if (this.props._animate) {\n        return 'Deck._animate';\n      }\n\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      var viewManagerNeedsRedraw = this.viewManager.needsRedraw(opts);\n      var layerManagerNeedsRedraw = this.layerManager.needsRedraw(opts);\n      var effectManagerNeedsRedraw = this.effectManager.needsRedraw(opts);\n      var deckRendererNeedsRedraw = this.deckRenderer.needsRedraw(opts);\n      redraw = redraw || viewManagerNeedsRedraw || layerManagerNeedsRedraw || effectManagerNeedsRedraw || deckRendererNeedsRedraw;\n      return redraw;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw(force) {\n      if (!this.layerManager) {\n        return;\n      }\n\n      var redrawReason = force || this.needsRedraw({\n        clearRedrawFlags: true\n      });\n\n      if (!redrawReason) {\n        return;\n      }\n\n      this.stats.get('Redraw Count').incrementCount();\n\n      if (this.props._customRender) {\n        this.props._customRender(redrawReason);\n      } else {\n        this._drawLayers(redrawReason);\n      }\n    }\n  }, {\n    key: \"getViews\",\n    value: function getViews() {\n      return this.viewManager.views;\n    }\n  }, {\n    key: \"getViewports\",\n    value: function getViewports(rect) {\n      return this.viewManager.getViewports(rect);\n    }\n  }, {\n    key: \"pickObject\",\n    value: function pickObject(opts) {\n      var infos = this._pick('pickObject', 'pickObject Time', opts).result;\n\n      return infos.length ? infos[0] : null;\n    }\n  }, {\n    key: \"pickMultipleObjects\",\n    value: function pickMultipleObjects(opts) {\n      opts.depth = opts.depth || 10;\n      return this._pick('pickObject', 'pickMultipleObjects Time', opts).result;\n    }\n  }, {\n    key: \"pickObjects\",\n    value: function pickObjects(opts) {\n      return this._pick('pickObjects', 'pickObjects Time', opts);\n    }\n  }, {\n    key: \"_pick\",\n    value: function _pick(method, statKey, opts) {\n      var stats = this.stats;\n      stats.get('Pick Count').incrementCount();\n      stats.get(statKey).timeStart();\n      var infos = this.deckPicker[method](Object.assign({\n        layers: this.layerManager.getLayers(opts),\n        viewports: this.getViewports(opts),\n        onViewportActive: this.layerManager.activateViewport\n      }, opts));\n      stats.get(statKey).timeEnd();\n      return infos;\n    }\n  }, {\n    key: \"_createCanvas\",\n    value: function _createCanvas(props) {\n      var canvas = props.canvas;\n\n      if (typeof canvas === 'string') {\n        canvas = document.getElementById(canvas);\n        assert(canvas);\n      }\n\n      if (!canvas) {\n        canvas = document.createElement('canvas');\n        var parent = props.parent || document.body;\n        parent.appendChild(canvas);\n      }\n\n      var id = props.id,\n          style = props.style;\n      canvas.id = id;\n      Object.assign(canvas.style, style);\n      return canvas;\n    }\n  }, {\n    key: \"_setCanvasSize\",\n    value: function _setCanvasSize(props) {\n      if (!this.canvas) {\n        return;\n      }\n\n      var width = props.width,\n          height = props.height;\n\n      if (width || width === 0) {\n        width = Number.isFinite(width) ? \"\".concat(width, \"px\") : width;\n        this.canvas.style.width = width;\n      }\n\n      if (height || height === 0) {\n        height = Number.isFinite(height) ? \"\".concat(height, \"px\") : height;\n        this.canvas.style.position = 'absolute';\n        this.canvas.style.height = height;\n      }\n    }\n  }, {\n    key: \"_updateCanvasSize\",\n    value: function _updateCanvasSize() {\n      if (this._checkForCanvasSizeChange()) {\n        var width = this.width,\n            height = this.height;\n        this.viewManager.setProps({\n          width: width,\n          height: height\n        });\n        this.props.onResize({\n          width: this.width,\n          height: this.height\n        });\n      }\n    }\n  }, {\n    key: \"_checkForCanvasSizeChange\",\n    value: function _checkForCanvasSizeChange() {\n      var canvas = this.canvas;\n\n      if (!canvas) {\n        return false;\n      }\n\n      var newWidth = canvas.clientWidth || canvas.width;\n      var newHeight = canvas.clientHeight || canvas.height;\n\n      if (newWidth !== this.width || newHeight !== this.height) {\n        this.width = newWidth;\n        this.height = newHeight;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_createAnimationLoop\",\n    value: function _createAnimationLoop(props) {\n      var _this = this;\n\n      var width = props.width,\n          height = props.height,\n          gl = props.gl,\n          glOptions = props.glOptions,\n          debug = props.debug,\n          useDevicePixels = props.useDevicePixels,\n          autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n      return new AnimationLoop({\n        width: width,\n        height: height,\n        useDevicePixels: useDevicePixels,\n        autoResizeDrawingBuffer: autoResizeDrawingBuffer,\n        autoResizeViewport: false,\n        gl: gl,\n        onCreateContext: function onCreateContext(opts) {\n          return createGLContext(Object.assign({}, glOptions, opts, {\n            canvas: _this.canvas,\n            debug: debug\n          }));\n        },\n        onInitialize: this._onRendererInitialized,\n        onRender: this._onRenderFrame,\n        onBeforeRender: props.onBeforeRender,\n        onAfterRender: props.onAfterRender\n      });\n    }\n  }, {\n    key: \"_getViewState\",\n    value: function _getViewState() {\n      return this.props.viewState || this.viewState;\n    }\n  }, {\n    key: \"_getViews\",\n    value: function _getViews() {\n      var views = this.props.views || [new MapView({\n        id: 'default-view'\n      })];\n      views = Array.isArray(views) ? views : [views];\n\n      if (views.length && this.props.controller) {\n        views[0].props.controller = this.props.controller;\n      }\n\n      return views;\n    }\n  }, {\n    key: \"_onPointerMove\",\n    value: function _onPointerMove(event) {\n      var _pickRequest = this._pickRequest;\n\n      if (event.type === 'pointerleave') {\n        _pickRequest.x = -1;\n        _pickRequest.y = -1;\n        _pickRequest.radius = 0;\n      } else if (event.leftButton || event.rightButton) {\n        return;\n      } else {\n        var pos = event.offsetCenter;\n\n        if (!pos) {\n          return;\n        }\n\n        _pickRequest.x = pos.x;\n        _pickRequest.y = pos.y;\n        _pickRequest.radius = this.props.pickingRadius;\n      }\n\n      if (this.layerManager) {\n        this.layerManager.context.mousePosition = {\n          x: _pickRequest.x,\n          y: _pickRequest.y\n        };\n      }\n\n      _pickRequest.event = event;\n      _pickRequest.mode = 'hover';\n    }\n  }, {\n    key: \"_pickAndCallback\",\n    value: function _pickAndCallback() {\n      var _pickRequest = this._pickRequest;\n\n      if (_pickRequest.event) {\n        var _this$_pick = this._pick('pickObject', 'pickObject Time', _pickRequest),\n            result = _this$_pick.result,\n            emptyInfo = _this$_pick.emptyInfo;\n\n        var pickedInfo = emptyInfo;\n        var handled = false;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = result[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var info = _step.value;\n            pickedInfo = info;\n            handled = info.layer.onHover(info, _pickRequest.event);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (!handled && this.props.onHover) {\n          this.props.onHover(pickedInfo, _pickRequest.event);\n        }\n\n        if (this.props.getTooltip) {\n          var displayInfo = this.props.getTooltip(pickedInfo);\n          this.tooltip.setTooltip(displayInfo, pickedInfo.x, pickedInfo.y);\n        }\n\n        _pickRequest.event = null;\n      }\n    }\n  }, {\n    key: \"_updateCursor\",\n    value: function _updateCursor() {\n      var container = this.props.parent || this.canvas;\n\n      if (container) {\n        container.style.cursor = this.props.getCursor(this.interactiveState);\n      }\n    }\n  }, {\n    key: \"_setGLContext\",\n    value: function _setGLContext(gl) {\n      if (this.layerManager) {\n        return;\n      }\n\n      if (!this.canvas) {\n        this.canvas = gl.canvas;\n        instrumentGLContext(gl, {\n          enable: true,\n          copyState: true\n        });\n      }\n\n      this.tooltip = new Tooltip(this.canvas);\n      setParameters(gl, {\n        blend: true,\n        blendFunc: [770, 771, 1, 771],\n        polygonOffsetFill: true,\n        depthTest: true,\n        depthFunc: 515\n      });\n      this.props.onWebGLInitialized(gl);\n      var timeline = new Timeline();\n      timeline.play();\n      this.animationLoop.attachTimeline(timeline);\n      this.eventManager = new EventManager(this.props.parent || gl.canvas, {\n        touchAction: this.props.touchAction,\n        events: {\n          pointerdown: this._onPointerDown,\n          pointermove: this._onPointerMove,\n          pointerleave: this._onPointerMove\n        }\n      });\n\n      for (var eventType in EVENTS) {\n        this.eventManager.on(eventType, this._onEvent);\n      }\n\n      this.viewManager = new ViewManager({\n        timeline: timeline,\n        eventManager: this.eventManager,\n        onViewStateChange: this._onViewStateChange,\n        onInteractiveStateChange: this._onInteractiveStateChange,\n        views: this._getViews(),\n        viewState: this._getViewState(),\n        width: this.width,\n        height: this.height\n      });\n      var viewport = this.viewManager.getViewports()[0];\n      this.layerManager = new LayerManager(gl, {\n        deck: this,\n        stats: this.stats,\n        viewport: viewport,\n        timeline: timeline\n      });\n      this.effectManager = new EffectManager();\n      this.deckRenderer = new DeckRenderer(gl);\n      this.deckPicker = new DeckPicker(gl);\n      this.setProps(this.props);\n\n      this._updateCanvasSize();\n\n      this.props.onLoad();\n    }\n  }, {\n    key: \"_drawLayers\",\n    value: function _drawLayers(redrawReason, renderOptions) {\n      var gl = this.layerManager.context.gl;\n      setParameters(gl, this.props.parameters);\n      this.props.onBeforeRender({\n        gl: gl\n      });\n      this.deckRenderer.renderLayers(Object.assign({\n        target: this.props._framebuffer,\n        layers: this.layerManager.getLayers(),\n        viewports: this.viewManager.getViewports(),\n        onViewportActive: this.layerManager.activateViewport,\n        views: this.viewManager.getViews(),\n        pass: 'screen',\n        redrawReason: redrawReason,\n        effects: this.effectManager.getEffects()\n      }, renderOptions));\n      this.props.onAfterRender({\n        gl: gl\n      });\n    }\n  }, {\n    key: \"_onRendererInitialized\",\n    value: function _onRendererInitialized(_ref2) {\n      var gl = _ref2.gl;\n\n      this._setGLContext(gl);\n    }\n  }, {\n    key: \"_onRenderFrame\",\n    value: function _onRenderFrame(animationProps) {\n      this._getFrameStats();\n\n      if (this._metricsCounter++ % 60 === 0) {\n        this._getMetrics();\n\n        this.stats.reset();\n        log.table(4, this.metrics)();\n\n        if (this.props._onMetrics) {\n          this.props._onMetrics(this.metrics);\n        }\n      }\n\n      this._updateCanvasSize();\n\n      this._updateCursor();\n\n      this.layerManager.updateLayers();\n\n      this._pickAndCallback();\n\n      this.redraw(false);\n\n      if (this.viewManager) {\n        this.viewManager.updateViewStates();\n      }\n    }\n  }, {\n    key: \"_onViewStateChange\",\n    value: function _onViewStateChange(params) {\n      var viewState = this.props.onViewStateChange(params) || params.viewState;\n\n      if (this.viewState) {\n        this.viewState = _objectSpread({}, this.viewState, _defineProperty({}, params.viewId, viewState));\n\n        if (!this.props.viewState) {\n          this.viewManager.setProps({\n            viewState: this.viewState\n          });\n        }\n      }\n    }\n  }, {\n    key: \"_onInteractiveStateChange\",\n    value: function _onInteractiveStateChange(_ref3) {\n      var _ref3$isDragging = _ref3.isDragging,\n          isDragging = _ref3$isDragging === void 0 ? false : _ref3$isDragging;\n\n      if (isDragging !== this.interactiveState.isDragging) {\n        this.interactiveState.isDragging = isDragging;\n      }\n    }\n  }, {\n    key: \"_onEvent\",\n    value: function _onEvent(event) {\n      var eventOptions = EVENTS[event.type];\n      var pos = event.offsetCenter;\n\n      if (!eventOptions || !pos) {\n        return;\n      }\n\n      var layers = this.layerManager.getLayers();\n      var info = this.deckPicker.getLastPickedObject({\n        x: pos.x,\n        y: pos.y,\n        layers: layers,\n        viewports: this.getViewports(pos)\n      }, this._lastPointerDownInfo);\n      var layer = info.layer;\n      var layerHandler = layer && (layer[eventOptions.handler] || layer.props[eventOptions.handler]);\n      var rootHandler = this.props[eventOptions.handler];\n      var handled = false;\n\n      if (layerHandler) {\n        handled = layerHandler.call(layer, info, event);\n      }\n\n      if (!handled && rootHandler) {\n        rootHandler(info, event);\n      }\n    }\n  }, {\n    key: \"_onPointerDown\",\n    value: function _onPointerDown(event) {\n      var pos = event.offsetCenter;\n      this._lastPointerDownInfo = this.pickObject({\n        x: pos.x,\n        y: pos.y,\n        radius: this.props.pickingRadius\n      });\n    }\n  }, {\n    key: \"_getFrameStats\",\n    value: function _getFrameStats() {\n      var stats = this.stats;\n      stats.get('frameRate').timeEnd();\n      stats.get('frameRate').timeStart();\n      var animationLoopStats = this.animationLoop.stats;\n      stats.get('GPU Time').addTime(animationLoopStats.get('GPU Time').lastTiming);\n      stats.get('CPU Time').addTime(animationLoopStats.get('CPU Time').lastTiming);\n    }\n  }, {\n    key: \"_getMetrics\",\n    value: function _getMetrics() {\n      var metrics = this.metrics,\n          stats = this.stats;\n      metrics.fps = stats.get('frameRate').getHz();\n      metrics.setPropsTime = stats.get('setProps Time').time;\n      metrics.updateAttributesTime = stats.get('Update Attributes').time;\n      metrics.framesRedrawn = stats.get('Redraw Count').count;\n      metrics.pickTime = stats.get('pickObject Time').time + stats.get('pickMultipleObjects Time').time + stats.get('pickObjects Time').time;\n      metrics.pickCount = stats.get('Pick Count').count;\n      metrics.gpuTime = stats.get('GPU Time').time;\n      metrics.cpuTime = stats.get('CPU Time').time;\n      metrics.gpuTimePerFrame = stats.get('GPU Time').getAverageTime();\n      metrics.cpuTimePerFrame = stats.get('CPU Time').getAverageTime();\n      var memoryStats = lumaStats.get('Memory Usage');\n      metrics.bufferMemory = memoryStats.get('Buffer Memory').count;\n      metrics.textureMemory = memoryStats.get('Texture Memory').count;\n      metrics.renderbufferMemory = memoryStats.get('Renderbuffer Memory').count;\n      metrics.gpuMemory = memoryStats.get('GPU Memory').count;\n    }\n  }]);\n\n  return Deck;\n}();\n\nexport { Deck as default };\nDeck.getPropTypes = getPropTypes;\nDeck.defaultProps = defaultProps;\nDeck.VERSION = deckGlobal.VERSION;","export function inheritsFrom(Type, ParentType) {\n  while (Type) {\n    if (Type === ParentType) {\n      return true;\n    }\n\n    Type = Object.getPrototypeOf(Type);\n  }\n\n  return false;\n}","import \"core-js/modules/es7.object.values\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { createElement } from 'react';\nimport { inheritsFrom } from './inherits-from';\nimport { Layer, View } from '@deck.gl/core';\n\nfunction wrapInView(node) {\n  if (!node) {\n    return node;\n  }\n\n  if (typeof node === 'function') {\n    return createElement(View, {}, node);\n  }\n\n  if (Array.isArray(node)) {\n    return node.map(wrapInView);\n  }\n\n  if (node.type === React.Fragment) {\n    return wrapInView(node.props.children);\n  }\n\n  if (inheritsFrom(node.type, View)) {\n    return node;\n  }\n\n  return node;\n}\n\nexport default function extractJSXLayers(_ref) {\n  var children = _ref.children,\n      layers = _ref.layers,\n      views = _ref.views;\n  var reactChildren = [];\n  var jsxLayers = [];\n  var jsxViews = {};\n  React.Children.forEach(wrapInView(children), function (reactElement) {\n    if (reactElement) {\n      var ElementType = reactElement.type;\n\n      if (inheritsFrom(ElementType, Layer)) {\n        var layer = createLayer(ElementType, reactElement.props);\n        jsxLayers.push(layer);\n      } else {\n        reactChildren.push(reactElement);\n      }\n\n      if (ElementType !== View && inheritsFrom(ElementType, View) && reactElement.props.id) {\n        var view = new ElementType(reactElement.props);\n        jsxViews[view.id] = view;\n      }\n    }\n  });\n\n  if (Object.keys(jsxViews).length > 0) {\n    if (Array.isArray(views)) {\n      views.forEach(function (view) {\n        jsxViews[view.id] = view;\n      });\n    } else if (views) {\n      jsxViews[views.id] = views;\n    }\n\n    views = Object.values(jsxViews);\n  }\n\n  layers = jsxLayers.length > 0 ? [].concat(jsxLayers, _toConsumableArray(layers)) : layers;\n  return {\n    layers: layers,\n    children: reactChildren,\n    views: views\n  };\n}\n\nfunction createLayer(LayerType, reactProps) {\n  var props = {};\n  var defaultProps = LayerType.defaultProps || {};\n\n  for (var key in reactProps) {\n    if (defaultProps[key] !== reactProps[key]) {\n      props[key] = reactProps[key];\n    }\n  }\n\n  return new LayerType(props);\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.is-array\";\nimport { cloneElement } from 'react';\nvar MAP_STYLE = {\n  position: 'absolute',\n  zIndex: -1\n};\nexport default function evaluateChildren(children, childProps) {\n  if (!children) {\n    return children;\n  }\n\n  if (typeof children === 'function') {\n    return children(childProps);\n  }\n\n  if (Array.isArray(children)) {\n    return children.map(function (child) {\n      return evaluateChildren(child, childProps);\n    });\n  }\n\n  if (isReactMap(children)) {\n    childProps.style = MAP_STYLE;\n    return cloneElement(children, childProps);\n  }\n\n  if (needsDeckGLViewProps(children)) {\n    return cloneElement(children, childProps);\n  }\n\n  return children;\n}\n\nfunction isReactMap(child) {\n  var componentClass = child && child.type;\n  var componentProps = componentClass && componentClass.defaultProps;\n  return componentProps && componentProps.mapStyle;\n}\n\nfunction needsDeckGLViewProps(child) {\n  var componentClass = child && child.type;\n  return componentClass && componentClass.deckGLViewProps;\n}","import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { createElement } from 'react';\nimport { View } from '@deck.gl/core';\nimport { inheritsFrom } from './inherits-from';\nimport evaluateChildren from './evaluate-children';\nexport default function positionChildrenUnderViews(_ref) {\n  var children = _ref.children,\n      viewports = _ref.viewports,\n      deck = _ref.deck,\n      ContextProvider = _ref.ContextProvider;\n\n  var _ref2 = deck || {},\n      viewManager = _ref2.viewManager;\n\n  if (!viewManager || !viewManager.views.length) {\n    return [];\n  }\n\n  var views = {};\n  var defaultViewId = viewManager.views[0].id;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = children[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var child = _step.value;\n      var viewId = defaultViewId;\n      var viewChildren = child;\n\n      if (inheritsFrom(child.type, View)) {\n        viewId = child.props.id || defaultViewId;\n        viewChildren = child.props.children;\n      }\n\n      var viewport = viewManager.getViewport(viewId);\n      var viewState = viewManager.getViewState(viewId);\n\n      if (viewport) {\n        var x = viewport.x,\n            y = viewport.y,\n            width = viewport.width,\n            height = viewport.height;\n        viewChildren = evaluateChildren(viewChildren, {\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          viewport: viewport,\n          viewState: viewState\n        });\n\n        if (!views[viewId]) {\n          views[viewId] = {\n            viewport: viewport,\n            children: []\n          };\n        }\n\n        views[viewId].children.push(viewChildren);\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return Object.keys(views).map(function (viewId) {\n    var _views$viewId = views[viewId],\n        viewport = _views$viewId.viewport,\n        viewChildren = _views$viewId.children;\n    var x = viewport.x,\n        y = viewport.y,\n        width = viewport.width,\n        height = viewport.height;\n    var style = {\n      position: 'absolute',\n      left: x,\n      top: y,\n      width: width,\n      height: height\n    };\n    var key = \"view-\".concat(viewId);\n    var viewElement = createElement.apply(void 0, ['div', {\n      key: key,\n      id: key,\n      style: style\n    }].concat(_toConsumableArray(viewChildren)));\n\n    if (ContextProvider) {\n      var contextValue = {\n        viewport: viewport,\n        container: deck.canvas.offsetParent,\n        eventManager: deck.eventManager,\n        onViewStateChange: function onViewStateChange(params) {\n          params.viewId = viewId;\n\n          deck._onViewStateChange(params);\n        }\n      };\n      return createElement(ContextProvider, {\n        key: key,\n        value: contextValue\n      }, viewElement);\n    }\n\n    return viewElement;\n  });\n}","var CANVAS_ONLY_STYLES = {\n  mixBlendMode: null\n};\nexport default function extractStyles(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      style = _ref.style;\n  var containerStyle = {\n    position: 'absolute',\n    zIndex: 0,\n    left: 0,\n    top: 0,\n    width: width,\n    height: height\n  };\n  var canvasStyle = {\n    left: 0,\n    top: 0\n  };\n\n  if (style) {\n    for (var key in style) {\n      if (key in CANVAS_ONLY_STYLES) {\n        canvasStyle[key] = style[key];\n      } else {\n        containerStyle[key] = style[key];\n      }\n    }\n  }\n\n  return {\n    containerStyle: containerStyle,\n    canvasStyle: canvasStyle\n  };\n}","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.function.bind\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React, { createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport { Deck, _memoize as memoize } from '@deck.gl/core';\nimport extractJSXLayers from './utils/extract-jsx-layers';\nimport positionChildrenUnderViews from './utils/position-children-under-views';\nimport extractStyles from './utils/extract-styles';\nvar propTypes = Deck.getPropTypes(PropTypes);\nvar defaultProps = Deck.defaultProps;\n\nvar DeckGL = function (_React$Component) {\n  _inherits(DeckGL, _React$Component);\n\n  function DeckGL(props) {\n    var _this;\n\n    _classCallCheck(this, DeckGL);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DeckGL).call(this, props));\n    _this.viewports = null;\n    _this.children = null;\n    _this._needsRedraw = null;\n    _this._containerRef = React.createRef();\n    _this._canvasRef = React.createRef();\n    _this.pickObject = _this.pickObject.bind(_assertThisInitialized(_this));\n    _this.pickMultipleObjects = _this.pickMultipleObjects.bind(_assertThisInitialized(_this));\n    _this.pickObjects = _this.pickObjects.bind(_assertThisInitialized(_this));\n    _this._extractJSXLayers = memoize(extractJSXLayers);\n    _this._positionChildrenUnderViews = memoize(positionChildrenUnderViews);\n    _this._extractStyles = memoize(extractStyles);\n    return _this;\n  }\n\n  _createClass(DeckGL, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var DeckClass = this.props.Deck || Deck;\n      this.deck = this.deck || new DeckClass(Object.assign({}, this.props, {\n        parent: this._containerRef.current,\n        canvas: this._canvasRef.current,\n        style: null,\n        width: '100%',\n        height: '100%',\n        _customRender: this._customRender.bind(this)\n      }));\n\n      this._updateFromProps(this.props);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      this._updateFromProps(nextProps);\n\n      var childrenChanged = this.children !== this._parseJSX(nextProps).children;\n\n      var viewsChanged = this.deck.viewManager && this.deck.viewManager.needsRedraw();\n      return childrenChanged && !viewsChanged;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this._redrawDeck();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.deck.finalize();\n    }\n  }, {\n    key: \"pickObject\",\n    value: function pickObject(opts) {\n      return this.deck.pickObject(opts);\n    }\n  }, {\n    key: \"pickMultipleObjects\",\n    value: function pickMultipleObjects(opts) {\n      return this.deck.pickMultipleObjects(opts);\n    }\n  }, {\n    key: \"pickObjects\",\n    value: function pickObjects(opts) {\n      return this.deck.pickObjects(opts);\n    }\n  }, {\n    key: \"_redrawDeck\",\n    value: function _redrawDeck() {\n      if (this._needsRedraw) {\n        this.deck._drawLayers(this._needsRedraw);\n\n        this._needsRedraw = null;\n      }\n    }\n  }, {\n    key: \"_customRender\",\n    value: function _customRender(redrawReason) {\n      this._needsRedraw = redrawReason;\n      var viewports = this.deck.viewManager.getViewports();\n\n      if (viewports !== this.viewports) {\n        this.forceUpdate();\n      } else {\n        this._redrawDeck();\n      }\n    }\n  }, {\n    key: \"_parseJSX\",\n    value: function _parseJSX(props) {\n      return this._extractJSXLayers({\n        layers: props.layers,\n        views: props.views,\n        children: props.children\n      });\n    }\n  }, {\n    key: \"_updateFromProps\",\n    value: function _updateFromProps(props) {\n      var _this$_parseJSX = this._parseJSX(props),\n          layers = _this$_parseJSX.layers,\n          views = _this$_parseJSX.views;\n\n      var deckProps = Object.assign({}, props, {\n        style: null,\n        width: '100%',\n        height: '100%',\n        layers: layers,\n        views: views\n      });\n      this.deck.setProps(deckProps);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          ContextProvider = _this$props.ContextProvider,\n          width = _this$props.width,\n          height = _this$props.height,\n          style = _this$props.style;\n\n      var _ref = this.deck || {},\n          viewManager = _ref.viewManager;\n\n      this.viewports = viewManager && viewManager.getViewports();\n      this.children = this._parseJSX(this.props).children;\n\n      var children = this._positionChildrenUnderViews({\n        children: this.children,\n        viewports: this.viewports,\n        deck: this.deck,\n        ContextProvider: ContextProvider\n      });\n\n      var _this$_extractStyles = this._extractStyles({\n        width: width,\n        height: height,\n        style: style\n      }),\n          containerStyle = _this$_extractStyles.containerStyle,\n          canvasStyle = _this$_extractStyles.canvasStyle;\n\n      var canvas = createElement('canvas', {\n        key: 'canvas',\n        ref: this._canvasRef,\n        style: canvasStyle\n      });\n      return createElement('div', {\n        id: 'deckgl-wrapper',\n        ref: this._containerRef,\n        style: containerStyle\n      }, [canvas, children]);\n    }\n  }]);\n\n  return DeckGL;\n}(React.Component);\n\nexport { DeckGL as default };\nDeckGL.propTypes = propTypes;\nDeckGL.defaultProps = defaultProps;","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar refProps = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\nexport function normalizeStyle(style) {\n  if (!style) {\n    return null;\n  }\n\n  if (typeof style === 'string') {\n    return style;\n  }\n\n  if (style.toJS) {\n    style = style.toJS();\n  }\n\n  var layerIndex = {};\n\n  var _iterator = _createForOfIteratorHelper(style.layers),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var layer = _step.value;\n      layerIndex[layer.id] = layer;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var layers = style.layers.map(function (layer) {\n    var layerRef = layerIndex[layer.ref];\n    var normalizedLayer = null;\n\n    if ('interactive' in layer) {\n      normalizedLayer = _objectSpread({}, layer);\n      delete normalizedLayer.interactive;\n    }\n\n    if (layerRef) {\n      normalizedLayer = normalizedLayer || _objectSpread({}, layer);\n      delete normalizedLayer.ref;\n\n      var _iterator2 = _createForOfIteratorHelper(refProps),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var propName = _step2.value;\n\n          if (propName in layerRef) {\n            normalizedLayer[propName] = layerRef[propName];\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n\n    return normalizedLayer || layer;\n  });\n  return _objectSpread(_objectSpread({}, style), {}, {\n    layers: layers\n  });\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.is-array\";\nvar EPSILON = 1e-7;\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nexport function equals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!equals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return Math.abs(a - b) <= EPSILON;\n}\nexport function clamp(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'react-map-gl: assertion failed.');\n  }\n}","import \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { equals } from '../math-utils';\nimport assert from '../assert';\n\nvar TransitionInterpolator = function () {\n  function TransitionInterpolator() {\n    _classCallCheck(this, TransitionInterpolator);\n\n    _defineProperty(this, \"propNames\", []);\n  }\n\n  _createClass(TransitionInterpolator, [{\n    key: \"arePropsEqual\",\n    value: function arePropsEqual(currentProps, nextProps) {\n      var _iterator = _createForOfIteratorHelper(this.propNames || []),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n\n          if (!equals(currentProps[key], nextProps[key])) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"initializeProps\",\n    value: function initializeProps(startProps, endProps) {\n      return {\n        start: startProps,\n        end: endProps\n      };\n    }\n  }, {\n    key: \"interpolateProps\",\n    value: function interpolateProps(startProps, endProps, t) {\n      assert(false, 'interpolateProps is not implemented');\n    }\n  }, {\n    key: \"getDuration\",\n    value: function getDuration(startProps, endProps) {\n      return endProps.transitionDuration;\n    }\n  }]);\n\n  return TransitionInterpolator;\n}();\n\nexport { TransitionInterpolator as default };","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nvar WRAPPED_ANGULAR_PROPS = {\n  longitude: 1,\n  bearing: 1\n};\nexport function mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function isValid(prop) {\n  return Number.isFinite(prop) || Array.isArray(prop);\n}\n\nfunction isWrappedAngularProp(propName) {\n  return propName in WRAPPED_ANGULAR_PROPS;\n}\n\nexport function getEndValueByShortestPath(propName, startValue, endValue) {\n  if (isWrappedAngularProp(propName) && Math.abs(endValue - startValue) > 180) {\n    endValue = endValue < 0 ? endValue + 360 : endValue - 360;\n  }\n\n  return endValue;\n}","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport assert from '../assert';\nimport TransitionInterpolator from './transition-interpolator';\nimport { flyToViewport, getFlyToDuration } from 'viewport-mercator-project';\nimport { isValid, getEndValueByShortestPath } from './transition-utils';\nimport { lerp } from '../math-utils';\nvar VIEWPORT_TRANSITION_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nvar REQUIRED_PROPS = ['latitude', 'longitude', 'zoom', 'width', 'height'];\nvar LINEARLY_INTERPOLATED_PROPS = ['bearing', 'pitch'];\nvar DEFAULT_OPTS = {\n  speed: 1.2,\n  curve: 1.414\n};\n\nvar ViewportFlyToInterpolator = function (_TransitionInterpolat) {\n  _inherits(ViewportFlyToInterpolator, _TransitionInterpolat);\n\n  var _super = _createSuper(ViewportFlyToInterpolator);\n\n  function ViewportFlyToInterpolator() {\n    var _this;\n\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ViewportFlyToInterpolator);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"speed\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"propNames\", VIEWPORT_TRANSITION_PROPS);\n\n    _defineProperty(_assertThisInitialized(_this), \"props\", void 0);\n\n    _this.props = Object.assign({}, DEFAULT_OPTS, props);\n    return _this;\n  }\n\n  _createClass(ViewportFlyToInterpolator, [{\n    key: \"initializeProps\",\n    value: function initializeProps(startProps, endProps) {\n      var startViewportProps = {};\n      var endViewportProps = {};\n\n      var _iterator = _createForOfIteratorHelper(REQUIRED_PROPS),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n          var startValue = startProps[key];\n          var endValue = endProps[key];\n          assert(isValid(startValue) && isValid(endValue), \"\".concat(key, \" must be supplied for transition\"));\n          startViewportProps[key] = startValue;\n          endViewportProps[key] = getEndValueByShortestPath(key, startValue, endValue);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(LINEARLY_INTERPOLATED_PROPS),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _key = _step2.value;\n\n          var _startValue = startProps[_key] || 0;\n\n          var _endValue = endProps[_key] || 0;\n\n          startViewportProps[_key] = _startValue;\n          endViewportProps[_key] = getEndValueByShortestPath(_key, _startValue, _endValue);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return {\n        start: startViewportProps,\n        end: endViewportProps\n      };\n    }\n  }, {\n    key: \"interpolateProps\",\n    value: function interpolateProps(startProps, endProps, t) {\n      var viewport = flyToViewport(startProps, endProps, t, this.props);\n\n      var _iterator3 = _createForOfIteratorHelper(LINEARLY_INTERPOLATED_PROPS),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var key = _step3.value;\n          viewport[key] = lerp(startProps[key], endProps[key], t);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      return viewport;\n    }\n  }, {\n    key: \"getDuration\",\n    value: function getDuration(startProps, endProps) {\n      var transitionDuration = endProps.transitionDuration;\n\n      if (transitionDuration === 'auto') {\n        transitionDuration = getFlyToDuration(startProps, endProps, this.props);\n      }\n\n      return transitionDuration;\n    }\n  }]);\n\n  return ViewportFlyToInterpolator;\n}(TransitionInterpolator);\n\nexport { ViewportFlyToInterpolator as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport assert from '../assert';\nimport TransitionInterpolator from './transition-interpolator';\nimport { isValid, getEndValueByShortestPath } from './transition-utils';\nimport { lerp } from '../math-utils';\nvar VIEWPORT_TRANSITION_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\n\nvar LinearInterpolator = function (_TransitionInterpolat) {\n  _inherits(LinearInterpolator, _TransitionInterpolat);\n\n  var _super = _createSuper(LinearInterpolator);\n\n  function LinearInterpolator() {\n    var _this;\n\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, LinearInterpolator);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"around\", void 0);\n\n    if (Array.isArray(opts)) {\n      opts = {\n        transitionProps: opts\n      };\n    }\n\n    _this.propNames = opts.transitionProps || VIEWPORT_TRANSITION_PROPS;\n\n    if (opts.around) {\n      _this.around = opts.around;\n    }\n\n    return _this;\n  }\n\n  _createClass(LinearInterpolator, [{\n    key: \"initializeProps\",\n    value: function initializeProps(startProps, endProps) {\n      var startViewportProps = {};\n      var endViewportProps = {};\n\n      if (this.around) {\n        startViewportProps.around = this.around;\n        var aroundLngLat = new WebMercatorViewport(startProps).unproject(this.around);\n        Object.assign(endViewportProps, endProps, {\n          around: new WebMercatorViewport(endProps).project(aroundLngLat),\n          aroundLngLat: aroundLngLat\n        });\n      }\n\n      var _iterator = _createForOfIteratorHelper(this.propNames),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n          var startValue = startProps[key];\n          var endValue = endProps[key];\n          assert(isValid(startValue) && isValid(endValue), \"\".concat(key, \" must be supplied for transition\"));\n          startViewportProps[key] = startValue;\n          endViewportProps[key] = getEndValueByShortestPath(key, startValue, endValue);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return {\n        start: startViewportProps,\n        end: endViewportProps\n      };\n    }\n  }, {\n    key: \"interpolateProps\",\n    value: function interpolateProps(startProps, endProps, t) {\n      var viewport = {};\n\n      var _iterator2 = _createForOfIteratorHelper(this.propNames),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var key = _step2.value;\n          viewport[key] = lerp(startProps[key], endProps[key], t);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      if (endProps.around) {\n        var _WebMercatorViewport$ = new WebMercatorViewport(Object.assign({}, endProps, viewport)).getMapCenterByLngLatPosition({\n          lngLat: endProps.aroundLngLat,\n          pos: lerp(startProps.around, endProps.around, t)\n        }),\n            _WebMercatorViewport$2 = _slicedToArray(_WebMercatorViewport$, 2),\n            longitude = _WebMercatorViewport$2[0],\n            latitude = _WebMercatorViewport$2[1];\n\n        viewport.longitude = longitude;\n        viewport.latitude = latitude;\n      }\n\n      return viewport;\n    }\n  }]);\n\n  return LinearInterpolator;\n}(TransitionInterpolator);\n\nexport { LinearInterpolator as default };","import \"core-js/modules/es6.math.log2\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport WebMercatorViewport, { normalizeViewportProps } from 'viewport-mercator-project';\nimport { TransitionInterpolator } from './transition';\nimport { clamp } from './math-utils';\nimport assert from './assert';\nexport var MAPBOX_LIMITS = {\n  minZoom: 0,\n  maxZoom: 24,\n  minPitch: 0,\n  maxPitch: 60\n};\nvar DEFAULT_STATE = {\n  pitch: 0,\n  bearing: 0,\n  altitude: 1.5\n};\n\nvar MapState = function () {\n  function MapState(_ref) {\n    var width = _ref.width,\n        height = _ref.height,\n        latitude = _ref.latitude,\n        longitude = _ref.longitude,\n        zoom = _ref.zoom,\n        _ref$bearing = _ref.bearing,\n        bearing = _ref$bearing === void 0 ? DEFAULT_STATE.bearing : _ref$bearing,\n        _ref$pitch = _ref.pitch,\n        pitch = _ref$pitch === void 0 ? DEFAULT_STATE.pitch : _ref$pitch,\n        _ref$altitude = _ref.altitude,\n        altitude = _ref$altitude === void 0 ? DEFAULT_STATE.altitude : _ref$altitude,\n        _ref$maxZoom = _ref.maxZoom,\n        maxZoom = _ref$maxZoom === void 0 ? MAPBOX_LIMITS.maxZoom : _ref$maxZoom,\n        _ref$minZoom = _ref.minZoom,\n        minZoom = _ref$minZoom === void 0 ? MAPBOX_LIMITS.minZoom : _ref$minZoom,\n        _ref$maxPitch = _ref.maxPitch,\n        maxPitch = _ref$maxPitch === void 0 ? MAPBOX_LIMITS.maxPitch : _ref$maxPitch,\n        _ref$minPitch = _ref.minPitch,\n        minPitch = _ref$minPitch === void 0 ? MAPBOX_LIMITS.minPitch : _ref$minPitch,\n        transitionDuration = _ref.transitionDuration,\n        transitionEasing = _ref.transitionEasing,\n        transitionInterpolator = _ref.transitionInterpolator,\n        transitionInterruption = _ref.transitionInterruption,\n        startPanLngLat = _ref.startPanLngLat,\n        startZoomLngLat = _ref.startZoomLngLat,\n        startBearing = _ref.startBearing,\n        startPitch = _ref.startPitch,\n        startZoom = _ref.startZoom;\n\n    _classCallCheck(this, MapState);\n\n    _defineProperty(this, \"_viewportProps\", void 0);\n\n    _defineProperty(this, \"_interactiveState\", void 0);\n\n    assert(Number.isFinite(width), '`width` must be supplied');\n    assert(Number.isFinite(height), '`height` must be supplied');\n    assert(Number.isFinite(longitude), '`longitude` must be supplied');\n    assert(Number.isFinite(latitude), '`latitude` must be supplied');\n    assert(Number.isFinite(zoom), '`zoom` must be supplied');\n    this._viewportProps = this._applyConstraints({\n      width: width,\n      height: height,\n      latitude: latitude,\n      longitude: longitude,\n      zoom: zoom,\n      bearing: bearing,\n      pitch: pitch,\n      altitude: altitude,\n      maxZoom: maxZoom,\n      minZoom: minZoom,\n      maxPitch: maxPitch,\n      minPitch: minPitch,\n      transitionDuration: transitionDuration,\n      transitionEasing: transitionEasing,\n      transitionInterpolator: transitionInterpolator,\n      transitionInterruption: transitionInterruption\n    });\n    this._interactiveState = {\n      startPanLngLat: startPanLngLat,\n      startZoomLngLat: startZoomLngLat,\n      startBearing: startBearing,\n      startPitch: startPitch,\n      startZoom: startZoom\n    };\n  }\n\n  _createClass(MapState, [{\n    key: \"getViewportProps\",\n    value: function getViewportProps() {\n      return this._viewportProps;\n    }\n  }, {\n    key: \"getInteractiveState\",\n    value: function getInteractiveState() {\n      return this._interactiveState;\n    }\n  }, {\n    key: \"panStart\",\n    value: function panStart(_ref2) {\n      var pos = _ref2.pos;\n      return this._getUpdatedMapState({\n        startPanLngLat: this._unproject(pos)\n      });\n    }\n  }, {\n    key: \"pan\",\n    value: function pan(_ref3) {\n      var pos = _ref3.pos,\n          startPos = _ref3.startPos;\n\n      var startPanLngLat = this._interactiveState.startPanLngLat || this._unproject(startPos);\n\n      if (!startPanLngLat) {\n        return this;\n      }\n\n      var _this$_calculateNewLn = this._calculateNewLngLat({\n        startPanLngLat: startPanLngLat,\n        pos: pos\n      }),\n          _this$_calculateNewLn2 = _slicedToArray(_this$_calculateNewLn, 2),\n          longitude = _this$_calculateNewLn2[0],\n          latitude = _this$_calculateNewLn2[1];\n\n      return this._getUpdatedMapState({\n        longitude: longitude,\n        latitude: latitude\n      });\n    }\n  }, {\n    key: \"panEnd\",\n    value: function panEnd() {\n      return this._getUpdatedMapState({\n        startPanLngLat: null\n      });\n    }\n  }, {\n    key: \"rotateStart\",\n    value: function rotateStart(_ref4) {\n      var pos = _ref4.pos;\n      return this._getUpdatedMapState({\n        startBearing: this._viewportProps.bearing,\n        startPitch: this._viewportProps.pitch\n      });\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(_ref5) {\n      var _ref5$deltaScaleX = _ref5.deltaScaleX,\n          deltaScaleX = _ref5$deltaScaleX === void 0 ? 0 : _ref5$deltaScaleX,\n          _ref5$deltaScaleY = _ref5.deltaScaleY,\n          deltaScaleY = _ref5$deltaScaleY === void 0 ? 0 : _ref5$deltaScaleY;\n      var _this$_interactiveSta = this._interactiveState,\n          startBearing = _this$_interactiveSta.startBearing,\n          startPitch = _this$_interactiveSta.startPitch;\n\n      if (!Number.isFinite(startBearing) || !Number.isFinite(startPitch)) {\n        return this;\n      }\n\n      var _this$_calculateNewPi = this._calculateNewPitchAndBearing({\n        deltaScaleX: deltaScaleX,\n        deltaScaleY: deltaScaleY,\n        startBearing: startBearing || 0,\n        startPitch: startPitch || 0\n      }),\n          pitch = _this$_calculateNewPi.pitch,\n          bearing = _this$_calculateNewPi.bearing;\n\n      return this._getUpdatedMapState({\n        bearing: bearing,\n        pitch: pitch\n      });\n    }\n  }, {\n    key: \"rotateEnd\",\n    value: function rotateEnd() {\n      return this._getUpdatedMapState({\n        startBearing: null,\n        startPitch: null\n      });\n    }\n  }, {\n    key: \"zoomStart\",\n    value: function zoomStart(_ref6) {\n      var pos = _ref6.pos;\n      return this._getUpdatedMapState({\n        startZoomLngLat: this._unproject(pos),\n        startZoom: this._viewportProps.zoom\n      });\n    }\n  }, {\n    key: \"zoom\",\n    value: function zoom(_ref7) {\n      var pos = _ref7.pos,\n          startPos = _ref7.startPos,\n          scale = _ref7.scale;\n      assert(scale > 0, '`scale` must be a positive number');\n      var _this$_interactiveSta2 = this._interactiveState,\n          startZoom = _this$_interactiveSta2.startZoom,\n          startZoomLngLat = _this$_interactiveSta2.startZoomLngLat;\n\n      if (!Number.isFinite(startZoom)) {\n        startZoom = this._viewportProps.zoom;\n        startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n      }\n\n      assert(startZoomLngLat, '`startZoomLngLat` prop is required ' + 'for zoom behavior to calculate where to position the map.');\n\n      var zoom = this._calculateNewZoom({\n        scale: scale,\n        startZoom: startZoom || 0\n      });\n\n      var zoomedViewport = new WebMercatorViewport(Object.assign({}, this._viewportProps, {\n        zoom: zoom\n      }));\n\n      var _zoomedViewport$getMa = zoomedViewport.getMapCenterByLngLatPosition({\n        lngLat: startZoomLngLat,\n        pos: pos\n      }),\n          _zoomedViewport$getMa2 = _slicedToArray(_zoomedViewport$getMa, 2),\n          longitude = _zoomedViewport$getMa2[0],\n          latitude = _zoomedViewport$getMa2[1];\n\n      return this._getUpdatedMapState({\n        zoom: zoom,\n        longitude: longitude,\n        latitude: latitude\n      });\n    }\n  }, {\n    key: \"zoomEnd\",\n    value: function zoomEnd() {\n      return this._getUpdatedMapState({\n        startZoomLngLat: null,\n        startZoom: null\n      });\n    }\n  }, {\n    key: \"_getUpdatedMapState\",\n    value: function _getUpdatedMapState(newProps) {\n      return new MapState(Object.assign({}, this._viewportProps, this._interactiveState, newProps));\n    }\n  }, {\n    key: \"_applyConstraints\",\n    value: function _applyConstraints(props) {\n      var maxZoom = props.maxZoom,\n          minZoom = props.minZoom,\n          zoom = props.zoom;\n      props.zoom = clamp(zoom, minZoom, maxZoom);\n      var maxPitch = props.maxPitch,\n          minPitch = props.minPitch,\n          pitch = props.pitch;\n      props.pitch = clamp(pitch, minPitch, maxPitch);\n      Object.assign(props, normalizeViewportProps(props));\n      return props;\n    }\n  }, {\n    key: \"_unproject\",\n    value: function _unproject(pos) {\n      var viewport = new WebMercatorViewport(this._viewportProps);\n      return pos && viewport.unproject(pos);\n    }\n  }, {\n    key: \"_calculateNewLngLat\",\n    value: function _calculateNewLngLat(_ref8) {\n      var startPanLngLat = _ref8.startPanLngLat,\n          pos = _ref8.pos;\n      var viewport = new WebMercatorViewport(this._viewportProps);\n      return viewport.getMapCenterByLngLatPosition({\n        lngLat: startPanLngLat,\n        pos: pos\n      });\n    }\n  }, {\n    key: \"_calculateNewZoom\",\n    value: function _calculateNewZoom(_ref9) {\n      var scale = _ref9.scale,\n          startZoom = _ref9.startZoom;\n      var _this$_viewportProps = this._viewportProps,\n          maxZoom = _this$_viewportProps.maxZoom,\n          minZoom = _this$_viewportProps.minZoom;\n      var zoom = startZoom + Math.log2(scale);\n      return clamp(zoom, minZoom, maxZoom);\n    }\n  }, {\n    key: \"_calculateNewPitchAndBearing\",\n    value: function _calculateNewPitchAndBearing(_ref10) {\n      var deltaScaleX = _ref10.deltaScaleX,\n          deltaScaleY = _ref10.deltaScaleY,\n          startBearing = _ref10.startBearing,\n          startPitch = _ref10.startPitch;\n      deltaScaleY = clamp(deltaScaleY, -1, 1);\n      var _this$_viewportProps2 = this._viewportProps,\n          minPitch = _this$_viewportProps2.minPitch,\n          maxPitch = _this$_viewportProps2.maxPitch;\n      var bearing = startBearing + 180 * deltaScaleX;\n      var pitch = startPitch;\n\n      if (deltaScaleY > 0) {\n        pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n      } else if (deltaScaleY < 0) {\n        pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n      }\n\n      return {\n        pitch: pitch,\n        bearing: bearing\n      };\n    }\n  }]);\n\n  return MapState;\n}();\n\nexport { MapState as default };","import { MAPBOX_LIMITS } from './map-state';\n\nfunction decapitalize(s) {\n  return s[0].toLowerCase() + s.slice(1);\n}\n\nexport function checkVisibilityConstraints(props) {\n  var constraints = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : MAPBOX_LIMITS;\n\n  for (var constraintName in constraints) {\n    var type = constraintName.slice(0, 3);\n    var propName = decapitalize(constraintName.slice(3));\n\n    if (type === 'min' && props[propName] < constraints[constraintName]) {\n      return false;\n    }\n\n    if (type === 'max' && props[propName] > constraints[constraintName]) {\n      return false;\n    }\n  }\n\n  return true;\n}","import { createContext } from 'react';\nexport default createContext({\n  viewport: null,\n  map: null,\n  mapContainer: null,\n  onViewportChange: null,\n  onViewStateChange: null,\n  eventManager: null,\n  isDragging: false\n});","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport { PureComponent, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { normalizeStyle } from '../utils/style-utils';\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport Mapbox from '../mapbox/mapbox';\nimport mapboxgl from '../utils/mapboxgl';\nimport { checkVisibilityConstraints } from '../utils/map-constraints';\nimport { MAPBOX_LIMITS } from '../utils/map-state';\nimport MapContext from './map-context';\nvar TOKEN_DOC_URL = 'https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens';\nvar NO_TOKEN_WARNING = 'A valid API access token is required to use Mapbox data';\n\nfunction noop() {}\n\nvar UNAUTHORIZED_ERROR_CODE = 401;\nvar CONTAINER_STYLE = {\n  position: 'absolute',\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden'\n};\nvar propTypes = Object.assign({}, Mapbox.propTypes, {\n  width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  onResize: PropTypes.func,\n  preventStyleDiffing: PropTypes.bool,\n  disableTokenWarning: PropTypes.bool,\n  visible: PropTypes.bool,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  visibilityConstraints: PropTypes.object\n});\nvar defaultProps = Object.assign({}, Mapbox.defaultProps, {\n  preventStyleDiffing: false,\n  disableTokenWarning: false,\n  visible: true,\n  onResize: noop,\n  className: '',\n  style: null,\n  visibilityConstraints: MAPBOX_LIMITS\n});\n\nvar StaticMap = function (_PureComponent) {\n  _inherits(StaticMap, _PureComponent);\n\n  var _super = _createSuper(StaticMap);\n\n  function StaticMap() {\n    var _this;\n\n    _classCallCheck(this, StaticMap);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      accessTokenInvalid: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_mapbox\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_map\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mapboxMapRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"_mapContainerRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"_queryParams\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"_width\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_height\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"getMap\", function () {\n      return _this._map;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"queryRenderedFeatures\", function (geometry) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return _this._map.queryRenderedFeatures(geometry, options);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_mapboxMapError\", function (evt) {\n      var statusCode = evt.error && evt.error.status || evt.status;\n\n      if (statusCode === UNAUTHORIZED_ERROR_CODE && !_this.state.accessTokenInvalid) {\n        console.error(NO_TOKEN_WARNING);\n\n        _this.setState({\n          accessTokenInvalid: true\n        });\n      }\n\n      _this.props.onError(evt);\n    });\n\n    return _this;\n  }\n\n  _createClass(StaticMap, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!StaticMap.supported()) {\n        return;\n      }\n\n      var mapStyle = this.props.mapStyle;\n      this._mapbox = new Mapbox(Object.assign({}, this.props, {\n        mapboxgl: mapboxgl,\n        width: this._width,\n        height: this._height,\n        container: this._mapboxMapRef.current,\n        onError: this._mapboxMapError,\n        mapStyle: normalizeStyle(mapStyle)\n      }));\n      this._map = this._mapbox.getMap();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this._mapbox) {\n        this._updateMapStyle(prevProps, this.props);\n\n        this._updateMapProps(this.props);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this._mapbox) {\n        this._mapbox.finalize();\n\n        this._mapbox = null;\n        this._map = null;\n      }\n    }\n  }, {\n    key: \"_updateMapSize\",\n    value: function _updateMapSize(width, height) {\n      if (this._width !== width || this._height !== height) {\n        this._width = width;\n        this._height = height;\n\n        this._updateMapProps(this.props);\n      }\n    }\n  }, {\n    key: \"_updateMapStyle\",\n    value: function _updateMapStyle(oldProps, newProps) {\n      var mapStyle = newProps.mapStyle;\n      var oldMapStyle = oldProps.mapStyle;\n\n      if (mapStyle !== oldMapStyle && mapStyle) {\n        this._map.setStyle(normalizeStyle(mapStyle), {\n          diff: !this.props.preventStyleDiffing\n        });\n      }\n    }\n  }, {\n    key: \"_updateMapProps\",\n    value: function _updateMapProps(props) {\n      if (!this._mapbox) {\n        return;\n      }\n\n      this._mapbox.setProps(Object.assign({}, props, {\n        width: this._width,\n        height: this._height\n      }));\n    }\n  }, {\n    key: \"_renderNoTokenWarning\",\n    value: function _renderNoTokenWarning() {\n      if (this.state.accessTokenInvalid && !this.props.disableTokenWarning) {\n        var style = {\n          position: 'absolute',\n          left: 0,\n          top: 0\n        };\n        return React.createElement(\"div\", {\n          key: \"warning\",\n          id: \"no-token-warning\",\n          style: style\n        }, React.createElement(\"h3\", {\n          key: \"header\"\n        }, \"NO_TOKEN_WARNING\"), React.createElement(\"div\", {\n          key: \"text\"\n        }, \"For information on setting up your basemap, read\"), React.createElement(\"a\", {\n          key: \"link\",\n          href: TOKEN_DOC_URL\n        }, \"Note on Map Tokens\"));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_renderOverlays\",\n    value: function _renderOverlays(dimensions) {\n      var _this2 = this;\n\n      var _dimensions$width = dimensions.width,\n          width = _dimensions$width === void 0 ? Number(this.props.width) : _dimensions$width,\n          _dimensions$height = dimensions.height,\n          height = _dimensions$height === void 0 ? Number(this.props.height) : _dimensions$height;\n\n      this._updateMapSize(width, height);\n\n      return React.createElement(MapContext.Consumer, null, function (interactiveContext) {\n        var context = _objectSpread(_objectSpread({}, interactiveContext), {}, {\n          viewport: new WebMercatorViewport(_objectSpread(_objectSpread(_objectSpread({}, _this2.props), _this2.props.viewState), {}, {\n            width: width,\n            height: height\n          })),\n          map: _this2._map,\n          mapContainer: interactiveContext.mapContainer || _this2._mapContainerRef.current\n        });\n\n        return React.createElement(MapContext.Provider, {\n          value: context\n        }, React.createElement(\"div\", {\n          key: \"map-overlays\",\n          className: \"overlays\",\n          style: CONTAINER_STYLE\n        }, _this2.props.children));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          className = _this$props.className,\n          width = _this$props.width,\n          height = _this$props.height,\n          style = _this$props.style,\n          visibilityConstraints = _this$props.visibilityConstraints;\n      var mapContainerStyle = Object.assign({\n        position: 'relative'\n      }, style, {\n        width: width,\n        height: height\n      });\n      var visible = this.props.visible && checkVisibilityConstraints(this.props.viewState || this.props, visibilityConstraints);\n      var mapStyle = Object.assign({}, CONTAINER_STYLE, {\n        visibility: visible ? 'inherit' : 'hidden'\n      });\n      return React.createElement(\"div\", {\n        key: \"map-container\",\n        style: mapContainerStyle,\n        ref: this._mapContainerRef\n      }, React.createElement(\"div\", {\n        key: \"map-mapbox\",\n        ref: this._mapboxMapRef,\n        style: mapStyle,\n        className: className\n      }), React.createElement(AutoSizer, {\n        key: \"autosizer\",\n        disableWidth: Number.isFinite(width),\n        disableHeight: Number.isFinite(height),\n        onResize: this.props.onResize\n      }, this._renderOverlays.bind(this)), this._renderNoTokenWarning());\n    }\n  }], [{\n    key: \"supported\",\n    value: function supported() {\n      return mapboxgl && mapboxgl.supported();\n    }\n  }]);\n\n  return StaticMap;\n}(PureComponent);\n\n_defineProperty(StaticMap, \"propTypes\", propTypes);\n\n_defineProperty(StaticMap, \"defaultProps\", defaultProps);\n\nexport { StaticMap as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.date.now\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport assert from './assert';\nimport { TransitionInterpolator, LinearInterpolator } from './transition';\nimport MapState from './map-state';\n\nvar noop = function noop() {};\n\nexport function cropEasingFunction(easing, x0) {\n  var y0 = easing(x0);\n  return function (t) {\n    return 1 / (1 - y0) * (easing(t * (1 - x0) + x0) - y0);\n  };\n}\nexport var TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3,\n  UPDATE: 4\n};\nvar DEFAULT_PROPS = {\n  transitionDuration: 0,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new LinearInterpolator(),\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop,\n  onViewportChange: noop,\n  onStateChange: noop\n};\n\nvar TransitionManager = function () {\n  function TransitionManager(props, getTime) {\n    var _this = this;\n\n    _classCallCheck(this, TransitionManager);\n\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"state\", void 0);\n\n    _defineProperty(this, \"time\", void 0);\n\n    _defineProperty(this, \"_animationFrame\", null);\n\n    _defineProperty(this, \"_onTransitionFrame\", function () {\n      _this._animationFrame = requestAnimationFrame(_this._onTransitionFrame);\n\n      _this._updateViewport();\n    });\n\n    if (props) {\n      this.props = props;\n    }\n\n    this.time = getTime || Date.now;\n  }\n\n  _createClass(TransitionManager, [{\n    key: \"getViewportInTransition\",\n    value: function getViewportInTransition() {\n      return this._animationFrame ? this.state.propsInTransition : null;\n    }\n  }, {\n    key: \"processViewportChange\",\n    value: function processViewportChange(nextProps) {\n      var currentProps = this.props;\n      this.props = nextProps;\n\n      if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n        return false;\n      }\n\n      if (this._isTransitionEnabled(nextProps)) {\n        var startProps = Object.assign({}, currentProps);\n        var endProps = Object.assign({}, nextProps);\n\n        if (this._isTransitionInProgress()) {\n          currentProps.onTransitionInterrupt();\n\n          if (this.state.interruption === TRANSITION_EVENTS.SNAP_TO_END) {\n            Object.assign(startProps, this.state.endProps);\n          } else {\n            Object.assign(startProps, this.state.propsInTransition);\n          }\n\n          if (this.state.interruption === TRANSITION_EVENTS.UPDATE) {\n            var currentTime = this.time();\n            var x0 = (currentTime - this.state.startTime) / this.state.duration;\n            endProps.transitionDuration = this.state.duration - (currentTime - this.state.startTime);\n            endProps.transitionEasing = cropEasingFunction(this.state.easing, x0);\n            endProps.transitionInterpolator = startProps.transitionInterpolator;\n          }\n        }\n\n        endProps.onTransitionStart();\n\n        this._triggerTransition(startProps, endProps);\n\n        return true;\n      }\n\n      if (this._isTransitionInProgress()) {\n        currentProps.onTransitionInterrupt();\n\n        this._endTransition();\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_isTransitionInProgress\",\n    value: function _isTransitionInProgress() {\n      return Boolean(this._animationFrame);\n    }\n  }, {\n    key: \"_isTransitionEnabled\",\n    value: function _isTransitionEnabled(props) {\n      var transitionDuration = props.transitionDuration,\n          transitionInterpolator = props.transitionInterpolator;\n      return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n    }\n  }, {\n    key: \"_isUpdateDueToCurrentTransition\",\n    value: function _isUpdateDueToCurrentTransition(props) {\n      if (this.state.propsInTransition) {\n        return this.state.interpolator.arePropsEqual(props, this.state.propsInTransition);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_shouldIgnoreViewportChange\",\n    value: function _shouldIgnoreViewportChange(currentProps, nextProps) {\n      if (!currentProps) {\n        return true;\n      }\n\n      if (this._isTransitionInProgress()) {\n        return this.state.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n      }\n\n      if (this._isTransitionEnabled(nextProps)) {\n        return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_triggerTransition\",\n    value: function _triggerTransition(startProps, endProps) {\n      assert(this._isTransitionEnabled(endProps));\n\n      if (this._animationFrame) {\n        cancelAnimationFrame(this._animationFrame);\n      }\n\n      var transitionInterpolator = endProps.transitionInterpolator;\n      var duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n      if (duration === 0) {\n        return;\n      }\n\n      var initialProps = endProps.transitionInterpolator.initializeProps(startProps, endProps);\n      var interactionState = {\n        inTransition: true,\n        isZooming: startProps.zoom !== endProps.zoom,\n        isPanning: startProps.longitude !== endProps.longitude || startProps.latitude !== endProps.latitude,\n        isRotating: startProps.bearing !== endProps.bearing || startProps.pitch !== endProps.pitch\n      };\n      this.state = {\n        duration: duration,\n        easing: endProps.transitionEasing,\n        interpolator: endProps.transitionInterpolator,\n        interruption: endProps.transitionInterruption,\n        startTime: this.time(),\n        startProps: initialProps.start,\n        endProps: initialProps.end,\n        animation: null,\n        propsInTransition: {},\n        interactionState: interactionState\n      };\n\n      this._onTransitionFrame();\n\n      this.props.onStateChange(interactionState);\n    }\n  }, {\n    key: \"_endTransition\",\n    value: function _endTransition() {\n      if (this._animationFrame) {\n        cancelAnimationFrame(this._animationFrame);\n        this._animationFrame = null;\n      }\n\n      this.props.onStateChange({\n        inTransition: false,\n        isZooming: false,\n        isPanning: false,\n        isRotating: false\n      });\n    }\n  }, {\n    key: \"_updateViewport\",\n    value: function _updateViewport() {\n      var currentTime = this.time();\n      var _this$state = this.state,\n          startTime = _this$state.startTime,\n          duration = _this$state.duration,\n          easing = _this$state.easing,\n          interpolator = _this$state.interpolator,\n          startProps = _this$state.startProps,\n          endProps = _this$state.endProps;\n      var shouldEnd = false;\n      var t = (currentTime - startTime) / duration;\n\n      if (t >= 1) {\n        t = 1;\n        shouldEnd = true;\n      }\n\n      t = easing(t);\n      var viewport = interpolator.interpolateProps(startProps, endProps, t);\n      var mapState = new MapState(Object.assign({}, this.props, viewport));\n      this.state.propsInTransition = mapState.getViewportProps();\n      this.props.onViewportChange(this.state.propsInTransition, this.state.interactionState, this.props);\n\n      if (shouldEnd) {\n        this._endTransition();\n\n        this.props.onTransitionEnd();\n      }\n    }\n  }]);\n\n  return TransitionManager;\n}();\n\n_defineProperty(TransitionManager, \"defaultProps\", DEFAULT_PROPS);\n\nexport { TransitionManager as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport MapState from './map-state';\nimport { LinearInterpolator } from './transition';\nimport TransitionManager, { TRANSITION_EVENTS } from './transition-manager';\nimport debounce from './debounce';\nvar NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nexport var LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new LinearInterpolator(),\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\nvar PITCH_MOUSE_THRESHOLD = 5;\nvar PITCH_ACCEL = 1.2;\nvar ZOOM_ACCEL = 0.01;\nvar EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend', 'pinchcancel'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\n\nvar MapController = function () {\n  function MapController() {\n    var _this = this;\n\n    _classCallCheck(this, MapController);\n\n    _defineProperty(this, \"events\", []);\n\n    _defineProperty(this, \"mapState\", void 0);\n\n    _defineProperty(this, \"onViewportChange\", void 0);\n\n    _defineProperty(this, \"onStateChange\", void 0);\n\n    _defineProperty(this, \"mapStateProps\", void 0);\n\n    _defineProperty(this, \"eventManager\", void 0);\n\n    _defineProperty(this, \"scrollZoom\", true);\n\n    _defineProperty(this, \"dragPan\", true);\n\n    _defineProperty(this, \"dragRotate\", true);\n\n    _defineProperty(this, \"doubleClickZoom\", true);\n\n    _defineProperty(this, \"touchZoom\", true);\n\n    _defineProperty(this, \"touchRotate\", false);\n\n    _defineProperty(this, \"keyboard\", true);\n\n    _defineProperty(this, \"_state\", {\n      isDragging: false\n    });\n\n    _defineProperty(this, \"_events\", {});\n\n    _defineProperty(this, \"_transitionManager\", new TransitionManager());\n\n    _defineProperty(this, \"setState\", function (newState) {\n      Object.assign(_this._state, newState);\n\n      if (_this.onStateChange) {\n        _this.onStateChange(_this._state);\n      }\n    });\n\n    this.handleEvent = this.handleEvent.bind(this);\n    this._onWheelEnd = debounce(this._onWheelEnd, 100);\n  }\n\n  _createClass(MapController, [{\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      this.mapState = this.getMapState();\n\n      switch (event.type) {\n        case 'panstart':\n          return this._onPanStart(event);\n\n        case 'panmove':\n          return this._onPan(event);\n\n        case 'panend':\n          return this._onPanEnd(event);\n\n        case 'pinchstart':\n          return this._onPinchStart(event);\n\n        case 'pinchmove':\n          return this._onPinch(event);\n\n        case 'pinchcancel':\n        case 'pinchend':\n          return this._onPinchEnd(event);\n\n        case 'doubletap':\n          return this._onDoubleTap(event);\n\n        case 'wheel':\n          return this._onWheel(event);\n\n        case 'keydown':\n          return this._onKeyDown(event);\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(event) {\n      var _event$offsetCenter = event.offsetCenter,\n          x = _event$offsetCenter.x,\n          y = _event$offsetCenter.y;\n      return [x, y];\n    }\n  }, {\n    key: \"isFunctionKeyPressed\",\n    value: function isFunctionKeyPressed(event) {\n      var srcEvent = event.srcEvent;\n      return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n    }\n  }, {\n    key: \"updateViewport\",\n    value: function updateViewport(newMapState) {\n      var extraProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var extraState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var oldViewport = this.mapState ? this.mapState.getViewportProps() : {};\n      var newViewport = Object.assign({}, newMapState.getViewportProps(), extraProps);\n      var viewStateChanged = Object.keys(newViewport).some(function (key) {\n        return oldViewport[key] !== newViewport[key];\n      });\n\n      if (viewStateChanged) {\n        this.onViewportChange(newViewport, extraState, oldViewport);\n      }\n\n      this.setState(Object.assign({}, newMapState.getInteractiveState(), extraState));\n    }\n  }, {\n    key: \"getMapState\",\n    value: function getMapState(overrides) {\n      return new MapState(Object.assign({}, this.mapStateProps, this._state, overrides));\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(options) {\n      var onViewportChange = options.onViewportChange,\n          onStateChange = options.onStateChange,\n          _options$eventManager = options.eventManager,\n          eventManager = _options$eventManager === void 0 ? this.eventManager : _options$eventManager,\n          _options$isInteractiv = options.isInteractive,\n          isInteractive = _options$isInteractiv === void 0 ? true : _options$isInteractiv,\n          _options$scrollZoom = options.scrollZoom,\n          scrollZoom = _options$scrollZoom === void 0 ? this.scrollZoom : _options$scrollZoom,\n          _options$dragPan = options.dragPan,\n          dragPan = _options$dragPan === void 0 ? this.dragPan : _options$dragPan,\n          _options$dragRotate = options.dragRotate,\n          dragRotate = _options$dragRotate === void 0 ? this.dragRotate : _options$dragRotate,\n          _options$doubleClickZ = options.doubleClickZoom,\n          doubleClickZoom = _options$doubleClickZ === void 0 ? this.doubleClickZoom : _options$doubleClickZ,\n          _options$touchZoom = options.touchZoom,\n          touchZoom = _options$touchZoom === void 0 ? this.touchZoom : _options$touchZoom,\n          _options$touchRotate = options.touchRotate,\n          touchRotate = _options$touchRotate === void 0 ? this.touchRotate : _options$touchRotate,\n          _options$keyboard = options.keyboard,\n          keyboard = _options$keyboard === void 0 ? this.keyboard : _options$keyboard;\n      this.onViewportChange = onViewportChange;\n      this.onStateChange = onStateChange;\n      var dimensionChanged = !this.mapStateProps || this.mapStateProps.height !== options.height;\n      this.mapStateProps = options;\n\n      if (dimensionChanged) {\n        this.updateViewport(new MapState(options));\n      }\n\n      this._transitionManager.processViewportChange(Object.assign({}, options, {\n        onStateChange: this.setState\n      }));\n\n      if (this.eventManager !== eventManager) {\n        this.eventManager = eventManager;\n        this._events = {};\n        this.toggleEvents(this.events, true);\n      }\n\n      this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n      this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n      this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n      this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n      this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n      this.scrollZoom = scrollZoom;\n      this.dragPan = dragPan;\n      this.dragRotate = dragRotate;\n      this.doubleClickZoom = doubleClickZoom;\n      this.touchZoom = touchZoom;\n      this.touchRotate = touchRotate;\n      this.keyboard = keyboard;\n    }\n  }, {\n    key: \"toggleEvents\",\n    value: function toggleEvents(eventNames, enabled) {\n      var _this2 = this;\n\n      if (this.eventManager) {\n        eventNames.forEach(function (eventName) {\n          if (_this2._events[eventName] !== enabled) {\n            _this2._events[eventName] = enabled;\n\n            if (enabled) {\n              _this2.eventManager.on(eventName, _this2.handleEvent);\n            } else {\n              _this2.eventManager.off(eventName, _this2.handleEvent);\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_onPanStart\",\n    value: function _onPanStart(event) {\n      var pos = this.getCenter(event);\n      var newMapState = this.mapState.panStart({\n        pos: pos\n      }).rotateStart({\n        pos: pos\n      });\n      this.updateViewport(newMapState, NO_TRANSITION_PROPS, {\n        isDragging: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPan\",\n    value: function _onPan(event) {\n      return this.isFunctionKeyPressed(event) || event.rightButton ? this._onPanRotate(event) : this._onPanMove(event);\n    }\n  }, {\n    key: \"_onPanEnd\",\n    value: function _onPanEnd(event) {\n      var newMapState = this.mapState.panEnd().rotateEnd();\n      this.updateViewport(newMapState, null, {\n        isDragging: false,\n        isPanning: false,\n        isRotating: false\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPanMove\",\n    value: function _onPanMove(event) {\n      if (!this.dragPan) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n      var newMapState = this.mapState.pan({\n        pos: pos\n      });\n      this.updateViewport(newMapState, NO_TRANSITION_PROPS, {\n        isPanning: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPanRotate\",\n    value: function _onPanRotate(event) {\n      if (!this.dragRotate) {\n        return false;\n      }\n\n      var deltaX = event.deltaX,\n          deltaY = event.deltaY;\n\n      var _this$getCenter = this.getCenter(event),\n          _this$getCenter2 = _slicedToArray(_this$getCenter, 2),\n          centerY = _this$getCenter2[1];\n\n      var startY = centerY - deltaY;\n\n      var _this$mapState$getVie = this.mapState.getViewportProps(),\n          width = _this$mapState$getVie.width,\n          height = _this$mapState$getVie.height;\n\n      var deltaScaleX = deltaX / width;\n      var deltaScaleY = 0;\n\n      if (deltaY > 0) {\n        if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n          deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n        }\n      } else if (deltaY < 0) {\n        if (startY > PITCH_MOUSE_THRESHOLD) {\n          deltaScaleY = 1 - centerY / startY;\n        }\n      }\n\n      deltaScaleY = Math.min(1, Math.max(-1, deltaScaleY));\n      var newMapState = this.mapState.rotate({\n        deltaScaleX: deltaScaleX,\n        deltaScaleY: deltaScaleY\n      });\n      this.updateViewport(newMapState, NO_TRANSITION_PROPS, {\n        isRotating: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onWheel\",\n    value: function _onWheel(event) {\n      if (!this.scrollZoom) {\n        return false;\n      }\n\n      event.preventDefault();\n      var pos = this.getCenter(event);\n      var delta = event.delta;\n      var scale = 2 / (1 + Math.exp(-Math.abs(delta * ZOOM_ACCEL)));\n\n      if (delta < 0 && scale !== 0) {\n        scale = 1 / scale;\n      }\n\n      var newMapState = this.mapState.zoom({\n        pos: pos,\n        scale: scale\n      });\n      this.updateViewport(newMapState, NO_TRANSITION_PROPS, {\n        isZooming: true\n      });\n\n      this._onWheelEnd();\n\n      return true;\n    }\n  }, {\n    key: \"_onWheelEnd\",\n    value: function _onWheelEnd() {\n      this.setState({\n        isZooming: false\n      });\n    }\n  }, {\n    key: \"_onPinchStart\",\n    value: function _onPinchStart(event) {\n      var pos = this.getCenter(event);\n      var newMapState = this.mapState.zoomStart({\n        pos: pos\n      }).rotateStart({\n        pos: pos\n      });\n      this._state.startPinchRotation = event.rotation;\n      this.updateViewport(newMapState, NO_TRANSITION_PROPS, {\n        isDragging: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPinch\",\n    value: function _onPinch(event) {\n      if (!this.touchZoom && !this.touchRotate) {\n        return false;\n      }\n\n      var newMapState = this.mapState;\n\n      if (this.touchZoom) {\n        var scale = event.scale;\n        var pos = this.getCenter(event);\n        newMapState = newMapState.zoom({\n          pos: pos,\n          scale: scale\n        });\n      }\n\n      if (this.touchRotate) {\n        var rotation = event.rotation;\n        var startPinchRotation = this._state.startPinchRotation;\n        newMapState = newMapState.rotate({\n          deltaScaleX: -(rotation - startPinchRotation) / 180\n        });\n      }\n\n      this.updateViewport(newMapState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: this.touchRotate\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPinchEnd\",\n    value: function _onPinchEnd(event) {\n      var newMapState = this.mapState.zoomEnd().rotateEnd();\n      this._state.startPinchRotation = 0;\n      this.updateViewport(newMapState, null, {\n        isDragging: false,\n        isPanning: false,\n        isZooming: false,\n        isRotating: false\n      });\n      return true;\n    }\n  }, {\n    key: \"_onDoubleTap\",\n    value: function _onDoubleTap(event) {\n      if (!this.doubleClickZoom) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n      var isZoomOut = this.isFunctionKeyPressed(event);\n      var newMapState = this.mapState.zoom({\n        pos: pos,\n        scale: isZoomOut ? 0.5 : 2\n      });\n      this.updateViewport(newMapState, Object.assign({}, LINEAR_TRANSITION_PROPS, {\n        transitionInterpolator: new LinearInterpolator({\n          around: pos\n        })\n      }), {\n        isZooming: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onKeyDown\",\n    value: function _onKeyDown(event) {\n      if (!this.keyboard) {\n        return false;\n      }\n\n      var funcKey = this.isFunctionKeyPressed(event);\n      var mapStateProps = this.mapStateProps;\n      var newMapState;\n\n      switch (event.srcEvent.keyCode) {\n        case 189:\n          if (funcKey) {\n            newMapState = this.getMapState({\n              zoom: mapStateProps.zoom - 2\n            });\n          } else {\n            newMapState = this.getMapState({\n              zoom: mapStateProps.zoom - 1\n            });\n          }\n\n          break;\n\n        case 187:\n          if (funcKey) {\n            newMapState = this.getMapState({\n              zoom: mapStateProps.zoom + 2\n            });\n          } else {\n            newMapState = this.getMapState({\n              zoom: mapStateProps.zoom + 1\n            });\n          }\n\n          break;\n\n        case 37:\n          if (funcKey) {\n            newMapState = this.getMapState({\n              bearing: mapStateProps.bearing - 15\n            });\n          } else {\n            newMapState = this.mapState.pan({\n              pos: [100, 0],\n              startPos: [0, 0]\n            });\n          }\n\n          break;\n\n        case 39:\n          if (funcKey) {\n            newMapState = this.getMapState({\n              bearing: mapStateProps.bearing + 15\n            });\n          } else {\n            newMapState = this.mapState.pan({\n              pos: [-100, 0],\n              startPos: [0, 0]\n            });\n          }\n\n          break;\n\n        case 38:\n          if (funcKey) {\n            newMapState = this.getMapState({\n              pitch: mapStateProps.pitch + 10\n            });\n          } else {\n            newMapState = this.mapState.pan({\n              pos: [0, 100],\n              startPos: [0, 0]\n            });\n          }\n\n          break;\n\n        case 40:\n          if (funcKey) {\n            newMapState = this.getMapState({\n              pitch: mapStateProps.pitch - 10\n            });\n          } else {\n            newMapState = this.mapState.pan({\n              pos: [0, -100],\n              startPos: [0, 0]\n            });\n          }\n\n          break;\n\n        default:\n          return false;\n      }\n\n      return this.updateViewport(newMapState, LINEAR_TRANSITION_PROPS);\n    }\n  }]);\n\n  return MapController;\n}();\n\nexport { MapController as default };","export default function debounce(func, delay) {\n  var _this;\n\n  var _arguments;\n\n  var timeout;\n\n  var executeNow = function executeNow() {\n    timeout = null;\n    return func.apply(_this, _arguments);\n  };\n\n  return function () {\n    _this = this;\n    _arguments = arguments;\n\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    timeout = setTimeout(executeNow, delay);\n  };\n}","import \"core-js/modules/es6.array.for-each\";\nvar DEPRECATED_PROPS = [{\n  old: 'onChangeViewport',\n  \"new\": 'onViewportChange'\n}, {\n  old: 'perspectiveEnabled',\n  \"new\": 'dragRotate'\n}, {\n  old: 'onHoverFeatures',\n  \"new\": 'onHover'\n}, {\n  old: 'onClickFeatures',\n  \"new\": 'onClick'\n}, {\n  old: 'touchZoomRotate',\n  \"new\": 'touchZoom, touchRotate'\n}, {\n  old: 'mapControls',\n  \"new\": 'controller'\n}];\n\nfunction getDeprecatedText(name) {\n  return \"react-map-gl: `\".concat(name, \"` is removed.\");\n}\n\nfunction getNewText(name) {\n  return \"Use `\".concat(name, \"` instead.\");\n}\n\nexport default function checkDeprecatedProps() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  DEPRECATED_PROPS.forEach(function (depProp) {\n    if (props.hasOwnProperty(depProp.old)) {\n      var warnMessage = getDeprecatedText(depProp.old);\n\n      if (depProp[\"new\"]) {\n        warnMessage = \"\".concat(warnMessage, \" \").concat(getNewText(depProp[\"new\"]));\n      }\n\n      console.warn(warnMessage);\n    }\n  });\n}","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport { PureComponent, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport StaticMap from './static-map';\nimport { MAPBOX_LIMITS } from '../utils/map-state';\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport TransitionManager from '../utils/transition-manager';\nimport MapContext from './map-context';\nimport { EventManager } from 'mjolnir.js';\nimport MapController from '../utils/map-controller';\nimport deprecateWarn from '../utils/deprecate-warn';\nvar propTypes = Object.assign({}, StaticMap.propTypes, {\n  maxZoom: PropTypes.number,\n  minZoom: PropTypes.number,\n  maxPitch: PropTypes.number,\n  minPitch: PropTypes.number,\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  onInteractionStateChange: PropTypes.func,\n  transitionDuration: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  transitionInterpolator: PropTypes.object,\n  transitionInterruption: PropTypes.number,\n  transitionEasing: PropTypes.func,\n  onTransitionStart: PropTypes.func,\n  onTransitionInterrupt: PropTypes.func,\n  onTransitionEnd: PropTypes.func,\n  scrollZoom: PropTypes.bool,\n  dragPan: PropTypes.bool,\n  dragRotate: PropTypes.bool,\n  doubleClickZoom: PropTypes.bool,\n  touchZoom: PropTypes.bool,\n  touchRotate: PropTypes.bool,\n  keyboard: PropTypes.bool,\n  onHover: PropTypes.func,\n  onClick: PropTypes.func,\n  onDblClick: PropTypes.func,\n  onContextMenu: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  onMouseMove: PropTypes.func,\n  onMouseUp: PropTypes.func,\n  onTouchStart: PropTypes.func,\n  onTouchMove: PropTypes.func,\n  onTouchEnd: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onMouseOut: PropTypes.func,\n  onWheel: PropTypes.func,\n  touchAction: PropTypes.string,\n  clickRadius: PropTypes.number,\n  interactiveLayerIds: PropTypes.array,\n  getCursor: PropTypes.func,\n  controller: PropTypes.instanceOf(MapController)\n});\n\nvar getDefaultCursor = function getDefaultCursor(_ref) {\n  var isDragging = _ref.isDragging,\n      isHovering = _ref.isHovering;\n  return isDragging ? 'grabbing' : isHovering ? 'pointer' : 'grab';\n};\n\nvar defaultProps = Object.assign({}, StaticMap.defaultProps, MAPBOX_LIMITS, TransitionManager.defaultProps, {\n  onViewStateChange: null,\n  onViewportChange: null,\n  onClick: null,\n  onNativeClick: null,\n  onHover: null,\n  onContextMenu: function onContextMenu(event) {\n    return event.preventDefault();\n  },\n  scrollZoom: true,\n  dragPan: true,\n  dragRotate: true,\n  doubleClickZoom: true,\n  touchZoom: true,\n  touchRotate: false,\n  keyboard: true,\n  touchAction: 'none',\n  clickRadius: 0,\n  getCursor: getDefaultCursor\n});\n\nvar InteractiveMap = function (_PureComponent) {\n  _inherits(InteractiveMap, _PureComponent);\n\n  var _super = _createSuper(InteractiveMap);\n\n  _createClass(InteractiveMap, null, [{\n    key: \"supported\",\n    value: function supported() {\n      return StaticMap.supported();\n    }\n  }]);\n\n  function InteractiveMap(props) {\n    var _this;\n\n    _classCallCheck(this, InteractiveMap);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isLoaded: false,\n      isDragging: false,\n      isHovering: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_controller\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_eventManager\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_interactiveContext\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_width\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_height\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_eventCanvasRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"_staticMapRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"getMap\", function () {\n      return _this._staticMapRef.current ? _this._staticMapRef.current.getMap() : null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"queryRenderedFeatures\", function (geometry) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var map = _this.getMap();\n\n      return map && map.queryRenderedFeatures(geometry, options);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onInteractionStateChange\", function (interactionState) {\n      var _interactionState$isD = interactionState.isDragging,\n          isDragging = _interactionState$isD === void 0 ? false : _interactionState$isD;\n\n      if (isDragging !== _this.state.isDragging) {\n        _this._updateInteractiveContext({\n          isDragging: isDragging\n        });\n\n        _this.setState({\n          isDragging: isDragging\n        });\n      }\n\n      var onInteractionStateChange = _this.props.onInteractionStateChange;\n\n      if (onInteractionStateChange) {\n        onInteractionStateChange(interactionState);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onResize\", function (_ref2) {\n      var width = _ref2.width,\n          height = _ref2.height;\n      _this._width = width;\n      _this._height = height;\n\n      _this._setControllerProps(_this.props);\n\n      _this.props.onResize({\n        width: width,\n        height: height\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onViewportChange\", function (viewState, interactionState, oldViewState) {\n      var _this$props = _this.props,\n          onViewStateChange = _this$props.onViewStateChange,\n          onViewportChange = _this$props.onViewportChange;\n\n      if (onViewStateChange) {\n        onViewStateChange({\n          viewState: viewState,\n          interactionState: interactionState,\n          oldViewState: oldViewState\n        });\n      }\n\n      if (onViewportChange) {\n        onViewportChange(viewState, interactionState, oldViewState);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onLoad\", function (event) {\n      _this.setState({\n        isLoaded: true\n      });\n\n      _this.props.onLoad(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onEvent\", function (callbackName, event) {\n      var func = _this.props[callbackName];\n\n      if (func) {\n        func(_this._normalizeEvent(event));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onPointerDown\", function (event) {\n      switch (event.pointerType) {\n        case 'touch':\n          _this._onEvent('onTouchStart', event);\n\n          break;\n\n        default:\n          _this._onEvent('onMouseDown', event);\n\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onPointerUp\", function (event) {\n      switch (event.pointerType) {\n        case 'touch':\n          _this._onEvent('onTouchEnd', event);\n\n          break;\n\n        default:\n          _this._onEvent('onMouseUp', event);\n\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onPointerMove\", function (event) {\n      switch (event.pointerType) {\n        case 'touch':\n          _this._onEvent('onTouchMove', event);\n\n          break;\n\n        default:\n          _this._onEvent('onMouseMove', event);\n\n      }\n\n      if (!_this.state.isDragging) {\n        var _this$props2 = _this.props,\n            onHover = _this$props2.onHover,\n            interactiveLayerIds = _this$props2.interactiveLayerIds;\n        var features;\n        event = _this._normalizeEvent(event);\n\n        if (_this.state.isLoaded && (interactiveLayerIds || onHover)) {\n          features = _this._getFeatures({\n            pos: event.point,\n            radius: _this.props.clickRadius\n          });\n        }\n\n        if (onHover) {\n          event.features = features;\n          onHover(event);\n        }\n\n        var isHovering = Boolean(interactiveLayerIds && features && features.length > 0);\n        var isEntering = isHovering && !_this.state.isHovering;\n        var isExiting = !isHovering && _this.state.isHovering;\n\n        if (isEntering) {\n          _this._onEvent('onMouseEnter', event);\n        }\n\n        if (isExiting) {\n          _this._onEvent('onMouseLeave', event);\n        }\n\n        if (isEntering || isExiting) {\n          _this.setState({\n            isHovering: isHovering\n          });\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onClick\", function (event) {\n      var _this$props3 = _this.props,\n          onClick = _this$props3.onClick,\n          onNativeClick = _this$props3.onNativeClick,\n          onDblClick = _this$props3.onDblClick,\n          doubleClickZoom = _this$props3.doubleClickZoom;\n      var callbacks = [];\n      var isDoubleClickEnabled = onDblClick || doubleClickZoom;\n\n      switch (event.type) {\n        case 'anyclick':\n          callbacks.push(onNativeClick);\n\n          if (!isDoubleClickEnabled) {\n            callbacks.push(onClick);\n          }\n\n          break;\n\n        case 'click':\n          if (isDoubleClickEnabled) {\n            callbacks.push(onClick);\n          }\n\n          break;\n\n        default:\n      }\n\n      callbacks = callbacks.filter(Boolean);\n\n      if (callbacks.length) {\n        event = _this._normalizeEvent(event);\n        event.features = _this._getFeatures({\n          pos: event.point,\n          radius: _this.props.clickRadius\n        });\n        callbacks.forEach(function (cb) {\n          return cb(event);\n        });\n      }\n    });\n\n    deprecateWarn(props);\n    _this._controller = props.controller || new MapController();\n    _this._eventManager = new EventManager(null, {\n      touchAction: props.touchAction\n    });\n\n    _this._updateInteractiveContext({\n      isDragging: false,\n      eventManager: _this._eventManager\n    });\n\n    return _this;\n  }\n\n  _createClass(InteractiveMap, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var eventManager = this._eventManager;\n      var mapContainer = this._eventCanvasRef.current;\n      eventManager.setElement(mapContainer);\n      eventManager.on({\n        pointerdown: this._onPointerDown,\n        pointermove: this._onPointerMove,\n        pointerup: this._onPointerUp,\n        pointerleave: this._onEvent.bind(this, 'onMouseOut'),\n        click: this._onClick,\n        anyclick: this._onClick,\n        dblclick: this._onEvent.bind(this, 'onDblClick'),\n        wheel: this._onEvent.bind(this, 'onWheel'),\n        contextmenu: this._onEvent.bind(this, 'onContextMenu')\n      });\n\n      this._setControllerProps(this.props);\n\n      this._updateInteractiveContext({\n        mapContainer: mapContainer\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this._setControllerProps(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._eventManager.destroy();\n    }\n  }, {\n    key: \"_setControllerProps\",\n    value: function _setControllerProps(props) {\n      props = Object.assign({}, props, props.viewState, {\n        isInteractive: Boolean(props.onViewStateChange || props.onViewportChange),\n        onViewportChange: this._onViewportChange,\n        onStateChange: this._onInteractionStateChange,\n        eventManager: this._eventManager,\n        width: this._width,\n        height: this._height\n      });\n\n      this._controller.setOptions(props);\n\n      var context = this._interactiveContext;\n      context.onViewportChange = props.onViewportChange;\n      context.onViewStateChange = props.onViewStateChange;\n    }\n  }, {\n    key: \"_getFeatures\",\n    value: function _getFeatures(_ref3) {\n      var pos = _ref3.pos,\n          radius = _ref3.radius;\n      var features;\n      var queryParams = {};\n      var map = this.getMap();\n\n      if (this.props.interactiveLayerIds) {\n        queryParams.layers = this.props.interactiveLayerIds;\n      }\n\n      if (radius) {\n        var size = radius;\n        var bbox = [[pos[0] - size, pos[1] + size], [pos[0] + size, pos[1] - size]];\n        features = map && map.queryRenderedFeatures(bbox, queryParams);\n      } else {\n        features = map && map.queryRenderedFeatures(pos, queryParams);\n      }\n\n      return features;\n    }\n  }, {\n    key: \"_updateInteractiveContext\",\n    value: function _updateInteractiveContext(updatedContext) {\n      this._interactiveContext = Object.assign({}, this._interactiveContext, updatedContext);\n    }\n  }, {\n    key: \"_normalizeEvent\",\n    value: function _normalizeEvent(event) {\n      if (event.lngLat) {\n        return event;\n      }\n\n      var _event$offsetCenter = event.offsetCenter,\n          x = _event$offsetCenter.x,\n          y = _event$offsetCenter.y;\n      var pos = [x, y];\n      var viewport = new WebMercatorViewport(Object.assign({}, this.props, {\n        width: this._width,\n        height: this._height\n      }));\n      event.point = pos;\n      event.lngLat = viewport.unproject(pos);\n      return event;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          width = _this$props4.width,\n          height = _this$props4.height,\n          style = _this$props4.style,\n          getCursor = _this$props4.getCursor;\n      var eventCanvasStyle = Object.assign({\n        position: 'relative'\n      }, style, {\n        width: width,\n        height: height,\n        cursor: getCursor(this.state)\n      });\n      return React.createElement(MapContext.Provider, {\n        value: this._interactiveContext\n      }, React.createElement(\"div\", {\n        key: \"event-canvas\",\n        ref: this._eventCanvasRef,\n        style: eventCanvasStyle\n      }, React.createElement(StaticMap, _extends({}, this.props, {\n        width: \"100%\",\n        height: \"100%\",\n        style: null,\n        onResize: this._onResize,\n        onLoad: this._onLoad,\n        ref: this._staticMapRef\n      }), this.props.children)));\n    }\n  }]);\n\n  return InteractiveMap;\n}(PureComponent);\n\n_defineProperty(InteractiveMap, \"propTypes\", propTypes);\n\n_defineProperty(InteractiveMap, \"defaultProps\", defaultProps);\n\nexport { InteractiveMap as default };","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport default function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b) || a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; i++) {\n      if (!deepEqual(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  } else if (Array.isArray(b)) {\n    return false;\n  }\n\n  if (_typeof(a) === 'object' && _typeof(b) === 'object') {\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n\n    for (var _i = 0, _aKeys = aKeys; _i < _aKeys.length; _i++) {\n      var key = _aKeys[_i];\n\n      if (!b.hasOwnProperty(key)) {\n        return false;\n      }\n\n      if (!deepEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport { PureComponent, cloneElement } from 'react';\nimport PropTypes from 'prop-types';\nimport MapContext from './map-context';\nimport assert from '../utils/assert';\nimport deepEqual from '../utils/deep-equal';\nvar propTypes = {\n  type: PropTypes.string.isRequired,\n  id: PropTypes.string\n};\nvar sourceCounter = 0;\n\nvar Source = function (_PureComponent) {\n  _inherits(Source, _PureComponent);\n\n  var _super = _createSuper(Source);\n\n  function Source(_props) {\n    var _this;\n\n    _classCallCheck(this, Source);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"id\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"type\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_map\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_sourceOptions\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"_updateSource\", function () {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          type = _assertThisInitialize.type,\n          map = _assertThisInitialize._map;\n\n      if (!map) {\n        return;\n      }\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          sourceOptions = _assertThisInitialize2._sourceOptions,\n          props = _assertThisInitialize2.props;\n\n      assert(!props.id || props.id === _this.id, 'source id changed');\n      assert(props.type === type, 'source type changed');\n      var changedKey = '';\n      var changedKeyCount = 0;\n\n      for (var key in props) {\n        if (key !== 'children' && key !== 'id' && !deepEqual(sourceOptions[key], props[key])) {\n          sourceOptions[key] = props[key];\n          changedKey = key;\n          changedKeyCount++;\n        }\n      }\n\n      var source = _this.getSource();\n\n      if (!source) {\n        _this._createSource(sourceOptions);\n\n        return;\n      }\n\n      if (!changedKeyCount) {\n        return;\n      }\n\n      if (type === 'geojson') {\n        source.setData(sourceOptions.data);\n      } else if (type === 'image') {\n        source.updateImage({\n          url: sourceOptions.url,\n          coordinates: sourceOptions.coordinates\n        });\n      } else if ((type === 'canvas' || type === 'video') && changedKeyCount === 1 && changedKey === 'coordinates') {\n        source.setCoordinates(sourceOptions.coordinates);\n      } else {\n        console.warn(\"Unable to update <Source> prop: \".concat(changedKey));\n      }\n    });\n\n    _this.id = _props.id || \"jsx-source-\".concat(sourceCounter++);\n    _this.type = _props.type;\n    return _this;\n  }\n\n  _createClass(Source, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this2 = this;\n\n      var map = this._map;\n\n      if (map) {\n        map.off('styledata', this._updateSource);\n        requestAnimationFrame(function () {\n          if (map.style && map.style._loaded) {\n            map.removeSource(_this2.id);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource() {\n      var map = this._map;\n      return map && map.style && map.getSource(this.id);\n    }\n  }, {\n    key: \"_createSource\",\n    value: function _createSource(sourceOptions) {\n      var map = this._map;\n\n      if (map.style && map.style._loaded) {\n        map.addSource(this.id, sourceOptions);\n      }\n    }\n  }, {\n    key: \"_render\",\n    value: function _render(context) {\n      var _this3 = this;\n\n      if (!this._map && context.map) {\n        this._map = context.map;\n\n        this._map.on('styledata', this._updateSource);\n      }\n\n      this._updateSource();\n\n      return React.Children.map(this.props.children, function (child) {\n        return cloneElement(child, {\n          source: _this3.id\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(MapContext.Consumer, null, this._render.bind(this));\n    }\n  }]);\n\n  return Source;\n}(PureComponent);\n\n_defineProperty(Source, \"propTypes\", propTypes);\n\nexport { Source as default };","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport MapContext from './map-context';\nimport assert from '../utils/assert';\nimport deepEqual from '../utils/deep-equal';\nvar propTypes = {\n  type: PropTypes.string.isRequired,\n  id: PropTypes.string,\n  source: PropTypes.string,\n  beforeId: PropTypes.string\n};\n\nfunction diffLayerStyles(map, id, props, prevProps) {\n  var _props$layout = props.layout,\n      layout = _props$layout === void 0 ? {} : _props$layout,\n      _props$paint = props.paint,\n      paint = _props$paint === void 0 ? {} : _props$paint,\n      filter = props.filter,\n      minzoom = props.minzoom,\n      maxzoom = props.maxzoom,\n      beforeId = props.beforeId,\n      otherProps = _objectWithoutProperties(props, [\"layout\", \"paint\", \"filter\", \"minzoom\", \"maxzoom\", \"beforeId\"]);\n\n  if (beforeId !== prevProps.beforeId) {\n    map.moveLayer(id, beforeId);\n  }\n\n  if (layout !== prevProps.layout) {\n    for (var key in layout) {\n      if (!deepEqual(layout[key], prevProps.layout[key])) {\n        map.setLayoutProperty(id, key, layout[key]);\n      }\n    }\n  }\n\n  if (paint !== prevProps.paint) {\n    for (var _key in paint) {\n      if (!deepEqual(paint[_key], prevProps.paint[_key])) {\n        map.setPaintProperty(id, _key, paint[_key]);\n      }\n    }\n  }\n\n  if (!deepEqual(filter, prevProps.filter)) {\n    map.setFilter(id, filter);\n  }\n\n  if (minzoom !== prevProps.minzoom || maxzoom !== prevProps.maxzoom) {\n    map.setLayerZoomRange(id, minzoom, maxzoom);\n  }\n\n  for (var _key2 in otherProps) {\n    if (!deepEqual(otherProps[_key2], prevProps[_key2])) {\n      map.setLayerProperty(id, _key2, otherProps[_key2]);\n    }\n  }\n}\n\nvar layerCounter = 0;\n\nvar Layer = function (_PureComponent) {\n  _inherits(Layer, _PureComponent);\n\n  var _super = _createSuper(Layer);\n\n  function Layer(_props) {\n    var _this;\n\n    _classCallCheck(this, Layer);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"id\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"type\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_map\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_layerOptions\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"_updateLayer\", function () {\n      var map = _this._map;\n\n      if (!map) {\n        return;\n      }\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          props = _assertThisInitialize.props,\n          layerOptions = _assertThisInitialize._layerOptions;\n\n      assert(!props.id || props.id === _this.id, 'layer id changed');\n      assert(props.type === _this.type, 'layer type changed');\n\n      if (!_this.getLayer()) {\n        _this._createLayer();\n\n        return;\n      }\n\n      try {\n        diffLayerStyles(map, _this.id, props, layerOptions);\n        Object.assign(layerOptions, props);\n      } catch (error) {\n        console.warn(error);\n      }\n    });\n\n    _this.id = _props.id || \"jsx-layer-\".concat(layerCounter++);\n    _this.type = _props.type;\n    return _this;\n  }\n\n  _createClass(Layer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._updateLayer();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this._updateLayer();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var map = this._map;\n\n      if (map) {\n        map.off('styledata', this._updateLayer);\n\n        if (map.style && map.style._loaded) {\n          map.removeLayer(this.id);\n        }\n      }\n    }\n  }, {\n    key: \"getLayer\",\n    value: function getLayer() {\n      var map = this._map;\n      return map && map.style && map.getLayer(this.id);\n    }\n  }, {\n    key: \"_createLayer\",\n    value: function _createLayer() {\n      var map = this._map;\n\n      if (map.style && map.style._loaded) {\n        var options = Object.assign({}, this.props);\n        options.id = this.id;\n        delete options.beforeId;\n        map.addLayer(options, this.props.beforeId);\n        this._layerOptions = options;\n      }\n    }\n  }, {\n    key: \"_render\",\n    value: function _render(context) {\n      if (!this._map && context.map) {\n        this._map = context.map;\n\n        this._map.on('styledata', this._updateLayer);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(MapContext.Consumer, null, this._render.bind(this));\n    }\n  }]);\n\n  return Layer;\n}(PureComponent);\n\n_defineProperty(Layer, \"propTypes\", propTypes);\n\nexport { Layer as default };","import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport { PureComponent, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport MapContext from './map-context';\nvar propTypes = {\n  captureScroll: PropTypes.bool,\n  captureDrag: PropTypes.bool,\n  captureClick: PropTypes.bool,\n  captureDoubleClick: PropTypes.bool\n};\nvar defaultProps = {\n  captureScroll: false,\n  captureDrag: true,\n  captureClick: true,\n  captureDoubleClick: true\n};\n\nvar BaseControl = function (_PureComponent) {\n  _inherits(BaseControl, _PureComponent);\n\n  var _super = _createSuper(BaseControl);\n\n  function BaseControl() {\n    var _this;\n\n    _classCallCheck(this, BaseControl);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"_context\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"_events\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_containerRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"_onScroll\", function (evt) {\n      if (_this.props.captureScroll) {\n        evt.stopPropagation();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onDragStart\", function (evt) {\n      if (_this.props.captureDrag) {\n        evt.stopPropagation();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onDblClick\", function (evt) {\n      if (_this.props.captureDoubleClick) {\n        evt.stopPropagation();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onClick\", function (evt) {\n      if (_this.props.captureClick) {\n        evt.stopPropagation();\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(BaseControl, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var ref = this._containerRef.current;\n\n      if (!ref) {\n        return;\n      }\n\n      var eventManager = this._context.eventManager;\n\n      if (eventManager) {\n        this._events = {\n          wheel: this._onScroll,\n          panstart: this._onDragStart,\n          anyclick: this._onClick,\n          click: this._onClick,\n          dblclick: this._onDblClick\n        };\n        eventManager.watch(this._events, ref);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var eventManager = this._context.eventManager;\n\n      if (eventManager && this._events) {\n        eventManager.off(this._events);\n      }\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      throw new Error('_render() not implemented');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(MapContext.Consumer, null, function (context) {\n        _this2._context = context;\n        return _this2._render();\n      });\n    }\n  }]);\n\n  return BaseControl;\n}(PureComponent);\n\n_defineProperty(BaseControl, \"propTypes\", propTypes);\n\n_defineProperty(BaseControl, \"defaultProps\", defaultProps);\n\nexport { BaseControl as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport PropTypes from 'prop-types';\nimport BaseControl from './base-control';\nvar propTypes = Object.assign({}, BaseControl.propTypes, {\n  draggable: PropTypes.bool,\n  onDrag: PropTypes.func,\n  onDragEnd: PropTypes.func,\n  onDragStart: PropTypes.func,\n  offsetLeft: PropTypes.number,\n  offsetTop: PropTypes.number\n});\nvar defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  draggable: false,\n  offsetLeft: 0,\n  offsetTop: 0\n});\n\nvar DraggableControl = function (_BaseControl) {\n  _inherits(DraggableControl, _BaseControl);\n\n  var _super = _createSuper(DraggableControl);\n\n  function DraggableControl() {\n    var _this;\n\n    _classCallCheck(this, DraggableControl);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      dragPos: null,\n      dragOffset: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_dragEvents\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_onDragStart\", function (event) {\n      var _this$props = _this.props,\n          draggable = _this$props.draggable,\n          captureDrag = _this$props.captureDrag;\n\n      if (draggable || captureDrag) {\n        event.stopPropagation();\n      }\n\n      if (!draggable) {\n        return;\n      }\n\n      var dragPos = _this._getDragEventPosition(event);\n\n      var dragOffset = _this._getDragEventOffset(event);\n\n      _this.setState({\n        dragPos: dragPos,\n        dragOffset: dragOffset\n      });\n\n      _this._setupDragEvents();\n\n      var onDragStart = _this.props.onDragStart;\n\n      if (onDragStart && dragOffset) {\n        var callbackEvent = Object.assign({}, event);\n        callbackEvent.lngLat = _this._getDragLngLat(dragPos, dragOffset);\n        onDragStart(callbackEvent);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onDrag\", function (event) {\n      event.stopPropagation();\n\n      var dragPos = _this._getDragEventPosition(event);\n\n      _this.setState({\n        dragPos: dragPos\n      });\n\n      var onDrag = _this.props.onDrag;\n      var dragOffset = _this.state.dragOffset;\n\n      if (onDrag && dragOffset) {\n        var callbackEvent = Object.assign({}, event);\n        callbackEvent.lngLat = _this._getDragLngLat(dragPos, dragOffset);\n        onDrag(callbackEvent);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onDragEnd\", function (event) {\n      var _this$state = _this.state,\n          dragPos = _this$state.dragPos,\n          dragOffset = _this$state.dragOffset;\n      event.stopPropagation();\n\n      _this.setState({\n        dragPos: null,\n        dragOffset: null\n      });\n\n      _this._removeDragEvents();\n\n      var onDragEnd = _this.props.onDragEnd;\n\n      if (onDragEnd && dragPos && dragOffset) {\n        var callbackEvent = Object.assign({}, event);\n        callbackEvent.lngLat = _this._getDragLngLat(dragPos, dragOffset);\n        onDragEnd(callbackEvent);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onDragCancel\", function (event) {\n      event.stopPropagation();\n\n      _this.setState({\n        dragPos: null,\n        dragOffset: null\n      });\n\n      _this._removeDragEvents();\n    });\n\n    return _this;\n  }\n\n  _createClass(DraggableControl, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      _get(_getPrototypeOf(DraggableControl.prototype), \"componentWillUnmount\", this).call(this);\n\n      this._removeDragEvents();\n    }\n  }, {\n    key: \"_setupDragEvents\",\n    value: function _setupDragEvents() {\n      var eventManager = this._context.eventManager;\n\n      if (!eventManager) {\n        return;\n      }\n\n      this._dragEvents = {\n        panmove: this._onDrag,\n        panend: this._onDragEnd,\n        pancancel: this._onDragCancel\n      };\n      eventManager.on(this._dragEvents);\n    }\n  }, {\n    key: \"_removeDragEvents\",\n    value: function _removeDragEvents() {\n      var eventManager = this._context.eventManager;\n\n      if (!eventManager || !this._dragEvents) {\n        return;\n      }\n\n      eventManager.off(this._dragEvents);\n      this._dragEvents = null;\n    }\n  }, {\n    key: \"_getDragEventPosition\",\n    value: function _getDragEventPosition(event) {\n      var _event$offsetCenter = event.offsetCenter,\n          x = _event$offsetCenter.x,\n          y = _event$offsetCenter.y;\n      return [x, y];\n    }\n  }, {\n    key: \"_getDragEventOffset\",\n    value: function _getDragEventOffset(event) {\n      var _event$center = event.center,\n          x = _event$center.x,\n          y = _event$center.y;\n      var container = this._containerRef.current;\n\n      if (container) {\n        var rect = container.getBoundingClientRect();\n        return [rect.left - x, rect.top - y];\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_getDraggedPosition\",\n    value: function _getDraggedPosition(dragPos, dragOffset) {\n      return [dragPos[0] + dragOffset[0], dragPos[1] + dragOffset[1]];\n    }\n  }, {\n    key: \"_getDragLngLat\",\n    value: function _getDragLngLat(dragPos, dragOffset) {\n      var _this$props2 = this.props,\n          offsetLeft = _this$props2.offsetLeft,\n          offsetTop = _this$props2.offsetTop;\n\n      var _this$_getDraggedPosi = this._getDraggedPosition(dragPos, dragOffset),\n          _this$_getDraggedPosi2 = _slicedToArray(_this$_getDraggedPosi, 2),\n          x = _this$_getDraggedPosi2[0],\n          y = _this$_getDraggedPosi2[1];\n\n      return this._context.viewport.unproject([x - offsetLeft, y - offsetTop]);\n    }\n  }]);\n\n  return DraggableControl;\n}(BaseControl);\n\n_defineProperty(DraggableControl, \"propTypes\", propTypes);\n\n_defineProperty(DraggableControl, \"defaultProps\", defaultProps);\n\nexport { DraggableControl as default };","var pixelRatio = typeof window !== 'undefined' && window.devicePixelRatio || 1;\nexport var crispPixel = function crispPixel(size) {\n  return Math.round(size * pixelRatio) / pixelRatio;\n};\nexport var crispPercentage = function crispPercentage(el, percentage) {\n  var dimension = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'x';\n\n  if (el === null) {\n    return percentage;\n  }\n\n  var origSize = dimension === 'x' ? el.offsetWidth : el.offsetHeight;\n  return crispPixel(percentage / 100 * origSize) / origSize * 100;\n};","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport DraggableControl from './draggable-control';\nimport { crispPixel } from '../utils/crisp-pixel';\nvar propTypes = Object.assign({}, DraggableControl.propTypes, {\n  className: PropTypes.string,\n  longitude: PropTypes.number.isRequired,\n  latitude: PropTypes.number.isRequired\n});\nvar defaultProps = Object.assign({}, DraggableControl.defaultProps, {\n  className: ''\n});\n\nvar Marker = function (_DraggableControl) {\n  _inherits(Marker, _DraggableControl);\n\n  var _super = _createSuper(Marker);\n\n  function Marker() {\n    var _this;\n\n    _classCallCheck(this, Marker);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"_control\", null);\n\n    return _this;\n  }\n\n  _createClass(Marker, [{\n    key: \"_getPosition\",\n    value: function _getPosition() {\n      var _this$props = this.props,\n          longitude = _this$props.longitude,\n          latitude = _this$props.latitude,\n          offsetLeft = _this$props.offsetLeft,\n          offsetTop = _this$props.offsetTop;\n      var _this$state = this.state,\n          dragPos = _this$state.dragPos,\n          dragOffset = _this$state.dragOffset;\n\n      if (dragPos && dragOffset) {\n        return this._getDraggedPosition(dragPos, dragOffset);\n      }\n\n      var _this$_context$viewpo = this._context.viewport.project([longitude, latitude]),\n          _this$_context$viewpo2 = _slicedToArray(_this$_context$viewpo, 2),\n          x = _this$_context$viewpo2[0],\n          y = _this$_context$viewpo2[1];\n\n      x += offsetLeft;\n      y += offsetTop;\n      return [x, y];\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      var _this$_getPosition = this._getPosition(),\n          _this$_getPosition2 = _slicedToArray(_this$_getPosition, 2),\n          x = _this$_getPosition2[0],\n          y = _this$_getPosition2[1];\n\n      var transform = \"translate(\".concat(crispPixel(x), \"px, \").concat(crispPixel(y), \"px)\");\n      var div = this._containerRef.current;\n\n      if (this._control && div) {\n        div.style.transform = transform;\n      } else {\n        var _this$props2 = this.props,\n            className = _this$props2.className,\n            draggable = _this$props2.draggable;\n        var dragPos = this.state.dragPos;\n        var containerStyle = {\n          position: 'absolute',\n          left: 0,\n          top: 0,\n          transform: transform,\n          cursor: draggable ? dragPos ? 'grabbing' : 'grab' : 'auto'\n        };\n        this._control = React.createElement(\"div\", {\n          className: \"mapboxgl-marker \".concat(className),\n          ref: this._containerRef,\n          style: containerStyle\n        }, this.props.children);\n      }\n\n      return this._control;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this._control = null;\n      return _get(_getPrototypeOf(Marker.prototype), \"render\", this).call(this);\n    }\n  }]);\n\n  return Marker;\n}(DraggableControl);\n\n_defineProperty(Marker, \"propTypes\", propTypes);\n\n_defineProperty(Marker, \"defaultProps\", defaultProps);\n\nexport { Marker as default };","import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.string.anchor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nexport var ANCHOR_POSITION = {\n  top: {\n    x: 0.5,\n    y: 0\n  },\n  'top-left': {\n    x: 0,\n    y: 0\n  },\n  'top-right': {\n    x: 1,\n    y: 0\n  },\n  bottom: {\n    x: 0.5,\n    y: 1\n  },\n  'bottom-left': {\n    x: 0,\n    y: 1\n  },\n  'bottom-right': {\n    x: 1,\n    y: 1\n  },\n  left: {\n    x: 0,\n    y: 0.5\n  },\n  right: {\n    x: 1,\n    y: 0.5\n  }\n};\nvar ANCHOR_TYPES = Object.keys(ANCHOR_POSITION);\nexport function getDynamicPosition(_ref) {\n  var x = _ref.x,\n      y = _ref.y,\n      width = _ref.width,\n      height = _ref.height,\n      selfWidth = _ref.selfWidth,\n      selfHeight = _ref.selfHeight,\n      anchor = _ref.anchor,\n      _ref$padding = _ref.padding,\n      padding = _ref$padding === void 0 ? 0 : _ref$padding;\n  var _ANCHOR_POSITION$anch = ANCHOR_POSITION[anchor],\n      anchorX = _ANCHOR_POSITION$anch.x,\n      anchorY = _ANCHOR_POSITION$anch.y;\n  var top = y - anchorY * selfHeight;\n  var bottom = top + selfHeight;\n  var yStep = 0.5;\n\n  if (top < padding) {\n    while (top < padding && anchorY >= yStep) {\n      anchorY -= yStep;\n      top += yStep * selfHeight;\n    }\n  } else if (bottom > height - padding) {\n    while (bottom > height - padding && anchorY <= 1 - yStep) {\n      anchorY += yStep;\n      bottom -= yStep * selfHeight;\n    }\n  }\n\n  var left = x - anchorX * selfWidth;\n  var right = left + selfWidth;\n  var xStep = 0.5;\n\n  if (anchorY === 0.5) {\n    anchorX = Math.floor(anchorX);\n    xStep = 1;\n  }\n\n  if (left < padding) {\n    while (left < padding && anchorX >= xStep) {\n      anchorX -= xStep;\n      left += xStep * selfWidth;\n    }\n  } else if (right > width - padding) {\n    while (right > width - padding && anchorX <= 1 - xStep) {\n      anchorX += xStep;\n      right -= xStep * selfWidth;\n    }\n  }\n\n  return ANCHOR_TYPES.find(function (positionType) {\n    var anchorPosition = ANCHOR_POSITION[positionType];\n    return anchorPosition.x === anchorX && anchorPosition.y === anchorY;\n  }) || anchor;\n}","import \"core-js/modules/es6.string.anchor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport { createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport BaseControl from './base-control';\nimport { getDynamicPosition, ANCHOR_POSITION } from '../utils/dynamic-position';\nimport { crispPercentage, crispPixel } from '../utils/crisp-pixel';\nvar propTypes = Object.assign({}, BaseControl.propTypes, {\n  className: PropTypes.string,\n  longitude: PropTypes.number.isRequired,\n  latitude: PropTypes.number.isRequired,\n  altitude: PropTypes.number,\n  offsetLeft: PropTypes.number,\n  offsetTop: PropTypes.number,\n  tipSize: PropTypes.number,\n  closeButton: PropTypes.bool,\n  closeOnClick: PropTypes.bool,\n  anchor: PropTypes.oneOf(Object.keys(ANCHOR_POSITION)),\n  dynamicPosition: PropTypes.bool,\n  sortByDepth: PropTypes.bool,\n  onClose: PropTypes.func\n});\nvar defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  className: '',\n  altitude: 0,\n  offsetLeft: 0,\n  offsetTop: 0,\n  tipSize: 10,\n  anchor: 'bottom',\n  dynamicPosition: true,\n  sortByDepth: false,\n  closeButton: true,\n  closeOnClick: true,\n  onClose: function onClose() {}\n});\n\nvar Popup = function (_BaseControl) {\n  _inherits(Popup, _BaseControl);\n\n  var _super = _createSuper(Popup);\n\n  function Popup() {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"_closeOnClick\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_contentRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"_onClick\", function (evt) {\n      if (_this.props.captureClick) {\n        evt.stopPropagation();\n      }\n\n      if (_this.props.closeOnClick || evt.target.className === 'mapboxgl-popup-close-button') {\n        _this.props.onClose();\n\n        var eventManager = _this._context.eventManager;\n\n        if (eventManager) {\n          eventManager.once('click', function (e) {\n            return e.stopPropagation();\n          }, evt.target);\n        }\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _get(_getPrototypeOf(Popup.prototype), \"componentDidMount\", this).call(this);\n\n      this.forceUpdate();\n    }\n  }, {\n    key: \"_getPosition\",\n    value: function _getPosition(x, y) {\n      var viewport = this._context.viewport;\n      var _this$props = this.props,\n          anchor = _this$props.anchor,\n          dynamicPosition = _this$props.dynamicPosition,\n          tipSize = _this$props.tipSize;\n      var content = this._contentRef.current;\n\n      if (content) {\n        return dynamicPosition ? getDynamicPosition({\n          x: x,\n          y: y,\n          anchor: anchor,\n          padding: tipSize,\n          width: viewport.width,\n          height: viewport.height,\n          selfWidth: content.clientWidth,\n          selfHeight: content.clientHeight\n        }) : anchor;\n      }\n\n      return anchor;\n    }\n  }, {\n    key: \"_getContainerStyle\",\n    value: function _getContainerStyle(x, y, z, positionType) {\n      var viewport = this._context.viewport;\n      var _this$props2 = this.props,\n          offsetLeft = _this$props2.offsetLeft,\n          offsetTop = _this$props2.offsetTop,\n          sortByDepth = _this$props2.sortByDepth;\n      var anchorPosition = ANCHOR_POSITION[positionType];\n      var left = x + offsetLeft;\n      var top = y + offsetTop;\n      var el = this._containerRef.current;\n      var xPercentage = crispPercentage(el, -anchorPosition.x * 100);\n      var yPercentage = crispPercentage(el, -anchorPosition.y * 100, 'y');\n      var style = {\n        position: 'absolute',\n        transform: \"\\n        translate(\".concat(xPercentage, \"%, \").concat(yPercentage, \"%)\\n        translate(\").concat(crispPixel(left), \"px, \").concat(crispPixel(top), \"px)\\n      \"),\n        display: undefined,\n        zIndex: undefined\n      };\n\n      if (!sortByDepth) {\n        return style;\n      }\n\n      if (z > 1 || z < -1 || x < 0 || x > viewport.width || y < 0 || y > viewport.height) {\n        style.display = 'none';\n      } else {\n        style.zIndex = Math.floor((1 - z) / 2 * 100000);\n      }\n\n      return style;\n    }\n  }, {\n    key: \"_renderTip\",\n    value: function _renderTip(positionType) {\n      var tipSize = this.props.tipSize;\n      return React.createElement(\"div\", {\n        key: \"tip\",\n        className: \"mapboxgl-popup-tip\",\n        style: {\n          borderWidth: tipSize\n        }\n      });\n    }\n  }, {\n    key: \"_renderContent\",\n    value: function _renderContent() {\n      var _this$props3 = this.props,\n          closeButton = _this$props3.closeButton,\n          children = _this$props3.children;\n      var onClick = this._context.eventManager ? null : this._onClick;\n      return React.createElement(\"div\", {\n        key: \"content\",\n        ref: this._contentRef,\n        className: \"mapboxgl-popup-content\",\n        onClick: onClick\n      }, closeButton && React.createElement(\"button\", {\n        key: \"close-button\",\n        className: \"mapboxgl-popup-close-button\",\n        type: \"button\"\n      }, \"\\xD7\"), children);\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      var _this$props4 = this.props,\n          className = _this$props4.className,\n          longitude = _this$props4.longitude,\n          latitude = _this$props4.latitude,\n          altitude = _this$props4.altitude;\n\n      var _this$_context$viewpo = this._context.viewport.project([longitude, latitude, altitude]),\n          _this$_context$viewpo2 = _slicedToArray(_this$_context$viewpo, 3),\n          x = _this$_context$viewpo2[0],\n          y = _this$_context$viewpo2[1],\n          z = _this$_context$viewpo2[2];\n\n      var positionType = this._getPosition(x, y);\n\n      var containerStyle = this._getContainerStyle(x, y, z, positionType);\n\n      return React.createElement(\"div\", {\n        className: \"mapboxgl-popup mapboxgl-popup-anchor-\".concat(positionType, \" \").concat(className),\n        style: containerStyle,\n        ref: this._containerRef\n      }, this._renderTip(positionType), this._renderContent());\n    }\n  }]);\n\n  return Popup;\n}(BaseControl);\n\n_defineProperty(Popup, \"propTypes\", propTypes);\n\n_defineProperty(Popup, \"defaultProps\", defaultProps);\n\nexport { Popup as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport { document } from '../utils/globals';\nimport PropTypes from 'prop-types';\nimport BaseControl from './base-control';\nimport * as React from 'react';\nimport mapboxgl from '../utils/mapboxgl';\nvar propTypes = Object.assign({}, BaseControl.propTypes, {\n  className: PropTypes.string,\n  container: PropTypes.object\n});\nvar defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  className: '',\n  container: null\n});\n\nvar FullscreenControl = function (_BaseControl) {\n  _inherits(FullscreenControl, _BaseControl);\n\n  var _super = _createSuper(FullscreenControl);\n\n  function FullscreenControl() {\n    var _this;\n\n    _classCallCheck(this, FullscreenControl);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isFullscreen: false,\n      showButton: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_mapboxFullscreenControl\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_onFullscreenChange\", function () {\n      var nextState = !_this._mapboxFullscreenControl._fullscreen;\n      _this._mapboxFullscreenControl._fullscreen = nextState;\n\n      _this.setState({\n        isFullscreen: nextState\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onClickFullscreen\", function () {\n      _this._mapboxFullscreenControl._onClickFullscreen();\n    });\n\n    return _this;\n  }\n\n  _createClass(FullscreenControl, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var container = this.props.container || this._context.mapContainer;\n      this._mapboxFullscreenControl = new mapboxgl.FullscreenControl({\n        container: container\n      });\n      this.setState({\n        showButton: this._mapboxFullscreenControl._checkFullscreenSupport()\n      });\n      document.addEventListener(this._mapboxFullscreenControl._fullscreenchange, this._onFullscreenChange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(this._mapboxFullscreenControl._fullscreenchange, this._onFullscreenChange);\n    }\n  }, {\n    key: \"_renderButton\",\n    value: function _renderButton(type, label, callback) {\n      return React.createElement(\"button\", {\n        key: type,\n        className: \"mapboxgl-ctrl-icon mapboxgl-ctrl-\".concat(type),\n        type: \"button\",\n        title: label,\n        onClick: callback\n      }, React.createElement(\"span\", {\n        className: \"mapboxgl-ctrl-icon\",\n        \"aria-hidden\": \"true\"\n      }));\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      if (!this.state.showButton) {\n        return null;\n      }\n\n      var className = this.props.className;\n      var isFullscreen = this.state.isFullscreen;\n      var type = isFullscreen ? 'shrink' : 'fullscreen';\n      return React.createElement(\"div\", {\n        className: \"mapboxgl-ctrl mapboxgl-ctrl-group \".concat(className),\n        ref: this._containerRef\n      }, this._renderButton(type, 'Toggle fullscreen', this._onClickFullscreen));\n    }\n  }]);\n\n  return FullscreenControl;\n}(BaseControl);\n\n_defineProperty(FullscreenControl, \"propTypes\", propTypes);\n\n_defineProperty(FullscreenControl, \"defaultProps\", defaultProps);\n\nexport { FullscreenControl as default };","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nvar supported;\nexport function isGeolocationSupported() {\n  if (supported !== undefined) {\n    return Promise.resolve(supported);\n  }\n\n  if (window.navigator.permissions !== undefined) {\n    return window.navigator.permissions.query({\n      name: 'geolocation'\n    }).then(function (p) {\n      supported = p.state !== 'denied';\n      return supported;\n    });\n  }\n\n  supported = Boolean(window.navigator.geolocation);\n  return Promise.resolve(supported);\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport { createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport mapboxgl from '../utils/mapboxgl';\nimport BaseControl from './base-control';\nimport Marker from './marker';\nimport MapState from '../utils/map-state';\nimport TransitionManager from '../utils/transition-manager';\nimport { isGeolocationSupported } from '../utils/geolocate-utils';\nvar LINEAR_TRANSITION_PROPS = Object.assign({}, TransitionManager.defaultProps, {\n  transitionDuration: 500\n});\n\nvar noop = function noop() {};\n\nvar propTypes = Object.assign({}, BaseControl.propTypes, {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  label: PropTypes.string,\n  auto: PropTypes.bool,\n  positionOptions: PropTypes.object,\n  fitBoundsOptions: PropTypes.object,\n  trackUserLocation: PropTypes.bool,\n  showUserLocation: PropTypes.bool,\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  onGeolocate: PropTypes.func\n});\nvar defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  className: '',\n  style: {},\n  label: 'Geolocate',\n  auto: false,\n  positionOptions: null,\n  fitBoundsOptions: null,\n  trackUserLocation: false,\n  showUserLocation: true,\n  onGeolocate: function onGeolocate() {}\n});\n\nvar GeolocateControl = function (_BaseControl) {\n  _inherits(GeolocateControl, _BaseControl);\n\n  var _super = _createSuper(GeolocateControl);\n\n  function GeolocateControl() {\n    var _this;\n\n    _classCallCheck(this, GeolocateControl);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      supportsGeolocation: false,\n      markerPosition: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_mapboxGeolocateControl\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_geolocateButtonRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"_setupMapboxGeolocateControl\", function (supportsGeolocation) {\n      if (!supportsGeolocation) {\n        console.warn('Geolocation support is not available, the GeolocateControl will not be visible.');\n        return;\n      }\n\n      var controlOptions = {\n        showUserLocation: false\n      };\n      ['positionOptions', 'fitBoundsOptions', 'trackUserLocation'].forEach(function (prop) {\n        if (prop in _this.props && _this.props[prop] !== null) {\n          controlOptions[prop] = _this.props[prop];\n        }\n      });\n      var control = new mapboxgl.GeolocateControl(controlOptions);\n      _this._mapboxGeolocateControl = control;\n      control._watchState = 'OFF';\n      control._geolocateButton = _this._geolocateButtonRef.current;\n\n      if (control.options.trackUserLocation && control._geolocateButton) {\n        control._geolocateButton.setAttribute('aria-pressed', 'false');\n      }\n\n      control._updateMarker = _this._updateMarker;\n      control._updateCamera = _this._updateCamera;\n      control._setup = true;\n      var eventManager = _this._context.eventManager;\n\n      if (control.options.trackUserLocation && eventManager) {\n        eventManager.on('panstart', function () {\n          if (control._watchState === 'ACTIVE_LOCK') {\n            control._watchState = 'BACKGROUND';\n\n            control._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background');\n\n            control._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active');\n          }\n        });\n      }\n\n      control.on('geolocate', _this.props.onGeolocate);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_triggerGeolocate\", function () {\n      var control = _this._mapboxGeolocateControl;\n      control._map = _this._context.map;\n\n      if (_this.props.showUserLocation) {\n        control.on('geolocate', _this._updateMarker);\n        control.on('trackuserlocationend', _this._updateMarker);\n      }\n\n      return _this._mapboxGeolocateControl.trigger();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_updateMarker\", function (position) {\n      if (position) {\n        _this.setState({\n          markerPosition: position.coords\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_getBounds\", function (position) {\n      var center = new mapboxgl.LngLat(position.coords.longitude, position.coords.latitude);\n      var radius = position.coords.accuracy;\n      var bounds = center.toBounds(radius);\n      return [[bounds._ne.lng, bounds._ne.lat], [bounds._sw.lng, bounds._sw.lat]];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_updateCamera\", function (position) {\n      var viewport = _this._context.viewport;\n\n      var bounds = _this._getBounds(position);\n\n      var _WebMercatorViewport$ = new WebMercatorViewport(viewport).fitBounds(bounds),\n          longitude = _WebMercatorViewport$.longitude,\n          latitude = _WebMercatorViewport$.latitude,\n          zoom = _WebMercatorViewport$.zoom;\n\n      var newViewState = Object.assign({}, viewport, {\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      });\n      var mapState = new MapState(newViewState);\n      var viewState = Object.assign({}, mapState.getViewportProps(), LINEAR_TRANSITION_PROPS);\n      var onViewportChange = _this.props.onViewportChange || _this._context.onViewportChange || noop;\n      var onViewStateChange = _this.props.onViewStateChange || _this._context.onViewStateChange || noop;\n      onViewStateChange({\n        viewState: viewState\n      });\n      onViewportChange(viewState);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_renderButton\", function (type, label, callback) {\n      return React.createElement(\"button\", {\n        key: type,\n        className: \"mapboxgl-ctrl-icon mapboxgl-ctrl-\".concat(type),\n        ref: _this._geolocateButtonRef,\n        type: \"button\",\n        title: label,\n        onClick: callback\n      }, React.createElement(\"span\", {\n        className: \"mapboxgl-ctrl-icon\",\n        \"aria-hidden\": \"true\"\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_renderMarker\", function () {\n      var markerPosition = _this.state.markerPosition;\n      var showUserLocation = _this.props.showUserLocation;\n\n      if (!markerPosition || !showUserLocation) {\n        return null;\n      }\n\n      return React.createElement(Marker, {\n        key: \"location-maker\",\n        className: \"mapboxgl-user-location-dot\",\n        longitude: markerPosition.longitude,\n        latitude: markerPosition.latitude,\n        onContextMenu: function onContextMenu(e) {\n          return e.preventDefault();\n        },\n        captureDrag: false,\n        captureDoubleClick: false\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(GeolocateControl, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      isGeolocationSupported().then(function (result) {\n        _this2.setState({\n          supportsGeolocation: result\n        });\n\n        _this2._setupMapboxGeolocateControl(result);\n\n        if (result && _this2.props.auto) {\n          _this2._triggerGeolocate();\n        }\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.state.supportsGeolocation && !prevProps.auto && this.props.auto) {\n        this._triggerGeolocate();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this._mapboxGeolocateControl) {\n        var geolocationWatchID = this._mapboxGeolocateControl._geolocationWatchID;\n\n        if (geolocationWatchID !== undefined) {\n          window.navigator.geolocation.clearWatch(geolocationWatchID);\n          this._mapboxGeolocateControl._geolocationWatchID = undefined;\n        }\n      }\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      if (!this.state.supportsGeolocation) {\n        return null;\n      }\n\n      var _this$props = this.props,\n          className = _this$props.className,\n          style = _this$props.style,\n          label = _this$props.label;\n      return React.createElement(\"div\", null, this._renderMarker(), React.createElement(\"div\", {\n        key: \"geolocate-control\",\n        className: \"mapboxgl-ctrl mapboxgl-ctrl-group \".concat(className),\n        ref: this._containerRef,\n        style: style,\n        onContextMenu: function onContextMenu(e) {\n          return e.preventDefault();\n        }\n      }, this._renderButton('geolocate', label, this._triggerGeolocate)));\n    }\n  }]);\n\n  return GeolocateControl;\n}(BaseControl);\n\n_defineProperty(GeolocateControl, \"propTypes\", propTypes);\n\n_defineProperty(GeolocateControl, \"defaultProps\", defaultProps);\n\nexport { GeolocateControl as default };","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport BaseControl from './base-control';\nimport MapState from '../utils/map-state';\nimport { LINEAR_TRANSITION_PROPS } from '../utils/map-controller';\nimport deprecateWarn from '../utils/deprecate-warn';\nimport { compareVersions } from '../utils/version';\n\nvar noop = function noop() {};\n\nvar propTypes = Object.assign({}, BaseControl.propTypes, {\n  className: PropTypes.string,\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  showCompass: PropTypes.bool,\n  showZoom: PropTypes.bool,\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  compassLabel: PropTypes.string\n});\nvar defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  className: '',\n  showCompass: true,\n  showZoom: true,\n  zoomInLabel: 'Zoom In',\n  zoomOutLabel: 'Zoom Out',\n  compassLabel: 'Reset North'\n});\nvar VERSION_LEGACY = 1;\nvar VERSION_1_6 = 2;\n\nfunction getUIVersion(mapboxVersion) {\n  return compareVersions(mapboxVersion, '1.6.0') >= 0 ? VERSION_1_6 : VERSION_LEGACY;\n}\n\nvar NavigationControl = function (_BaseControl) {\n  _inherits(NavigationControl, _BaseControl);\n\n  var _super = _createSuper(NavigationControl);\n\n  function NavigationControl(props) {\n    var _this;\n\n    _classCallCheck(this, NavigationControl);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"_uiVersion\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_onZoomIn\", function () {\n      _this._updateViewport({\n        zoom: _this._context.viewport.zoom + 1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onZoomOut\", function () {\n      _this._updateViewport({\n        zoom: _this._context.viewport.zoom - 1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onResetNorth\", function () {\n      _this._updateViewport({\n        bearing: 0,\n        pitch: 0\n      });\n    });\n\n    deprecateWarn(props);\n    return _this;\n  }\n\n  _createClass(NavigationControl, [{\n    key: \"_updateViewport\",\n    value: function _updateViewport(opts) {\n      var viewport = this._context.viewport;\n      var mapState = new MapState(Object.assign({}, viewport, opts));\n      var viewState = Object.assign({}, mapState.getViewportProps(), LINEAR_TRANSITION_PROPS);\n      var onViewportChange = this.props.onViewportChange || this._context.onViewportChange || noop;\n      var onViewStateChange = this.props.onViewStateChange || this._context.onViewStateChange || noop;\n      onViewStateChange({\n        viewState: viewState\n      });\n      onViewportChange(viewState);\n    }\n  }, {\n    key: \"_renderCompass\",\n    value: function _renderCompass() {\n      var bearing = this._context.viewport.bearing;\n      var style = {\n        transform: \"rotate(\".concat(-bearing, \"deg)\")\n      };\n      return this._uiVersion === VERSION_1_6 ? React.createElement(\"span\", {\n        className: \"mapboxgl-ctrl-icon\",\n        \"aria-hidden\": \"true\",\n        style: style\n      }) : React.createElement(\"span\", {\n        className: \"mapboxgl-ctrl-compass-arrow\",\n        style: style\n      });\n    }\n  }, {\n    key: \"_renderButton\",\n    value: function _renderButton(type, label, callback, children) {\n      return React.createElement(\"button\", {\n        key: type,\n        className: \"mapboxgl-ctrl-icon mapboxgl-ctrl-\".concat(type),\n        type: \"button\",\n        title: label,\n        onClick: callback\n      }, children || React.createElement(\"span\", {\n        className: \"mapboxgl-ctrl-icon\",\n        \"aria-hidden\": \"true\"\n      }));\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      var _this$props = this.props,\n          className = _this$props.className,\n          showCompass = _this$props.showCompass,\n          showZoom = _this$props.showZoom,\n          zoomInLabel = _this$props.zoomInLabel,\n          zoomOutLabel = _this$props.zoomOutLabel,\n          compassLabel = _this$props.compassLabel;\n\n      if (!this._uiVersion) {\n        var map = this._context.map;\n        this._uiVersion = map ? getUIVersion(map.version) : VERSION_1_6;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"mapboxgl-ctrl mapboxgl-ctrl-group \".concat(className),\n        ref: this._containerRef\n      }, showZoom && this._renderButton('zoom-in', zoomInLabel, this._onZoomIn), showZoom && this._renderButton('zoom-out', zoomOutLabel, this._onZoomOut), showCompass && this._renderButton('compass', compassLabel, this._onResetNorth, this._renderCompass()));\n    }\n  }]);\n\n  return NavigationControl;\n}(BaseControl);\n\n_defineProperty(NavigationControl, \"propTypes\", propTypes);\n\n_defineProperty(NavigationControl, \"defaultProps\", defaultProps);\n\nexport { NavigationControl as default };","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.map\";\nexport function compareVersions(version1, version2) {\n  var v1 = (version1 || '').split('.').map(Number);\n  var v2 = (version2 || '').split('.').map(Number);\n\n  for (var i = 0; i < 3; i++) {\n    var part1 = v1[i] || 0;\n    var part2 = v2[i] || 0;\n\n    if (part1 < part2) {\n      return -1;\n    }\n\n    if (part1 > part2) {\n      return 1;\n    }\n  }\n\n  return 0;\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport BaseControl from './base-control';\nimport mapboxgl from '../utils/mapboxgl';\nvar propTypes = Object.assign({}, BaseControl.propTypes, {\n  maxWidth: PropTypes.number,\n  unit: PropTypes.oneOf(['imperial', 'metric', 'nautical'])\n});\nvar defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  maxWidth: 100,\n  unit: 'metric'\n});\n\nvar ScaleControl = function (_BaseControl) {\n  _inherits(ScaleControl, _BaseControl);\n\n  var _super = _createSuper(ScaleControl);\n\n  function ScaleControl() {\n    var _this;\n\n    _classCallCheck(this, ScaleControl);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"_control\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mapboxScaleControl\", null);\n\n    return _this;\n  }\n\n  _createClass(ScaleControl, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var mapboxScaleControl = new mapboxgl.ScaleControl();\n      mapboxScaleControl._map = this._context.map;\n      mapboxScaleControl._container = this._containerRef.current;\n      this._mapboxScaleControl = mapboxScaleControl;\n\n      this._update();\n    }\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      var mapboxScaleControl = this._mapboxScaleControl;\n\n      if (mapboxScaleControl) {\n        mapboxScaleControl.options = this.props;\n\n        mapboxScaleControl._onMove();\n      }\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      this._control = this._control || React.createElement(\"div\", {\n        ref: this._containerRef,\n        className: \"mapboxgl-ctrl mapboxgl-ctrl-scale\"\n      });\n\n      this._update();\n\n      return this._control;\n    }\n  }]);\n\n  return ScaleControl;\n}(BaseControl);\n\n_defineProperty(ScaleControl, \"propTypes\", propTypes);\n\n_defineProperty(ScaleControl, \"defaultProps\", defaultProps);\n\nexport { ScaleControl as default };","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport BaseControl from '../components/base-control';\nimport { window } from '../utils/globals';\nvar propTypes = Object.assign({}, BaseControl.propTypes, {\n  redraw: PropTypes.func.isRequired\n});\nvar defaultProps = {\n  captureScroll: false,\n  captureDrag: false,\n  captureClick: false,\n  captureDoubleClick: false\n};\n\nvar CanvasOverlay = function (_BaseControl) {\n  _inherits(CanvasOverlay, _BaseControl);\n\n  var _super = _createSuper(CanvasOverlay);\n\n  function CanvasOverlay() {\n    var _this;\n\n    _classCallCheck(this, CanvasOverlay);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"_canvas\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_ctx\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_redraw\", function () {\n      var ctx = _this._ctx;\n\n      if (!ctx) {\n        return;\n      }\n\n      var pixelRatio = window.devicePixelRatio || 1;\n      ctx.save();\n      ctx.scale(pixelRatio, pixelRatio);\n      var _this$_context = _this._context,\n          viewport = _this$_context.viewport,\n          isDragging = _this$_context.isDragging;\n\n      _this.props.redraw({\n        width: viewport.width,\n        height: viewport.height,\n        ctx: ctx,\n        isDragging: isDragging,\n        project: viewport.project.bind(viewport),\n        unproject: viewport.unproject.bind(viewport)\n      });\n\n      ctx.restore();\n    });\n\n    return _this;\n  }\n\n  _createClass(CanvasOverlay, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var canvas = this._containerRef.current;\n\n      if (canvas) {\n        this._canvas = canvas;\n        this._ctx = canvas.getContext('2d');\n      }\n\n      this._redraw();\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      var pixelRatio = window.devicePixelRatio || 1;\n      var _this$_context$viewpo = this._context.viewport,\n          width = _this$_context$viewpo.width,\n          height = _this$_context$viewpo.height;\n\n      this._redraw();\n\n      return React.createElement(\"canvas\", {\n        ref: this._containerRef,\n        width: width * pixelRatio,\n        height: height * pixelRatio,\n        style: {\n          width: \"\".concat(width, \"px\"),\n          height: \"\".concat(height, \"px\"),\n          position: 'absolute',\n          left: 0,\n          top: 0\n        }\n      });\n    }\n  }]);\n\n  return CanvasOverlay;\n}(BaseControl);\n\n_defineProperty(CanvasOverlay, \"propTypes\", propTypes);\n\n_defineProperty(CanvasOverlay, \"defaultProps\", defaultProps);\n\nexport { CanvasOverlay as default };","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport BaseControl from '../components/base-control';\nvar propTypes = Object.assign({}, BaseControl.propTypes, {\n  redraw: PropTypes.func.isRequired,\n  style: PropTypes.object\n});\nvar defaultProps = {\n  captureScroll: false,\n  captureDrag: false,\n  captureClick: false,\n  captureDoubleClick: false\n};\n\nvar HTMLOverlay = function (_BaseControl) {\n  _inherits(HTMLOverlay, _BaseControl);\n\n  var _super = _createSuper(HTMLOverlay);\n\n  function HTMLOverlay() {\n    _classCallCheck(this, HTMLOverlay);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(HTMLOverlay, [{\n    key: \"_render\",\n    value: function _render() {\n      var _this$_context = this._context,\n          viewport = _this$_context.viewport,\n          isDragging = _this$_context.isDragging;\n      var style = Object.assign({\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        width: viewport.width,\n        height: viewport.height\n      }, this.props.style);\n      return React.createElement(\"div\", {\n        ref: this._containerRef,\n        style: style\n      }, this.props.redraw({\n        width: viewport.width,\n        height: viewport.height,\n        isDragging: isDragging,\n        project: viewport.project.bind(viewport),\n        unproject: viewport.unproject.bind(viewport)\n      }));\n    }\n  }]);\n\n  return HTMLOverlay;\n}(BaseControl);\n\n_defineProperty(HTMLOverlay, \"propTypes\", propTypes);\n\n_defineProperty(HTMLOverlay, \"defaultProps\", defaultProps);\n\nexport { HTMLOverlay as default };","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport BaseControl from '../components/base-control';\nvar propTypes = Object.assign({}, BaseControl.propTypes, {\n  redraw: PropTypes.func.isRequired,\n  style: PropTypes.object\n});\nvar defaultProps = {\n  captureScroll: false,\n  captureDrag: false,\n  captureClick: false,\n  captureDoubleClick: false\n};\n\nvar SVGOverlay = function (_BaseControl) {\n  _inherits(SVGOverlay, _BaseControl);\n\n  var _super = _createSuper(SVGOverlay);\n\n  function SVGOverlay() {\n    _classCallCheck(this, SVGOverlay);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(SVGOverlay, [{\n    key: \"_render\",\n    value: function _render() {\n      var _this$_context = this._context,\n          viewport = _this$_context.viewport,\n          isDragging = _this$_context.isDragging;\n      var style = Object.assign({\n        position: 'absolute',\n        left: 0,\n        top: 0\n      }, this.props.style);\n      return React.createElement(\"svg\", {\n        width: viewport.width,\n        height: viewport.height,\n        ref: this._containerRef,\n        style: style\n      }, this.props.redraw({\n        width: viewport.width,\n        height: viewport.height,\n        isDragging: isDragging,\n        project: viewport.project.bind(viewport),\n        unproject: viewport.unproject.bind(viewport)\n      }));\n    }\n  }]);\n\n  return SVGOverlay;\n}(BaseControl);\n\n_defineProperty(SVGOverlay, \"propTypes\", propTypes);\n\n_defineProperty(SVGOverlay, \"defaultProps\", defaultProps);\n\nexport { SVGOverlay as default };","import mapboxgl from './mapboxgl';\nvar setRTLTextPlugin = mapboxgl ? mapboxgl.setRTLTextPlugin : function () {};\nexport default setRTLTextPlugin;","import React, {Component} from 'react';\r\nimport DeckGL, {ScatterplotLayer} from 'deck.gl';\r\nimport {Popup, StaticMap} from 'react-map-gl';\r\nimport {fetchData} from '../api';\r\nimport Select from 'react-select';\r\n\r\nclass Mapbox extends Component {\r\n    options = [\r\n        {value: 'confirmed', label: 'Confirmed'},\r\n        {value: 'deaths', label: 'Deaths'},\r\n        {value: 'recovered', label: 'Recovered'}\r\n    ];\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            hoveredFeature: null,\r\n            viewport: {\r\n                longitude: -98.5795,\r\n                latitude: 39.8283,\r\n                zoom: 4,\r\n                bear: 0,\r\n                pitch: 0,\r\n                maxZoom: 8\r\n            },\r\n            data: [],\r\n            selectedValue: 'confirmed'\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const data = await fetchData('confirmed');\r\n        this.setState({data});\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevState.selectedValue !== this.state.selectedValue) {\r\n            const data = await fetchData(this.state.selectedValue);\r\n            this.setState({data});\r\n        }\r\n    }\r\n\r\n    handleChange = e => {\r\n        this.setState({selectedValue: e.value});\r\n    };\r\n\r\n    render() {\r\n        const max = Math.sqrt(this.state.data.reduce((max, p) => p.cases > max ? p.cases : max, 1));\r\n\r\n        const layers = new ScatterplotLayer({\r\n            id: 'covid-cases',\r\n            data: this.state.data,\r\n            filled: true,\r\n            opacity: 0.5,\r\n            radiusMaxPixels: 100,\r\n            getPosition: d => d.coordinates,\r\n            getRadius: d => Math.sqrt(d.cases) * 500,\r\n            getFillColor: d => [255, 255 - Math.sqrt(d.cases) / max * 255, 0],\r\n            // Enable picking\r\n            pickable: true,\r\n            // Update app state\r\n            onHover: info => this.setState({\r\n                hoveredObject: info.object,\r\n                pointerX: info.x,\r\n                pointerY: info.y\r\n            })\r\n        });\r\n\r\n        return (\r\n            <DeckGL\r\n                initialViewState={this.state.viewport}\r\n                style={{position: 'relative', textAlign: 'center'}}\r\n                width={'100%'}\r\n                height={'100%'}\r\n                controller={true}\r\n                layers={layers}\r\n                getTooltip={info => info.object ? {\r\n                    html: `<p><b>${info.object.name}</b>\r\n                           <br>Confirmed: ${info.object.confirmed}\r\n                           <br>Deaths: ${info.object.deaths}<br></p>`\r\n                } : null}\r\n            >\r\n                <div className={'control-panel'}>\r\n                    <Select\r\n                        placeholder={\"Confirmed\"}\r\n                        value={this.options.find(obj => obj.value === this.selectedValue)}\r\n                        options={this.options}\r\n                        onChange={this.handleChange}\r\n                    />\r\n                </div>\r\n                <StaticMap\r\n                    mapStyle={'mapbox://styles/mapbox/dark-v10'}\r\n                    mapboxApiAccessToken={process.env.MAPBOX_ACCESS_TOKEN}/>\r\n            </DeckGL>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Mapbox;","import React from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport L from 'leaflet'\r\nimport axios from 'axios';\r\n\r\nimport Layout from 'components/Layout';\r\nimport Mapbox from '../components/Mapbox';\r\n\r\nconst LOCATION = {\r\n  lat: 0,\r\n  lng: 0,\r\n};\r\nconst CENTER = [LOCATION.lat, LOCATION.lng];\r\nconst DEFAULT_ZOOM = 2;\r\n\r\nconst IndexPage = () => {\r\n  /**\r\n   * mapEffect\r\n   * @description Fires a callback once the page renders\r\n   * @example Here this is and example of being used to zoom in and set a popup on load\r\n   */\r\n\r\n  async function mapEffect({ leafletElement: map } = {}) {\r\n    let response;\r\n\r\n    try {\r\n      response = await axios.get('https://corona.lmao.ninja/v2/countries');\r\n    } catch(e) {\r\n      console.log(`Failed to fetch countries: ${e.message}`, e);\r\n      return;\r\n    }\r\n\r\n    const { data = [] } = response;\r\n    const hasData = Array.isArray(data) && data.length > 0;\r\n\r\n    if ( !hasData ) return;\r\n\r\n    const geoJson = {\r\n      type: 'FeatureCollection',\r\n      features: data.map((country = {}) => {\r\n        const { countryInfo = {} } = country;\r\n        const { lat, long: lng } = countryInfo;\r\n        return {\r\n          type: 'Feature',\r\n          properties: {\r\n            ...country,\r\n          },\r\n          geometry: {\r\n            type: 'Point',\r\n            coordinates: [ lng, lat ]\r\n          }\r\n        }\r\n      })\r\n    };\r\n\r\n    const geoJsonLayers = new L.GeoJSON(geoJson, {\r\n      pointToLayer: (feature = {}, latlng) => {\r\n        const { properties = {} } = feature;\r\n        let updatedFormatted;\r\n        let casesString;\r\n\r\n        const {\r\n          country,\r\n          updated,\r\n          cases,\r\n          deaths,\r\n          recovered\r\n        } = properties\r\n\r\n        casesString = `${cases}`;\r\n\r\n        if ( cases > 1000 ) {\r\n          casesString = `${casesString.slice(0, -3)}k+`\r\n        }\r\n\r\n        if ( updated ) {\r\n          updatedFormatted = new Date(updated).toLocaleString();\r\n        }\r\n\r\n        const html = `\r\n      <span class=\"icon-marker\">\r\n        <span class=\"icon-marker-tooltip\">\r\n          <h2>${country}</h2>\r\n          <ul>\r\n            <li><strong>Confirmed:</strong> ${cases}</li>\r\n            <li><strong>Deaths:</strong> ${deaths}</li>\r\n            <li><strong>Recovered:</strong> ${recovered}</li>\r\n            <li><strong>Last Update:</strong> ${updatedFormatted}</li>\r\n          </ul>\r\n        </span>\r\n        ${ casesString }\r\n      </span>\r\n    `;\r\n\r\n        return L.marker( latlng, {\r\n          icon: L.divIcon({\r\n            className: 'icon',\r\n            html\r\n          }),\r\n          riseOnHover: true\r\n        });\r\n      }\r\n    });\r\n\r\n    geoJsonLayers.addTo(map)\r\n  }\r\n\r\n\r\n\r\n  const mapSettings = {\r\n    center: CENTER,\r\n    defaultBaseMap: 'OpenStreetMap',\r\n    zoom: DEFAULT_ZOOM,\r\n    mapEffect,\r\n  };\r\n\r\n  return (\r\n    <Layout pageName=\"home\">\r\n      <Helmet>\r\n        <title>Home Page</title>\r\n      </Helmet>\r\n      <Mapbox/>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default IndexPage;\r\n","'use strict';\nvar $export = require('./_export');\nvar $reduce = require('./_array-reduce');\n\n$export($export.P + $export.F * !require('./_strict-method')([].reduceRight, true), 'Array', {\n  // 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])\n  reduceRight: function reduceRight(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments[1], true);\n  }\n});\n","require('./_typed-array')('Float64', 8, function (init) {\n  return function Float64Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","// 19.1.2.13 Object.isSealed(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isSealed', function ($isSealed) {\n  return function isSealed(it) {\n    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;\n  };\n});\n","export var userAgent = typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\nvar window_ = typeof window !== 'undefined' ? window : global;\nvar global_ = typeof global !== 'undefined' ? global : window;\nvar document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };\nvar passiveSupported = false;\n\ntry {\n  var options = {\n    get passive() {\n      passiveSupported = true;\n      return true;\n    }\n\n  };\n  window_.addEventListener('test', options, options);\n  window_.removeEventListener('test', options, options);\n} catch (err) {}\n\nexport { passiveSupported };","import { config } from './lib/common';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\nexport { default as assert } from './lib/assert';\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config: config\n};","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","require('./_typed-array')('Float32', 4, function (init) {\n  return function Float32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","import \"core-js/modules/es6.math.hypot\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.math.hypot\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","'use strict';\n// B.2.3.13 String.prototype.sub()\nrequire('./_string-html')('sub', function (createHTML) {\n  return function sub() {\n    return createHTML(this, 'sub', '', '');\n  };\n});\n","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport assert from './assert';\nvar RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nvar DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nvar config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  for (var key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : _construct(Array, _toConsumableArray(array));\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (var i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, function (degrees) {\n    return degrees * DEGREES_TO_RADIANS;\n  }, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, function (radians) {\n    return radians * RADIANS_TO_DEGREES;\n  }, result);\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  var oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (var i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && _typeof(a) === 'object' && b && _typeof(b) === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  var oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  var value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8ClampedArray(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n}, true);\n","// 20.2.2.30 Math.sinh(x)\nvar $export = require('./_export');\nvar expm1 = require('./_math-expm1');\nvar exp = Math.exp;\n\n// V8 near Chromium 38 has a problem with very small numbers\n$export($export.S + $export.F * require('./_fails')(function () {\n  return !Math.sinh(-2e-17) != -2e-17;\n}), 'Math', {\n  sinh: function sinh(x) {\n    return Math.abs(x = +x) < 1\n      ? (expm1(x) - expm1(-x)) / 2\n      : (exp(x - 1) - exp(-x - 1)) * (Math.E / 2);\n  }\n});\n","import \"core-js/modules/es6.math.hypot\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","import checkIfBrowser from '../env/is-browser';\nexport { self, window, global, document, process, console } from '../env/globals';\nexport var VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport var isBrowser = checkIfBrowser();","import \"core-js/modules/es6.object.assign\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction getStorage(type) {\n  try {\n    var storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nvar LocalStorage = function () {\n  function LocalStorage(id, defaultSettings) {\n    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'sessionStorage';\n\n    _classCallCheck(this, LocalStorage);\n\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  _createClass(LocalStorage, [{\n    key: \"getConfiguration\",\n    value: function getConfiguration() {\n      return this.config;\n    }\n  }, {\n    key: \"setConfiguration\",\n    value: function setConfiguration(configuration) {\n      this.config = {};\n      return this.updateConfiguration(configuration);\n    }\n  }, {\n    key: \"updateConfiguration\",\n    value: function updateConfiguration(configuration) {\n      Object.assign(this.config, configuration);\n\n      if (this.storage) {\n        var serialized = JSON.stringify(this.config);\n        this.storage.setItem(this.id, serialized);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_loadConfiguration\",\n    value: function _loadConfiguration() {\n      var configuration = {};\n\n      if (this.storage) {\n        var serializedConfiguration = this.storage.getItem(this.id);\n        configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n      }\n\n      Object.assign(this.config, configuration);\n      return this;\n    }\n  }]);\n\n  return LocalStorage;\n}();\n\nexport { LocalStorage as default };","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.string.repeat\";\nexport function formatTime(ms) {\n  var formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  var padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  var padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EPSILON = 1e-16;\n  var _opts$isInteger = opts.isInteger,\n      isInteger = _opts$isInteger === void 0 ? false : _opts$isInteger;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  var string = v.toPrecision(2);\n  var decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  var _opts$maxElts = opts.maxElts,\n      maxElts = _opts$maxElts === void 0 ? 16 : _opts$maxElts,\n      _opts$size = opts.size,\n      size = _opts$size === void 0 ? 1 : _opts$size;\n  var string = '[';\n\n  for (var i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  var terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale) {\n  var maxWidth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 600;\n  var imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  var width = image.width * scale;\n  var height = image.height * scale;\n  var style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}","import { isBrowser } from './globals';\nexport var COLOR = {\n  BLACK: 30,\n  RED: 31,\n  GREEN: 32,\n  YELLOW: 33,\n  BLUE: 34,\n  MAGENTA: 35,\n  CYAN: 36,\n  WHITE: 37,\n  BRIGHT_BLACK: 90,\n  BRIGHT_RED: 91,\n  BRIGHT_GREEN: 92,\n  BRIGHT_YELLOW: 93,\n  BRIGHT_BLUE: 94,\n  BRIGHT_MAGENTA: 95,\n  BRIGHT_CYAN: 96,\n  BRIGHT_WHITE: 97\n};\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}","import \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nexport function autobind(obj) {\n  var predefined = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['constructor'];\n  var proto = Object.getPrototypeOf(obj);\n  var propNames = Object.getOwnPropertyNames(proto);\n\n  var _iterator = _createForOfIteratorHelper(propNames),\n      _step;\n\n  try {\n    var _loop = function _loop() {\n      var key = _step.value;\n\n      if (typeof obj[key] === 'function') {\n        if (!predefined.find(function (name) {\n          return key === name;\n        })) {\n          obj[key] = obj[key].bind(obj);\n        }\n      }\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}","import \"core-js/modules/es6.date.now\";\nimport { window, process, isBrowser } from './globals';\nexport default function getHiResTimestamp() {\n  var timestamp;\n\n  if (isBrowser && window.performance) {\n    timestamp = window.performance.now();\n  } else if (process.hrtime) {\n    var timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}","import \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.object.seal\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { VERSION, isBrowser } from '../utils/globals';\nimport LocalStorage from '../utils/local-storage';\nimport { formatImage, formatTime, leftPad } from '../utils/formatters';\nimport { addColor } from '../utils/color';\nimport { autobind } from '../utils/autobind';\nimport _assert from '../utils/assert';\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nvar originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nvar DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nvar cache = {};\nvar ONCE = {\n  once: true\n};\n\nfunction getTableHeader(table) {\n  for (var key in table) {\n    for (var title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n\nvar Log = function () {\n  function Log() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        id = _ref.id;\n\n    _classCallCheck(this, Log);\n\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getHiResTimestamp();\n    this._deltaTs = getHiResTimestamp();\n    this.LOG_THROTTLE_TIMEOUT = 0;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  _createClass(Log, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this._storage.config.enabled;\n    }\n  }, {\n    key: \"getLevel\",\n    value: function getLevel() {\n      return this._storage.config.level;\n    }\n  }, {\n    key: \"getTotal\",\n    value: function getTotal() {\n      return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n    }\n  }, {\n    key: \"getDelta\",\n    value: function getDelta() {\n      return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n    }\n  }, {\n    key: \"getPriority\",\n    value: function getPriority() {\n      return this.level;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this._storage.updateConfiguration({\n        enabled: enabled\n      });\n\n      return this;\n    }\n  }, {\n    key: \"setLevel\",\n    value: function setLevel(level) {\n      this._storage.updateConfiguration({\n        level: level\n      });\n\n      return this;\n    }\n  }, {\n    key: \"assert\",\n    value: function assert(condition, message) {\n      _assert(condition, message);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(message) {\n      return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n    }\n  }, {\n    key: \"error\",\n    value: function error(message) {\n      return this._getLogFunction(0, message, originalConsole.error, arguments);\n    }\n  }, {\n    key: \"deprecated\",\n    value: function deprecated(oldUsage, newUsage) {\n      return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n    }\n  }, {\n    key: \"removed\",\n    value: function removed(oldUsage, newUsage) {\n      return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n    }\n  }, {\n    key: \"probe\",\n    value: function probe(logLevel, message) {\n      return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n        time: true,\n        once: true\n      });\n    }\n  }, {\n    key: \"log\",\n    value: function log(logLevel, message) {\n      return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n    }\n  }, {\n    key: \"info\",\n    value: function info(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.info, arguments);\n    }\n  }, {\n    key: \"once\",\n    value: function once(logLevel, message) {\n      return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n    }\n  }, {\n    key: \"table\",\n    value: function table(logLevel, _table, columns) {\n      if (_table) {\n        return this._getLogFunction(logLevel, _table, console.table || noop, columns && [columns], {\n          tag: getTableHeader(_table)\n        });\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"image\",\n    value: function image(_ref2) {\n      var logLevel = _ref2.logLevel,\n          priority = _ref2.priority,\n          _image = _ref2.image,\n          _ref2$message = _ref2.message,\n          message = _ref2$message === void 0 ? '' : _ref2$message,\n          _ref2$scale = _ref2.scale,\n          scale = _ref2$scale === void 0 ? 1 : _ref2$scale;\n\n      if (!this._shouldLog(logLevel || priority)) {\n        return noop;\n      }\n\n      return isBrowser ? logImageInBrowser({\n        image: _image,\n        message: message,\n        scale: scale\n      }) : logImageInNode({\n        image: _image,\n        message: message,\n        scale: scale\n      });\n    }\n  }, {\n    key: \"settings\",\n    value: function settings() {\n      if (console.table) {\n        console.table(this._storage.config);\n      } else {\n        console.log(this._storage.config);\n      }\n    }\n  }, {\n    key: \"get\",\n    value: function get(setting) {\n      return this._storage.config[setting];\n    }\n  }, {\n    key: \"set\",\n    value: function set(setting, value) {\n      this._storage.updateConfiguration(_defineProperty({}, setting, value));\n    }\n  }, {\n    key: \"time\",\n    value: function time(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n    }\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n    }\n  }, {\n    key: \"timeStamp\",\n    value: function timeStamp(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n    }\n  }, {\n    key: \"group\",\n    value: function group(logLevel, message) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        collapsed: false\n      };\n      opts = normalizeArguments({\n        logLevel: logLevel,\n        message: message,\n        opts: opts\n      });\n      var _opts = opts,\n          collapsed = _opts.collapsed;\n      opts.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n      return this._getLogFunction(opts);\n    }\n  }, {\n    key: \"groupCollapsed\",\n    value: function groupCollapsed(logLevel, message) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.group(logLevel, message, Object.assign({}, opts, {\n        collapsed: true\n      }));\n    }\n  }, {\n    key: \"groupEnd\",\n    value: function groupEnd(logLevel) {\n      return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n    }\n  }, {\n    key: \"withGroup\",\n    value: function withGroup(logLevel, message, func) {\n      this.group(logLevel, message)();\n\n      try {\n        func();\n      } finally {\n        this.groupEnd(logLevel)();\n      }\n    }\n  }, {\n    key: \"trace\",\n    value: function trace() {\n      if (console.trace) {\n        console.trace();\n      }\n    }\n  }, {\n    key: \"_shouldLog\",\n    value: function _shouldLog(logLevel) {\n      return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n    }\n  }, {\n    key: \"_getLogFunction\",\n    value: function _getLogFunction(logLevel, message, method) {\n      var args = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n      var opts = arguments.length > 4 ? arguments[4] : undefined;\n\n      if (this._shouldLog(logLevel)) {\n        var _method;\n\n        opts = normalizeArguments({\n          logLevel: logLevel,\n          message: message,\n          args: args,\n          opts: opts\n        });\n        method = method || opts.method;\n\n        _assert(method);\n\n        opts.total = this.getTotal();\n        opts.delta = this.getDelta();\n        this._deltaTs = getHiResTimestamp();\n        var tag = opts.tag || opts.message;\n\n        if (opts.once) {\n          if (!cache[tag]) {\n            cache[tag] = getHiResTimestamp();\n          } else {\n            return noop;\n          }\n        }\n\n        message = decorateMessage(this.id, opts.message, opts);\n        return (_method = method).bind.apply(_method, [console, message].concat(_toConsumableArray(opts.args)));\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"level\",\n    set: function set(newLevel) {\n      this.setLevel(newLevel);\n    },\n    get: function get() {\n      return this.getLevel();\n    }\n  }, {\n    key: \"priority\",\n    set: function set(newPriority) {\n      this.level = newPriority;\n    },\n    get: function get() {\n      return this.level;\n    }\n  }]);\n\n  return Log;\n}();\n\nexport { Log as default };\nLog.VERSION = VERSION;\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  var resolvedLevel;\n\n  switch (_typeof(logLevel)) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  _assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  var logLevel = opts.logLevel,\n      message = opts.message;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  var args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  opts.args = args;\n\n  switch (_typeof(logLevel)) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  var messageType = _typeof(opts.message);\n\n  _assert(messageType === 'string' || messageType === 'object');\n\n  return Object.assign(opts, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    var time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode(_ref3) {\n  var image = _ref3.image,\n      _ref3$message = _ref3.message,\n      message = _ref3$message === void 0 ? '' : _ref3$message,\n      _ref3$scale = _ref3.scale,\n      scale = _ref3$scale === void 0 ? 1 : _ref3$scale;\n  var asciify = null;\n\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {}\n\n  if (asciify) {\n    return function () {\n      return asciify(image, {\n        fit: 'box',\n        width: \"\".concat(Math.round(80 * scale), \"%\")\n      }).then(function (data) {\n        return console.log(data);\n      });\n    };\n  }\n\n  return noop;\n}\n\nfunction logImageInBrowser(_ref4) {\n  var image = _ref4.image,\n      _ref4$message = _ref4.message,\n      message = _ref4$message === void 0 ? '' : _ref4$message,\n      _ref4$scale = _ref4.scale,\n      scale = _ref4$scale === void 0 ? 1 : _ref4$scale;\n\n  if (typeof image === 'string') {\n    var img = new Image();\n\n    img.onload = function () {\n      var _console;\n\n      var args = formatImage(img, message, scale);\n\n      (_console = console).log.apply(_console, _toConsumableArray(args));\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  var element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    var _console2;\n\n    (_console2 = console).log.apply(_console2, _toConsumableArray(formatImage(image, message, scale)));\n\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    var _img = new Image();\n\n    _img.onload = function () {\n      var _console3;\n\n      return (_console3 = console).log.apply(_console3, _toConsumableArray(formatImage(_img, message, scale)));\n    };\n\n    _img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { copyWithin: require('./_array-copy-within') });\n\nrequire('./_add-to-unscopables')('copyWithin');\n","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import \"core-js/modules/es6.array.is-array\";\nexport function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\nexport function isObjectEmpty(object) {\n  for (var key in object) {\n    return false;\n  }\n\n  return true;\n}\nexport function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  var isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  var isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (var i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nexport function cssToDeviceRatio(gl) {\n  if (gl.canvas && gl.luma) {\n    var clientWidth = gl.luma.canvasSizeInfo.clientWidth;\n    return clientWidth ? gl.drawingBufferWidth / clientWidth : 1;\n  }\n\n  return 1;\n}\nexport function cssToDevicePixels(gl, cssPixel) {\n  var yInvert = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var ratio = cssToDeviceRatio(gl);\n  var width = gl.drawingBufferWidth;\n  var height = gl.drawingBufferHeight;\n  return scalePixels(cssPixel, ratio, width, height, yInvert);\n}\nexport function getDevicePixelRatio(useDevicePixels) {\n  var windowRatio = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n\n  if (Number.isFinite(useDevicePixels)) {\n    return useDevicePixels <= 0 ? 1 : useDevicePixels;\n  }\n\n  return useDevicePixels ? windowRatio : 1;\n}\n\nfunction scalePixels(pixel, ratio, width, height, yInvert) {\n  var x = scaleX(pixel[0], ratio, width);\n  var y = scaleY(pixel[1], ratio, height, yInvert);\n  var t = scaleX(pixel[0] + 1, ratio, width);\n  var xHigh = t === width - 1 ? t : t - 1;\n  t = scaleY(pixel[1] + 1, ratio, height, yInvert);\n  var yHigh;\n\n  if (yInvert) {\n    t = t === 0 ? t : t + 1;\n    yHigh = y;\n    y = t;\n  } else {\n    yHigh = t === height - 1 ? t : t - 1;\n  }\n\n  return {\n    x: x,\n    y: y,\n    width: Math.max(xHigh - x + 1, 1),\n    height: Math.max(yHigh - y + 1, 1)\n  };\n}\n\nfunction scaleX(x, ratio, width) {\n  var r = Math.min(Math.round(x * ratio), width - 1);\n  return r;\n}\n\nfunction scaleY(y, ratio, height, yInvert) {\n  return yInvert ? Math.max(0, height - 1 - Math.round(y * ratio)) : Math.min(Math.round(y * ratio), height - 1);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport { assert } from './utils';\nexport var ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport var ERR_WEBGL = ERR_CONTEXT;\nexport var ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(gl) {\n  return Boolean(gl && Number.isFinite(gl._version));\n}\nexport function isWebGL2(gl) {\n  return Boolean(gl && gl._version === 2);\n}\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n}","import { Log } from 'probe.gl';\nexport { assert, deepArrayEqual, isObjectEmpty } from './utils';\nexport { cssToDevicePixels, cssToDeviceRatio, getDevicePixelRatio } from './device-pixels';\nexport { isWebGL, isWebGL2 } from './webgl-checks';\nexport var log = new Log({\n  id: 'luma.gl'\n});","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { GL_PARAMETER_DEFAULTS, GL_PARAMETER_SETTERS, GL_COMPOSITE_PARAMETER_SETTERS, GL_PARAMETER_GETTERS } from './webgl-parameter-tables';\nimport { pushContextState, popContextState } from './track-context-state';\nimport { isObjectEmpty, isWebGL, assert } from '../utils';\nexport function setParameters(gl, values) {\n  assert(isWebGL(gl), 'setParameters requires a WebGL context');\n\n  if (isObjectEmpty(values)) {\n    return;\n  }\n\n  var compositeSetters = {};\n\n  for (var key in values) {\n    var glConstant = Number(key);\n    var setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        setter(gl, values[key], glConstant);\n      }\n    }\n  }\n\n  var cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    for (var _key in compositeSetters) {\n      var compositeSetter = GL_COMPOSITE_PARAMETER_SETTERS[_key];\n      compositeSetter(gl, values, cache);\n    }\n  }\n}\nexport function getParameters(gl, parameters) {\n  parameters = parameters || GL_PARAMETER_DEFAULTS;\n\n  if (typeof parameters === 'number') {\n    var key = parameters;\n    var getter = GL_PARAMETER_GETTERS[key];\n    return getter ? getter(gl, key) : gl.getParameter(key);\n  }\n\n  var parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  var state = {};\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = parameterKeys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _key2 = _step.value;\n      var _getter = GL_PARAMETER_GETTERS[_key2];\n      state[_key2] = _getter ? _getter(gl, Number(_key2)) : gl.getParameter(Number(_key2));\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return state;\n}\nexport function resetParameters(gl) {\n  setParameters(gl, GL_PARAMETER_DEFAULTS);\n}\nexport function withParameters(gl, parameters, func) {\n  if (isObjectEmpty(parameters)) {\n    return func(gl);\n  }\n\n  var _parameters$nocatch = parameters.nocatch,\n      nocatch = _parameters$nocatch === void 0 ? true : _parameters$nocatch;\n  pushContextState(gl);\n  setParameters(gl, parameters);\n  var value;\n\n  if (nocatch) {\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}","'use strict';\n// B.2.3.2 String.prototype.anchor(name)\nrequire('./_string-html')('anchor', function (createHTML) {\n  return function anchor(name) {\n    return createHTML(this, 'a', 'name', name);\n  };\n});\n","// 20.2.2.34 Math.trunc(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  trunc: function trunc(it) {\n    return (it > 0 ? Math.floor : Math.ceil)(it);\n  }\n});\n","\"use strict\";\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.console = exports.process = exports.document = exports.global = exports.window = exports.self = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2[\"default\"])(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nexports.self = self_;\nvar window_ = globals.window || globals.self || globals.global;\nexports.window = window_;\nvar global_ = globals.global || globals.self || globals.window;\nexports.global = global_;\nvar document_ = globals.document || {};\nexports.document = document_;\nvar process_ = globals.process || {};\nexports.process = process_;\nvar console_ = console;\nexports.console = console_;","import \"core-js/modules/es6.object.set-prototype-of\";\nimport \"core-js/modules/es6.object.create\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.index-of\";\nimport { createElement, PureComponent } from 'react';\n/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1) Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2) Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n **/\n\nfunction createDetectElementResize(nonce) {\n  // Check `document` and `window` in case of server-side rendering\n  var _window;\n\n  if (typeof window !== 'undefined') {\n    _window = window;\n  } else if (typeof self !== 'undefined') {\n    _window = self;\n  } else {\n    _window = global;\n  }\n\n  var attachEvent = typeof document !== 'undefined' && document.attachEvent;\n\n  if (!attachEvent) {\n    var requestFrame = function () {\n      var raf = _window.requestAnimationFrame || _window.mozRequestAnimationFrame || _window.webkitRequestAnimationFrame || function (fn) {\n        return _window.setTimeout(fn, 20);\n      };\n\n      return function (fn) {\n        return raf(fn);\n      };\n    }();\n\n    var cancelFrame = function () {\n      var cancel = _window.cancelAnimationFrame || _window.mozCancelAnimationFrame || _window.webkitCancelAnimationFrame || _window.clearTimeout;\n      return function (id) {\n        return cancel(id);\n      };\n    }();\n\n    var resetTriggers = function resetTriggers(element) {\n      var triggers = element.__resizeTriggers__,\n          expand = triggers.firstElementChild,\n          contract = triggers.lastElementChild,\n          expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + 'px';\n      expandChild.style.height = expand.offsetHeight + 1 + 'px';\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n\n    var checkTriggers = function checkTriggers(element) {\n      return element.offsetWidth != element.__resizeLast__.width || element.offsetHeight != element.__resizeLast__.height;\n    };\n\n    var scrollListener = function scrollListener(e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (e.target.className.indexOf('contract-trigger') < 0 && e.target.className.indexOf('expand-trigger') < 0) {\n        return;\n      }\n\n      var element = this;\n      resetTriggers(this);\n\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n\n      this.__resizeRAF__ = requestFrame(function () {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n\n          element.__resizeListeners__.forEach(function (fn) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n    /* Detect CSS Animations support to detect element display/re-attach */\n\n\n    var animation = false,\n        keyframeprefix = '',\n        animationstartevent = 'animationstart',\n        domPrefixes = 'Webkit Moz O ms'.split(' '),\n        startEvents = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(' '),\n        pfx = '';\n    {\n      var elm = document.createElement('fakeelement');\n\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n\n      if (animation === false) {\n        for (var i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = '-' + pfx.toLowerCase() + '-';\n            animationstartevent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n    var animationName = 'resizeanim';\n    var animationKeyframes = '@' + keyframeprefix + 'keyframes ' + animationName + ' { from { opacity: 0; } to { opacity: 0; } } ';\n    var animationStyle = keyframeprefix + 'animation: 1ms ' + animationName + '; ';\n  }\n\n  var createStyles = function createStyles(doc) {\n    if (!doc.getElementById('detectElementResize')) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      var css = (animationKeyframes ? animationKeyframes : '') + '.resize-triggers { ' + (animationStyle ? animationStyle : '') + 'visibility: hidden; opacity: 0; } ' + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n          head = doc.head || doc.getElementsByTagName('head')[0],\n          style = doc.createElement('style');\n      style.id = 'detectElementResize';\n      style.type = 'text/css';\n\n      if (nonce != null) {\n        style.setAttribute('nonce', nonce);\n      }\n\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(doc.createTextNode(css));\n      }\n\n      head.appendChild(style);\n    }\n  };\n\n  var addResizeListener = function addResizeListener(element, fn) {\n    if (attachEvent) {\n      element.attachEvent('onresize', fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        var doc = element.ownerDocument;\n\n        var elementStyle = _window.getComputedStyle(element);\n\n        if (elementStyle && elementStyle.position == 'static') {\n          element.style.position = 'relative';\n        }\n\n        createStyles(doc);\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = doc.createElement('div')).className = 'resize-triggers';\n        element.__resizeTriggers__.innerHTML = '<div class=\"expand-trigger\"><div></div></div>' + '<div class=\"contract-trigger\"></div>';\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener('scroll', scrollListener, true);\n        /* Listen for a css animation to detect element display/re-attach */\n\n        if (animationstartevent) {\n          element.__resizeTriggers__.__animationListener__ = function animationListener(e) {\n            if (e.animationName == animationName) {\n              resetTriggers(element);\n            }\n          };\n\n          element.__resizeTriggers__.addEventListener(animationstartevent, element.__resizeTriggers__.__animationListener__);\n        }\n      }\n\n      element.__resizeListeners__.push(fn);\n    }\n  };\n\n  var removeResizeListener = function removeResizeListener(element, fn) {\n    if (attachEvent) {\n      element.detachEvent('onresize', fn);\n    } else {\n      element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener('scroll', scrollListener, true);\n\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(animationstartevent, element.__resizeTriggers__.__animationListener__);\n\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n\n        try {\n          element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n        } catch (e) {// Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n\n  return {\n    addResizeListener: addResizeListener,\n    removeResizeListener: removeResizeListener\n  };\n}\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar AutoSizer = function (_React$PureComponent) {\n  inherits(AutoSizer, _React$PureComponent);\n\n  function AutoSizer() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, AutoSizer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = AutoSizer.__proto__ || Object.getPrototypeOf(AutoSizer)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      height: _this.props.defaultHeight || 0,\n      width: _this.props.defaultWidth || 0\n    }, _this._onResize = function () {\n      var _this$props = _this.props,\n          disableHeight = _this$props.disableHeight,\n          disableWidth = _this$props.disableWidth,\n          onResize = _this$props.onResize;\n\n      if (_this._parentNode) {\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        // See issue #150 for more context.\n        var _height = _this._parentNode.offsetHeight || 0;\n\n        var _width = _this._parentNode.offsetWidth || 0;\n\n        var _style = window.getComputedStyle(_this._parentNode) || {};\n\n        var paddingLeft = parseInt(_style.paddingLeft, 10) || 0;\n        var paddingRight = parseInt(_style.paddingRight, 10) || 0;\n        var paddingTop = parseInt(_style.paddingTop, 10) || 0;\n        var paddingBottom = parseInt(_style.paddingBottom, 10) || 0;\n        var newHeight = _height - paddingTop - paddingBottom;\n        var newWidth = _width - paddingLeft - paddingRight;\n\n        if (!disableHeight && _this.state.height !== newHeight || !disableWidth && _this.state.width !== newWidth) {\n          _this.setState({\n            height: _height - paddingTop - paddingBottom,\n            width: _width - paddingLeft - paddingRight\n          });\n\n          onResize({\n            height: _height,\n            width: _width\n          });\n        }\n      }\n    }, _this._setRef = function (autoSizer) {\n      _this._autoSizer = autoSizer;\n    }, _temp), possibleConstructorReturn(_this, _ret);\n  }\n\n  createClass(AutoSizer, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var nonce = this.props.nonce;\n\n      if (this._autoSizer && this._autoSizer.parentNode && this._autoSizer.parentNode.ownerDocument && this._autoSizer.parentNode.ownerDocument.defaultView && this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement) {\n        // Delay access of parentNode until mount.\n        // This handles edge-cases where the component has already been unmounted before its ref has been set,\n        // As well as libraries like react-lite which have a slightly different lifecycle.\n        this._parentNode = this._autoSizer.parentNode; // Defer requiring resize handler in order to support server-side rendering.\n        // See issue #41\n\n        this._detectElementResize = createDetectElementResize(nonce);\n\n        this._detectElementResize.addResizeListener(this._parentNode, this._onResize);\n\n        this._onResize();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this._detectElementResize && this._parentNode) {\n        this._detectElementResize.removeResizeListener(this._parentNode, this._onResize);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          children = _props.children,\n          className = _props.className,\n          disableHeight = _props.disableHeight,\n          disableWidth = _props.disableWidth,\n          style = _props.style;\n      var _state = this.state,\n          height = _state.height,\n          width = _state.width; // Outer div should not force width/height since that may prevent containers from shrinking.\n      // Inner component should overflow and use calculated width/height.\n      // See issue #68 for more information.\n\n      var outerStyle = {\n        overflow: 'visible'\n      };\n      var childParams = {}; // Avoid rendering children before the initial measurements have been collected.\n      // At best this would just be wasting cycles.\n\n      var bailoutOnChildren = false;\n\n      if (!disableHeight) {\n        if (height === 0) {\n          bailoutOnChildren = true;\n        }\n\n        outerStyle.height = 0;\n        childParams.height = height;\n      }\n\n      if (!disableWidth) {\n        if (width === 0) {\n          bailoutOnChildren = true;\n        }\n\n        outerStyle.width = 0;\n        childParams.width = width;\n      }\n\n      return createElement('div', {\n        className: className,\n        ref: this._setRef,\n        style: _extends({}, outerStyle, style)\n      }, !bailoutOnChildren && children(childParams));\n    }\n  }]);\n  return AutoSizer;\n}(PureComponent);\n\nAutoSizer.defaultProps = {\n  onResize: function onResize() {},\n  disableHeight: false,\n  disableWidth: false,\n  style: {}\n};\nexport default AutoSizer;","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n","// 20.2.2.16 Math.fround(x)\nvar sign = require('./_math-sign');\nvar pow = Math.pow;\nvar EPSILON = pow(2, -52);\nvar EPSILON32 = pow(2, -23);\nvar MAX32 = pow(2, 127) * (2 - EPSILON32);\nvar MIN32 = pow(2, -126);\n\nvar roundTiesToEven = function (n) {\n  return n + 1 / EPSILON - 1 / EPSILON;\n};\n\nmodule.exports = Math.fround || function fround(x) {\n  var $abs = Math.abs(x);\n  var $sign = sign(x);\n  var a, result;\n  if ($abs < MIN32) return $sign * roundTiesToEven($abs / MIN32 / EPSILON32) * MIN32 * EPSILON32;\n  a = (1 + EPSILON32 / EPSILON) * $abs;\n  result = a - (a - $abs);\n  // eslint-disable-next-line no-self-compare\n  if (result > MAX32 || result != result) return $sign * Infinity;\n  return $sign * result;\n};\n","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n","'use strict';\nvar $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar $native = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])\n  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n    // convert -0 to +0\n    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;\n    var O = toIObject(this);\n    var length = toLength(O.length);\n    var index = length - 1;\n    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));\n    if (index < 0) index = length + index;\n    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;\n    return -1;\n  }\n});\n","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","// 19.1.2.15 Object.preventExtensions(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('preventExtensions', function ($preventExtensions) {\n  return function preventExtensions(it) {\n    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;\n  };\n});\n","import \"core-js/modules/es6.math.hypot\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","require('./_typed-array')('Uint32', 4, function (init) {\n  return function Uint32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n","require('./_typed-array')('Uint16', 2, function (init) {\n  return function Uint16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _GL_PARAMETER_DEFAULT, _GL_PARAMETER_SETTERS, _GL_PARAMETER_GETTERS;\n\nimport { isWebGL2 } from '../utils';\nexport var GL_PARAMETER_DEFAULTS = (_GL_PARAMETER_DEFAULT = {}, _defineProperty(_GL_PARAMETER_DEFAULT, 3042, false), _defineProperty(_GL_PARAMETER_DEFAULT, 32773, new Float32Array([0, 0, 0, 0])), _defineProperty(_GL_PARAMETER_DEFAULT, 32777, 32774), _defineProperty(_GL_PARAMETER_DEFAULT, 34877, 32774), _defineProperty(_GL_PARAMETER_DEFAULT, 32969, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32968, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32971, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32970, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3106, new Float32Array([0, 0, 0, 0])), _defineProperty(_GL_PARAMETER_DEFAULT, 3107, [true, true, true, true]), _defineProperty(_GL_PARAMETER_DEFAULT, 2884, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2885, 1029), _defineProperty(_GL_PARAMETER_DEFAULT, 2929, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2931, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 2932, 513), _defineProperty(_GL_PARAMETER_DEFAULT, 2928, new Float32Array([0, 1])), _defineProperty(_GL_PARAMETER_DEFAULT, 2930, true), _defineProperty(_GL_PARAMETER_DEFAULT, 3024, true), _defineProperty(_GL_PARAMETER_DEFAULT, 36006, null), _defineProperty(_GL_PARAMETER_DEFAULT, 2886, 2305), _defineProperty(_GL_PARAMETER_DEFAULT, 33170, 4352), _defineProperty(_GL_PARAMETER_DEFAULT, 2849, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32823, false), _defineProperty(_GL_PARAMETER_DEFAULT, 32824, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 10752, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32938, 1.0), _defineProperty(_GL_PARAMETER_DEFAULT, 32939, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3089, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3088, new Int32Array([0, 0, 1024, 1024])), _defineProperty(_GL_PARAMETER_DEFAULT, 2960, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2961, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 2968, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 36005, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 2962, 519), _defineProperty(_GL_PARAMETER_DEFAULT, 2967, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 2963, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 34816, 519), _defineProperty(_GL_PARAMETER_DEFAULT, 36003, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 36004, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 2964, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2965, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2966, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34817, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34818, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34819, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2978, [0, 0, 1024, 1024]), _defineProperty(_GL_PARAMETER_DEFAULT, 3333, 4), _defineProperty(_GL_PARAMETER_DEFAULT, 3317, 4), _defineProperty(_GL_PARAMETER_DEFAULT, 37440, false), _defineProperty(_GL_PARAMETER_DEFAULT, 37441, false), _defineProperty(_GL_PARAMETER_DEFAULT, 37443, 37444), _defineProperty(_GL_PARAMETER_DEFAULT, 35723, 4352), _defineProperty(_GL_PARAMETER_DEFAULT, 36010, null), _defineProperty(_GL_PARAMETER_DEFAULT, 35977, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3330, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3332, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3331, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3314, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32878, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3316, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3315, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32877, 0), _GL_PARAMETER_DEFAULT);\n\nvar enable = function enable(gl, value, key) {\n  return value ? gl.enable(key) : gl.disable(key);\n};\n\nvar hint = function hint(gl, value, key) {\n  return gl.hint(key, value);\n};\n\nvar pixelStorei = function pixelStorei(gl, value, key) {\n  return gl.pixelStorei(key, value);\n};\n\nvar drawFramebuffer = function drawFramebuffer(gl, value) {\n  var target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nvar readFramebuffer = function readFramebuffer(gl, value) {\n  return gl.bindFramebuffer(36008, value);\n};\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n}\n\nexport var GL_PARAMETER_SETTERS = (_GL_PARAMETER_SETTERS = {}, _defineProperty(_GL_PARAMETER_SETTERS, 3042, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32773, function (gl, value) {\n  return gl.blendColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 32777, 'blendEquation'), _defineProperty(_GL_PARAMETER_SETTERS, 34877, 'blendEquation'), _defineProperty(_GL_PARAMETER_SETTERS, 32969, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32968, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32971, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32970, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 3106, function (gl, value) {\n  return gl.clearColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3107, function (gl, value) {\n  return gl.colorMask.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2884, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2885, function (gl, value) {\n  return gl.cullFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2929, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2931, function (gl, value) {\n  return gl.clearDepth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2932, function (gl, value) {\n  return gl.depthFunc(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2928, function (gl, value) {\n  return gl.depthRange.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2930, function (gl, value) {\n  return gl.depthMask(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3024, enable), _defineProperty(_GL_PARAMETER_SETTERS, 35723, hint), _defineProperty(_GL_PARAMETER_SETTERS, 36006, drawFramebuffer), _defineProperty(_GL_PARAMETER_SETTERS, 2886, function (gl, value) {\n  return gl.frontFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 33170, hint), _defineProperty(_GL_PARAMETER_SETTERS, 2849, function (gl, value) {\n  return gl.lineWidth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 32823, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32824, 'polygonOffset'), _defineProperty(_GL_PARAMETER_SETTERS, 10752, 'polygonOffset'), _defineProperty(_GL_PARAMETER_SETTERS, 35977, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32938, 'sampleCoverage'), _defineProperty(_GL_PARAMETER_SETTERS, 32939, 'sampleCoverage'), _defineProperty(_GL_PARAMETER_SETTERS, 3089, enable), _defineProperty(_GL_PARAMETER_SETTERS, 3088, function (gl, value) {\n  return gl.scissor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2960, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2961, function (gl, value) {\n  return gl.clearStencil(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2968, function (gl, value) {\n  return gl.stencilMaskSeparate(1028, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 36005, function (gl, value) {\n  return gl.stencilMaskSeparate(1029, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2962, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2967, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2963, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 34816, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 36003, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 36004, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 2964, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2965, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2966, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 34817, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 34818, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 34819, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 2978, function (gl, value) {\n  return gl.viewport.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3333, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3317, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37440, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37441, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37443, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3330, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3332, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3331, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 36010, readFramebuffer), _defineProperty(_GL_PARAMETER_SETTERS, 3314, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 32878, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3316, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3315, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 32877, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, \"framebuffer\", function framebuffer(gl, _framebuffer) {\n  var handle = _framebuffer && 'handle' in _framebuffer ? _framebuffer.handle : _framebuffer;\n  return gl.bindFramebuffer(36160, handle);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blend\", function blend(gl, value) {\n  return value ? gl.enable(3042) : gl.disable(3042);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blendColor\", function blendColor(gl, value) {\n  return gl.blendColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blendEquation\", function blendEquation(gl, args) {\n  args = isArray(args) ? args : [args, args];\n  gl.blendEquationSeparate.apply(gl, _toConsumableArray(args));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blendFunc\", function blendFunc(gl, args) {\n  args = isArray(args) && args.length === 2 ? [].concat(_toConsumableArray(args), _toConsumableArray(args)) : args;\n  gl.blendFuncSeparate.apply(gl, _toConsumableArray(args));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"clearColor\", function clearColor(gl, value) {\n  return gl.clearColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"clearDepth\", function clearDepth(gl, value) {\n  return gl.clearDepth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"clearStencil\", function clearStencil(gl, value) {\n  return gl.clearStencil(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"colorMask\", function colorMask(gl, value) {\n  return gl.colorMask.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"cull\", function cull(gl, value) {\n  return value ? gl.enable(2884) : gl.disable(2884);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"cullFace\", function cullFace(gl, value) {\n  return gl.cullFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthTest\", function depthTest(gl, value) {\n  return value ? gl.enable(2929) : gl.disable(2929);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthFunc\", function depthFunc(gl, value) {\n  return gl.depthFunc(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthMask\", function depthMask(gl, value) {\n  return gl.depthMask(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthRange\", function depthRange(gl, value) {\n  return gl.depthRange.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"dither\", function dither(gl, value) {\n  return value ? gl.enable(3024) : gl.disable(3024);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"derivativeHint\", function derivativeHint(gl, value) {\n  gl.hint(35723, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"frontFace\", function frontFace(gl, value) {\n  return gl.frontFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"mipmapHint\", function mipmapHint(gl, value) {\n  return gl.hint(33170, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"lineWidth\", function lineWidth(gl, value) {\n  return gl.lineWidth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"polygonOffsetFill\", function polygonOffsetFill(gl, value) {\n  return value ? gl.enable(32823) : gl.disable(32823);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"polygonOffset\", function polygonOffset(gl, value) {\n  return gl.polygonOffset.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"sampleCoverage\", function sampleCoverage(gl, value) {\n  return gl.sampleCoverage.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"scissorTest\", function scissorTest(gl, value) {\n  return value ? gl.enable(3089) : gl.disable(3089);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"scissor\", function scissor(gl, value) {\n  return gl.scissor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilTest\", function stencilTest(gl, value) {\n  return value ? gl.enable(2960) : gl.disable(2960);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilMask\", function stencilMask(gl, value) {\n  value = isArray(value) ? value : [value, value];\n\n  var _value = value,\n      _value2 = _slicedToArray(_value, 2),\n      mask = _value2[0],\n      backMask = _value2[1];\n\n  gl.stencilMaskSeparate(1028, mask);\n  gl.stencilMaskSeparate(1029, backMask);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilFunc\", function stencilFunc(gl, args) {\n  args = isArray(args) && args.length === 3 ? [].concat(_toConsumableArray(args), _toConsumableArray(args)) : args;\n\n  var _args = args,\n      _args2 = _slicedToArray(_args, 6),\n      func = _args2[0],\n      ref = _args2[1],\n      mask = _args2[2],\n      backFunc = _args2[3],\n      backRef = _args2[4],\n      backMask = _args2[5];\n\n  gl.stencilFuncSeparate(1028, func, ref, mask);\n  gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilOp\", function stencilOp(gl, args) {\n  args = isArray(args) && args.length === 3 ? [].concat(_toConsumableArray(args), _toConsumableArray(args)) : args;\n\n  var _args3 = args,\n      _args4 = _slicedToArray(_args3, 6),\n      sfail = _args4[0],\n      dpfail = _args4[1],\n      dppass = _args4[2],\n      backSfail = _args4[3],\n      backDpfail = _args4[4],\n      backDppass = _args4[5];\n\n  gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n  gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"viewport\", function viewport(gl, value) {\n  return gl.viewport.apply(gl, _toConsumableArray(value));\n}), _GL_PARAMETER_SETTERS);\n\nfunction getValue(glEnum, values, cache) {\n  return values[glEnum] !== undefined ? values[glEnum] : cache[glEnum];\n}\n\nexport var GL_COMPOSITE_PARAMETER_SETTERS = {\n  blendEquation: function blendEquation(gl, values, cache) {\n    return gl.blendEquationSeparate(getValue(32777, values, cache), getValue(34877, values, cache));\n  },\n  blendFunc: function blendFunc(gl, values, cache) {\n    return gl.blendFuncSeparate(getValue(32969, values, cache), getValue(32968, values, cache), getValue(32971, values, cache), getValue(32970, values, cache));\n  },\n  polygonOffset: function polygonOffset(gl, values, cache) {\n    return gl.polygonOffset(getValue(32824, values, cache), getValue(10752, values, cache));\n  },\n  sampleCoverage: function sampleCoverage(gl, values, cache) {\n    return gl.sampleCoverage(getValue(32938, values, cache), getValue(32939, values, cache));\n  },\n  stencilFuncFront: function stencilFuncFront(gl, values, cache) {\n    return gl.stencilFuncSeparate(1028, getValue(2962, values, cache), getValue(2967, values, cache), getValue(2963, values, cache));\n  },\n  stencilFuncBack: function stencilFuncBack(gl, values, cache) {\n    return gl.stencilFuncSeparate(1029, getValue(34816, values, cache), getValue(36003, values, cache), getValue(36004, values, cache));\n  },\n  stencilOpFront: function stencilOpFront(gl, values, cache) {\n    return gl.stencilOpSeparate(1028, getValue(2964, values, cache), getValue(2965, values, cache), getValue(2966, values, cache));\n  },\n  stencilOpBack: function stencilOpBack(gl, values, cache) {\n    return gl.stencilOpSeparate(1029, getValue(34817, values, cache), getValue(34818, values, cache), getValue(34819, values, cache));\n  }\n};\nexport var GL_HOOKED_SETTERS = {\n  enable: function enable(update, capability) {\n    return update(_defineProperty({}, capability, true));\n  },\n  disable: function disable(update, capability) {\n    return update(_defineProperty({}, capability, false));\n  },\n  pixelStorei: function pixelStorei(update, pname, value) {\n    return update(_defineProperty({}, pname, value));\n  },\n  hint: function hint(update, pname, _hint) {\n    return update(_defineProperty({}, pname, _hint));\n  },\n  bindFramebuffer: function bindFramebuffer(update, target, framebuffer) {\n    var _update5;\n\n    switch (target) {\n      case 36160:\n        return update((_update5 = {}, _defineProperty(_update5, 36006, framebuffer), _defineProperty(_update5, 36010, framebuffer), _update5));\n\n      case 36009:\n        return update(_defineProperty({}, 36006, framebuffer));\n\n      case 36008:\n        return update(_defineProperty({}, 36010, framebuffer));\n\n      default:\n        return null;\n    }\n  },\n  blendColor: function blendColor(update, r, g, b, a) {\n    return update(_defineProperty({}, 32773, new Float32Array([r, g, b, a])));\n  },\n  blendEquation: function blendEquation(update, mode) {\n    var _update9;\n\n    return update((_update9 = {}, _defineProperty(_update9, 32777, mode), _defineProperty(_update9, 34877, mode), _update9));\n  },\n  blendEquationSeparate: function blendEquationSeparate(update, modeRGB, modeAlpha) {\n    var _update10;\n\n    return update((_update10 = {}, _defineProperty(_update10, 32777, modeRGB), _defineProperty(_update10, 34877, modeAlpha), _update10));\n  },\n  blendFunc: function blendFunc(update, src, dst) {\n    var _update11;\n\n    return update((_update11 = {}, _defineProperty(_update11, 32969, src), _defineProperty(_update11, 32968, dst), _defineProperty(_update11, 32971, src), _defineProperty(_update11, 32970, dst), _update11));\n  },\n  blendFuncSeparate: function blendFuncSeparate(update, srcRGB, dstRGB, srcAlpha, dstAlpha) {\n    var _update12;\n\n    return update((_update12 = {}, _defineProperty(_update12, 32969, srcRGB), _defineProperty(_update12, 32968, dstRGB), _defineProperty(_update12, 32971, srcAlpha), _defineProperty(_update12, 32970, dstAlpha), _update12));\n  },\n  clearColor: function clearColor(update, r, g, b, a) {\n    return update(_defineProperty({}, 3106, new Float32Array([r, g, b, a])));\n  },\n  clearDepth: function clearDepth(update, depth) {\n    return update(_defineProperty({}, 2931, depth));\n  },\n  clearStencil: function clearStencil(update, s) {\n    return update(_defineProperty({}, 2961, s));\n  },\n  colorMask: function colorMask(update, r, g, b, a) {\n    return update(_defineProperty({}, 3107, [r, g, b, a]));\n  },\n  cullFace: function cullFace(update, mode) {\n    return update(_defineProperty({}, 2885, mode));\n  },\n  depthFunc: function depthFunc(update, func) {\n    return update(_defineProperty({}, 2932, func));\n  },\n  depthRange: function depthRange(update, zNear, zFar) {\n    return update(_defineProperty({}, 2928, new Float32Array([zNear, zFar])));\n  },\n  depthMask: function depthMask(update, mask) {\n    return update(_defineProperty({}, 2930, mask));\n  },\n  frontFace: function frontFace(update, face) {\n    return update(_defineProperty({}, 2886, face));\n  },\n  lineWidth: function lineWidth(update, width) {\n    return update(_defineProperty({}, 2849, width));\n  },\n  polygonOffset: function polygonOffset(update, factor, units) {\n    var _update23;\n\n    return update((_update23 = {}, _defineProperty(_update23, 32824, factor), _defineProperty(_update23, 10752, units), _update23));\n  },\n  sampleCoverage: function sampleCoverage(update, value, invert) {\n    var _update24;\n\n    return update((_update24 = {}, _defineProperty(_update24, 32938, value), _defineProperty(_update24, 32939, invert), _update24));\n  },\n  scissor: function scissor(update, x, y, width, height) {\n    return update(_defineProperty({}, 3088, new Int32Array([x, y, width, height])));\n  },\n  stencilMask: function stencilMask(update, mask) {\n    var _update26;\n\n    return update((_update26 = {}, _defineProperty(_update26, 2968, mask), _defineProperty(_update26, 36005, mask), _update26));\n  },\n  stencilMaskSeparate: function stencilMaskSeparate(update, face, mask) {\n    return update(_defineProperty({}, face === 1028 ? 2968 : 36005, mask));\n  },\n  stencilFunc: function stencilFunc(update, func, ref, mask) {\n    var _update28;\n\n    return update((_update28 = {}, _defineProperty(_update28, 2962, func), _defineProperty(_update28, 2967, ref), _defineProperty(_update28, 2963, mask), _defineProperty(_update28, 34816, func), _defineProperty(_update28, 36003, ref), _defineProperty(_update28, 36004, mask), _update28));\n  },\n  stencilFuncSeparate: function stencilFuncSeparate(update, face, func, ref, mask) {\n    var _update29;\n\n    return update((_update29 = {}, _defineProperty(_update29, face === 1028 ? 2962 : 34816, func), _defineProperty(_update29, face === 1028 ? 2967 : 36003, ref), _defineProperty(_update29, face === 1028 ? 2963 : 36004, mask), _update29));\n  },\n  stencilOp: function stencilOp(update, fail, zfail, zpass) {\n    var _update30;\n\n    return update((_update30 = {}, _defineProperty(_update30, 2964, fail), _defineProperty(_update30, 2965, zfail), _defineProperty(_update30, 2966, zpass), _defineProperty(_update30, 34817, fail), _defineProperty(_update30, 34818, zfail), _defineProperty(_update30, 34819, zpass), _update30));\n  },\n  stencilOpSeparate: function stencilOpSeparate(update, face, fail, zfail, zpass) {\n    var _update31;\n\n    return update((_update31 = {}, _defineProperty(_update31, face === 1028 ? 2964 : 34817, fail), _defineProperty(_update31, face === 1028 ? 2965 : 34818, zfail), _defineProperty(_update31, face === 1028 ? 2966 : 34819, zpass), _update31));\n  },\n  viewport: function viewport(update, x, y, width, height) {\n    return update(_defineProperty({}, 2978, [x, y, width, height]));\n  }\n};\n\nvar isEnabled = function isEnabled(gl, key) {\n  return gl.isEnabled(key);\n};\n\nexport var GL_PARAMETER_GETTERS = (_GL_PARAMETER_GETTERS = {}, _defineProperty(_GL_PARAMETER_GETTERS, 3042, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2884, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2929, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 3024, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32823, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32926, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32928, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 3089, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2960, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 35977, isEnabled), _GL_PARAMETER_GETTERS);","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","require('./_typed-array')('Int8', 1, function (init) {\n  return function Int8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","export function vec2_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}","require('./_typed-array')('Int32', 4, function (init) {\n  return function Int32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","\"use strict\";\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = isBrowser;\nexports.isBrowserMainThread = isBrowserMainThread;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2[\"default\"])(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || (0, _isElectron[\"default\"])();\n}\n\nfunction isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","// 20.2.2.33 Math.tanh(x)\nvar $export = require('./_export');\nvar expm1 = require('./_math-expm1');\nvar exp = Math.exp;\n\n$export($export.S, 'Math', {\n  tanh: function tanh(x) {\n    var a = expm1(x = +x);\n    var b = expm1(-x);\n    return a == Infinity ? 1 : b == Infinity ? -1 : (a - b) / (exp(x) + exp(-x));\n  }\n});\n","// 20.2.2.17 Math.hypot([value1[, value2[, … ]]])\nvar $export = require('./_export');\nvar abs = Math.abs;\n\n$export($export.S, 'Math', {\n  hypot: function hypot(value1, value2) { // eslint-disable-line no-unused-vars\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n  }\n});\n","// This file enables: import 'probe.gl/bench'.\n// Note: Must be published using package.json \"files\" field\nmodule.exports = require('./dist/es5/env');","require(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\n/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function (window, document, exportName, undefined) {\n  'use strict';\n\n  var VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\n  var TEST_ELEMENT = document.createElement('div');\n  var TYPE_FUNCTION = 'function';\n  var round = Math.round;\n  var abs = Math.abs;\n  var now = Date.now;\n  /**\n   * set a timeout with a given scope\n   * @param {Function} fn\n   * @param {Number} timeout\n   * @param {Object} context\n   * @returns {number}\n   */\n\n  function setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n  }\n  /**\n   * if the argument is an array, we want to execute the fn on each entry\n   * if it aint an array we don't want to do a thing.\n   * this is used by all the methods that accept a single and array argument.\n   * @param {*|Array} arg\n   * @param {String} fn\n   * @param {Object} [context]\n   * @returns {Boolean}\n   */\n\n\n  function invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n      each(arg, context[fn], context);\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * walk objects and arrays\n   * @param {Object} obj\n   * @param {Function} iterator\n   * @param {Object} context\n   */\n\n\n  function each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n      return;\n    }\n\n    if (obj.forEach) {\n      obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n      i = 0;\n\n      while (i < obj.length) {\n        iterator.call(context, obj[i], i, obj);\n        i++;\n      }\n    } else {\n      for (i in obj) {\n        obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n      }\n    }\n  }\n  /**\n   * wrap a method with a deprecation warning and stack trace\n   * @param {Function} method\n   * @param {String} name\n   * @param {String} message\n   * @returns {Function} A new function wrapping the supplied method.\n   */\n\n\n  function deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function () {\n      var e = new Error('get-stack-trace');\n      var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '').replace(/^\\s+at\\s+/gm, '').replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n      var log = window.console && (window.console.warn || window.console.log);\n\n      if (log) {\n        log.call(window.console, deprecationMessage, stack);\n      }\n\n      return method.apply(this, arguments);\n    };\n  }\n  /**\n   * extend object.\n   * means that properties in dest will be overwritten by the ones in src.\n   * @param {Object} target\n   * @param {...Object} objects_to_assign\n   * @returns {Object} target\n   */\n\n\n  var assign;\n\n  if (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var output = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var source = arguments[index];\n\n        if (source !== undefined && source !== null) {\n          for (var nextKey in source) {\n            if (source.hasOwnProperty(nextKey)) {\n              output[nextKey] = source[nextKey];\n            }\n          }\n        }\n      }\n\n      return output;\n    };\n  } else {\n    assign = Object.assign;\n  }\n  /**\n   * extend object.\n   * means that properties in dest will be overwritten by the ones in src.\n   * @param {Object} dest\n   * @param {Object} src\n   * @param {Boolean} [merge=false]\n   * @returns {Object} dest\n   */\n\n\n  var extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n\n    while (i < keys.length) {\n      if (!merge || merge && dest[keys[i]] === undefined) {\n        dest[keys[i]] = src[keys[i]];\n      }\n\n      i++;\n    }\n\n    return dest;\n  }, 'extend', 'Use `assign`.');\n  /**\n   * merge the values from src in the dest.\n   * means that properties that exist in dest will not be overwritten by src\n   * @param {Object} dest\n   * @param {Object} src\n   * @returns {Object} dest\n   */\n\n  var merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n  }, 'merge', 'Use `assign`.');\n  /**\n   * simple class inheritance\n   * @param {Function} child\n   * @param {Function} base\n   * @param {Object} [properties]\n   */\n\n  function inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n      assign(childP, properties);\n    }\n  }\n  /**\n   * simple function bind\n   * @param {Function} fn\n   * @param {Object} context\n   * @returns {Function}\n   */\n\n\n  function bindFn(fn, context) {\n    return function boundFn() {\n      return fn.apply(context, arguments);\n    };\n  }\n  /**\n   * let a boolean value also be a function that must return a boolean\n   * this first item in args will be used as the context\n   * @param {Boolean|Function} val\n   * @param {Array} [args]\n   * @returns {Boolean}\n   */\n\n\n  function boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n      return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n\n    return val;\n  }\n  /**\n   * use the val2 when val1 is undefined\n   * @param {*} val1\n   * @param {*} val2\n   * @returns {*}\n   */\n\n\n  function ifUndefined(val1, val2) {\n    return val1 === undefined ? val2 : val1;\n  }\n  /**\n   * addEventListener with multiple events at once\n   * @param {EventTarget} target\n   * @param {String} types\n   * @param {Function} handler\n   */\n\n\n  function addEventListeners(target, types, handler) {\n    each(splitStr(types), function (type) {\n      target.addEventListener(type, handler, false);\n    });\n  }\n  /**\n   * removeEventListener with multiple events at once\n   * @param {EventTarget} target\n   * @param {String} types\n   * @param {Function} handler\n   */\n\n\n  function removeEventListeners(target, types, handler) {\n    each(splitStr(types), function (type) {\n      target.removeEventListener(type, handler, false);\n    });\n  }\n  /**\n   * find if a node is in the given parent\n   * @method hasParent\n   * @param {HTMLElement} node\n   * @param {HTMLElement} parent\n   * @return {Boolean} found\n   */\n\n\n  function hasParent(node, parent) {\n    while (node) {\n      if (node == parent) {\n        return true;\n      }\n\n      node = node.parentNode;\n    }\n\n    return false;\n  }\n  /**\n   * small indexOf wrapper\n   * @param {String} str\n   * @param {String} find\n   * @returns {Boolean} found\n   */\n\n\n  function inStr(str, find) {\n    return str.indexOf(find) > -1;\n  }\n  /**\n   * split string on whitespace\n   * @param {String} str\n   * @returns {Array} words\n   */\n\n\n  function splitStr(str) {\n    return str.trim().split(/\\s+/g);\n  }\n  /**\n   * find if a array contains the object using indexOf or a simple polyFill\n   * @param {Array} src\n   * @param {String} find\n   * @param {String} [findByKey]\n   * @return {Boolean|Number} false when not found, or the index\n   */\n\n\n  function inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n      return src.indexOf(find);\n    } else {\n      var i = 0;\n\n      while (i < src.length) {\n        if (findByKey && src[i][findByKey] == find || !findByKey && src[i] === find) {\n          return i;\n        }\n\n        i++;\n      }\n\n      return -1;\n    }\n  }\n  /**\n   * convert array-like objects to real arrays\n   * @param {Object} obj\n   * @returns {Array}\n   */\n\n\n  function toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n  }\n  /**\n   * unique array with objects based on a key (like 'id') or just by the array's value\n   * @param {Array} src [{id:1},{id:2},{id:1}]\n   * @param {String} [key]\n   * @param {Boolean} [sort=False]\n   * @returns {Array} [{id:1},{id:2}]\n   */\n\n\n  function uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n      var val = key ? src[i][key] : src[i];\n\n      if (inArray(values, val) < 0) {\n        results.push(src[i]);\n      }\n\n      values[i] = val;\n      i++;\n    }\n\n    if (sort) {\n      if (!key) {\n        results = results.sort();\n      } else {\n        results = results.sort(function sortUniqueArray(a, b) {\n          return a[key] > b[key];\n        });\n      }\n    }\n\n    return results;\n  }\n  /**\n   * get the prefixed property\n   * @param {Object} obj\n   * @param {String} property\n   * @returns {String|Undefined} prefixed\n   */\n\n\n  function prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n    var i = 0;\n\n    while (i < VENDOR_PREFIXES.length) {\n      prefix = VENDOR_PREFIXES[i];\n      prop = prefix ? prefix + camelProp : property;\n\n      if (prop in obj) {\n        return prop;\n      }\n\n      i++;\n    }\n\n    return undefined;\n  }\n  /**\n   * get a unique id\n   * @returns {number} uniqueId\n   */\n\n\n  var _uniqueId = 1;\n\n  function uniqueId() {\n    return _uniqueId++;\n  }\n  /**\n   * get the window object of an element\n   * @param {HTMLElement} element\n   * @returns {DocumentView|Window}\n   */\n\n\n  function getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return doc.defaultView || doc.parentWindow || window;\n  }\n\n  var MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n  var SUPPORT_TOUCH = ('ontouchstart' in window);\n  var SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\n  var SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n  var INPUT_TYPE_TOUCH = 'touch';\n  var INPUT_TYPE_PEN = 'pen';\n  var INPUT_TYPE_MOUSE = 'mouse';\n  var INPUT_TYPE_KINECT = 'kinect';\n  var COMPUTE_INTERVAL = 25;\n  var INPUT_START = 1;\n  var INPUT_MOVE = 2;\n  var INPUT_END = 4;\n  var INPUT_CANCEL = 8;\n  var DIRECTION_NONE = 1;\n  var DIRECTION_LEFT = 2;\n  var DIRECTION_RIGHT = 4;\n  var DIRECTION_UP = 8;\n  var DIRECTION_DOWN = 16;\n  var DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\n  var DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\n  var DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n  var PROPS_XY = ['x', 'y'];\n  var PROPS_CLIENT_XY = ['clientX', 'clientY'];\n  /**\n   * create new input type manager\n   * @param {Manager} manager\n   * @param {Function} callback\n   * @returns {Input}\n   * @constructor\n   */\n\n  function Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget; // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n\n    this.domHandler = function (ev) {\n      if (boolOrFn(manager.options.enable, [manager])) {\n        self.handler(ev);\n      }\n    };\n\n    this.init();\n  }\n\n  Input.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function handler() {},\n\n    /**\n     * bind the events\n     */\n    init: function init() {\n      this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n      this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n      this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function destroy() {\n      this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n      this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n      this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n  };\n  /**\n   * create new input type manager\n   * called by the Manager constructor\n   * @param {Hammer} manager\n   * @returns {Input}\n   */\n\n  function createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n      Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n      Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n      Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n      Type = MouseInput;\n    } else {\n      Type = TouchMouseInput;\n    }\n\n    return new Type(manager, inputHandler);\n  }\n  /**\n   * handle input events\n   * @param {Manager} manager\n   * @param {String} eventType\n   * @param {Object} input\n   */\n\n\n  function inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = eventType & INPUT_START && pointersLen - changedPointersLen === 0;\n    var isFinal = eventType & (INPUT_END | INPUT_CANCEL) && pointersLen - changedPointersLen === 0;\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n      manager.session = {};\n    } // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n\n\n    input.eventType = eventType; // compute scale, rotation etc\n\n    computeInputData(manager, input); // emit secret event\n\n    manager.emit('hammer.input', input);\n    manager.recognize(input);\n    manager.session.prevInput = input;\n  }\n  /**\n   * extend the data with some usable properties like scale, rotate, velocity etc\n   * @param {Object} manager\n   * @param {Object} input\n   */\n\n\n  function computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length; // store the first input to calculate the distance and direction\n\n    if (!session.firstInput) {\n      session.firstInput = simpleCloneInputData(input);\n    } // to compute scale and rotation we need to store the multiple touches\n\n\n    if (pointersLength > 1 && !session.firstMultiple) {\n      session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n      session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = abs(overallVelocity.x) > abs(overallVelocity.y) ? overallVelocity.x : overallVelocity.y;\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n    input.maxPointers = !session.prevInput ? input.pointers.length : input.pointers.length > session.prevInput.maxPointers ? input.pointers.length : session.prevInput.maxPointers;\n    computeIntervalInputData(session, input); // find the correct target\n\n    var target = manager.element;\n\n    if (hasParent(input.srcEvent.target, target)) {\n      target = input.srcEvent.target;\n    }\n\n    input.target = target;\n  }\n\n  function computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n      prevDelta = session.prevDelta = {\n        x: prevInput.deltaX || 0,\n        y: prevInput.deltaY || 0\n      };\n      offset = session.offsetDelta = {\n        x: center.x,\n        y: center.y\n      };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n  }\n  /**\n   * velocity is calculated every x ms\n   * @param {Object} session\n   * @param {Object} input\n   */\n\n\n  function computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity,\n        velocityX,\n        velocityY,\n        direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n      var deltaX = input.deltaX - last.deltaX;\n      var deltaY = input.deltaY - last.deltaY;\n      var v = getVelocity(deltaTime, deltaX, deltaY);\n      velocityX = v.x;\n      velocityY = v.y;\n      velocity = abs(v.x) > abs(v.y) ? v.x : v.y;\n      direction = getDirection(deltaX, deltaY);\n      session.lastInterval = input;\n    } else {\n      // use latest velocity info if it doesn't overtake a minimum period\n      velocity = last.velocity;\n      velocityX = last.velocityX;\n      velocityY = last.velocityY;\n      direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n  }\n  /**\n   * create a simple clone from the input used for storage of firstInput and firstMultiple\n   * @param {Object} input\n   * @returns {Object} clonedInputData\n   */\n\n\n  function simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n\n    while (i < input.pointers.length) {\n      pointers[i] = {\n        clientX: round(input.pointers[i].clientX),\n        clientY: round(input.pointers[i].clientY)\n      };\n      i++;\n    }\n\n    return {\n      timeStamp: now(),\n      pointers: pointers,\n      center: getCenter(pointers),\n      deltaX: input.deltaX,\n      deltaY: input.deltaY\n    };\n  }\n  /**\n   * get the center of all the pointers\n   * @param {Array} pointers\n   * @return {Object} center contains `x` and `y` properties\n   */\n\n\n  function getCenter(pointers) {\n    var pointersLength = pointers.length; // no need to loop when only one touch\n\n    if (pointersLength === 1) {\n      return {\n        x: round(pointers[0].clientX),\n        y: round(pointers[0].clientY)\n      };\n    }\n\n    var x = 0,\n        y = 0,\n        i = 0;\n\n    while (i < pointersLength) {\n      x += pointers[i].clientX;\n      y += pointers[i].clientY;\n      i++;\n    }\n\n    return {\n      x: round(x / pointersLength),\n      y: round(y / pointersLength)\n    };\n  }\n  /**\n   * calculate the velocity between two points. unit is in px per ms.\n   * @param {Number} deltaTime\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Object} velocity `x` and `y`\n   */\n\n\n  function getVelocity(deltaTime, x, y) {\n    return {\n      x: x / deltaTime || 0,\n      y: y / deltaTime || 0\n    };\n  }\n  /**\n   * get the direction between two points\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Number} direction\n   */\n\n\n  function getDirection(x, y) {\n    if (x === y) {\n      return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n      return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n  }\n  /**\n   * calculate the absolute distance between two points\n   * @param {Object} p1 {x, y}\n   * @param {Object} p2 {x, y}\n   * @param {Array} [props] containing x and y keys\n   * @return {Number} distance\n   */\n\n\n  function getDistance(p1, p2, props) {\n    if (!props) {\n      props = PROPS_XY;\n    }\n\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.sqrt(x * x + y * y);\n  }\n  /**\n   * calculate the angle between two coordinates\n   * @param {Object} p1\n   * @param {Object} p2\n   * @param {Array} [props] containing x and y keys\n   * @return {Number} angle\n   */\n\n\n  function getAngle(p1, p2, props) {\n    if (!props) {\n      props = PROPS_XY;\n    }\n\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n  }\n  /**\n   * calculate the rotation degrees between two pointersets\n   * @param {Array} start array of pointers\n   * @param {Array} end array of pointers\n   * @return {Number} rotation\n   */\n\n\n  function getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n  }\n  /**\n   * calculate the scale factor between two pointersets\n   * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n   * @param {Array} start array of pointers\n   * @param {Array} end array of pointers\n   * @return {Number} scale\n   */\n\n\n  function getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n  }\n\n  var MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n  };\n  var MOUSE_ELEMENT_EVENTS = 'mousedown';\n  var MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n  /**\n   * Mouse events input\n   * @constructor\n   * @extends Input\n   */\n\n  function MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n  }\n\n  inherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n      var eventType = MOUSE_INPUT_MAP[ev.type]; // on start we want to have the left mouse button down\n\n      if (eventType & INPUT_START && ev.button === 0) {\n        this.pressed = true;\n      }\n\n      if (eventType & INPUT_MOVE && ev.which !== 1) {\n        eventType = INPUT_END;\n      } // mouse must be down\n\n\n      if (!this.pressed) {\n        return;\n      }\n\n      if (eventType & INPUT_END) {\n        this.pressed = false;\n      }\n\n      this.callback(this.manager, eventType, {\n        pointers: [ev],\n        changedPointers: [ev],\n        pointerType: INPUT_TYPE_MOUSE,\n        srcEvent: ev\n      });\n    }\n  });\n  var POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n  }; // in IE10 the pointer types is defined as an enum\n\n  var IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n\n  };\n  var POINTER_ELEMENT_EVENTS = 'pointerdown';\n  var POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel'; // IE10 has prefixed support, and case-sensitive\n\n  if (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n  }\n  /**\n   * Pointer events input\n   * @constructor\n   * @extends Input\n   */\n\n\n  function PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n    Input.apply(this, arguments);\n    this.store = this.manager.session.pointerEvents = [];\n  }\n\n  inherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n      var store = this.store;\n      var removePointer = false;\n      var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n      var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n      var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n      var isTouch = pointerType == INPUT_TYPE_TOUCH; // get index of the event in the store\n\n      var storeIndex = inArray(store, ev.pointerId, 'pointerId'); // start and mouse must be down\n\n      if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n        if (storeIndex < 0) {\n          store.push(ev);\n          storeIndex = store.length - 1;\n        }\n      } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        removePointer = true;\n      } // it not found, so the pointer hasn't been down (so it's probably a hover)\n\n\n      if (storeIndex < 0) {\n        return;\n      } // update the event in the store\n\n\n      store[storeIndex] = ev;\n      this.callback(this.manager, eventType, {\n        pointers: store,\n        changedPointers: [ev],\n        pointerType: pointerType,\n        srcEvent: ev\n      });\n\n      if (removePointer) {\n        // remove from the store\n        store.splice(storeIndex, 1);\n      }\n    }\n  });\n  var SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n  };\n  var SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\n  var SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n  /**\n   * Touch events input\n   * @constructor\n   * @extends Input\n   */\n\n  function SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n    Input.apply(this, arguments);\n  }\n\n  inherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n      var type = SINGLE_TOUCH_INPUT_MAP[ev.type]; // should we handle the touch events?\n\n      if (type === INPUT_START) {\n        this.started = true;\n      }\n\n      if (!this.started) {\n        return;\n      }\n\n      var touches = normalizeSingleTouches.call(this, ev, type); // when done, reset the started state\n\n      if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n        this.started = false;\n      }\n\n      this.callback(this.manager, type, {\n        pointers: touches[0],\n        changedPointers: touches[1],\n        pointerType: INPUT_TYPE_TOUCH,\n        srcEvent: ev\n      });\n    }\n  });\n  /**\n   * @this {TouchInput}\n   * @param {Object} ev\n   * @param {Number} type flag\n   * @returns {undefined|Array} [all, changed]\n   */\n\n  function normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n      all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n  }\n\n  var TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n  };\n  var TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n  /**\n   * Multi-user touch events input\n   * @constructor\n   * @extends Input\n   */\n\n  function TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n    Input.apply(this, arguments);\n  }\n\n  inherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n      var type = TOUCH_INPUT_MAP[ev.type];\n      var touches = getTouches.call(this, ev, type);\n\n      if (!touches) {\n        return;\n      }\n\n      this.callback(this.manager, type, {\n        pointers: touches[0],\n        changedPointers: touches[1],\n        pointerType: INPUT_TYPE_TOUCH,\n        srcEvent: ev\n      });\n    }\n  });\n  /**\n   * @this {TouchInput}\n   * @param {Object} ev\n   * @param {Number} type flag\n   * @returns {undefined|Array} [all, changed]\n   */\n\n  function getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds; // when there is only one touch, the process can be simplified\n\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n      targetIds[allTouches[0].identifier] = true;\n      return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target; // get target touches from touches\n\n    targetTouches = allTouches.filter(function (touch) {\n      return hasParent(touch.target, target);\n    }); // collect touches\n\n    if (type === INPUT_START) {\n      i = 0;\n\n      while (i < targetTouches.length) {\n        targetIds[targetTouches[i].identifier] = true;\n        i++;\n      }\n    } // filter changed touches to only contain touches that exist in the collected target ids\n\n\n    i = 0;\n\n    while (i < changedTouches.length) {\n      if (targetIds[changedTouches[i].identifier]) {\n        changedTargetTouches.push(changedTouches[i]);\n      } // cleanup removed touches\n\n\n      if (type & (INPUT_END | INPUT_CANCEL)) {\n        delete targetIds[changedTouches[i].identifier];\n      }\n\n      i++;\n    }\n\n    if (!changedTargetTouches.length) {\n      return;\n    }\n\n    return [// merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n    uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true), changedTargetTouches];\n  }\n  /**\n   * Combined touch and mouse input\n   *\n   * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n   * This because touch devices also emit mouse events while doing a touch.\n   *\n   * @constructor\n   * @extends Input\n   */\n\n\n  var DEDUP_TIMEOUT = 2500;\n  var DEDUP_DISTANCE = 25;\n\n  function TouchMouseInput() {\n    Input.apply(this, arguments);\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n    this.primaryTouch = null;\n    this.lastTouches = [];\n  }\n\n  inherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n      var isTouch = inputData.pointerType == INPUT_TYPE_TOUCH,\n          isMouse = inputData.pointerType == INPUT_TYPE_MOUSE;\n\n      if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n        return;\n      } // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n\n\n      if (isTouch) {\n        recordTouches.call(this, inputEvent, inputData);\n      } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n        return;\n      }\n\n      this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n      this.touch.destroy();\n      this.mouse.destroy();\n    }\n  });\n\n  function recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n      this.primaryTouch = eventData.changedPointers[0].identifier;\n      setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n      setLastTouch.call(this, eventData);\n    }\n  }\n\n  function setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n      var lastTouch = {\n        x: touch.clientX,\n        y: touch.clientY\n      };\n      this.lastTouches.push(lastTouch);\n      var lts = this.lastTouches;\n\n      var removeLastTouch = function removeLastTouch() {\n        var i = lts.indexOf(lastTouch);\n\n        if (i > -1) {\n          lts.splice(i, 1);\n        }\n      };\n\n      setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n  }\n\n  function isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX,\n        y = eventData.srcEvent.clientY;\n\n    for (var i = 0; i < this.lastTouches.length; i++) {\n      var t = this.lastTouches[i];\n      var dx = Math.abs(x - t.x),\n          dy = Math.abs(y - t.y);\n\n      if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  var PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\n  var NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined; // magical touchAction value\n\n  var TOUCH_ACTION_COMPUTE = 'compute';\n  var TOUCH_ACTION_AUTO = 'auto';\n  var TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\n\n  var TOUCH_ACTION_NONE = 'none';\n  var TOUCH_ACTION_PAN_X = 'pan-x';\n  var TOUCH_ACTION_PAN_Y = 'pan-y';\n  var TOUCH_ACTION_MAP = getTouchActionProps();\n  /**\n   * Touch Action\n   * sets the touchAction property or uses the js alternative\n   * @param {Manager} manager\n   * @param {String} value\n   * @constructor\n   */\n\n  function TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n  }\n\n  TouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function set(value) {\n      // find out the touch-action by the event handlers\n      if (value == TOUCH_ACTION_COMPUTE) {\n        value = this.compute();\n      }\n\n      if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n        this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n      }\n\n      this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function update() {\n      this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function compute() {\n      var actions = [];\n      each(this.manager.recognizers, function (recognizer) {\n        if (boolOrFn(recognizer.options.enable, [recognizer])) {\n          actions = actions.concat(recognizer.getTouchAction());\n        }\n      });\n      return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function preventDefaults(input) {\n      var srcEvent = input.srcEvent;\n      var direction = input.offsetDirection; // if the touch action did prevented once this session\n\n      if (this.manager.session.prevented) {\n        srcEvent.preventDefault();\n        return;\n      }\n\n      var actions = this.actions;\n      var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n      var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n      var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n      if (hasNone) {\n        //do not prevent defaults if this is a tap gesture\n        var isTapPointer = input.pointers.length === 1;\n        var isTapMovement = input.distance < 2;\n        var isTapTouchTime = input.deltaTime < 250;\n\n        if (isTapPointer && isTapMovement && isTapTouchTime) {\n          return;\n        }\n      }\n\n      if (hasPanX && hasPanY) {\n        // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n        return;\n      }\n\n      if (hasNone || hasPanY && direction & DIRECTION_HORIZONTAL || hasPanX && direction & DIRECTION_VERTICAL) {\n        return this.preventSrc(srcEvent);\n      }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function preventSrc(srcEvent) {\n      this.manager.session.prevented = true;\n      srcEvent.preventDefault();\n    }\n  };\n  /**\n   * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n   * @param {String} actions\n   * @returns {*}\n   */\n\n  function cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n      return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y); // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n\n    if (hasPanX && hasPanY) {\n      return TOUCH_ACTION_NONE;\n    } // pan-x OR pan-y\n\n\n    if (hasPanX || hasPanY) {\n      return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    } // manipulation\n\n\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n      return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n  }\n\n  function getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n      return false;\n    }\n\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function (val) {\n      // If css.supports is not supported but there is native touch-action assume it supports\n      // all values. This is the case for IE 10 and 11.\n      touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n  }\n  /**\n   * Recognizer flow explained; *\n   * All recognizers have the initial state of POSSIBLE when a input session starts.\n   * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n   * Example session for mouse-input: mousedown -> mousemove -> mouseup\n   *\n   * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n   * which determines with state it should be.\n   *\n   * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n   * POSSIBLE to give it another change on the next cycle.\n   *\n   *               Possible\n   *                  |\n   *            +-----+---------------+\n   *            |                     |\n   *      +-----+-----+               |\n   *      |           |               |\n   *   Failed      Cancelled          |\n   *                          +-------+------+\n   *                          |              |\n   *                      Recognized       Began\n   *                                         |\n   *                                      Changed\n   *                                         |\n   *                                  Ended/Recognized\n   */\n\n\n  var STATE_POSSIBLE = 1;\n  var STATE_BEGAN = 2;\n  var STATE_CHANGED = 4;\n  var STATE_ENDED = 8;\n  var STATE_RECOGNIZED = STATE_ENDED;\n  var STATE_CANCELLED = 16;\n  var STATE_FAILED = 32;\n  /**\n   * Recognizer\n   * Every recognizer needs to extend from this class.\n   * @constructor\n   * @param {Object} options\n   */\n\n  function Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n    this.id = uniqueId();\n    this.manager = null; // default is enable true\n\n    this.options.enable = ifUndefined(this.options.enable, true);\n    this.state = STATE_POSSIBLE;\n    this.simultaneous = {};\n    this.requireFail = [];\n  }\n\n  Recognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function set(options) {\n      assign(this.options, options); // also update the touchAction, in case something changed about the directions/enabled state\n\n      this.manager && this.manager.touchAction.update();\n      return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function recognizeWith(otherRecognizer) {\n      if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n        return this;\n      }\n\n      var simultaneous = this.simultaneous;\n      otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n\n      if (!simultaneous[otherRecognizer.id]) {\n        simultaneous[otherRecognizer.id] = otherRecognizer;\n        otherRecognizer.recognizeWith(this);\n      }\n\n      return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function dropRecognizeWith(otherRecognizer) {\n      if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n        return this;\n      }\n\n      otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n      delete this.simultaneous[otherRecognizer.id];\n      return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function requireFailure(otherRecognizer) {\n      if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n        return this;\n      }\n\n      var requireFail = this.requireFail;\n      otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n\n      if (inArray(requireFail, otherRecognizer) === -1) {\n        requireFail.push(otherRecognizer);\n        otherRecognizer.requireFailure(this);\n      }\n\n      return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function dropRequireFailure(otherRecognizer) {\n      if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n        return this;\n      }\n\n      otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n      var index = inArray(this.requireFail, otherRecognizer);\n\n      if (index > -1) {\n        this.requireFail.splice(index, 1);\n      }\n\n      return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function hasRequireFailures() {\n      return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function canRecognizeWith(otherRecognizer) {\n      return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function emit(input) {\n      var self = this;\n      var state = this.state;\n\n      function emit(event) {\n        self.manager.emit(event, input);\n      } // 'panstart' and 'panmove'\n\n\n      if (state < STATE_ENDED) {\n        emit(self.options.event + stateStr(state));\n      }\n\n      emit(self.options.event); // simple 'eventName' events\n\n      if (input.additionalEvent) {\n        // additional event(panleft, panright, pinchin, pinchout...)\n        emit(input.additionalEvent);\n      } // panend and pancancel\n\n\n      if (state >= STATE_ENDED) {\n        emit(self.options.event + stateStr(state));\n      }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function tryEmit(input) {\n      if (this.canEmit()) {\n        return this.emit(input);\n      } // it's failing anyway\n\n\n      this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function canEmit() {\n      var i = 0;\n\n      while (i < this.requireFail.length) {\n        if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n          return false;\n        }\n\n        i++;\n      }\n\n      return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function recognize(inputData) {\n      // make a new copy of the inputData\n      // so we can change the inputData without messing up the other recognizers\n      var inputDataClone = assign({}, inputData); // is is enabled and allow recognizing?\n\n      if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n        this.reset();\n        this.state = STATE_FAILED;\n        return;\n      } // reset when we've reached the end\n\n\n      if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n        this.state = STATE_POSSIBLE;\n      }\n\n      this.state = this.process(inputDataClone); // the recognizer has recognized a gesture\n      // so trigger an event\n\n      if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n        this.tryEmit(inputDataClone);\n      }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function process(inputData) {},\n    // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function getTouchAction() {},\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function reset() {}\n  };\n  /**\n   * get a usable string, used as event postfix\n   * @param {Const} state\n   * @returns {String} state\n   */\n\n  function stateStr(state) {\n    if (state & STATE_CANCELLED) {\n      return 'cancel';\n    } else if (state & STATE_ENDED) {\n      return 'end';\n    } else if (state & STATE_CHANGED) {\n      return 'move';\n    } else if (state & STATE_BEGAN) {\n      return 'start';\n    }\n\n    return '';\n  }\n  /**\n   * direction cons to string\n   * @param {Const} direction\n   * @returns {String}\n   */\n\n\n  function directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n      return 'down';\n    } else if (direction == DIRECTION_UP) {\n      return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n      return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n      return 'right';\n    }\n\n    return '';\n  }\n  /**\n   * get a recognizer by name if it is bound to a manager\n   * @param {Recognizer|String} otherRecognizer\n   * @param {Recognizer} recognizer\n   * @returns {Recognizer}\n   */\n\n\n  function getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n\n    if (manager) {\n      return manager.get(otherRecognizer);\n    }\n\n    return otherRecognizer;\n  }\n  /**\n   * This recognizer is just used as a base for the simple attribute recognizers.\n   * @constructor\n   * @extends Recognizer\n   */\n\n\n  function AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n  }\n\n  inherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n      /**\n       * @type {Number}\n       * @default 1\n       */\n      pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function attrTest(input) {\n      var optionPointers = this.options.pointers;\n      return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function process(input) {\n      var state = this.state;\n      var eventType = input.eventType;\n      var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n      var isValid = this.attrTest(input); // on cancel input and we've recognized before, return STATE_CANCELLED\n\n      if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n        return state | STATE_CANCELLED;\n      } else if (isRecognized || isValid) {\n        if (eventType & INPUT_END) {\n          return state | STATE_ENDED;\n        } else if (!(state & STATE_BEGAN)) {\n          return STATE_BEGAN;\n        }\n\n        return state | STATE_CHANGED;\n      }\n\n      return STATE_FAILED;\n    }\n  });\n  /**\n   * Pan\n   * Recognized when the pointer is down and moved in the allowed direction.\n   * @constructor\n   * @extends AttrRecognizer\n   */\n\n  function PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n    this.pX = null;\n    this.pY = null;\n  }\n\n  inherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n      event: 'pan',\n      threshold: 10,\n      pointers: 1,\n      direction: DIRECTION_ALL\n    },\n    getTouchAction: function getTouchAction() {\n      var direction = this.options.direction;\n      var actions = [];\n\n      if (direction & DIRECTION_HORIZONTAL) {\n        actions.push(TOUCH_ACTION_PAN_Y);\n      }\n\n      if (direction & DIRECTION_VERTICAL) {\n        actions.push(TOUCH_ACTION_PAN_X);\n      }\n\n      return actions;\n    },\n    directionTest: function directionTest(input) {\n      var options = this.options;\n      var hasMoved = true;\n      var distance = input.distance;\n      var direction = input.direction;\n      var x = input.deltaX;\n      var y = input.deltaY; // lock to axis?\n\n      if (!(direction & options.direction)) {\n        if (options.direction & DIRECTION_HORIZONTAL) {\n          direction = x === 0 ? DIRECTION_NONE : x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n          hasMoved = x != this.pX;\n          distance = Math.abs(input.deltaX);\n        } else {\n          direction = y === 0 ? DIRECTION_NONE : y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n          hasMoved = y != this.pY;\n          distance = Math.abs(input.deltaY);\n        }\n      }\n\n      input.direction = direction;\n      return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n    attrTest: function attrTest(input) {\n      return AttrRecognizer.prototype.attrTest.call(this, input) && (this.state & STATE_BEGAN || !(this.state & STATE_BEGAN) && this.directionTest(input));\n    },\n    emit: function emit(input) {\n      this.pX = input.deltaX;\n      this.pY = input.deltaY;\n      var direction = directionStr(input.direction);\n\n      if (direction) {\n        input.additionalEvent = this.options.event + direction;\n      }\n\n      this._super.emit.call(this, input);\n    }\n  });\n  /**\n   * Pinch\n   * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n   * @constructor\n   * @extends AttrRecognizer\n   */\n\n  function PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n  }\n\n  inherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n      event: 'pinch',\n      threshold: 0,\n      pointers: 2\n    },\n    getTouchAction: function getTouchAction() {\n      return [TOUCH_ACTION_NONE];\n    },\n    attrTest: function attrTest(input) {\n      return this._super.attrTest.call(this, input) && (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n    emit: function emit(input) {\n      if (input.scale !== 1) {\n        var inOut = input.scale < 1 ? 'in' : 'out';\n        input.additionalEvent = this.options.event + inOut;\n      }\n\n      this._super.emit.call(this, input);\n    }\n  });\n  /**\n   * Press\n   * Recognized when the pointer is down for x ms without any movement.\n   * @constructor\n   * @extends Recognizer\n   */\n\n  function PressRecognizer() {\n    Recognizer.apply(this, arguments);\n    this._timer = null;\n    this._input = null;\n  }\n\n  inherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n      event: 'press',\n      pointers: 1,\n      time: 251,\n      // minimal time of the pointer to be pressed\n      threshold: 9 // a minimal movement is ok, but keep it low\n\n    },\n    getTouchAction: function getTouchAction() {\n      return [TOUCH_ACTION_AUTO];\n    },\n    process: function process(input) {\n      var options = this.options;\n      var validPointers = input.pointers.length === options.pointers;\n      var validMovement = input.distance < options.threshold;\n      var validTime = input.deltaTime > options.time;\n      this._input = input; // we only allow little movement\n      // and we've reached an end event, so a tap is possible\n\n      if (!validMovement || !validPointers || input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime) {\n        this.reset();\n      } else if (input.eventType & INPUT_START) {\n        this.reset();\n        this._timer = setTimeoutContext(function () {\n          this.state = STATE_RECOGNIZED;\n          this.tryEmit();\n        }, options.time, this);\n      } else if (input.eventType & INPUT_END) {\n        return STATE_RECOGNIZED;\n      }\n\n      return STATE_FAILED;\n    },\n    reset: function reset() {\n      clearTimeout(this._timer);\n    },\n    emit: function emit(input) {\n      if (this.state !== STATE_RECOGNIZED) {\n        return;\n      }\n\n      if (input && input.eventType & INPUT_END) {\n        this.manager.emit(this.options.event + 'up', input);\n      } else {\n        this._input.timeStamp = now();\n        this.manager.emit(this.options.event, this._input);\n      }\n    }\n  });\n  /**\n   * Rotate\n   * Recognized when two or more pointer are moving in a circular motion.\n   * @constructor\n   * @extends AttrRecognizer\n   */\n\n  function RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n  }\n\n  inherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n      event: 'rotate',\n      threshold: 0,\n      pointers: 2\n    },\n    getTouchAction: function getTouchAction() {\n      return [TOUCH_ACTION_NONE];\n    },\n    attrTest: function attrTest(input) {\n      return this._super.attrTest.call(this, input) && (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n  });\n  /**\n   * Swipe\n   * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n   * @constructor\n   * @extends AttrRecognizer\n   */\n\n  function SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n  }\n\n  inherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n      event: 'swipe',\n      threshold: 10,\n      velocity: 0.3,\n      direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n      pointers: 1\n    },\n    getTouchAction: function getTouchAction() {\n      return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n    attrTest: function attrTest(input) {\n      var direction = this.options.direction;\n      var velocity;\n\n      if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n        velocity = input.overallVelocity;\n      } else if (direction & DIRECTION_HORIZONTAL) {\n        velocity = input.overallVelocityX;\n      } else if (direction & DIRECTION_VERTICAL) {\n        velocity = input.overallVelocityY;\n      }\n\n      return this._super.attrTest.call(this, input) && direction & input.offsetDirection && input.distance > this.options.threshold && input.maxPointers == this.options.pointers && abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n    emit: function emit(input) {\n      var direction = directionStr(input.offsetDirection);\n\n      if (direction) {\n        this.manager.emit(this.options.event + direction, input);\n      }\n\n      this.manager.emit(this.options.event, input);\n    }\n  });\n  /**\n   * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n   * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n   * a single tap.\n   *\n   * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n   * multi-taps being recognized.\n   * @constructor\n   * @extends Recognizer\n   */\n\n  function TapRecognizer() {\n    Recognizer.apply(this, arguments); // previous time and center,\n    // used for tap counting\n\n    this.pTime = false;\n    this.pCenter = false;\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n  }\n\n  inherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n      event: 'tap',\n      pointers: 1,\n      taps: 1,\n      interval: 300,\n      // max time between the multi-tap taps\n      time: 250,\n      // max time of the pointer to be down (like finger on the screen)\n      threshold: 9,\n      // a minimal movement is ok, but keep it low\n      posThreshold: 10 // a multi-tap can be a bit off the initial position\n\n    },\n    getTouchAction: function getTouchAction() {\n      return [TOUCH_ACTION_MANIPULATION];\n    },\n    process: function process(input) {\n      var options = this.options;\n      var validPointers = input.pointers.length === options.pointers;\n      var validMovement = input.distance < options.threshold;\n      var validTouchTime = input.deltaTime < options.time;\n      this.reset();\n\n      if (input.eventType & INPUT_START && this.count === 0) {\n        return this.failTimeout();\n      } // we only allow little movement\n      // and we've reached an end event, so a tap is possible\n\n\n      if (validMovement && validTouchTime && validPointers) {\n        if (input.eventType != INPUT_END) {\n          return this.failTimeout();\n        }\n\n        var validInterval = this.pTime ? input.timeStamp - this.pTime < options.interval : true;\n        var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n        this.pTime = input.timeStamp;\n        this.pCenter = input.center;\n\n        if (!validMultiTap || !validInterval) {\n          this.count = 1;\n        } else {\n          this.count += 1;\n        }\n\n        this._input = input; // if tap count matches we have recognized it,\n        // else it has began recognizing...\n\n        var tapCount = this.count % options.taps;\n\n        if (tapCount === 0) {\n          // no failing requirements, immediately trigger the tap event\n          // or wait as long as the multitap interval to trigger\n          if (!this.hasRequireFailures()) {\n            return STATE_RECOGNIZED;\n          } else {\n            this._timer = setTimeoutContext(function () {\n              this.state = STATE_RECOGNIZED;\n              this.tryEmit();\n            }, options.interval, this);\n            return STATE_BEGAN;\n          }\n        }\n      }\n\n      return STATE_FAILED;\n    },\n    failTimeout: function failTimeout() {\n      this._timer = setTimeoutContext(function () {\n        this.state = STATE_FAILED;\n      }, this.options.interval, this);\n      return STATE_FAILED;\n    },\n    reset: function reset() {\n      clearTimeout(this._timer);\n    },\n    emit: function emit() {\n      if (this.state == STATE_RECOGNIZED) {\n        this._input.tapCount = this.count;\n        this.manager.emit(this.options.event, this._input);\n      }\n    }\n  });\n  /**\n   * Simple way to create a manager with a default set of recognizers.\n   * @param {HTMLElement} element\n   * @param {Object} [options]\n   * @constructor\n   */\n\n  function Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n  }\n  /**\n   * @const {string}\n   */\n\n\n  Hammer.VERSION = '2.0.7';\n  /**\n   * default settings\n   * @namespace\n   */\n\n  Hammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [// RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n    [RotateRecognizer, {\n      enable: false\n    }], [PinchRecognizer, {\n      enable: false\n    }, ['rotate']], [SwipeRecognizer, {\n      direction: DIRECTION_HORIZONTAL\n    }], [PanRecognizer, {\n      direction: DIRECTION_HORIZONTAL\n    }, ['swipe']], [TapRecognizer], [TapRecognizer, {\n      event: 'doubletap',\n      taps: 2\n    }, ['tap']], [PressRecognizer]],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n      /**\n       * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n       * @type {String}\n       * @default 'none'\n       */\n      userSelect: 'none',\n\n      /**\n       * Disable the Windows Phone grippers when pressing an element.\n       * @type {String}\n       * @default 'none'\n       */\n      touchSelect: 'none',\n\n      /**\n       * Disables the default callout shown when you touch and hold a touch target.\n       * On iOS, when you touch and hold a touch target such as a link, Safari displays\n       * a callout containing information about the link. This property allows you to disable that callout.\n       * @type {String}\n       * @default 'none'\n       */\n      touchCallout: 'none',\n\n      /**\n       * Specifies whether zooming is enabled. Used by IE10>\n       * @type {String}\n       * @default 'none'\n       */\n      contentZooming: 'none',\n\n      /**\n       * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n       * @type {String}\n       * @default 'none'\n       */\n      userDrag: 'none',\n\n      /**\n       * Overrides the highlight color shown when the user taps a link or a JavaScript\n       * clickable element in iOS. This property obeys the alpha value, if specified.\n       * @type {String}\n       * @default 'rgba(0,0,0,0)'\n       */\n      tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n  };\n  var STOP = 1;\n  var FORCED_STOP = 2;\n  /**\n   * Manager\n   * @param {HTMLElement} element\n   * @param {Object} [options]\n   * @constructor\n   */\n\n  function Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n    this.options.inputTarget = this.options.inputTarget || element;\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n    toggleCssProps(this, true);\n    each(this.options.recognizers, function (item) {\n      var recognizer = this.add(new item[0](item[1]));\n      item[2] && recognizer.recognizeWith(item[2]);\n      item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n  }\n\n  Manager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function set(options) {\n      assign(this.options, options); // Options that need a little more setup\n\n      if (options.touchAction) {\n        this.touchAction.update();\n      }\n\n      if (options.inputTarget) {\n        // Clean up existing event listeners and reinitialize\n        this.input.destroy();\n        this.input.target = options.inputTarget;\n        this.input.init();\n      }\n\n      return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function stop(force) {\n      this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function recognize(inputData) {\n      var session = this.session;\n\n      if (session.stopped) {\n        return;\n      } // run the touch-action polyfill\n\n\n      this.touchAction.preventDefaults(inputData);\n      var recognizer;\n      var recognizers = this.recognizers; // this holds the recognizer that is being recognized.\n      // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n      // if no recognizer is detecting a thing, it is set to `null`\n\n      var curRecognizer = session.curRecognizer; // reset when the last recognizer is recognized\n      // or when we're in a new session\n\n      if (!curRecognizer || curRecognizer && curRecognizer.state & STATE_RECOGNIZED) {\n        curRecognizer = session.curRecognizer = null;\n      }\n\n      var i = 0;\n\n      while (i < recognizers.length) {\n        recognizer = recognizers[i]; // find out if we are allowed try to recognize the input for this one.\n        // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n        // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n        //      that is being recognized.\n        // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n        //      this can be setup with the `recognizeWith()` method on the recognizer.\n\n        if (session.stopped !== FORCED_STOP && ( // 1\n        !curRecognizer || recognizer == curRecognizer || // 2\n        recognizer.canRecognizeWith(curRecognizer))) {\n          // 3\n          recognizer.recognize(inputData);\n        } else {\n          recognizer.reset();\n        } // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n        // current active recognizer. but only if we don't already have an active recognizer\n\n\n        if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n          curRecognizer = session.curRecognizer = recognizer;\n        }\n\n        i++;\n      }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function get(recognizer) {\n      if (recognizer instanceof Recognizer) {\n        return recognizer;\n      }\n\n      var recognizers = this.recognizers;\n\n      for (var i = 0; i < recognizers.length; i++) {\n        if (recognizers[i].options.event == recognizer) {\n          return recognizers[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function add(recognizer) {\n      if (invokeArrayArg(recognizer, 'add', this)) {\n        return this;\n      } // remove existing\n\n\n      var existing = this.get(recognizer.options.event);\n\n      if (existing) {\n        this.remove(existing);\n      }\n\n      this.recognizers.push(recognizer);\n      recognizer.manager = this;\n      this.touchAction.update();\n      return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function remove(recognizer) {\n      if (invokeArrayArg(recognizer, 'remove', this)) {\n        return this;\n      }\n\n      recognizer = this.get(recognizer); // let's make sure this recognizer exists\n\n      if (recognizer) {\n        var recognizers = this.recognizers;\n        var index = inArray(recognizers, recognizer);\n\n        if (index !== -1) {\n          recognizers.splice(index, 1);\n          this.touchAction.update();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function on(events, handler) {\n      if (events === undefined) {\n        return;\n      }\n\n      if (handler === undefined) {\n        return;\n      }\n\n      var handlers = this.handlers;\n      each(splitStr(events), function (event) {\n        handlers[event] = handlers[event] || [];\n        handlers[event].push(handler);\n      });\n      return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function off(events, handler) {\n      if (events === undefined) {\n        return;\n      }\n\n      var handlers = this.handlers;\n      each(splitStr(events), function (event) {\n        if (!handler) {\n          delete handlers[event];\n        } else {\n          handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n        }\n      });\n      return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function emit(event, data) {\n      // we also want to trigger dom events\n      if (this.options.domEvents) {\n        triggerDomEvent(event, data);\n      } // no handlers, so skip it all\n\n\n      var handlers = this.handlers[event] && this.handlers[event].slice();\n\n      if (!handlers || !handlers.length) {\n        return;\n      }\n\n      data.type = event;\n\n      data.preventDefault = function () {\n        data.srcEvent.preventDefault();\n      };\n\n      var i = 0;\n\n      while (i < handlers.length) {\n        handlers[i](data);\n        i++;\n      }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function destroy() {\n      this.element && toggleCssProps(this, false);\n      this.handlers = {};\n      this.session = {};\n      this.input.destroy();\n      this.element = null;\n    }\n  };\n  /**\n   * add/remove the css properties as defined in manager.options.cssProps\n   * @param {Manager} manager\n   * @param {Boolean} add\n   */\n\n  function toggleCssProps(manager, add) {\n    var element = manager.element;\n\n    if (!element.style) {\n      return;\n    }\n\n    var prop;\n    each(manager.options.cssProps, function (value, name) {\n      prop = prefixed(element.style, name);\n\n      if (add) {\n        manager.oldCssProps[prop] = element.style[prop];\n        element.style[prop] = value;\n      } else {\n        element.style[prop] = manager.oldCssProps[prop] || '';\n      }\n    });\n\n    if (!add) {\n      manager.oldCssProps = {};\n    }\n  }\n  /**\n   * trigger dom event\n   * @param {String} event\n   * @param {Object} data\n   */\n\n\n  function triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n  }\n\n  assign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n  }); // this prevents errors when Hammer is loaded in the presence of an AMD\n  //  style loader but by script tag, not by the loader.\n\n  var freeGlobal = typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}; // jshint ignore:line\n\n  freeGlobal.Hammer = Hammer;\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return Hammer;\n    });\n  } else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n  } else {\n    window[exportName] = Hammer;\n  }\n})(window, document, 'Hammer');","import \"core-js/modules/es6.math.hypot\";\nimport \"core-js/modules/es6.typed.float32-array\";\n\n/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","// 19.1.2.17 Object.seal(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('seal', function ($seal) {\n  return function seal(it) {\n    return $seal && isObject(it) ? $seal(meta(it)) : it;\n  };\n});\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"copy\",\n    value: function copy(vector) {\n      assert(false);\n      return this;\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import \"core-js/modules/es6.object.freeze\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\nvar constants = {};\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  _createClass(Vector3, null, [{\n    key: \"ZERO\",\n    get: function get() {\n      return constants.ZERO = constants.ZERO || Object.freeze(new Vector3(0, 0, 0, 0));\n    }\n  }]);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };"],"sourceRoot":""}